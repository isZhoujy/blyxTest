window.extend_func=function(self,p){var m={};if(p.indexOf('__extends')>=0){var i,n=self&&self.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);})(t,e);},function(t,e){function o(){this.constructor=t;}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o());});m.__extends=n;}if(p.indexOf('__decorate')>=0){var r=self&&self.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a;};m.__decorate=r;}if(p.indexOf('__read')>=0){var a=self&&self.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)a.push(o.value);}catch(s){n={error:s};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return a;};m.__read=a;}if(p.indexOf('__spread')>=0){var s=self&&self.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t;};m.__spread=s;}if(p.indexOf('__values')>=0){var l=self&&self.__values||function(t){var e='function'==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&'number'==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t};}};throw new TypeError(e?'Object is not iterable.':'Symbol.iterator is not defined.');};m.__values=l;}if(p.indexOf('__awaiter')>=0){var a=self&&self.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function a(t){try{l(o.next(t));}catch(e){r(e);}}function s(t){try{l(o.throw(t));}catch(e){r(e);}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e);})).then(a,s);}l((o=o.apply(t,e||[])).next());});};m.__awaiter=a;}if(p.indexOf('__generator')>=0){var s=self&&self.__generator||function(t,e){var i,o,n,r,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1];},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},'function'==typeof Symbol&&(r[Symbol.iterator]=function(){return this;}),r;function s(t){return function(e){return l([t,e]);};}function l(r){if(i)throw new TypeError('Generator is already executing.');for(;a;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){a=0;continue;}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){a.label=r[1];break;}if(6===r[0]&&a.label<n[1]){a.label=n[1],n=r;break;}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(r);break;}n[2]&&a.ops.pop(),a.trys.pop();continue;}r=e.call(t,a);}catch(s){r=[6,s],o=0;}finally{i=n=0;}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0};}};m.__generator=s;}if(p.indexOf('__assign')>=0){var r=self&&self.__assign||function(){return(r=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t;}).apply(self,arguments);};m.__assign=r;}return m;};window.__require=function t(e,i,o){function n(s,a){if(!i[s]){if(!e[s]){var c=s.split('/');if(c=c[c.length-1],!e[c]){var l='function'==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error('Cannot find module \''+s+'\'');}s=c;}var p=i[s]={exports:{}};e[s][0].call(p.exports,function(t){return n(e[s][1][t]||t);},p,p.exports,t,e,i,o);}return i[s].exports;}for(var r='function'==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n;}({AStarRoadSeeker:[function(t,e,i){'use strict';cc._RF.push(e,'1c0e4baWltFP4nVBdwuDjUf','AStarRoadSeeker'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('BinaryTreeNode'),n=t('MapRoadUtils'),r=function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=14,this.maxStep=2000,this._binaryTreeNode=new o.default(),this._roadNodes=cc.js.createMap(!0),this._round=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],this._optimize=!0,this._roadNodes=t;}return t.prototype.findPath=function(t,e){return this._startNode=t,this._currentNode=t,this._targetNode=e,this._startNode&&this._targetNode?this._startNode===this._targetNode?[this._targetNode]:this.seekPath2(t,e):[];},t.prototype.seekPath=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(this._startNode==this._targetNode)return[this._targetNode];if(!this.isPassNode(this._targetNode))return console.log('目标不可达到\uFF1A'),[];this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var i=0;;){if(i>this.maxStep)return console.log('超过计算步骤了,没找到目标计算步骤为\uFF1A',i),[];if(i++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.log('seekPath二叉堆树里已经没有任何可搜寻的点了,没找到目标,计算步骤为\uFF1A',i),[];if(this._currentNode=this._binaryTreeNode.getMin_F_Node(),this._currentNode==this._targetNode)return this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode);}return[];},t.prototype.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(this._startNode===this._targetNode)return[this._targetNode];var i=this.maxStep;this.isPassNode(this._targetNode)||(i=(Math.abs(this._targetNode.cx-this._startNode.cx)+Math.abs(this._targetNode.cy-this._startNode.cy))*n.default.I.seekStep)>this.maxStep&&(i=this.maxStep),this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var o=0,r=null;;){if(o>i)return this.seekPath(t,r);if(o++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.log('seekPath2二叉堆树里已经没有任何可搜寻的点了,没找到目标,计算步骤为\uFF1A',o),this.seekPath(t,r);if(this._currentNode=this._binaryTreeNode.getMin_F_Node(),null==r?r=this._currentNode:this._currentNode.h<r.h&&(r=this._currentNode),this._currentNode==this._targetNode)return this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode);}return this.seekPath(t,r);},t.prototype.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0;},t.prototype.getPath=function(){for(var t=[],e=this._targetNode;e!==this._startNode;)t.unshift(e),e=e.parent;if(t.unshift(this._startNode),!this._optimize)return t;for(var i=1;i<t.length-1;i++){var o=t[i-1],n=t[i],r=t[i+1],s=n.cx===o.cx&&n.cx===r.cx,a=n.cy===o.cy&&n.cy===r.cy,c=(n.cx-o.cx)/(n.cy-o.cy)*((r.cx-n.cx)/(r.cy-n.cy))==1;(s||a||c)&&(t.splice(i,1),i--);}for(i=0;i<t.length-2;i++){for(var l=t[i],p=null,u=t.length-1;u>i+1;u--){var h=t[u];if(l.cx!=h.cx&&l.cy!=h.cy&&Math.abs(h.cx-l.cx)!=Math.abs(h.cy-l.cy)&&this.isArriveBetweenTwoNodes(l,h)){p=h;break;}}if(p){var d=u-i-1;t.splice(i+1,d);}}return t;},t.prototype.isArriveBetweenTwoNodes=function(t,e){if(t==e)return!1;var i=Math.abs(e.cx-t.cx),o=Math.abs(e.cy-t.cy),n=0;e.cx>t.cx?n=1:e.cx<t.cx&&(n=-1);var r=0;e.cy>t.cy?r=1:e.cy<t.cy&&(r=-1);var s=0,a=0,c=0,l=0;if(i>o)for(var p=o/ i,u=0;u<i;u++){a=t.cy+u*r*p,c=Math.floor(a),l=a%1;var h=t.cx+u*n,d=l<=0.5?c:c+1;a=t.cy+(u+1)*r*p,c=Math.floor(a),l=a%1;var f=t.cx+(u+1)*n,y=l<=0.5?c:c+1,_=this.getRoadNode(h,d),g=this.getRoadNode(f,y);if(!this.isCrossAtAdjacentNodes(_,g))return!1;}else for(p=i/o,u=0;u<o;u++)if(s=u*n*p,c=n>0?Math.floor(t.cx+s):Math.ceil(t.cx+s),h=(l=Math.abs(s%1))<=0.5?c:c+1*n,d=t.cy+u*r,s=(u+1)*n*p,c=n>0?Math.floor(t.cx+s):Math.ceil(t.cx+s),f=(l=Math.abs(s%1))<=0.5?c:c+1*n,y=t.cy+(u+1)*r,_=this.getRoadNode(h,d),g=this.getRoadNode(f,y),!this.isCrossAtAdjacentNodes(_,g))return!1;return!0;},t.prototype.isCrossAtAdjacentNodes=function(t,e){if(t==e)return!1;if(!this.isPassNode(t)||!this.isPassNode(e))return!1;var i=e.cx-t.cx,o=e.cy-t.cy;return!(Math.abs(i)>1||Math.abs(o)>1||t.cx!=e.cx&&t.cy!=e.cy&&(!this.isPassNode(this.getRoadNode(t.cx,t.cy+o))||!this.isPassNode(this.getRoadNode(t.cx+i,t.cy))));},t.prototype.isPassNode=function(t){return null!=t&&t.value!=n.ENUM_ROAD.Block;},t.prototype.getRoadNode=function(t,e){var i=t+'_'+e;return this._roadNodes[i];},t.prototype.testSeekPathStep=function(t,e,i,o,n){var r=this;if(void 0===n&&(n=100),this._startNode=t,this._currentNode=t,this._targetNode=e,this.isPassNode(this._targetNode)){this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag(),this._closelist=[];var s=0;clearInterval(this._handle),this._handle=setInterval(function(){return s>r.maxStep?(console.log('超过计算步骤,没找到目标,计算步骤为\uFF1A',s),void clearInterval(r._handle)):(s++,r.searchRoundNodes(r._currentNode),r._binaryTreeNode.isTreeNull()?(console.log('testSeekPathStep二叉堆树里已经没有任何可搜寻的点了,没找到目标,计算步骤为\uFF1A',s),void clearInterval(r._handle)):(r._currentNode=r._binaryTreeNode.getMin_F_Node(),void(r._currentNode==r._targetNode?(clearInterval(r._handle),r._openlist=r._binaryTreeNode.getOpenList(),i.apply(o,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,r.getPath()])):(r._binaryTreeNode.setRoadNodeInCloseList(r._currentNode),r._openlist=r._binaryTreeNode.getOpenList(),r._closelist.push(r._currentNode),i.apply(o,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,null])))));},n);}},t.prototype.searchRoundNodes=function(t){for(var e=0;e<this._round.length;e++){var i=t.cx+this._round[e][0],o=t.cy+this._round[e][1],n=this.getRoadNode(i,o);!this.isPassNode(n)||n==this._startNode||this.isInCloseList(n)||this.inInCorner(n)||this.setNodeF(n);}},t.prototype.setNodeF=function(t){var e;e=t.cx==this._currentNode.cx||t.cy==this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL,this.isInOpenList(t)?e<t.g&&(t.g=e,t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.removeTreeNode(t),this._binaryTreeNode.addTreeNode(t)):(t.g=e,this._binaryTreeNode.setRoadNodeInOpenList(t),t.resetTree(),t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.addTreeNode(t));},t.prototype.isInOpenList=function(t){return this._binaryTreeNode.isInOpenList(t);},t.prototype.isInCloseList=function(t){return this._binaryTreeNode.isInCloseList(t);},t.prototype.inInCorner=function(t){if(t.cx==this._currentNode.cx||t.cy==this._currentNode.cy)return!1;var e=this.getRoadNode(this._currentNode.cx,t.cy),i=this.getRoadNode(t.cx,this._currentNode.cy);return!this.isPassNode(e)||!this.isPassNode(i);},t.prototype.dispose=function(){this._roadNodes=null,this._round=null;},t;}();i.default=r,cc._RF.pop();},{}],AccLoginBox:[function(t,e,i){'use strict';cc._RF.push(e,'19280cfBtFEQrCL3Owb+MZq','AccLoginBox');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('StorageMgr'),c=t('BaseUiView'),l=t('WinMgr'),p=t('MsgToastMgr'),u=t('StorageConst'),h=t('i18n'),d=t('UtilClk'),f=t('AppEventConst'),y=t('AppViewConst'),_=t('LoginModel'),g=t('SdkMgr'),m=cc._decorator,v=m.ccclass,b=m.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprTitle=null,e.EditBoxAcc=null,e.EditBoxPass=null,e.BtnReg=null,e.ButLogin=null,e._preg=/^[a-zA-Z0-9]{6,25}$/,e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent();},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},e.prototype.init=function(){this.initUI();},e.prototype.addEvent=function(){},e.prototype.delEvent=function(){},e.prototype.initUI=function(){this.EditBoxAcc.string=a.StorageMgr.I.getValue(u.EStorageKey.Account)||'',this.EditBoxPass.string=a.StorageMgr.I.getValue(u.EStorageKey.Password)||'',d.UtilClk.Click(this.BtnReg,this.onClickReg,this,{unRepeat:!0,time:1000}),d.UtilClk.Click(this.ButLogin,this.onClickLogin,this,{unRepeat:!0,time:1000});},e.prototype.onClickReg=function(){l.default.I.open(y.AppViewConst.AccountRegView),this.onClose();},e.prototype.checkStrSuc=function(){var t=this.EditBoxAcc.string,e=this.EditBoxPass.string;''!==t?''!==e?this._preg.test(t)?this._preg.test(e)?_.default.I.getClickLoginState()||(this.regLogin(t,e),a.StorageMgr.I.setValue(u.EStorageKey.Account,t),a.StorageMgr.I.setValue(u.EStorageKey.Password,e)):p.default.Show(h.i18n.tt(h.Lang.login_pwd_err)):p.default.Show(h.i18n.tt(h.Lang.login_acc_err)):p.default.Show(h.i18n.tt(h.Lang.login_pwd_null)):p.default.Show(h.i18n.tt(h.Lang.login_acc_null));},e.prototype.onClickLogin=function(){var t=this,e=!1,i=!1,o={role_id:0,content:this.EditBoxAcc.string,scene:1,server_id:0,server_name:0,role_nick:''},n={role_id:0,content:this.EditBoxPass.string,scene:1,server_id:0,server_name:0,role_nick:''};g.SdkMgr.I.sdkMsgCheck(o,function(){e=!0,i&&t.checkStrSuc();}),g.SdkMgr.I.sdkMsgCheck(n,function(){i=!0,e&&t.checkStrSuc();});},e.prototype.regLogin=function(t,e){s.EventClient.I.emit(f.AppEvent.ReqLogin,t,e);},e.prototype.onClose=function(){l.default.I.closeView(this);},r([b(cc.Node)],e.prototype,'SprTitle',void 0),r([b(cc.EditBox)],e.prototype,'EditBoxAcc',void 0),r([b(cc.EditBox)],e.prototype,'EditBoxPass',void 0),r([b(cc.Node)],e.prototype,'BtnReg',void 0),r([b(cc.Node)],e.prototype,'ButLogin',void 0),r([v],e);}(c.default);i.default=C,cc._RF.pop();},{}],AccRegBox:[function(t,e,i){'use strict';cc._RF.push(e,'be2ba4hfF1LnYy2jKUuEVgp','AccRegBox');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('StorageMgr'),c=t('BaseUiView'),l=t('WinMgr'),p=t('MsgToastMgr'),u=t('StorageConst'),h=t('i18n'),d=t('AppViewConst'),f=t('AppEventConst'),y=t('UtilClk'),_=t('LoginModel'),g=t('SdkMgr'),m=cc._decorator,v=m.ccclass,b=m.property,C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.EditBoxAcc=null,e.EditBoxPass=null,e.BtnReg=null,e.BtnBack=null,e._preg=/^[a-zA-Z0-9]{6,25}$/,e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent();},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},e.prototype.init=function(){this.initUI();},e.prototype.addEvent=function(){},e.prototype.delEvent=function(){},e.prototype.initUI=function(){var t=this;this.EditBoxAcc.string=a.StorageMgr.I.getValue(u.EStorageKey.Account)||'',this.EditBoxPass.string=a.StorageMgr.I.getValue(u.EStorageKey.Password)||'',y.UtilClk.Click(this.BtnReg,this.onClickReg,this,{unRepeat:!0,time:1000}),y.UtilClk.Click(this.BtnBack,function(){t.onClose();},this);},e.prototype.checkStrSuc=function(){var t=this.EditBoxAcc.string,e=this.EditBoxPass.string;''!==t?''!==e?this._preg.test(t)?this._preg.test(e)?_.default.I.getClickRegState()||(this.RegRegister(t,e),a.StorageMgr.I.setValue(u.EStorageKey.Account,t),a.StorageMgr.I.setValue(u.EStorageKey.Password,e)):p.default.Show(h.i18n.tt(h.Lang.login_pwd_err)):p.default.Show(h.i18n.tt(h.Lang.login_acc_err)):p.default.Show(h.i18n.tt(h.Lang.login_pwd_null)):p.default.Show(h.i18n.tt(h.Lang.login_acc_null));},e.prototype.onClickReg=function(){var t=this,e=!1,i=!1,o={role_id:0,content:this.EditBoxAcc.string,scene:1,server_id:0,server_name:0,role_nick:''},n={role_id:0,content:this.EditBoxPass.string,scene:1,server_id:0,server_name:0,role_nick:''};g.SdkMgr.I.sdkMsgCheck(o,function(){e=!0,i&&t.checkStrSuc();}),g.SdkMgr.I.sdkMsgCheck(n,function(){i=!0,e&&t.checkStrSuc();});},e.prototype.RegRegister=function(t,e){s.EventClient.I.emit(f.AppEvent.ReqRegister,t,e);},e.prototype.onClose=function(){l.default.I.open(d.AppViewConst.AccountLoginView),l.default.I.closeView(this);},r([b(cc.EditBox)],e.prototype,'EditBoxAcc',void 0),r([b(cc.EditBox)],e.prototype,'EditBoxPass',void 0),r([b(cc.Node)],e.prototype,'BtnReg',void 0),r([b(cc.Node)],e.prototype,'BtnBack',void 0),r([v],e);}(c.default);i.default=C,cc._RF.pop();},{}],Agent:[function(t,e,i){'use strict';cc._RF.push(e,'24ae29CIIVOS7+ebLS58vt+','Agent'),Object.defineProperty(i,'__esModule',{value:!0}),i.Agent=void 0;var o=t('RVOMath'),n=t('Vector2'),r=t('commonDefine'),s=function(){function t(){this.agentNeighbors=[],this.obstaclNeighbors=[],this.orcaLines=[],this._position=new n.Vector2(0,0),this.prefVelocity=new n.Vector2(0,0),this.velocity=new n.Vector2(0,0),this.id=0,this.maxNeighbors=0,this.maxSpeed=0,this.neighborDist=0,this.radius=0,this.timeHorizon=0,this.timeHorizonObst=0,this.newVelocity=new n.Vector2(0,0),this.mass=1;}return Object.defineProperty(t.prototype,'position',{get:function(){return this._position;},set:function(t){this._position.copy(t);},enumerable:!1,configurable:!0}),t.prototype.computeNeighbors=function(t){this.obstaclNeighbors.length=0;var e=Math.pow(this.timeHorizonObst*this.maxSpeed+this.radius,2);t.kdTree.computeObstacleNeighbors(this,e),this.agentNeighbors.length=0,this.maxNeighbors>0&&(e=Math.pow(this.neighborDist,2),e=t.kdTree.computeAgentNeighbors(this,e));},t.prototype.computeNewVelocity=function(t){this.orcaLines.length=0;for(var e=this.orcaLines,i=1/this.timeHorizonObst,s=0;s<this.obstaclNeighbors.length;++s){for(var a=this.obstaclNeighbors[s].value,c=a.next,l=a.point.minus(this.position),p=c.point.minus(this.position),u=!1,h=0;h<e.length;++h)if(o.RVOMath.det(l.scale(i).minus(e[h].point),e[h].direction)-i*this.radius>=-o.RVOMath.RVO_EPSILON&&o.RVOMath.det(p.scale(i).minus(e[h].point),e[h].direction)-i*this.radius>=-o.RVOMath.RVO_EPSILON){u=!0;break;}if(!u){var d=o.RVOMath.absSq(l),f=o.RVOMath.absSq(p),y=o.RVOMath.sqr(this.radius),_=c.point.minus(a.point),g=l.scale(-1).multiply(_)/o.RVOMath.absSq(_),m=o.RVOMath.absSq(l.scale(-1).minus(_.scale(g))),v=new r.Line();if(g<0&&d<=y)a.convex&&(v.point=new n.Vector2(0,0),v.direction=o.RVOMath.normalize(new n.Vector2(-l.y,l.x)),e.push(v));else if(g>1&&f<=y)c.convex&&o.RVOMath.det(p,c.direction)>=0&&(v.point=new n.Vector2(0,0),v.direction=o.RVOMath.normalize(new n.Vector2(-p.y,p.x)),e.push(v));else if(g>=0&&g<=1&&m<=y)v.point=new n.Vector2(0,0),v.direction=a.direction.scale(-1),e.push(v);else{var b=void 0,C=void 0;if(g<0&&m<=y){if(!a.convex)continue;c=a;var S=Math.sqrt(d-y);b=new n.Vector2(l.x*S-l.y*this.radius,l.x*this.radius+l.y*S).scale(1/d),C=new n.Vector2(l.x*S+l.y*this.radius,-l.x*this.radius+l.y*S).scale(1/d);}else if(g>1&&m<=y){if(!c.convex)continue;a=c;var w=Math.sqrt(f-y);b=new n.Vector2(p.x*w-p.y*this.radius,p.x*this.radius+p.y*w).scale(1/f),C=new n.Vector2(p.x*w+p.y*this.radius,-p.x*this.radius+p.y*w).scale(1/f);}else a.convex?(S=Math.sqrt(d-y),b=new n.Vector2(l.x*S-l.y*this.radius,l.x*this.radius+l.y*S).scale(1/d)):b=a.direction.scale(-1),c.convex?(w=Math.sqrt(f-y),C=new n.Vector2(p.x*w+p.y*this.radius,-p.x*this.radius+p.y*w).scale(1/f)):C=a.direction;var R=a.previous,I=!1,M=!1;a.convex&&o.RVOMath.det(b,R.direction.scale(-1))>=0&&(b=R.direction.scale(-1),I=!0),c.convex&&o.RVOMath.det(C,c.direction)<=0&&(C=c.direction,M=!0);var T=a.point.minus(this.position).scale(i),E=c.point.minus(this.position).scale(i),A=E.minus(T),P=a==c?0.5:this.velocity.minus(T).multiply(A)/o.RVOMath.absSq(A),x=this.velocity.minus(T).multiply(b),L=this.velocity.minus(E).multiply(C);if(P<0&&x<0||a==c&&x<0&&L<0){var k=o.RVOMath.normalize(this.velocity.minus(T));v.direction=new n.Vector2(k.y,-k.x),v.point=T.plus(k.scale(this.radius*i)),e.push(v);}else if(P>1&&L<0)k=o.RVOMath.normalize(this.velocity.minus(E)),v.direction=new n.Vector2(k.y,-k.x),v.point=E.plus(k.scale(this.radius*i)),e.push(v);else{var O=P<0||P>1||a==c?1/0:o.RVOMath.absSq(this.velocity.minus(A.scale(P).plus(T))),N=x<0?1/0:o.RVOMath.absSq(this.velocity.minus(b.scale(x).plus(T))),D=L<0?1/0:o.RVOMath.absSq(this.velocity.minus(C.scale(L).plus(E)));if(O<=N&&O<=D){v.direction=a.direction.scale(-1);var B=new n.Vector2(-v.direction.y,v.direction.x);v.point=B.scale(this.radius*i).plus(T),e.push(v);}else if(N<=D){if(I)continue;v.direction=b,B=new n.Vector2(-v.direction.y,v.direction.x),v.point=B.scale(this.radius*i).plus(T),e.push(v);}else M||(v.direction=C.scale(-1),B=new n.Vector2(-v.direction.y,v.direction.x),v.point=B.scale(this.radius*i).plus(E),e.push(v));}}}}var U=e.length,F=1/this.timeHorizon;for(s=0;s<this.agentNeighbors.length;++s){var j=this.agentNeighbors[s].value,V=j.position.minus(this.position),G=j.mass/(this.mass+j.mass),H=this.mass/(this.mass+j.mass),W=void 0,z=void 0;if(G>=0.5){var K=this.velocity.scale(G);W=(q=this.velocity.minus(K)).scale(2);}else{var q=(K=this.velocity.minus(this.prefVelocity)).scale(2*G);W=this.prefVelocity.plus(q);}H>=0.5?z=q=(K=j.velocity.scale(2)).scale(1-H):(q=(K=j.velocity.minus(j.prefVelocity)).scale(2*H),z=j.prefVelocity.plus(q));var Y=W.minus(z),J=o.RVOMath.absSq(V),X=this.radius+j.radius,Z=o.RVOMath.sqr(X),Q=void(v=new r.Line());if(J>Z){var $=Y.minus(V.scale(F)),tt=o.RVOMath.absSq($),et=$.multiply(V);if(et<0&&o.RVOMath.sqr(et)>Z*tt){var it=Math.sqrt(tt);k=$.scale(1/ it),v.direction=new n.Vector2(k.y,-k.x),Q=k.scale(X*F-it);}else{var ot=Math.sqrt(J-Z);o.RVOMath.det(V,$)>0?(B=new n.Vector2(V.x*ot-V.y*X,V.x*X+V.y*ot),v.direction=B.scale(1/J)):(B=new n.Vector2(V.x*ot+V.y*X,-V.x*X+V.y*ot),v.direction=B.scale(-1/J));var nt=Y.multiply(v.direction);Q=v.direction.scale(nt).minus(Y);}}else{var rt=1/t;$=Y.minus(V.scale(rt)),it=o.RVOMath.abs($),k=$.scale(1/ it),v.direction=new n.Vector2(k.y,-k.x),Q=k.scale(X*rt-it);}v.point=W.plus(Q.scale(G)),e.push(v);}var st=this.linearProgram2(e,this.maxSpeed,this.prefVelocity,!1,this.newVelocity);st<e.length&&this.linearProgram3(e,U,st,this.maxSpeed,this.newVelocity);},t.prototype.insertAgentNeighbor=function(t,e){if(this!==t){var i=o.RVOMath.absSq(this.position.minus(t.position));if(i<e){this.agentNeighbors.length<this.maxNeighbors&&this.agentNeighbors.push(new r.KeyValuePair(i,t));for(var n=this.agentNeighbors.length-1;0!==n&&i<this.agentNeighbors[n-1].key;)this.agentNeighbors[n]=this.agentNeighbors[n-1],--n;this.agentNeighbors[n]=new r.KeyValuePair(i,t),this.agentNeighbors.length===this.maxNeighbors&&(e=this.agentNeighbors[this.agentNeighbors.length-1].key);}}return e;},t.prototype.insertObstacleNeighbor=function(t,e){var i=t.next,n=o.RVOMath.distSqPointLineSegment(t.point,i.point,this.position);if(n<e){this.obstaclNeighbors.push(new r.KeyValuePair(n,t));for(var s=this.obstaclNeighbors.length-1;0!==s&&n<this.obstaclNeighbors[s-1].key;)this.obstaclNeighbors[s]=this.obstaclNeighbors[s-1],--s;this.obstaclNeighbors[s]=new r.KeyValuePair(n,t);}},t.prototype.update=function(t){this.velocity.copy(this.newVelocity);var e=this.velocity.scale(t);this.position.add(e);},t.prototype.linearProgram1=function(t,e,i,n,r,s){var a=t[e].point.multiply(t[e].direction),c=o.RVOMath.sqr(a)+o.RVOMath.sqr(i)-o.RVOMath.absSq(t[e].point);if(c<0)return!1;for(var l=Math.sqrt(c),p=-a-l,u=-a+l,h=0;h<e;++h){var d=o.RVOMath.det(t[e].direction,t[h].direction),f=o.RVOMath.det(t[h].direction,t[e].point.minus(t[h].point));if(Math.abs(d)<=o.RVOMath.RVO_EPSILON){if(f<0)return!1;}else{var y=f/d;if(d>=0?u=Math.min(u,y):p=Math.max(p,y),p>u)return!1;}}return r?n.multiply(t[e].direction)>0?s.copy(t[e].point.plus(t[e].direction.scale(u))):s.copy(t[e].point.plus(t[e].direction.scale(p))):(y=t[e].direction.multiply(n.minus(t[e].point)))<p?s.copy(t[e].point.plus(t[e].direction.scale(p))):y>u?s.copy(t[e].point.plus(t[e].direction.scale(u))):s.copy(t[e].point.plus(t[e].direction.scale(y))),!0;},t.prototype.linearProgram2=function(t,e,i,n,r){n?r.copy(i.scale(e)):o.RVOMath.absSq(i)>o.RVOMath.sqr(e)?r.copy(o.RVOMath.normalize(i).scale(e)):r.copy(i);for(var s=0;s<t.length;++s)if(o.RVOMath.det(t[s].direction,t[s].point.minus(r))>0){var a=r.clone();if(!this.linearProgram1(t,s,e,i,n,r))return r.copy(a),s;}return t.length;},t.prototype.linearProgram3=function(t,e,i,s,a){for(var c=0,l=i;l<t.length;++l)if(o.RVOMath.det(t[l].direction,t[l].point.minus(a))>c){for(var p=[],u=0;u<e;++u)p.push(t[u]);for(var h=e;h<l;++h){var d=new r.Line(),f=o.RVOMath.det(t[l].direction,t[h].direction);if(Math.abs(f)<=o.RVOMath.RVO_EPSILON){if(t[l].direction.multiply(t[h].direction)>0)continue;d.point=t[l].point.plus(t[h].point).scale(0.5);}else d.point=t[l].point.plus(t[l].direction.scale(o.RVOMath.det(t[h].direction,t[l].point.minus(t[h].point))/f));d.direction=o.RVOMath.normalize(t[h].direction.minus(t[l].direction)),p.push(d);}var y=a.clone();this.linearProgram2(p,s,new n.Vector2(-t[l].direction.y,t[l].direction.x),!0,a)<p.length&&a.copy(y),c=o.RVOMath.det(t[l].direction,t[l].point.minus(a));}},t;}();i.Agent=s,cc._RF.pop();},{}],AppEventConst:[function(t,e,i){'use strict';cc._RF.push(e,'a45adkBxCRFiYzCpiMj+NGX','AppEventConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.GameEvent=i.RES_MAIN_ENUM=i.AppEvent=void 0,i.AppEvent={ViewAddToLayer:'APP_ViewAddToLayer',ControllerCheck:'APP_ControllerCheck',WinOpen:'APP_WinOpen',WinClose:'App_WinClose',SocketConnect:'APP_SocketConnect',SocketClose:'APP_SocketClose',SocketMessage:'APP_SocketMessage',SocketStartReconnect:'APP_SocketStartReconnect',SocketReconnectSucc:'APP_SocketReconnectSucc',SocketReconnectFail:'APP_SocketReconnectFail',SocketNoConnect:'APP_SocketNoConnect',WinBigAllClose:'APP_WinBigAllClose',WinOpenFail:'APP_WinOpenFail',OpenWinEffEnd:'APP_OpenWinEffEnd',toMoveEffEnd:'APP_toMoveEffEnd',SDKLogin:'APP_SDKLogin',SDKExitGame:'APP_SDKExitGame',SDKPay:'APP_SDKPay',SDKShare:'APP_SDKShare',SDKShowAgeTip:'APP_SDKShowAgeTip',SetSdkLoginParam:'APP_SetSdkLoginParam',DataReport:'APP_DataReport',WinTagChange:'APP_WinTagChange',Game_Hide:'APP_Game_Hide',InitEnd:'Game_InitEnd',Start:'Game_Start',PannelOpenTime:'PannelOpenTime',ReqLogin:'Login_ReqLogin',ReConnect:'Login_ReConnect',BacktoLogin:'Login_BacktoLogin',ReqRegister:'Login_ReqRegister',ReqCreateRole:'Login_ReqCreateRole',ReqRoleNick:'Login_ReqRoleNick',ReqGetgateaddr:'Login_ReqGetgateaddr',InitConfigSuccess:'Config_InitConfigSuccess',InitConfigStart:'Config_InitConfigStart',ResultRoleNick:'Login_ResultRoleNick',Succ:'Login_Succ',GameLoading:'Login_GameLoading',LoginEnd:'Login_LoginEnd',ReConnectSuccess:'Login_ReConnectSuccess',StartEnterSubPack:'StartEnterSubPack',GameSwitch:'Login_GameSwitch',ClickServerItem:'Login_ClickServerItem',NotchHeightChange:'UI_NotchHeightChange',BuyShopSuccess:'Recharge_BuyShopSuccess',PocoSDKInit:'PocoSDKInit',ClickNoticeItem:'ClickNoticeItem',CloseNoticeItem:'CloseNoticeItem',WindowViewChange:'WindowViewChange',ListViewAnimEnd:'ListView_AnimEnd',UpdateLoadingProgress:'Loading_UpdateLoadingProgress',FirstBattle:'APP_FirstBattle',FirstBattleStart:'APP_FirstBattleStart',UIClick:'UI_Click',CloseWelcomeWin:'CloseWelcomeWin',DeviceFrameLow:'SysSetting_DeviceFrameLow',AgreePro:'APP_AgreePro',creatRoleHandle:'APP_creatRoleHandle'},i.RES_MAIN_ENUM={Login_Img_Dl_Bs:'texture/login/dl_img_bs_0',Login_Btn_E01:'texture/login/dl_btn_e_1',Login_Btn_E02:'texture/login/dl_btn_e_2',Login_btn_htgn:'texture/login/dl_btn_fh',Login_bg:'texture/login/com_bg_dlxt_04'},i.GameEvent={JoystickMove:'GameEvent_JoystickMove',JoystickStop:'GameEvent_JoystickStop'},cc._RF.pop();},{}],AppViewConst:[function(t,e,i){'use strict';cc._RF.push(e,'9d17d6aQ9dITakgLjiUDPC4','AppViewConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.APP_CTR_IDS=i.APP_UI_PATH=i.AppViewConst=void 0,function(t){t[t.LoginView=95001]='LoginView',t[t.ResLoading=95002]='ResLoading',t[t.AccountLoginView=95003]='AccountLoginView',t[t.CreateRoleView=95004]='CreateRoleView',t[t.GameWelcomeWin=95005]='GameWelcomeWin',t[t.SelServerView=95006]='SelServerView',t[t.RealNameWin=95007]='RealNameWin',t[t.IdentitykBox=95008]='IdentitykBox',t[t.ReqLoginWarnWin=95009]='ReqLoginWarnWin',t[t.AccountRegView=95010]='AccountRegView',t[t.NoticeView=95011]='NoticeView',t[t.UserProWin=95012]='UserProWin';}(i.AppViewConst||(i.AppViewConst={})),i.APP_UI_PATH={Base_Root:'prefab/base/Root',Com_NdOutsideEdges:'prefab/com/NdOutsideEdges',ComFunWin:'prefab/com/comFunWin/ComFunWin',ComSubWin:'prefab/com/comFunWin/ComSubWin',MsgToast:'prefab/com/msgbox/MsgToast',NetConfirmBox:'prefab/login/NetConfirmBox',IdentitykBox:'prefab/com/msgbox/IdentitykBox',RealNameWin:'prefab/login/RealNameWin',GameWelcomeWin:'prefab/login/GameWelcomeWin',ResLoading:'prefab/login/ResLoading',AccountLoginView:'prefab/login/AccLoginBox',AccountRegView:'prefab/login/AccRegBox',SelServerView:'prefab/login/SelServerView',CreateRoleView:'prefab/login/CreateRoleView',LoginView:'prefab/login/LoginView',StartGameView:'prefab/login/StartGamePanel',Base_SceneMap:'prefab/base/SceneMap',Module_Lobby_LobbyUI:'prefab/module/lobby/LobbyUI',Module_Lobby_LobbyUITop:'prefab/module/lobby/LobbyUITop',Module_Lobby_LobbyUIBottom:'prefab/module/lobby/LobbyUIBottom',Module_Lobby_LobbyUILeft:'prefab/module/lobby/LobbyUILeft',Module_Lobby_LobbyUIRight:'prefab/module/lobby/LobbyUIRight',player:'prefab/player/player',WinTab:'prefab/com/win/WinTab',WinTabBtn:'prefab/com/win/WinTabBtn',ActorNickBox:'prefab/player/ActorNickBox',ComPageStyleB:'prefab/com/frameStyle/PageStyleB',LoginConfirm:'prefab/com/msgbox/LoginConfirm',Touch_Ui:'effect/touch/ui_122',NoticeView:'prefab/login/NoticeView',UserProWin:'prefab/login/UserProWin',GuochangAnim:'animPrefab/ui/guochang/anim/guochang',FZSHENGSKSJW:'font/FZSHENGSKSJW',GameLevelNewChapterView:'prefab/module/gameLevel/GameNewChapterView',GameMaxLevelView:'prefab/module/gameLevel/GameMaxLevelView',BattlePanel:'prefab/battle/BattlePanel',StartGamePlot:'battleReport/StartPlot',StartGameBattleBg:'texture/battleUI/bg/battle_bg_1'},i.APP_CTR_IDS={LoginController:2},cc._RF.pop();},{}],AstarHoneycombRoadSeeker:[function(t,e,i){'use strict';cc._RF.push(e,'e2174CFGFtJ9qICpvw/cHZo','AstarHoneycombRoadSeeker'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('BinaryTreeNode'),n=t('MapRoadUtils'),r=function(){function t(t){this.COST_STRAIGHT=10,this.COST_DIAGONAL=10,this.maxStep=2000,this._binaryTreeNode=new o.default(),this._round1=[[0,-1],[1,-1],[1,0],[0,1],[-1,0],[-1,-1]],this._round2=[[0,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0]],this._optimize=!0,this._roadNodes=t;}return t.prototype.findPath=function(t,e){return this._startNode=t,this._currentNode=t,this._targetNode=e,this._startNode&&this._targetNode?this._startNode===this._targetNode?[this._targetNode]:this.isPassNode(this._targetNode)?this.seekPath(t,e):this.seekPath2(t,e):[];},t.prototype.seekPath=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(this._startNode===this._targetNode)return[this._targetNode];if(!this.isPassNode(this._targetNode))return console.log('目标不可达到\uFF1A'),[];this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var i=0;;){if(i>this.maxStep)return console.log('超过计算步骤了, 没找到目标计算步骤为\uFF1A',i),[];if(i++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.log('没有可搜寻的点了, 没找到目标计算步骤为\uFF1A',i),[];if(this._currentNode=this._binaryTreeNode.getMin_F_Node(),this._currentNode===this._targetNode)return this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode);}return[];},t.prototype.seekPath2=function(t,e){if(this._startNode=t,this._currentNode=t,this._targetNode=e,!this._startNode||!this._targetNode)return[];if(this._startNode===this._targetNode)return[this._targetNode];var i=this.maxStep;this.isPassNode(this._targetNode)||(i=2*(Math.abs(this._targetNode.cx-this._startNode.cx)+Math.abs(this._targetNode.cy-this._startNode.cy)))>this.maxStep&&(i=this.maxStep),this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag();for(var o=0,n=null;;){if(o>i)return console.log('超过计算步骤了, 没找到目标计算步骤为\uFF1A',o),this.seekPath(t,n);if(o++,this.searchRoundNodes(this._currentNode),this._binaryTreeNode.isTreeNull())return console.log('没有可搜寻的点了, 没找到目标计算步骤为\uFF1A',o),this.seekPath(t,n);if(this._currentNode=this._binaryTreeNode.getMin_F_Node(),null==n?n=this._currentNode:this._currentNode.h<n.h&&(n=this._currentNode),this._currentNode===this._targetNode)return this.getPath();this._binaryTreeNode.setRoadNodeInCloseList(this._currentNode);}return this.seekPath(t,n);},t.prototype.sortNode=function(t,e){return t.f<e.f?-1:t.f>e.f?1:0;},t.prototype.getPath=function(){for(var t,e,i,o,n,r,s=[],a=this._targetNode;a!==this._startNode;)s.unshift(a),a=a.parent;if(s.unshift(this._startNode),!this._optimize)return s;for(var c=1;c<s.length-1;c++){t=s[c-1],e=s[c],i=s[c+1],o=this.getHoneyPoint(t),n=this.getHoneyPoint(e),r=this.getHoneyPoint(i);var l=e.cx===t.cx&&e.cx===i.cx,p=e.cy===t.cy&&e.cy===i.cy&&t.cx%2==e.cx%2&&e.cx%2==i.cx%2,u=o.hx===n.hx&&n.hx===r.hx,h=o.hy===n.hy&&n.hy===r.hy;(l||p||u||h)&&(s.splice(c,1),c--);}for(c=0;c<s.length-2;c++){for(var d=s[c],f=null,y=s.length-1;y>c+1;y--){var _=s[y];if(this.isArriveBetweenTwoNodes(this.getHoneyPoint(d),this.getHoneyPoint(_))){f=_;break;}}if(f){var g=y-c-1;s.splice(c+1,g);}}return s;},t.prototype.isArriveBetweenTwoNodes=function(t,e){if(t.hx===e.hx&&t.hy===e.hy)return!1;var i=Math.abs(e.hx-t.hx),o=Math.abs(e.hy-t.hy),n=0;e.hx>t.hx?n=1:e.hx<t.hx&&(n=-1);var r=0;e.hy>t.hy?r=1:e.hy<t.hy&&(r=-1);var a=0,c=0,l=0,p=0;if(i>o){for(var u=o/ i,h=0;h<i;h+=2)if(c=h*r*u,l=r>0?Math.floor(t.hy+c):Math.ceil(t.hy+c),p=Math.abs(c%1),(d=new s()).hx=t.hx+h*n,d.hy=p<=0.5?l:l+1*r,c=(h+1)*r*u,l=r>0?Math.floor(t.hy+c):Math.ceil(t.hy+c),p=Math.abs(c%1),(f=new s()).hx=t.hx+(h+1)*n,f.hy=p<=0.5?l:l+1*r,c=(h+2)*r*u,l=r>0?Math.floor(t.hy+c):Math.ceil(t.hy+c),p=Math.abs(c%1),(y=new s()).hx=t.hx+(h+2)*n,y.hy=p<=0.5?l:l+1*r,!this.isCrossAtAdjacentNodes(t,e,d,f,y))return!1;}else for(u=i/o,h=0;h<o;h+=2){var d,f,y;if(a=h*n*u,l=n>0?Math.floor(t.hx+a):Math.ceil(t.hx+a),p=Math.abs(a%1),(d=new s()).hx=p<=0.5?l:l+1*n,d.hy=t.hy+h*r,a=(h+1)*n*u,l=n>0?Math.floor(t.hx+a):Math.ceil(t.hx+a),p=Math.abs(a%1),(f=new s()).hx=p<=0.5?l:l+1*n,f.hy=t.hy+(h+1)*r,a=(h+2)*n*u,l=n>0?Math.floor(t.hx+a):Math.ceil(t.hx+a),p=Math.abs(a%1),(y=new s()).hx=p<=0.5?l:l+1*n,y.hy=t.hy+(h+2)*r,!this.isCrossAtAdjacentNodes(t,e,d,f,y))return!1;}return!0;},t.prototype.isCrossAtAdjacentNodes=function(t,e,i,o,n){var r=this.getNodeByHoneyPoint(i.hx,i.hy),s=this.getNodeByHoneyPoint(o.hx,o.hy);if(this.getNodeByHoneyPoint(n.hx,n.hy),r===s)return!1;if(!this.isPassNode(r)||!this.isPassNode(s))return!1;var a=i.hx-o.hx,c=i.hy-o.hy,l=n.hx-o.hx,p=n.hy-o.hy;if(Math.abs(a)>1||Math.abs(c)>1||Math.abs(l)>1||Math.abs(p)>1)return!1;if(a===-c)if(-1===a){if(!this.isPassNode(this.getNodeByHoneyPoint(o.hx-1,o.hy))||!this.isPassNode(this.getNodeByHoneyPoint(o.hx,o.hy+1)))return!1;}else if(!this.isPassNode(this.getNodeByHoneyPoint(o.hx+1,o.hy))||!this.isPassNode(this.getNodeByHoneyPoint(o.hx,o.hy-1)))return!1;if(o.hx===e.hx&&o.hy===e.hy)return!0;if(l===-p)if(-1===l){if(!this.isPassNode(this.getNodeByHoneyPoint(o.hx-1,o.hy))||!this.isPassNode(this.getNodeByHoneyPoint(o.hx,o.hy+1)))return!1;}else if(!this.isPassNode(this.getNodeByHoneyPoint(o.hx+1,o.hy))||!this.isPassNode(this.getNodeByHoneyPoint(o.hx,o.hy-1)))return!1;return i.hx===o.hx&&o.hx===n.hx||!!this.isPassNode(this.getNodeByHoneyPoint(o.hx+(a+l),o.hy+(c+p)));},t.prototype.getHoneyPoint=function(t){var e=t.cy+Math.ceil(t.cx/2),i=t.cy-Math.floor(t.cx/2);return new s(e,i);},t.prototype.getNodeByHoneyPoint=function(t,e){var i=t-e,o=Math.floor((t-e)/2)+e;return this.getRoadNode(i,o);},t.prototype.getRoundNodeByIndex=function(t,e){if(!t)return null;var i;e%=6,i=t.cx%2==0?this._round1:this._round2;var o=t.cx+i[e][0],n=t.cy+i[e][1];return this.getRoadNode(o,n);},t.prototype.getRoundNodes=function(t){var e;e=t.cx%2==0?this._round1:this._round2;for(var i=[],o=0;o<e.length;o++){var n=t.cx+e[o][0],r=t.cy+e[o][1],s=this.getRoadNode(n,r);i.push(s);}return i;},t.prototype.isPassNode=function(t){return null!=t&&t.value!==n.ENUM_ROAD.Block;},t.prototype.getRoadNode=function(t,e){var i=t+'_'+e;return this._roadNodes[i];},t.prototype.testSeekPathStep=function(t,e,i,o,n){var r=this;if(void 0===n&&(n=100),this._startNode=t,this._currentNode=t,this._targetNode=e,this.isPassNode(this._targetNode)){this._startNode.g=0,this._startNode.resetTree(),this._binaryTreeNode.refleshTag(),this._closelist=[];var s=0;clearInterval(this._handle),this._handle=setInterval(function(){return s>r.maxStep?(console.log('超过最大步数了\uFF0C没找到目标计算步骤为\uFF1A',s),void clearInterval(r._handle)):(s++,r.searchRoundNodes(r._currentNode),r._binaryTreeNode.isTreeNull()?(console.log('没有可搜寻的点了, 没找到目标计算步骤为\uFF1A',s),void clearInterval(r._handle)):(r._currentNode=r._binaryTreeNode.getMin_F_Node(),void(r._currentNode===r._targetNode?(clearInterval(r._handle),r._openlist=r._binaryTreeNode.getOpenList(),i.apply(o,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,r.getPath()])):(r._binaryTreeNode.setRoadNodeInCloseList(r._currentNode),r._openlist=r._binaryTreeNode.getOpenList(),r._closelist.push(r._currentNode),i.apply(o,[r._startNode,r._targetNode,r._currentNode,r._openlist,r._closelist,null])))));},n);}},t.prototype.searchRoundNodes=function(t){var e;e=t.cx%2==0?this._round1:this._round2;for(var i=0;i<e.length;i++){var o=t.cx+e[i][0],n=t.cy+e[i][1],r=this.getRoadNode(o,n);this.isPassNode(r)&&r!==this._startNode&&!this.isInCloseList(r)&&this.setNodeF(r);}},t.prototype.setNodeF=function(t){var e;e=t.cx===this._currentNode.cx||t.cy===this._currentNode.cy?this._currentNode.g+this.COST_STRAIGHT:this._currentNode.g+this.COST_DIAGONAL,this.isInOpenList(t)?e<t.g&&(t.g=e,t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.removeTreeNode(t),this._binaryTreeNode.addTreeNode(t)):(t.g=e,this._binaryTreeNode.setRoadNodeInOpenList(t),t.resetTree(),t.parent=this._currentNode,t.h=(Math.abs(this._targetNode.cx-t.cx)+Math.abs(this._targetNode.cy-t.cy))*this.COST_STRAIGHT,t.f=t.g+t.h,this._binaryTreeNode.addTreeNode(t));},t.prototype.isInOpenList=function(t){return this._binaryTreeNode.isInOpenList(t);},t.prototype.isInCloseList=function(t){return this._binaryTreeNode.isInCloseList(t);},t.prototype.dispose=function(){this._roadNodes=null,this._round1=null,this._round2=null;},t;}();i.default=r;var s=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.hx=0,this.hy=0,this.hx=t,this.hy=e;};cc._RF.pop();},{}],AudioMgr:[function(t,e,i){'use strict';cc._RF.push(e,'b79f0n6c9dJiqrc/uawFTTq','AudioMgr');var o=this&&this.__values||function(t){var e='function'==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&'number'==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t};}};throw new TypeError(e?'Object is not iterable.':'Symbol.iterator is not defined.');};Object.defineProperty(i,'__esModule',{value:!0}),i.AudioMgr=void 0;var n=t('Config'),r=t('ConfigConst'),s=t('MsgToastMgr'),a=t('AppEventConst'),c=t('ResConst'),l=t('ResMgr'),p=t('AudioModel'),u=t('EventClient'),h=function(){function t(){this.effectEnable=!0,this.effectVolume=0.5,this.musicEnable=!0,this.musicVolume=0.5,this.musicId=void 0,this._oldEffectEnable=!1,this._oldMusicEnable=!1,this.curMk=0,this.lastMusic=null,this._lastMusicVolume=0,this._fadeOutMusicTimeN=null,this._foutCB=null;}return Object.defineProperty(t,'I',{get:function(){return this._Instance||(this._Instance=new t(),u.EventClient.I.on(a.AppEvent.Game_Hide,this._Instance.onGameHide,this._Instance)),this._Instance;},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e=p.default.I.openState;t.I.musicEnable=void 0===e||e,t.I.musicVolume=p.default.I.musicVol,this.setMusicVolume(t.I.musicVolume);var i=p.default.I.openEffState;t.I.effectEnable=void 0===i||i,t.I.effectVolume=p.default.I.effectVol,this.setEffectVolume(t.I.effectVolume);},t.prototype.onGameHide=function(t){t?(this._oldEffectEnable=this.effectEnable,this._oldMusicEnable=this.musicEnable,this.setEffectEnable(!1),this.setMusicEnable(!1)):(this.setEffectEnable(this._oldEffectEnable),this.setMusicEnable(this._oldMusicEnable));},t.prototype._loadAudioClip=function(t,e,i,o){void 0===o&&(o=!1);var n=function(t,e){t||(e.addRef(),i(e));},r=!0;if(!1===(null==e?void 0:e.isRemote)&&(r=!1),r)l.ResMgr.I.loadRemote(t,c.AssetType.AudioClip,n);else{var s=(null==e?void 0:e.bundle)?e.bundle:void 0;l.ResMgr.I.loadLocal(t,cc.AudioClip,n,{bundle:s});}},t.prototype.playMusic=function(e,i,o){var n=this;if(void 0===o&&(o=!1),e){var r=this._getSoundPath(e);console.log('当前播放的音乐\uFF1A'+r),t.I.musicEnable&&this.curMk!==e&&(this.curMk=e,this._loadAudioClip(r,i,function(t){o&&(n._lastMusicVolume=cc.audioEngine.getVolume(n.musicId)),n._clearMusicTime(!0);var e=n.musicVolume;n.lastMusic&&n.lastMusic!==t&&o?n._fadeOutMusic(function(){n.playNextMusic(e,t,i);}):n.playNextMusic(e,t,i);},!0));}},t.prototype._fadeOutMusic=function(t){var e=this;this._fadeOutMusicTimeN=setInterval(function(){e._lastMusicVolume>0?(e._lastMusicVolume-=0.1,e._lastMusicVolume<=0&&(e._lastMusicVolume=0),e._lastMusicVolume=Number(e._lastMusicVolume.toFixed(2)),e.setMusicVolume(e._lastMusicVolume)):(e._clearMusicTime(),t&&t());},100),this._foutCB=t;},t.prototype._clearMusicTime=function(t){void 0===t&&(t=!1),this._fadeOutMusicTimeN&&clearInterval(this._fadeOutMusicTimeN),this._fadeOutMusicTimeN=null,t&&this._foutCB&&this._foutCB(),this._foutCB=null;},t.prototype.playNextMusic=function(t,e,i){var o=this,n=0,r=cc.audioEngine.getCurrentTime(this.musicId),s=p.default.I.musicVol||0.5;if(r>2){this.setMusicVolume(n);var a=setInterval(function(){n<t?(n+=0.1,n=Number(n.toFixed(2)),o.setMusicVolume(n)):(clearInterval(a),o.setMusicVolume(s));},200);}else this.setMusicVolume(s);this.lastMusic&&cc.isValid(this.lastMusic,!0)&&l.ResMgr.I.decRef(this.lastMusic),this.musicId=cc.audioEngine.playMusic(e,!!(null==i?void 0:i.loop)),this.lastMusic=e;},t.prototype.playEffect=function(e,i,o,n){var r=this;if(e){var a=this._getSoundPath(e);if(a&&this.effectEnable){p.default.I.audioMsgOpen&&s.default.Show(String(a));var c=t.I.effectVolume;this._loadAudioClip(a,i,function(t){if(o&&o(t),t){(null==i?void 0:i.stopLast)&&r.stopEffect(e);var s=cc.audioEngine.playEffect(t,!1);(null==i?void 0:i.needClose)&&(r._audioIdMap||(r._audioIdMap=new Map()),r._audioIdMap.set(e,s)),cc.audioEngine.setFinishCallback(s,function(){n&&n(),(null==i?void 0:i.isClick)&&r.setEffectVolume(c),setTimeout(function(){t&&cc.isValid(t,!0)&&t.refCount&&l.ResMgr.I.decRef(t);},5000);});}});}}},t.prototype.setMusicVolume=function(t){this.musicVolume=t,cc.audioEngine.setMusicVolume(this.musicVolume);},t.prototype.getMusicVolume=function(){return this.musicVolume;},t.prototype.setEffectVolume=function(t){this.effectVolume=t,cc.audioEngine.setEffectsVolume(this.effectVolume);},t.prototype.getEffectVolume=function(){return this.effectVolume;},t.prototype.setEffectEnable=function(t){this.effectEnable=t;},t.prototype.setMusicEnable=function(t){this.musicEnable=t,this.musicEnable?this.musicId?(cc.audioEngine.pause(this.musicId),cc.audioEngine.resume(this.musicId)):this.playMusic(this.curMk,{isRemote:!0,loop:!0}):this.musicId&&cc.audioEngine.pause(this.musicId);},t.prototype.play=function(e,i,o,n){void 0===o&&(o=!0),void 0===n&&(n=!0),t.I.musicEnable=n,t.I.musicVolume=e,t.I.playMusic(i,{loop:o});},t.prototype.stopEffect=function(t){var e;if(null===(e=this._audioIdMap)||void 0===e?void 0:e.size){var i=this._audioIdMap.get(t);cc.audioEngine.stopEffect(i),this._audioIdMap.clear();}},t.prototype.stopAllEffect=function(){var t,e,i;if(null===(i=this._audioIdMap)||void 0===i?void 0:i.size){try{for(var n=o(this._audioIdMap.keys()),r=n.next();!r.done;r=n.next()){var s=r.value,a=this._audioIdMap.get(s);cc.audioEngine.stopEffect(a);}}catch(c){t={error:c};}finally{try{r&&!r.done&&(e=n.return)&&e.call(n);}finally{if(t)throw t.error;}}this._audioIdMap.clear(),this._audioIdMap=void 0;}},t.prototype._getSoundPath=function(t){if(t===p.MusicKey.bgmLogin||t===p.MusicKey.btnStart||t===p.MusicKey.btnNormal)return'audio/music/'+t;var e=n.Config.Get(r.ConfigConst.Cfg_Music).getValueByKey(t);return e?'audio/music/'+e.Respath:(console.warn('找不到配置key:'+t),'');},t;}();i.AudioMgr=h,cc._RF.pop();},{}],AudioModel:[function(t,e,i){'use strict';cc._RF.push(e,'dfd50Acm1tBHpGFT/eEh/fp','AudioModel');var o=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s;};Object.defineProperty(i,'__esModule',{value:!0}),i.MusicKey=void 0,i.MusicKey={btnNormal:2001,btnReceive:2002,btnUpLv:2003,btnDelete:2004,btnStart:2005,btnPowerUp:2006,popReward:3001,popShow:3002,popVictory:3003,popDefeat:3004,firInterface:4001,secInterface:4002,pageChange:4003,openShop:5001,cashCow:6001,changeLifeLight:6002,sevenStarWick:6003,roleMartialLife:6004,readyTick:7001,huarongdaoAccount:7002,huarongdaoCatch:7003,readyDone:7004,bgmWild:1,bgmCamp:2,bgmCity:3,bgmDesert:4,bgmLevel:5,bgmHome:6,bgmFight:7,bgmLogin:8};var n=cc._decorator.ccclass,r=function(){function t(){this._openState=!1,this._musicVol=0,this._openEffState=!1,this._effectVol=0,this._needAudioMsg=!1;}var e;return e=t,Object.defineProperty(t,'I',{get:function(){return this._I||(this._I=new e()),this._I;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'openState',{get:function(){return this._openState;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'musicVol',{get:function(){return this._musicVol;},set:function(t){this._musicVol=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'openEffState',{get:function(){return this._openEffState;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'effectVol',{get:function(){return this._effectVol;},enumerable:!1,configurable:!0}),t.prototype.initInfo=function(t,e,i,o){this._openState=t,this._musicVol=e,this._openEffState=i,this._effectVol=o;},Object.defineProperty(t.prototype,'audioMsgOpen',{get:function(){return this._needAudioMsg;},set:function(t){this._needAudioMsg=t;},enumerable:!1,configurable:!0}),e=o([n('AudioModel')],t);}();i.default=r,cc._RF.pop();},{}],BaseCmp:[function(t,e,i){'use strict';cc._RF.push(e,'6c3fdvKVORHgZSvqr8HEBRM','BaseCmp');var ac=window.extend_func(this,'__extends__decorate__read__spread');var n=ac.__extends;var r=ac.__decorate;var s=ac.__read;var a=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0});var c=t('Executor'),l=t('ResMgr'),p=cc._decorator.ccclass,u=function(t){function e(){var e=t.call(this)||this;return e.intervalMsg=[],e.intervalHandle=10000,e._oneSecond=0,e;}return n(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.onDestroy=function(){},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];},e.prototype.refreshView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];},e.prototype._close=function(){this.node.destroy();},e.prototype.updatePerSecond=function(){},e.prototype.update=function(t){this._oneSecond+=t,this._oneSecond>=1&&(this._oneSecond-=1,this.updatePerSecond&&this.updatePerSecond());},e.prototype.setHide=function(t){this.node.active!==t&&(this.node.active=t);},e.prototype.getHideState=function(){return this.node.active;},e.prototype.close=function(){this._close();},e.prototype.clearInterval=function(t){for(var e=this.intervalMsg.length-1;e>=0;--e)if(this.intervalMsg[e].handle===t){this.unschedule(this.intervalMsg[e].cb),this.intervalMsg.splice(e,1);break;}},e.prototype.setInterval=function(t,e){var i={cb:t,handle:this.intervalHandle};return this.intervalMsg.push(i),this.schedule(t,e/1000),this.intervalHandle++;},e.prototype.addPropertyPrefab=function(t,e,i,o){var n=this;if(!this['_is'+t]){var r=this.getProxyFuncs(t);this['_is'+t]=!0,l.ResMgr.I.showPrefab(e,i,function(e,i){e?n['_is'+t]=!1:(o&&o(i),n['_'+t]=i.getComponent(t),r.forEach(function(t){t.invoke(),t.clear(),t=void 0;}),r.length=0);});}},e.prototype.getProxyFuncs=function(t){return this['_'+t+'Funcs']=this['_'+t+'Funcs']||[];},e.prototype.proxyFunc=function(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var n=this['_'+t];if(n){var r=n[e];return null==r?void 0:r.call.apply(r,a([n],i));}var s=this.getProxyFuncs(t);s.push(new(c.Executor.bind.apply(c.Executor,a([void 0,this.proxyFunc,this,t,e],i)))());},r([p],e);}(cc.Component);i.default=u,cc._RF.pop();},{}],BaseController:[function(t,e,i){'use strict';cc._RF.push(e,'bd3e3q0UpFKPpg8BfkaKPgW','BaseController'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('EventClient'),n=t('EventProto'),r=t('AppEventConst'),s=function(){function t(){this.gameStartDelay=0,this._timer=0,this._isOnNetEvt=!0,this._init();}return t.prototype._init=function(){this.netEventHandler(!0),this.addClientEvent(),this.init(),o.EventClient.I.once(r.AppEvent.Start,this.onGameStart,this);},t.prototype.do=function(){},t.prototype.init=function(){},t.prototype.onGameStart=function(){var t=this;if(-1===this.gameStartDelay)this.gameStart();else{var e=0===this.gameStartDelay?2000*Math.random()+1000:this.gameStartDelay;this._timer=setTimeout(function(){t.gameStart();},e);}},t.prototype.gameStart=function(){},t.prototype.reset=function(){this.netEventHandler(!1),this.delClientEvent(),this.clearAll(),this._timer&&(clearTimeout(this._timer),this._timer=null);},Object.defineProperty(t.prototype,'netEvt',{get:function(){return this._isOnNetEvt?n.EventProto.I.on:n.EventProto.I.off;},enumerable:!1,configurable:!0}),t.prototype.netEventHandler=function(t){this._isOnNetEvt=t;},t;}();i.default=s,cc._RF.pop();},{}],BaseEvent:[function(t,e,i){'use strict';cc._RF.push(e,'19bc33wugtPibdK1xY27Kui','BaseEvent'),Object.defineProperty(i,'__esModule',{value:!0}),i.BaseEvent=void 0;var o=cc.js.array.fastRemoveAt,n=function(){function t(){this.tag='标签',this._handlers=cc.js.createMap(!0);}return t.prototype.on=function(t,e,i,o){var n={cb:e,target:i,once:o},r=this._handlers[t];r||(r=[],this._handlers[t]=r);for(var s=0;s<r.length;s++){var a=r[s];if(a.cb===e&&i===a.target)return;}r.push(n);},t.prototype.once=function(t,e,i){this.on(t,e,i,!0);},t.prototype.off=function(t,e,i){var o=this._handlers[t];if(o){for(var n=0;n<o.length;n++){var r=o[n];if(r.cb===e&&i===r.target){o.splice(n--,1);break;}}0===o.length&&delete this._handlers[t];}},t.prototype.targetOff=function(t){for(var e in this._handlers)for(var i=this._handlers[e],n=0;n<i.length;n++){var r=i[n];r&&r.target===t&&(o(i,n--),0===i.length&&delete this._handlers[e]);}},t.prototype.typeOff=function(t){this._handlers[t]&&delete this._handlers[t];},t.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this._handlers[t];if(o)for(var n=0;n<o.length;n++){var r=o[n];if(r.target){if(r.target instanceof Object&&!cc.isValid(r.target,!0)){o.splice(n--,1),0===o.length&&delete this._handlers[t];continue;}try{r.cb.apply(r.target,e);}catch(s){console.error(s);}}else try{r.cb.apply(e);}catch(s){console.error(s);}r.once&&(o.splice(n--,1),0===o.length&&delete this._handlers[t]);}},t.prototype.hasEventListener=function(t,e,i){var o=this._handlers[t];if(o)for(var n=0;n<o.length;n++){var r=o[n];if(r.cb===e&&i===r.target)return!0;}return!1;},t.prototype.getEventListenerCount=function(t){var e=this._handlers[t];return e?e.length:0;},t.prototype.print=function(t){var e=typeof t;if('string'===e||'number'===e){var i=t;console.log(this.tag,i+'事件\uFF1A',this._handlers[i]);}else if(t){var o=[];for(var n in this._handlers)for(var r=this._handlers[n],s=0;s<r.length;s++){var a=r[s];t===a.target&&o.push(a);}console.log(this.tag,t,'目标监听事件\uFF1A',o);}else console.log(this.tag,'所有事件\uFF1A',this._handlers);},t.prototype.checkEventRelease=function(){for(var t in this._handlers)for(var e=this._handlers[t],i=0;i<e.length;i++){var o=e[i];o.target instanceof Object&&!cc.isValid(o.target,!0)&&console.error(this.tag,'检查事件释放 '+t+'失败\uFF0C事件目标对象不存在或已销毁\uFF01');}},t;}();i.BaseEvent=n,cc._RF.pop();},{}],BaseModel:[function(t,e,i){'use strict';cc._RF.push(e,'c619bPB5BxAu77kukOE7ufn','BaseModel'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){this._init();}return t.prototype._init=function(){this.init();},t.prototype.init=function(){},t.prototype.registerRedDotListen=function(){},t.prototype.onRedDotEventListen=function(){},t.prototype.offRedDotEventListen=function(){},t.prototype.reset=function(){this.clearAll();},t.prototype.do=function(){},t;}();i.default=o,cc._RF.pop();},{}],BaseUiView:[function(t,e,i){'use strict';cc._RF.push(e,'05a78G/aDdC0535/EJ7ExNZ','BaseUiView');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('AppEventConst'),a=t('EventClient'),c=t('WinMgr'),l=t('BaseCmp'),p=t('UtilsMain'),u=t('MaskClickEff'),h=t('UtilWinEff'),d=cc._decorator,f=d.ccclass,y=d.property,_=function(t){function e(){var e=t.call(this)||this;return e.NodeBlack=null,e._dataInit=!1,e._uiInit=!1,e._initEnd=!1,e.initEndHandler=null,e.initEndHandler2=null,e._openEffect=!1,e._closeEffect=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'openEffect',{set:function(t){this._openEffect=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'closeEffect',{set:function(t){this._closeEffect=t;},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.showBlackBg(),this.NodeBlack&&!this.NodeBlack.getComponent(u.default)&&this.NodeBlack.addComponent(u.default);},e.prototype.start=function(){var e,i;t.prototype.start.call(this),this._uiInit=!0,this.checkInit(),(!0===(null===(e=this.viewVo)||void 0===e?void 0:e.openWinEff)||this._openEffect&&!1!==(null===(i=this.viewVo)||void 0===i?void 0:i.openWinEff))&&h.default.winOpenEff(this.node,this.NodeBlack),a.EventClient.I.emit(s.AppEvent.WinOpen,this.viewVo);},e.prototype.onEnable=function(){t.prototype.onEnable.call(this);},e.prototype.onDisable=function(){t.prototype.onDisable.call(this);},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.doDestroy();},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._dataInit=!0,this.checkInit(),this.addToLayer();},e.prototype.addToLayer=function(){this.viewVo&&a.EventClient.I.emit(s.AppEvent.ViewAddToLayer,this.viewVo.layerType,this.node);},e.prototype.align=function(){},e.prototype.checkInit=function(){var t=this;this._uiInit&&this._dataInit&&(this._initEnd=!0,this.init(this.viewVo.extraParam),this.initEndHandler&&this.initEndHandler(),this.scheduleOnce(function(){t.initEndHandler2&&(t.initEndHandler2(),t.timeOutHandler());},0.5),this.showBlackBg());},e.prototype.timeOutHandler=function(){},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];},e.prototype.refreshView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];},e.prototype.stageOnResize=function(){this.align();},e.prototype._close=function(){var t,e;(!0===(null===(t=this.viewVo)||void 0===t?void 0:t.closeWinEff)||this._closeEffect&&!1!==(null===(e=this.viewVo)||void 0===e?void 0:e.closeWinEff))&&this._initEnd?h.default.winCloseEff(this.node,this._closeWin,this):this._closeWin();},e.prototype._closeWin=function(){t.prototype._close.call(this);},e.prototype.close=function(){c.default.I.close(this.uiId);},e.prototype.closeView=function(){c.default.I.closeView(this);},e.prototype.doDestroy=function(){this.viewVo=null;},e.prototype.showBlackBg=function(){var t,e,i,o,n=this;if(this.NodeBlack&&this.NodeBlack.isValid)this.NodeBlack.active=null===(t=this.viewVo)||void 0===t?void 0:t.blackBg;else if(!this.NodeBlack&&(null===(e=this.viewVo)||void 0===e?void 0:e.blackBg)){this.NodeBlack=p.UtilsMainNode.NewNode(this.node,[cc.Sprite,cc.BlockInputEvents]),this.NodeBlack.name='NdBlack',this.NodeBlack.zIndex=-1;var r=this.NodeBlack.getComponent(cc.Sprite);r.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.type=cc.Sprite.Type.SLICED,p.UtilsMainNode.LoadSpriteFrame(r,'texture/com/img/com_img_di_11@9[5_5_5_5]'),this.NodeBlack.setContentSize(cc.winSize);}this.NodeBlack&&this.NodeBlack.isValid&&(null===(i=this.viewVo)||void 0===i?void 0:i.backBgAlpha)&&(this.NodeBlack.opacity=this.viewVo.backBgAlpha),this.NodeBlack&&this.NodeBlack.isValid&&(null===(o=this.viewVo)||void 0===o?void 0:o.blackBgClickClose)&&(this.NodeBlack.targetOff(this),this.NodeBlack.on(cc.Node.EventType.TOUCH_END,function(){n.close();},this));},e.prototype.hideBlackBg=function(){this.NodeBlack&&this.NodeBlack.isValid&&(this.NodeBlack.active=!1);},Object.defineProperty(e.prototype,'isInit',{get:function(){return this._uiInit;},set:function(t){this._uiInit=t;},enumerable:!1,configurable:!0}),r([y(cc.Node)],e.prototype,'NodeBlack',void 0),r([f],e);}(l.default);i.default=_,cc._RF.pop();},{}],BaseVo:[function(t,e,i){'use strict';var o;cc._RF.push(e,'4903787EHZKvJ+SttK49Psi','BaseVo'),Object.defineProperty(i,'__esModule',{value:!0}),i.PopupType=i.WinSmallType=void 0,function(t){t[t.ComPageStyleA=0]='ComPageStyleA',t[t.ComPageStyleB=1]='ComPageStyleB',t[t.ComPageStyleC=2]='ComPageStyleC',t[t.ComPageStyleD=3]='ComPageStyleD';}(i.WinSmallType||(i.WinSmallType={})),function(t){t[t.Normall=0]='Normall',t[t.Nwe=1]='Nwe',t[t.Last=2]='Last';}(o=i.PopupType||(i.PopupType={}));var n=function(){function t(){this.layer=null,this.resClass=null,this.scaleEff=!1,this.blackBg=!0,this.blackBgClickClose=!0,this.backBgAlpha=200,this.prefabPath='',this.isShowTips=!1,this.isShowAll=!0,this.isPopup=o.Normall,this.isNotHide=!1,this.zIndex=0,this.winSmallType=0,this.isShowBtnClose=!0,this.unLimitViewCount=!1,this.isTipsHide=!1,this.fixedZIndex=0,this.vGroupType=0,this.vGroupPriority=0,this.vTag=0,this.bundleName='',this.openWinEff=null,this.closeWinEff=null,this.n=null;}return t.prototype.init=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var i=t[e];this[e]=i;}},t.prototype.setStashParam=function(t){this.stashParam=t;},t;}();i.default=n,cc._RF.pop();},{}],BinaryTreeNode:[function(t,e,i){'use strict';cc._RF.push(e,'dcb01dMZBFLbo8dqTpKIhaV','BinaryTreeNode'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){this._seekTag=0,this._openNode=null,this._count=0;}return t.prototype.refleshTag=function(){this._openNode=null,this._count=0,this._seekTag++,this._seekTag>1000000000&&(this._seekTag=0);},t.prototype.isTreeNull=function(){return null==this._openNode;},t.prototype.addTreeNode=function(t,e){if(void 0===e&&(e=null),this._count++,null==e){if(null==this._openNode)return void(this._openNode=t);e=this._openNode;}t.f>=e.f?null==e.right?(e.right=t,t.treeParent=e):this.addTreeNode(t,e.right):null==e.left?(e.left=t,t.treeParent=e):this.addTreeNode(t,e.left);},t.prototype.removeTreeNode=function(t){this._count++,null==t.treeParent&&null==t.left&&null==t.right||(null==t.treeParent?t.left?(this._openNode=t.left,t.left.treeParent=null,t.right&&(t.right.treeParent=null,this.addTreeNode(t.right,this._openNode))):t.right&&(this._openNode=t.right,t.right.treeParent=null):t.treeParent.left===t?t.right?(t.treeParent.left=t.right,t.right.treeParent=t.treeParent,t.left&&(t.left.treeParent=null,this.addTreeNode(t.left,t.right))):(t.treeParent.left=t.left,t.left&&(t.left.treeParent=t.treeParent)):t.treeParent.right===t&&(t.left?(t.treeParent.right=t.left,t.left.treeParent=t.treeParent,t.right&&(t.right.treeParent=null,this.addTreeNode(t.right,t.left))):(t.treeParent.right=t.right,t.right&&(t.right.treeParent=t.treeParent))),t.resetTree());},t.prototype.getMin_F_Node=function(t){if(void 0===t&&(t=null),this._count++,null==t){if(null==this._openNode)return null;t=this._openNode;}if(null==t.left){var e=t;return null==t.treeParent?(this._openNode=t.right,this._openNode&&(this._openNode.treeParent=null)):(t.treeParent.left=t.right,t.right&&(t.right.treeParent=t.treeParent)),e;}return this.getMin_F_Node(t.left);},t.prototype.setRoadNodeInOpenList=function(t){t.openTag=this._seekTag,t.closeTag=0;},t.prototype.setRoadNodeInCloseList=function(t){t.openTag=0,t.closeTag=this._seekTag;},t.prototype.isInOpenList=function(t){return t.openTag===this._seekTag;},t.prototype.isInCloseList=function(t){return t.closeTag===this._seekTag;},t.prototype.getOpenList=function(){var t=[];return this.seachTree(this._openNode,t),t;},t.prototype.seachTree=function(t,e){null!=t&&(e.push(t),t.left&&this.seachTree(t.left,e),t.right&&this.seachTree(t.right,e));},t;}();i.default=o,cc._RF.pop();},{}],BlurMask:[function(t,e,i){'use strict';cc._RF.push(e,'d54f5/+BI1JwbzJ1I8HILbZ','BlurMask');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.texture=null,e.spriteFrame=null,e.sprite=null,e._lastSize=new cc.Size(0,0),e._cullingMask=268435456,e._renderAllMask=4294967295,e.material=null,e;}var i;return n(e,t),i=e,e.prototype.start=function(){this.node.scaleY=-1,this._createTexture(),this._initCamera(),this._createSprite(),this._doBlurMask();},e.prototype._doBlurMask=function(){var t=this,e=this._getAfterChild();this._renderOrNot(e,!1),this.scheduleOnce(function(){t.snapshot(),t._renderOrNot(e,!0);});},e.prototype._initCamera=function(){this.camera=this.node.addComponent(cc.Camera),this.camera.cullingMask=this._renderAllMask^this._cullingMask,this.camera.targetTexture=this.texture,this.camera.enabled=!1;},e.prototype._renderOrNot=function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];this.cull(n,e);}},e.prototype._getAfterChild=function(){var t=this.node.parent;if(!(null==t?void 0:t.children))return[];for(var e=(null==t?void 0:t.childrenCount)||0,o=[],n=!1,r=0;r<e;r++){var s=t.children[r];n&&o.push(t.children[r]),s.getComponent(i)&&(n=!0);}return o;},e.prototype.snapshot=function(){var t=this.node.getContentSize();t.width===this._lastSize.width&&t.height===this._lastSize.height||(this.texture.initWithSize(this.node.width,this.node.height,cc.game._renderContext.STENCIL_INDEX8),this.camera.targetTexture=this.texture),this._lastSize.width=t.width,this._lastSize.height=t.height,this.camera.cullingMask=this.node.groupIndex,this.camera.render(cc.Canvas.instance.node),this.spriteFrame.setTexture(this.texture);},e.prototype.cull=function(t,e){var i=this;if(t){var o=e?this._cullingMask:~this._cullingMask;t.groupIndex=4294967295&o,t.childrenCount&&t.children.map(function(t){return i.cull(t,e);});}},e.prototype._createSprite=function(){this.spriteFrame=new cc.SpriteFrame(),this.sprite=this.node.addComponent(cc.Sprite),this.sprite.spriteFrame=this.spriteFrame,this.sprite._materials[0]=this.material;},e.prototype._createTexture=function(){this.texture||(this.texture=new cc.RenderTexture()),this.texture.initWithSize(this.node.width,this.node.height,cc.game._renderContext.STENCIL_INDEX8);},r([c(cc.Material)],e.prototype,'material',void 0),i=r([a],e);}(cc.Component);i.default=l,cc._RF.pop();},{}],BundleMgr:[function(t,e,i){'use strict';cc._RF.push(e,'657a7FPKzRN1qeOGwNtE+KB','BundleMgr');var o=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{c(o.next(t));}catch(e){r(e);}}function a(t){try{c(o.throw(t));}catch(e){r(e);}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e);})).then(s,a);}c((o=o.apply(t,e||[])).next());});},n=this&&this.__generator||function(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1];},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},'function'==typeof Symbol&&(r[Symbol.iterator]=function(){return this;}),r;function a(t){return function(e){return c([t,e]);};}function c(r){if(i)throw new TypeError('Generator is already executing.');for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){s=0;continue;}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break;}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break;}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break;}n[2]&&s.ops.pop(),s.trys.pop();continue;}r=e.call(t,s);}catch(a){r=[6,a],o=0;}finally{i=n=0;}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0};}};Object.defineProperty(i,'__esModule',{value:!0});var r,s=t('ExecutorList');(function(t){t[t.Empty=0]='Empty',t[t.Load=1]='Load',t[t.Complete=2]='Complete';}(r||(r={})));var a=function(){function t(){this.loaded={},this.loadcallbacks={};}return Object.defineProperty(t,'I',{get:function(){return null==this._I&&(this._I=new t()),this._I;},enumerable:!1,configurable:!0}),t.prototype.load=function(t,e,i){this.loaded[t]!==r.Complete?(this.addCallback(t,e,i),this.loaded[t]||(this.loaded[t]=r.Load,this._load(t))):e.call(i,void 0,this.getBundle(t));},t.prototype.loadAsync=function(t){return o(this,void 0,Promise,function(){var e=this;return n(this,function(){return[2,new Promise(function(i){e.load(t,function(t,e){i(t?void 0:e);},e);})];});});},t.prototype._load=function(t){var e=this;cc.assetManager.loadBundle(t,function(i,o){i?(console.warn('loadBundle error:',i),e.loaded[t]=r.Empty):e.loaded[t]=r.Complete,e.doCallback(i,t,o);});},t.prototype.addCallback=function(t,e,i){if(e){var o=this.loadcallbacks[t];o?o.pushUnique(e,i):(o=this.loadcallbacks[t]=new s.ExecutorList()).push(e,i);}},t.prototype.doCallback=function(t,e,i){var o=this.loadcallbacks[e];o&&(o.invokeWithArgs(t,i||this.getBundle(e)),o.clear(),o=void 0);},t.prototype.getBundle=function(t){return cc.assetManager.getBundle(t);},t._I=null,t;}();i.default=a,cc._RF.pop();},{}],CCAstc:[function(t,e,i){'use strict';cc._RF.push(e,'59292s2ajtGBZj67Svf3CP+','CCAstc');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0});var r=cc.gfx,s=37808,a=37812;if(cc.assetManager.factory.register('.astc',function(t,e,i,o){var n=null,r=null;try{(n=new cc.Texture2D())._format=e.format,n._nativeUrl=t,n._nativeAsset=e;}catch(s){r=s;}o&&o(r,n);}),cc.sys.isNative);else{var c=r.Device.prototype._initExtensions;r.Device.prototype._initExtensions=function(t){c.call(this,t),d(this._gl);};}var l=!1,p=new Map(),u=0,h=null;function d(t){if(!l&&t){l=!0;var e=t.createTexture,i=t.texImage2D,o=t.bindTexture,r=(t.copyTexImage2D,t.deleteTexture),c=t.compressedTexImage2D;t.compressedcopyTexImage2D,t.createTexture=function(){var i=e.call(t);return p.set(i,0),i;},t.bindTexture=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return h=e[1],o.call.apply(o,n([t],e));},t.texImage2D=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];if(h){var r=0,s=e[3],a=e[4],c=e[6];if(9===e.length)s=e[3],a=e[4],c=e[6];else if(6===e.length){var l=e[5];s=l.width,a=l.height,c=e[3];}c===t.RGB?r=s*a*3:c===t.RGBA&&(r=s*a*4),p.has(h)&&(u-=p.get(h)),p.set(h,r),u+=r;}return i.call.apply(i,n([t],e));},t.compressedTexImage2D=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(h){var o=0,r=0;e[2]===s?r=8:e[2]===a&&(r=16/36*8),r>0&&(o=e[3]*e[4]*r/8),p.has(h)&&(u-=p.get(h)),p.set(h,o),u+=o;}return c.call.apply(c,n([t],e));},t.deleteTexture=function(e){return p.has(e)?(u-=p.get(e),p.delete(e)):console.log('没有找到纹理',e),e===h&&(h=null),r.call(t,e);};}}function f(t){var e=t._audio;return e?e.length/121/1024:0;}window.getTextureMemory=function(){return+(u/1024/1024).toFixed(2);},window.getAudioMemory=function(){var t=0;return cc.assetManager.assets.forEach(function(e){if(e instanceof cc.AudioClip){var i=f(e);t+=i;}}),Number(t.toFixed(2));},cc._RF.pop();},{}],CCAtlas:[function(t,e,i){'use strict';cc._RF.push(e,'82182mnw4tNkpLTndkg9E2q','CCAtlas');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0}),i.CCDynamicAtlasTexture=i.CCAtlas=void 0;var r=t('MaxRects'),s=2,a=function(){function t(t,e,i,o){this._innerTextureInfos={},this.atlasName='',this.atlasKey='',this._maxRects=null;var n=new c();n.initWithSize(t,e),n.addRef(),this._texture=n,this._texture._uuid=''+o+new Date().getTime(),this.atlasName=i,n.atlasName=i,this.atlasKey=o,n.atlasKey=o,this._width=t,this._height=e,this._x=s,this._y=s,this._nexty=s,this._innerTextureInfos={},this._innerSpriteFrames=[],this._count=0,this._maxRects=new r.MaxRects(t,e,s,s);}return t.prototype.insertSpriteFrame=function(t,e){var i,o,n,r;r=t._texture;var s=t.getRect(),a=s.width,c=s.height,l=!1;t.isRotated&&(l=t.isRotated()),l&&(a=s.height,c=s.width);var p=cc.v2(0,0);t.getOffset&&(p=t.getOffset());var u=cc.size(0,0);t.getOriginalSize&&(u=t.getOriginalSize(),s.width===u.width&&s.height===u.height||(a=u.width,c=u.height,l&&(a=u.height,c=u.width),s.width=a,s.height=c)),t._original&&(r=t._original._texture,s.x=t._original._x,s.y=t._original._y);var h=r._uuid+t.name;if(i=r._origin_uuid?this._innerTextureInfos[r._origin_uuid]:this._innerTextureInfos[h])o=i.x,n=i.y;else{var d=a,f=c,y=this._maxRects.add(d,f);if(void 0===y)return null;this._x=y.x,this._y=y.y,this._texture.drawTextureAt2(t,this._texture,this._x-1,this._y,e),this._texture.drawTextureAt2(t,this._texture,this._x+1,this._y,e),this._texture.drawTextureAt2(t,this._texture,this._x,this._y-1,e),this._texture.drawTextureAt2(t,this._texture,this._x,this._y+1,e),this._texture.drawTextureAt2(t,this._texture,this._x,this._y,e),r._origin_uuid?this._innerTextureInfos[r._origin_uuid]={x:this._x,y:this._y,w:s.width,h:s.height,isRotated:l,offset:p,originalSize:u,texture:r}:this._innerTextureInfos[h]={x:this._x,y:this._y,w:s.width,h:s.height,isRotated:l,offset:p,originalSize:u,texture:r},this._innerSpriteFrames.push(t),this._count++,o=this._x,n=this._y;}return{x:o,y:n,w:s.width,h:s.height,isRotated:l,offset:p,originalSize:u,texture:this._texture};},t.prototype.deleteInnerTexture=function(t){console.log('deleteInnerTexture'),t&&this._innerTextureInfos[t._uuid]&&(delete this._innerTextureInfos[t._uuid],this._count--);},t.prototype.getTextureInfos=function(t){var e=this._innerTextureInfos[t];return{x:e.x,y:e.y,w:e.w,h:e.h,isRotated:e.isRotated,offset:e.offset,originalSize:e.originalSize,texture:this._texture};},t.prototype.isEmpty=function(){return this._count<=0;},t.prototype.reset=function(){this._x=s,this._y=s,this._nexty=s;for(var t=this._innerSpriteFrames,e=0,i=t.length;e<i;e++){var o=t[e];cc.isValid(o)&&o._resetDynamicAtlasFrame();}this._innerSpriteFrames.length=0,this._innerTextureInfos={};},t.prototype.destroy=function(){this.reset(),this._texture.destroy();},t;}();i.CCAtlas=a;var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.atlasName='',e.atlasKey='',e;}return n(e,t),e.prototype.drawTextureAt2=function(t,e,i,o,n){var r,s,a,c,l,p;if(n instanceof cc.Label){if(!t._texture)return null;if(!(p=t._texture._texture._device._gl))return cc.error('texture上找不到_gl'),null;c=t._texture._texture._glID,l=e.getImpl()._glID,r=(a=t._rect).width,s=a.height;}else if(n instanceof cc.Sprite){if(!t._texture._texture)return null;p=t._texture._texture._device._gl,c=t._texture._texture._glID,l=e.getImpl()._glID,r=(a=t.getRect()).width,s=a.height,t.isRotated()&&(r=a.height,s=a.width);}var u=p.createFramebuffer();return p.bindFramebuffer(p.FRAMEBUFFER,u),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,c,0),p.bindTexture(p.TEXTURE_2D,l),p.copyTexSubImage2D(p.TEXTURE_2D,0,i,o,a.x,a.y,r,s),p.bindTexture(p.TEXTURE_2D,null),p.bindFramebuffer(p.FRAMEBUFFER,null),p.deleteFramebuffer(u),cc.rect(i,o,r,s);},e;}(cc.RenderTexture);i.CCDynamicAtlasTexture=c,cc._RF.pop();},{}],CCBaseNode:[function(t,e){'use strict';cc._RF.push(e,'43f7bKRSZlL+ImnNJBdcMOa','CCBaseNode');var i=cc._BaseNode.prototype._instantiate;cc._BaseNode.prototype._instantiate=function(t,e){if(t?(t._prefab,t._parent=null,t._onBatchCreated(e)):t=i.apply(this,this),t instanceof cc.Node){var n=t._prefab&&t._prefab.asset&&t._prefab.root===t;o(t,n);}return t;};var o=function(t,e){void 0===e&&(e=!0),t._prefab&&t._prefab.asset&&t._prefab.root===t&&t._prefab.asset.addRef();var i=t.getComponent(cc.Sprite);i&&i.spriteFrame&&(e&&!i._frameUuid||i.addRef());var n=t.getComponent(cc.Label);if(n&&n.font){var r=n.font._spriteFrame;e&&!n._frameUuid||r&&(n._frameUuid=r._uuid,r.addRef());}t.children.forEach(function(t){o(t);});};cc._BaseNode.prototype._onPreDestroyBase=function(){var t,e,i=cc.Object.Flags.Destroying;this._objFlags|=i;var o=this._parent,n=o&&o._objFlags&i,r=this._children;for(t=0,e=r.length;t<e;++t)r[t]._destroyImmediate();for(t=0,e=this._components.length;t<e;++t){var s=this._components[t];s&&s._destroyImmediate&&s._destroyImmediate();}var a=this.__eventTargets;for(t=0,e=a.length;t<e;++t){var c=a[t];c&&c.targetOff(this);}if(a.length=0,this._persistNode&&cc.game.removePersistRootNode(this),!n&&o){var l=o._children.indexOf(this);o._children.splice(l,1),o.emit&&o.emit('child-removed',this);}return n;},cc.Node.prototype.setParent=function(t){if(this._parent!==t){var e=cc.Object.Flags.Deactivating,i=cc.Object.Flags.Destroying,o=this._parent;if(o&&o._objFlags,this._parent=t||null,this._onSetParent(t),t&&(t._objFlags&e&&cc.errorID(3821),cc.eventManager._setDirtyForNode(this),t._children&&t._children.push(this),t.emit&&t.emit('child-added',this),t._renderFlag|=cc.RenderFlow.FLAG_CHILDREN),o){if(!(o._objFlags&i)){var n=o._children.indexOf(this);if(n<0)return cc.errorID(1633);o._children.splice(n,1),o.emit&&o.emit('child-removed',this),this._onHierarchyChanged(o),0===o._children.length&&(o._renderFlag&=~cc.RenderFlow.FLAG_CHILDREN);}}else t&&this._onHierarchyChanged(null);}};var n=cc.Node.prototype.setParent;Object.defineProperty(cc.Node.prototype,'parent',{set:function(t){n.call(this,t),this.emit&&this.emit('parent-changed',this);},get:function(){return this._parent;}}),cc._RF.pop();},{}],CCBaseSprite:[function(t,e,i){'use strict';cc._RF.push(e,'8cf1cOHfYpO6a1NQGeZ8uQn','CCBaseSprite');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),r([a],e);}(cc.Sprite));i.default=c,cc._RF.pop();},{}],CCCExtend:[function(t,e,i){'use strict';cc._RF.push(e,'32442VHVodPq5RguB8AAMVk','CCCExtend'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){}return t.init=function(){this._extendRenderFlow();},t._extendRenderFlow=function(){var t=0,e=(t++,t++,t++,1<<t++),i=(t++,1<<t++),o=1<<t++,n=i|o,r=(t++,t++,t++,t++,cc.RenderFlow),s=r.getBachther(),a=[],c=[];Object.defineProperty(r.prototype,'_opacity',{value:function(t){s.parentOpacityDirty++,t.__levelRender&&a[t.__itemIndex]&&(a[t.__itemIndex].parentOpacityDirty=1),this._next._func(t),t._renderFlag&=~i,t.__levelRender&&a[t.__itemIndex]&&t.__lastChildren&&(a[t.__itemIndex].parentOpacityDirty=0),s.parentOpacityDirty--;}}),Object.defineProperty(r.prototype,'_worldTransform',{value:function(t){s.worldMatDirty++,t.__levelRender&&a[t.__itemIndex]&&(a[t.__itemIndex].worldMatDirty=1);var i=t._matrix,o=t._trs,n=i.m;n[12]=o[0],n[13]=o[1],n[14]=o[2],t._mulMat(t._worldMatrix,t._parent._worldMatrix,i),t._renderFlag&=~e,this._next._func(t),t.__levelRender&&a[t.__itemIndex]&&t.__lastChildren&&(a[t.__itemIndex].worldMatDirty=0),s.worldMatDirty--;}});var l=function(t,e,i){c[e]||(c[e]=[]),c[e].push(t),e++,t.__renderLv=e,t.__levelRender=!0,t.__itemIndex=i;for(var o=t.children,n=0;n<o.length;++n){var r=o[n];c[e]||(c[e]=[]),e=l(r,e,i);}return e;},p=function(t){var i=t.children,o=t.opacity/255;a=[];for(var p=0;p<i.length;++p)a.push({worldMatDirty:0,parentOpacityDirty:0}),l(i[p],0,p);for(;c.length>0;){var u=c.shift();if(u.length>0)for(;u.length>0;){var h=u.shift();h.__lastChildren=0==c.length,h.__levelRender=!0;var d=h.parent.__opacityInHierarchy;void 0===d&&(d=o);var f=d*(h._opacity/255);h.__opacityInHierarchy=f;var y=h._cullingMask,_=0;a[h.__itemIndex]&&(_=a[h.__itemIndex].worldMatDirty||0);var g=0;a[h.__itemIndex]&&(g=a[h.__itemIndex].parentOpacityDirty||0);var m=(_||s.worldMatDirty?e:0)|(g||s.parentOpacityDirty?n:0);if(h._renderFlag|=m,h._activeInHierarchy&&0!==h._opacity){h._cullingMask=0===h.groupIndex?y:1<<h.groupIndex;var v=h._color._val;h._color._fastSetA(h._opacity*f),r.flows[h._renderFlag]._func(h),h._color._val=v;}}}};Object.defineProperty(r.prototype,'_children',{value:function(t){if(!t.__levelRender){var i=t._cullingMask,o=t.__enableLevelRender,a=t.parent?t.parent.__opacityInHierarchy:void 0,c=void 0!==a?a:s.parentOpacity;if(!o&&!t.__levelRender||t instanceof cc.Mask){var l=c*=t._opacity/255;t.__opacityInHierarchy=l;for(var u=(s.worldMatDirty?e:0)|(s.parentOpacityDirty?n:0),h=t._children,d=0,f=h.length;d<f;d++){var y=h[d];if(y._renderFlag|=u,y.__opacityInHierarchy=y._opacity*l/255,y._activeInHierarchy&&0!==y._opacity){y._cullingMask=0===y.groupIndex?i:1<<y.groupIndex;var _=y._color._val;y._color._fastSetA(y._opacity*l),r.flows[y._renderFlag]._func(y),y._color._val=_;}}}else p(t);s.parentOpacity=c,this._next._func(t);}}});},t;}();i.default=o,cc._RF.pop();},{}],CCDAN:[function(t,e,i){'use strict';cc._RF.push(e,'283acCxM6VFU4HkItQverOV','CCDAN');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('CCDynamicAtlasMgr'),a=cc._decorator,c=a.ccclass,l=a.property,p=a.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key='',e._danState=!1,e._include=['WinTab','WinSmall'],e._exclude=['MAINUI','TIPSUI'],e;}var i;return n(e,t),i=e,e.prototype.onLoad=function(){var t,e,o;if(this.key&&'--'!==this.key&&-1===this._exclude.indexOf(this.key))if(this._include.indexOf(this.key)>-1){var n=(null===(o=null===(e=null===(t=this.node)||void 0===t?void 0:t.getCom('BaseUiView'))||void 0===e?void 0:e.viewVo)||void 0===o?void 0:o.id)||new Date().getTime();this.key=this.key+'-'+n;}else this.key='',this.node.removeComponent(i);s.CCDynamicAtlasMgr.I.addRef(this.key);},e.prototype.onDestroy=function(){this._danState||this._objFlags&&s.CCDynamicAtlasMgr.I.delRef(this.key);},r([l(cc.String)],e.prototype,'key',void 0),i=r([c,p('自定义组件/CCDAN')],e);}(cc.Component);i.default=u,cc._RF.pop();},{}],CCDownloader:[function(t,e){'use strict';cc._RF.push(e,'6eed7gurNZHVJpuqrie5xlQ','CCDownloader'),cc._RF.pop();},{}],CCDynamicAtlasMgr:[function(t,e,i){'use strict';cc._RF.push(e,'783d2LliYJIm649oswGWu6k','CCDynamicAtlasMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.CCDynamicAtlasMgr=void 0;var o=t('CCAtlas'),n=t('CompUtil'),r=257,s=1024,a=function(){function t(){this._atlasDict={},this._atlasesExtend={},this._citeDict={},this._textureMemory=0,this._enabled=!0,this._textureBleeding=!0,this._textureSize=s,this._maxFrameSize=r,this._debugNode=null;}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t(),this.Instance._init()),this.Instance;},enumerable:!1,configurable:!0}),t.prototype.addRef=function(t){if(this._enabled&&''!==t){var e=new Date().getTime();if(this._citeDict[t]){var i={n:this._citeDict[t].n+1,t:e,p:this._citeDict[t].p};this._citeDict[t]=i;}else this._citeDict[t]={n:1,t:e,p:e};}},t.prototype.delRef=function(t){if(this._enabled&&''!==t){if(this._citeDict[t]){var e={n:this._citeDict[t].n-1,t:new Date().getTime(),p:this._citeDict[t].p};this._citeDict[t]=e;}if(this._citeDict[t]&&0===this._citeDict[t].n){var i=new Date().getTime();e={n:0,t:i,p:i},this._citeDict[t]=e;}}},t.prototype.releaseCite=function(t){if(this._enabled&&''!==t&&this._citeDict[t]){var e=new Date().getTime(),i={n:0,t:e,p:e};this._citeDict[t]=i;}},t.prototype.getTextureMemory=function(){return this._textureMemory;},t.prototype._calculateTextureMemory=function(){var t=0;for(var e in this._atlasDict)if(Object.prototype.hasOwnProperty.call(this._atlasDict,e)){var i=this._atlasDict[e];i._texture&&(t+=i._texture.height*i._texture.width*4);}this._textureMemory=t;},t.prototype._init=function(){setInterval(function(){t.I.checkCache();},2000);},t.prototype.checkCache=function(){if(this._enabled)for(var t in this._citeDict)if(0===this._citeDict[t].n&&this._citeDict[t].t<=new Date().getTime()){var e=[];if(e.push(t),this._atlasesExtend[t])for(var i=this._atlasesExtend[t].length,o=0;o<i;o++){var n=this._atlasesExtend[t][o];e.push(n);}for(o=0;o<e.length;o++)this.deleteAtlasByName(e[o]);delete this._atlasesExtend[t],delete this._citeDict[t],e=[];}},Object.defineProperty(t.prototype,'enabled',{get:function(){return this._enabled;},set:function(t){this._enabled!==t&&(this._enabled=t);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'textureBleeding',{get:function(){return this._textureBleeding;},set:function(t){this._textureBleeding=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'textureSize',{get:function(){return this._textureSize;},set:function(t){this._textureSize=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'maxFrameSize',{get:function(){return this._maxFrameSize;},set:function(t){this._maxFrameSize=t;},enumerable:!1,configurable:!0}),t.prototype.getAtlasBykey=function(t,e){var i=this._atlasDict[t];if(i&&i._innerTextureInfos[e])return i;i=null;var o=this._atlasesExtend[t];if(o)for(var n=0;n<o.length;n++){var r=o[n],s=this._atlasDict[r];if(s&&s._innerTextureInfos[e]){i=s;break;}}return i;},t.prototype.reset=function(){},t.prototype.deleteAtlasByName=function(t){var e=this._atlasDict[t];if(e){var i=e.atlasKey,o=e.atlasName;e._texture.decRef(),e.destroy(),delete this._atlasDict[t],this.clearAtlasExtend(i,o),this._calculateTextureMemory();}},t.prototype.packToDynamicAtlas=function(t,e){if(!(e&&e._originalSize&&(e._originalSize.width>=r||e._originalSize.height>=r))&&this.enabled&&e&&'RTImg'!==e._name){var i=e._texture;if(e&&i&&i.width>0&&i.height>0){if(t instanceof cc.Label&&t.font&&t.font.spriteFrame||i.atlasName)return;if(t.DA&&'--'===t.DA)return;this.doExecutePack(t,e);}}},t.prototype.doExecutePack=function(t,e){var i=e._texture;if(t instanceof cc.Label){if(!t.string)return;i._uuid=n.CompUtil.createLabelUuid(t);}var o=this.findCanKey(t.node);if('?'!==o&&'--'!==o){var r=this.insertSpriteFrame(o,e,t);if(r){var s=e.getRect();if(e._original){var a=e.getOriginalSize();s.width===a.width&&s.height===a.height||(s.width=a.width,s.height=a.height);}if(t instanceof cc.Sprite){var c=new cc.SpriteFrame(r.texture,cc.rect(r.x,r.y,s.width,s.height),e.isRotated(),e.getOffset(),e.getOriginalSize());r.texture.addRef(),c._original={_texture:e._texture,_x:e._rect.x,_y:e._rect.y},t.spriteFrame=c,c._calculateUV(),c._capInsets=e._capInsets.concat(),c._calculateSlicedUV(),c.AD_KEY=o,c.LAB_UUID=i._uuid;}if(t instanceof cc.Label){if(!t.node||!cc.isValid(t,!0)||t._N$file&&t._N$file._fontFamily&&!t._N$file.ttfTexture)return;e._original={_texture:e._texture,_x:e._rect.x,_y:e._rect.y},e._texture=r.texture,r.texture.addRef(),e._rect.x=r.x,e._rect.y=r.y,e._calculateUV(),e.AD_KEY=o,e.LAB_UUID=i._uuid,t._ttfSpriteFrame=e;}}}},t.prototype.insertSpriteFrame=function(t,e,i){var o=e._texture;if(o&&!o._uuid&&o.atlasKey&&o.atlasKey===t)return null;for(var n=t,r=0,s=null;!s;)n=r>0?t+'~'+r:t,(s=this.getAtlas(n,t).insertSpriteFrame(e,i))||r++;return n!==t&&(this._atlasesExtend[t]?this._atlasesExtend[t].indexOf(n)<0&&this._atlasesExtend[t].push(n):this._atlasesExtend[t]=[n]),s;},t.prototype.getAtlas=function(t,e){var i=this._atlasDict[t];return i||(i=new o.CCAtlas(this._textureSize,this._textureSize,t,e),this._atlasDict[t]=i,this._calculateTextureMemory()),i;},t.prototype.clearAtlasExtend=function(t,e){if(this._atlasesExtend[t]){var i=this._atlasesExtend[t].indexOf(e);-1!==i&&this._atlasesExtend[t].splice(i,1),this._atlasesExtend[t].length<=0&&delete this._atlasesExtend[t];}},t.prototype.findCanKey=function(t){for(var e='',i=t;''===e;){if(!i){e='?';break;}if(i instanceof cc.Scene){e='?';break;}if(!(i instanceof cc.Node)){e='--';break;}if('root'===i.name){e='--';break;}var o=i.getComponent('CCDAN');o?e=''===o.key?'--':o.key:i=i.parent;}return e;},t.prototype.showDebug=function(){if(null==this._debugNode){if(!this._debugNode||!this._debugNode.isValid){var t=Math.floor(cc.visibleRect.width),e=Math.floor(cc.visibleRect.height);this._debugNode=new cc.Node('DYNAMIC_ATLAS_DEBUG_NODE'),this._debugNode.width=t,this._debugNode.height=e,this._debugNode.x=t/2,this._debugNode.y=e/2,this._debugNode.zIndex=cc.macro.MAX_ZINDEX,this._debugNode.parent=cc.director.getScene(),cc.Camera._setupDebugCamera();var i=this._debugNode.addComponent(cc.ScrollView),o=new cc.Node('CONTENT'),n=o.addComponent(cc.Layout);n.type=cc.Layout.Type.VERTICAL,n.resizeMode=cc.Layout.ResizeMode.CONTAINER,o.width=t,o.height=e,o.scaleX=1,o.scaleY=1,o.anchorY=1,o.parent=this._debugNode,i.content=o;var r=0,s=Object.keys(this._atlasDict).length;for(var a in this._atlasDict){r++;var c=new cc.Node('图集名称'+r);c.x=0,c.y=0;var l=c.addComponent(cc.Label);l.string='\u2014\u2014\u2014\u2014\u2014\u2014\u2014['+a+'] ('+r+'/'+s+')\u2014\u2014\u2014\u2014\u2014\u2014\u2014',l.node.color=cc.Color.WHITE,c.parent=o;var p=new cc.Node('atlas'),u=this._atlasDict[a]._texture,h=new cc.SpriteFrame();h.setTexture(u),p.addComponent(cc.Sprite).spriteFrame=h,h._calculateUV(),p.parent=o,p.scale=t/1024;}}}else this._debugNode&&(this._debugNode.destroy(),this._debugNode.parent=null,this._debugNode=null);},t;}();i.CCDynamicAtlasMgr=a,cc.dynamicAtlasManager.enabled=!0,a.I.enabled=!0,cc.macro.CLEANUP_IMAGE_CACHE=!0,cc.dynamicAtlasManager.maxFrameSize=r,cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.dynamicAtlasManager.maxFrameSize=r,a.I.enabled&&(cc.Assembler2D.prototype.packToDynamicAtlas=function(t,e){if(!(t instanceof cc.Mask)){a.I.packToDynamicAtlas(t,e);var i=t._materials[0];i&&i.getProperty('texture')!==e._texture._texture&&(t._vertsDirty=!0,t._updateMaterial());}});}),cc._RF.pop();},{}],CCFRAMEBLOCK:[function(t,e,i){'use strict';cc._RF.push(e,'d7aa9dhYK1B3JOrAQQBpz/m','CCFRAMEBLOCK');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),r([a,c('常用组件/CCFRAMEBLOCK')],e);}(cc.Component);i.default=l,cc._RF.pop();},{}],CCGIFCache:[function(t,e){'use strict';cc._RF.push(e,'a1092kA/L9BqJa8+QK/adDq','CCGIFCache'),cc._RF.pop();},{}],CCGIF:[function(t,e){'use strict';cc._RF.push(e,'b52fafq995C65mT995zi5/U','CCGIF'),cc._RF.pop();},{}],CCLzw:[function(t,e){'use strict';cc._RF.push(e,'aad16b5SadHA4cRHld5qy1Q','CCLzw'),cc._RF.pop();},{}],CCMSprite:[function(t,e,i){'use strict';cc._RF.push(e,'e53e112b9tFdJDvbByrcmFl','CCMSprite');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('CCBaseSprite'),a=cc._decorator,c=a.ccclass,l=a.menu,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._isCkLR=!0,e;}return n(e,t),Object.defineProperty(e.prototype,'isCkLR',{get:function(){return this._isCkLR;},set:function(t){var e,i,o;(null===(e=this._spriteFrame)||void 0===e?void 0:e._rect)&&(this._isCkLR=t,this._isCkLR?(this.node.width=2*this._spriteFrame._rect.width,this.node.height=this._spriteFrame._rect.height):(this.node.width=2*this._spriteFrame._rect.width,this.node.height=2*this._spriteFrame._rect.height),null===(i=this._assembler)||void 0===i||i.initData(),null===(o=this._assembler)||void 0===o||o.initLocal());},enumerable:!1,configurable:!0}),e.prototype.updateAssembler=function(){var t,e;this._isCkLR?(this.node.width=2*this._spriteFrame._rect.width,this.node.height=this._spriteFrame._rect.height):(this.node.width=2*this._spriteFrame._rect.width,this.node.height=2*this._spriteFrame._rect.height),null===(t=this._assembler)||void 0===t||t.initData(),null===(e=this._assembler)||void 0===e||e.initLocal();},e.prototype.onLoad=function(){var t,e,i,o,n;this.node.off('tzyx-spriteframe-changed',this._onSpriteFrameChanged,this),this.node.on('tzyx-spriteframe-changed',this._onSpriteFrameChanged,this),(null===(t=this._spriteFrame)||void 0===t?void 0:t._rect)&&(this._isCkLR?this.node._contentSize.width!==2*this._spriteFrame._rect.width&&(this.node.width=2*this._spriteFrame._rect.width,this.node.height=this._spriteFrame._rect.height,null===(e=this._assembler)||void 0===e||e.initData(),null===(i=this._assembler)||void 0===i||i.initLocal()):this.node._contentSize.width===2*this._spriteFrame._rect.width&&this.node._contentSize.height===2*this._spriteFrame._rect.height||(this.node.width=2*this._spriteFrame._rect.width,this.node.height=2*this._spriteFrame._rect.height,null===(o=this._assembler)||void 0===o||o.initData(),null===(n=this._assembler)||void 0===n||n.initLocal()));},e.prototype.onDestroy=function(){this.node.off('tzyx-spriteframe-changed',this._onSpriteFrameChanged,this);},e.prototype._onSpriteFrameChanged=function(){var t;(null===(t=this._spriteFrame)||void 0===t?void 0:t._rect)&&(this._isCkLR?(this.node.width=2*this._spriteFrame._rect.width,this.node.height=this._spriteFrame._rect.height):(this.node.width=2*this._spriteFrame._rect.width,this.node.height=2*this._spriteFrame._rect.height));},r([p(cc.Boolean)],e.prototype,'_isCkLR',void 0),r([p(cc.Boolean)],e.prototype,'isCkLR',null),r([c,l('常用组件/CCMSprite')],e);}(s.default);i.default=u,cc._RF.pop();},{}],CCMask:[function(t,e){'use strict';cc._RF.push(e,'c92aaeNgHhDKbljKMvNaR3u','CCMask');var i=cc.Mask.prototype.onDestroy;cc.Mask.prototype.onDestroy=function(){this._spriteFrame&&cc.isValid(this._spriteFrame)?(this._spriteFrame.off('load',this.setVertsDirty,this),this._spriteFrame=null,i.call(this)):((null==this?void 0:this._super)&&(null==this||this._super()),(null==this?void 0:this._removeGraphics)&&(null==this||this._removeGraphics()));},cc._RF.pop();},{}],CCNodeActivator:[function(t,e){'use strict';cc._RF.push(e,'8de0cSQDBZEQrYIwUQmbk30','CCNodeActivator'),console.log('CC_EDITOR=',!1),cc.game.on(cc.game.EVENT_ENGINE_INITED,function(){cc.director._nodeActivator||console.error('_nodeActivator=======1= ',cc.director._nodeActivator),cc.director._nodeActivator&&!cc.director._nodeActivator.destroyComp&&console.error('_nodeActivator=======2= ',cc.director._nodeActivator.destroyComp);var t=cc.director._nodeActivator.destroyComp;cc.director._nodeActivator.destroyComp=function(e){e.onDestroy&&!(e._objFlags&cc.Object.Flags.IsOnLoadCalled)&&e.node&&e.node.parent&&e.onDestroy(),t.apply(this,arguments);};}),cc._RF.pop();},{}],CCNode:[function(t,e){'use strict';cc._RF.push(e,'8d24cRAapVAAIBou4lZHqLf','CCNode');var i=cc.mat4(),o=new cc.Vec3();cc.Node.prototype._hitTest=function(t,e){var o,n=new cc.Vec3(),r=new cc.Vec3(),s=this._contentSize.width,a=this._contentSize.height,c=n,l=r,p=cc.Camera.findCamera(this);p?p.getScreenToWorldPoint(t,c):c.set(t),this._updateWorldMatrix();var u=null===(o=null==e?void 0:e._node)||void 0===o?void 0:o._clkscalestate,h=cc.Mat4.clone(this._worldMatrix);if(u||(h.m0>0&&(h.m0=1),h.m5>0&&(h.m5=1)),!cc.Mat4.invert(i,h))return!1;cc.Vec2.transformMat4(l,c,i),l.x+=this._anchorPoint.x*s,l.y+=this._anchorPoint.y*a;var d=!1;if(l.x>=0&&l.y>=0&&l.x<=s&&l.y<=a&&(d=!0,e&&e.mask))for(var f=e.mask,y=this,_=f?f.length:0,g=0,m=0;y&&m<_;++g,y=y.parent){var v=f[m];if(g===v.index){if(y!==v.node){f.length=m;break;}var b=y.getComponent(cc.Mask);if(b&&b._enabled&&!b._hitTest(c)){d=!1;break;}m++;}else if(g>v.index){f.length=m;break;}}return d;},cc.Node.prototype.convertToNodeSpaceAR=function(t,e){return this._updateWorldMatrix(),cc.Mat4.invert(i,this._worldMatrix),t instanceof cc.Vec2?(e=e||new cc.Vec2(),cc.Vec2.transformMat4(e,t,i)):(e=e||new cc.Vec3(),cc.Vec3.transformMat4(e,t,i));},cc.Node.prototype.getWorldVec2=function(){this._updateWorldMatrix();var t=this._worldMatrix;return cc.v2(t.m12,t.m13);},cc.Node.prototype.convertToNodeSpace=function(t){this._updateWorldMatrix(),cc.Mat4.invert(i,this._worldMatrix);var e=new cc.Vec2();return cc.Vec2.transformMat4(e,t,i),e.x+=this._anchorPoint.x*this._contentSize.width,e.y+=this._anchorPoint.y*this._contentSize.height,e;},cc.Node.prototype.getNodeToParentTransform=function(t){t||(t=cc.AffineTransform.identity()),this._updateLocalMatrix();var e=this._contentSize;return o.x=-this._anchorPoint.x*e.width,o.y=-this._anchorPoint.y*e.height,cc.Mat4.copy(i,this._matrix),cc.Mat4.transform(i,i,o),cc.AffineTransform.fromMat4(t,i);},cc.Node.prototype.getNodeToWorldTransform=function(t){t||(t=cc.AffineTransform.identity()),this._updateWorldMatrix();var e=this._contentSize;return o.x=-this._anchorPoint.x*e.width,o.y=-this._anchorPoint.y*e.height,cc.Mat4.copy(i,this._worldMatrix),cc.Mat4.transform(i,i,o),cc.AffineTransform.fromMat4(t,i);},cc.Node.prototype.getParentToNodeTransform=function(t){return t||(t=cc.AffineTransform.identity()),this._updateLocalMatrix(),cc.Mat4.invert(i,this._matrix),cc.AffineTransform.fromMat4(t,i);},cc.Node.prototype.getWorldToNodeTransform=function(t){return t||(t=cc.AffineTransform.identity()),this._updateWorldMatrix(),cc.Mat4.invert(i,this._worldMatrix),cc.AffineTransform.fromMat4(t,i);};var n=cc.Node.prototype._removeComponent;function r(t){var e;return'function'==typeof t?e=(e=t.prototype&&t.prototype.__classname__||t.name).replace('.','_'):'string'==typeof t&&(e=t),e;}cc.Node.prototype._removeComponent=function(t){var e=r(t);n.call(this,t),e&&(this['$'+e]=null);},cc.Node.prototype.find||(cc.Node.prototype.find=function(t){return cc.find(t,this);}),cc.Node.prototype.getCom||(cc.Node.prototype.getCom=function(t){var e=r(t);if(e){if((!this['$'+e]||this['$'+e].flagDestory)&&(this['$'+e]=null,this._components)){var i=this.getComponent(t);i&&(this['$'+e]=i);}return this['$'+e];}}),cc._RF.pop();},{}],CCObject:[function(t,e,i){'use strict';cc._RF.push(e,'f0c7daXeZRAB5ir9gMM/1A5','CCObject'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('CCResMgr'),n=cc.Object.prototype._destroyImmediate;cc.Object.prototype._destroyImmediate=function(){1&this._objFlags||(r(this),n.apply(this));};var r=function(t){if(t instanceof cc.Node)t._prefab&&t._prefab.asset&&t._prefab.root===t&&(t._prefab.asset.refCount>0&&t._prefab.asset.decRef(),t._prefab.asset=null);else if(t instanceof cc.Sprite)t.decRef();else if(t instanceof cc.Label){if(t.font){var e=t.font._spriteFrame;if(e&&t._frameUuid===e._uuid&&e.refCount>0){o.CCResMgr.DecRef(e);var i=e._texture;i&&i.refCount>0&&o.CCResMgr.DecRef(i);}}}else t instanceof cc.TiledMap&&t.tmxAsset&&o.CCResMgr.DecRef(t.tmxAsset);};cc._RF.pop();},{}],CCPackManager:[function(t,e,i){'use strict';var o;cc._RF.push(e,'46f85jzQHxGF54lR17smm54','CCPackManager'),Object.defineProperty(i,'__esModule',{value:!0}),i.ccPackMgr=void 0,function(t){t[t.Version=0]='Version',t[t.Context=0]='Context',t[t.SharedUuids=1]='SharedUuids',t[t.SharedStrings=2]='SharedStrings',t[t.SharedClasses=3]='SharedClasses',t[t.SharedMasks=4]='SharedMasks',t[t.Instances=5]='Instances',t[t.InstanceTypes=6]='InstanceTypes',t[t.Refs=7]='Refs',t[t.DependObjs=8]='DependObjs',t[t.DependKeys=9]='DependKeys',t[t.DependUuidIndices=10]='DependUuidIndices',t[t.ARRAY_LENGTH=11]='ARRAY_LENGTH';}(o||(o={}));var n=function(){function t(){this._turnOn=!1,this._resCollect=!1,this._resTotal=0;}return Object.defineProperty(t.prototype,'turnOn',{get:function(){return this._turnOn;},set:function(t){this._turnOn=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'resCollect',{get:function(){return this._resCollect;},set:function(t){this._resCollect=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'resTotal',{get:function(){return this._resTotal;},set:function(t){this._resTotal=t;},enumerable:!1,configurable:!0}),t;}();i.ccPackMgr=new n();var r=(new(function(){function t(){this._count=0,this._map=cc.js.createMap(!0),this._count=0;}return Object.defineProperty(t.prototype,'count',{get:function(){return this._count;},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){t in this._map||this._count++,this._map[t]=e;},t.prototype.get=function(t){var e=this._map[t],i=null;return e&&e.length&&(i=[],e.forEach(function(t,e){switch(e){case o.Context:i[e]=1===t?1:cc.instantiate(t);break;case o.Instances:t.length?i[e]=JSON.parse(JSON.stringify(t)):i[e]=t;break;case o.Refs:case o.DependObjs:case o.DependKeys:case o.DependUuidIndices:t.length?i[e]=t.concat():i[e]=t;break;default:i[e]=t;}})),i;},t.prototype.has=function(t){return t in this._map;},t.prototype.remove=function(t){var e=this._map[t];return t in this._map&&(delete this._map[t],this._count--),e;},t.prototype.clear=function(){0!==this._count&&(this._map=cc.js.createMap(!0),this._count=0);},t.prototype.destroy=function(){this._map=cc.js.createMap(!0);},t;}())(),cc.assetManager.packManager.init,cc.assetManager.packManager.load);cc.assetManager.downloader.download,cc.assetManager.packManager.unpack,new cc.AssetManager.Cache(),cc.assetManager.packManager.load=function(t,e,o){return i.ccPackMgr.turnOn&&i.ccPackMgr.resCollect&&i.ccPackMgr.resTotal++,r.call(this,t,e,o);},cc._RF.pop();},{}],CCProfiler:[function(t,e,i){'use strict';cc._RF.push(e,'c20fdQgbLdEyLQGdZ8FL27z','CCProfiler'),Object.defineProperty(i,'__esModule',{value:!0});var o;i.default=function(){},cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){if(t.keyCode===cc.macro.KEY.c){if(!o){var e=Object.keys(cc.game._persistRootNodes);if(o=cc.game._persistRootNodes[e[0]]){var i=o._children;i[1].x=350;var n=i[0].getComponent(cc.Label),r=i[1].getComponent(cc.Label);n.fontSize=30,r.fontSize=30,n.lineHeight=30,r.lineHeight=30;var s=new cc.Color(255,0,0,255),a=new cc.Color(0,0,255,255);n.node.color=s,r.node.color=a;}}o&&(38===t.keyCode&&(o.y+=20),40===t.keyCode&&(o.y-=20),37===t.keyCode&&(o.x-=20),39===t.keyCode&&(o.x+=20));}},this),cc._RF.pop();},{}],CCRenderFlow:[function(t,e){'use strict';cc._RF.push(e,'d1aeeOO/05A6axdrkUpbSXI','CCRenderFlow');var i=cc.RenderFlow.prototype._updateRenderData;cc.RenderFlow.prototype._updateRenderData=function(t){t._renderComponent&&i.call(this,t);},cc._RF.pop();},{}],CCResMD5:[function(t,e,i){'use strict';cc._RF.push(e,'54736azx65KHb8I7wvTalHH','CCResMD5'),Object.defineProperty(i,'__esModule',{value:!0}),i.CCResMD5=void 0;var o=function(){function t(){this.resHash=cc.js.createMap(!0);}return Object.defineProperty(t,'I',{get:function(){return this._i||(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.LoadResHashFile=function(t,e,i){e?(t=t+'/resmd5_'+e+'.json',this._LoadResHashFile(t,i)):i();},t.prototype._LoadResHashFile=function(t,e){var i=this;cc.assetManager.loadRemote(t,function(o,n){o?setTimeout(function(){i._LoadResHashFile(t,e);},100):(i.resHash=n.json,e());});},t.GetKey=function(t){var e,i,o,n,r,s,a,c;t=this.md5_Utf8Encode(t);var l=this.md5_ConvertToWordArray(t);r=1732584193,s=4023233417,a=2562383102,c=271733878;for(var p=0;p<l.length;p+=16)e=r,i=s,o=a,n=c,r=this.md5_FF(r,s,a,c,l[p+0],7,3614090360),c=this.md5_FF(c,r,s,a,l[p+1],12,3905402710),a=this.md5_FF(a,c,r,s,l[p+2],17,606105819),s=this.md5_FF(s,a,c,r,l[p+3],22,3250441966),r=this.md5_FF(r,s,a,c,l[p+4],7,4118548399),c=this.md5_FF(c,r,s,a,l[p+5],12,1200080426),a=this.md5_FF(a,c,r,s,l[p+6],17,2821735955),s=this.md5_FF(s,a,c,r,l[p+7],22,4249261313),r=this.md5_FF(r,s,a,c,l[p+8],7,1770035416),c=this.md5_FF(c,r,s,a,l[p+9],12,2336552879),a=this.md5_FF(a,c,r,s,l[p+10],17,4294925233),s=this.md5_FF(s,a,c,r,l[p+11],22,2304563134),r=this.md5_FF(r,s,a,c,l[p+12],7,1804603682),c=this.md5_FF(c,r,s,a,l[p+13],12,4254626195),a=this.md5_FF(a,c,r,s,l[p+14],17,2792965006),s=this.md5_FF(s,a,c,r,l[p+15],22,1236535329),r=this.md5_GG(r,s,a,c,l[p+1],5,4129170786),c=this.md5_GG(c,r,s,a,l[p+6],9,3225465664),a=this.md5_GG(a,c,r,s,l[p+11],14,643717713),s=this.md5_GG(s,a,c,r,l[p+0],20,3921069994),r=this.md5_GG(r,s,a,c,l[p+5],5,3593408605),c=this.md5_GG(c,r,s,a,l[p+10],9,38016083),a=this.md5_GG(a,c,r,s,l[p+15],14,3634488961),s=this.md5_GG(s,a,c,r,l[p+4],20,3889429448),r=this.md5_GG(r,s,a,c,l[p+9],5,568446438),c=this.md5_GG(c,r,s,a,l[p+14],9,3275163606),a=this.md5_GG(a,c,r,s,l[p+3],14,4107603335),s=this.md5_GG(s,a,c,r,l[p+8],20,1163531501),r=this.md5_GG(r,s,a,c,l[p+13],5,2850285829),c=this.md5_GG(c,r,s,a,l[p+2],9,4243563512),a=this.md5_GG(a,c,r,s,l[p+7],14,1735328473),s=this.md5_GG(s,a,c,r,l[p+12],20,2368359562),r=this.md5_HH(r,s,a,c,l[p+5],4,4294588738),c=this.md5_HH(c,r,s,a,l[p+8],11,2272392833),a=this.md5_HH(a,c,r,s,l[p+11],16,1839030562),s=this.md5_HH(s,a,c,r,l[p+14],23,4259657740),r=this.md5_HH(r,s,a,c,l[p+1],4,2763975236),c=this.md5_HH(c,r,s,a,l[p+4],11,1272893353),a=this.md5_HH(a,c,r,s,l[p+7],16,4139469664),s=this.md5_HH(s,a,c,r,l[p+10],23,3200236656),r=this.md5_HH(r,s,a,c,l[p+13],4,681279174),c=this.md5_HH(c,r,s,a,l[p+0],11,3936430074),a=this.md5_HH(a,c,r,s,l[p+3],16,3572445317),s=this.md5_HH(s,a,c,r,l[p+6],23,76029189),r=this.md5_HH(r,s,a,c,l[p+9],4,3654602809),c=this.md5_HH(c,r,s,a,l[p+12],11,3873151461),a=this.md5_HH(a,c,r,s,l[p+15],16,530742520),s=this.md5_HH(s,a,c,r,l[p+2],23,3299628645),r=this.md5_II(r,s,a,c,l[p+0],6,4096336452),c=this.md5_II(c,r,s,a,l[p+7],10,1126891415),a=this.md5_II(a,c,r,s,l[p+14],15,2878612391),s=this.md5_II(s,a,c,r,l[p+5],21,4237533241),r=this.md5_II(r,s,a,c,l[p+12],6,1700485571),c=this.md5_II(c,r,s,a,l[p+3],10,2399980690),a=this.md5_II(a,c,r,s,l[p+10],15,4293915773),s=this.md5_II(s,a,c,r,l[p+1],21,2240044497),r=this.md5_II(r,s,a,c,l[p+8],6,1873313359),c=this.md5_II(c,r,s,a,l[p+15],10,4264355552),a=this.md5_II(a,c,r,s,l[p+6],15,2734768916),s=this.md5_II(s,a,c,r,l[p+13],21,1309151649),r=this.md5_II(r,s,a,c,l[p+4],6,4149444226),c=this.md5_II(c,r,s,a,l[p+11],10,3174756917),a=this.md5_II(a,c,r,s,l[p+2],15,718787259),s=this.md5_II(s,a,c,r,l[p+9],21,3951481745),r=this.md5_AddUnsigned(r,e),s=this.md5_AddUnsigned(s,i),a=this.md5_AddUnsigned(a,o),c=this.md5_AddUnsigned(c,n);return(this.md5_WordToHex(s)+this.md5_WordToHex(a)).toLowerCase();},t.GetHashUrl=function(t){return window.ResMD5?window.ResMD5.rename(t):t;},t.getResURLT2=function(e){if(!t.ResPaths)return null;if(t.ResPaths[0],!e||0===e.length)return null;var i=t.GetKey(e),o=i.substr(i.length-4,4),n=parseInt(o,16)%5;return t.ResPaths[n];},t.getHash=function(e){return t._i.resHash[e];},t.md5_RotateLeft=function(t,e){return t<<e|t>>>32-e;},t.md5_AddUnsigned=function(t,e){var i=2147483648&t,o=2147483648&e,n=1073741824&t,r=1073741824&e,s=(1073741823&t)+(1073741823&e);return n&r?2147483648^s^i^o:n|r?1073741824&s?3221225472^s^i^o:1073741824^s^i^o:s^i^o;},t.md5_F=function(t,e,i){return t&e|~t&i;},t.md5_G=function(t,e,i){return t&i|e&~i;},t.md5_H=function(t,e,i){return t^e^i;},t.md5_I=function(t,e,i){return e^(t|~i);},t.md5_FF=function(t,e,i,o,n,r,s){return t=this.md5_AddUnsigned(t,this.md5_AddUnsigned(this.md5_AddUnsigned(this.md5_F(e,i,o),n),s)),this.md5_AddUnsigned(this.md5_RotateLeft(t,r),e);},t.md5_GG=function(t,e,i,o,n,r,s){return t=this.md5_AddUnsigned(t,this.md5_AddUnsigned(this.md5_AddUnsigned(this.md5_G(e,i,o),n),s)),this.md5_AddUnsigned(this.md5_RotateLeft(t,r),e);},t.md5_HH=function(t,e,i,o,n,r,s){return t=this.md5_AddUnsigned(t,this.md5_AddUnsigned(this.md5_AddUnsigned(this.md5_H(e,i,o),n),s)),this.md5_AddUnsigned(this.md5_RotateLeft(t,r),e);},t.md5_II=function(t,e,i,o,n,r,s){return t=this.md5_AddUnsigned(t,this.md5_AddUnsigned(this.md5_AddUnsigned(this.md5_I(e,i,o),n),s)),this.md5_AddUnsigned(this.md5_RotateLeft(t,r),e);},t.md5_ConvertToWordArray=function(t){for(var e=t.length,i=e+8,o=16*((i-i%64)/64+1),n=Array(o-1),r=0,s=0;s<e;)r=s%4*8,n[(s-s%4)/4]|=t.charCodeAt(s)<<r,s++;return r=s%4*8,n[(s-s%4)/4]|=128<<r,n[o-2]=e<<3,n[o-1]=e>>>29,n;},t.md5_WordToHex=function(t){for(var e='',i='',o=0;o<=3;o++)e+=(i='0'+(t>>>8*o&255).toString(16)).substr(i.length-2,2);return e;},t.md5_Utf8Encode=function(t){t=t.replace(/\r\n/g,'\n');for(var e='',i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128));}return e;},t.ResUrl='',t.ResPaths=null,t;}();i.CCResMD5=o,cc._RF.pop();},{}],CCResMgr:[function(t,e,i){'use strict';cc._RF.push(e,'ca1caInnvhPdrk8gJR7xbmg','CCResMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.CCResMgr=void 0;var o=function(){function t(){}return t.SetRemoveTextureCallback=function(t,e){this._TCallback=t,this._TTarget=e;},t.SetRemoveSpriteFrameCallback=function(t,e){this._SCallback=t,this._STarget=e;},t.RemoveTextureCallback=function(t){this._TCallback&&this._TTarget&&this._TCallback.call(this._TTarget,t);},t.RemoveSpriteFrameCallback=function(t){this._SCallback&&this._STarget&&this._SCallback.call(this._STarget,t);},t.SetDecRefCallback=function(t,e){this._ACallback=t,this._ATarget=e;},t.DecRef=function(t,e){this._ACallback&&this._ATarget&&this._ACallback.call(this._ATarget,t,e);},t;}();i.CCResMgr=o,cc._RF.pop();},{}],CCScrollView:[function(t,e){'use strict';cc._RF.push(e,'5822fNNHmJEZqKpzb2zHqBm','CCScrollView'),cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){cc.ScrollView.prototype._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?0.05:1;this._autoScrollAccumulatedTime+=t*(1/ i);var o,n=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=n,n=(o-=1)*o*o*o*o+1);var r=this._autoScrollStartPosition.add(this._autoScrollTargetDelta.mul(n)),s=Math.abs(n-1)<=0.0001;if(Math.abs(n-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent('scroll-ended-with-threshold'),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var a=r.sub(this._autoScrollBrakingStartPosition);e&&(a=a.mul(i)),r=this._autoScrollBrakingStartPosition.add(a);}else{var c=r.sub(this.getContentPosition()),l=this._getHowMuchOutOfBoundary(c);l.fuzzyEquals(cc.v2(0,0),0.0001)||(r=r.add(l),s=!0);}s&&(this._autoScrolling=!1);var p=r.sub(this.getContentPosition()),u=100;p.x=Math.floor(p.x*u)/u,p.y=Math.floor(p.y*u)/u,Math.abs(p.x)<=2&&Math.abs(p.y)<=2&&!e&&(this._autoScrolling=!1),this._moveContent(this._clampDelta(p),s),this._dispatchEvent('scrolling'),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent('scroll-ended'));},cc.ScrollView.prototype._handleMoveLogic=function(t){var e=t.getDelta();this._processDeltaMove(e.mul(2));};var t=cc.ScrollView.prototype._onTouchBegan;cc.ScrollView.prototype._onTouchBegan=function(e,i){this._isPlayAnimIng&&this._ListViewCtx&&this._isPlayAnimIng.call(this._ListViewCtx)||t.call(this,e,i);};var e=cc.ScrollView.prototype._onTouchMoved;cc.ScrollView.prototype._onTouchMoved=function(t,i){this._isPlayAnimIng&&this._ListViewCtx&&this._isPlayAnimIng.call(this._ListViewCtx)||e.call(this,t,i);};var i=cc.ScrollView.prototype._onTouchEnded;cc.ScrollView.prototype._onTouchEnded=function(t,e){this._isPlayAnimIng&&this._ListViewCtx&&this._isPlayAnimIng.call(this._ListViewCtx)||i.call(this,t,e);};var o=cc.ScrollView.prototype._onTouchCancelled;cc.ScrollView.prototype._onTouchCancelled=function(t,e){this._isPlayAnimIng&&this._ListViewCtx&&this._isPlayAnimIng.call(this._ListViewCtx)||o.call(this,t,e);};}),cc._RF.pop();},{}],CCSprite:[function(t,e,i){'use strict';cc._RF.push(e,'6db9fDyUR5J9rOdIg8vm2WV','CCSprite'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('CCResMgr');cc.Sprite.prototype.addRef=function(){var t,e=null==this?void 0:this._spriteFrame;if((null===(t=null==e?void 0:e._uuid)||void 0===t?void 0:t.length)>0){this._frameUuid=e._uuid,e.addRef();var i=e.getTexture();null==i||i.addRef();}return this;},cc.Sprite.prototype.decRef=function(t){var e,i=null==this?void 0:this._spriteFrame;if((null===(e=null==i?void 0:i._uuid)||void 0===e?void 0:e.length)>0&&this._frameUuid===i._uuid){i.refCount>0?o.CCResMgr.DecRef(i,t):console.warn('spriteFrame.refCount is 0\uFF0C检查是否有地方对一个资源重复减少引用计数=',i._uuid);var n=i.getTexture();n&&(n.refCount>0?o.CCResMgr.DecRef(n,t):console.warn('spriteFrame.texture.refCount is 0\uFF0C检查是否有地方对一个资源重复减少引用计数=',i.getTexture()._uuid));}return this;},Object.defineProperty(cc.Sprite.prototype,'spriteFrame',{set:function(t){var e=this._spriteFrame;e!==t&&(this.decRef(),this._spriteFrame=t,this.addRef(),this._applySpriteFrame(e));}});var n=cc.Sprite.prototype.onEnable;cc.Sprite.prototype.onEnable=function(){n.call(this),this._validateRender();},cc.SpriteFrame.prototype.ensureLoadTexture=function(){this._texture&&!this._texture.loaded&&this._texture._texture&&(this._refreshTexture(this._texture),cc.assetManager.postLoadNative(this._texture));},cc._RF.pop();},{}],CCTween:[function(t,e){'use strict';cc._RF.push(e,'942f84vrpJLh6SZ2ckzYTAm','CCTween'),cc.ActionInterval.prototype.step=function(t){if(!this.paused){this._firstTick&&!this._goto?(this._firstTick=!1,this._elapsed=0):this._elapsed+=t;var e=this._elapsed/(this._duration>1.192092896e-7?this._duration:1.192092896e-7);e=e<1?e:1,this.update(e>0?e:0),this._repeatMethod&&this._timesForRepeat>1&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration));}},cc.Tween.prototype.pause=function(){this._finalAction.paused=!0;},cc.Tween.prototype.resume=function(){this._finalAction.paused=!1;},cc.Tween.prototype.speed=function(t){this._finalAction._speedMethod=!0,this._finalAction._speed=t;},cc.Tween.prototype.duration=function(){return this._finalAction._duration;},cc.Tween.prototype.elapsed=function(){return this._finalAction._elapsed;},cc.Tween.prototype.goto=function(t){this._finalAction._goto=!0,this._finalAction._elapsed=t;},cc._RF.pop();},{}],'CData.d':[function(t,e){'use strict';cc._RF.push(e,'5e029W9Jg9JQJFxJBVfK9mu','CData.d'),cc._RF.pop();},{}],CanvasAdapter:[function(t,e,i){'use strict';cc._RF.push(e,'197dcCMOLRBfqqL0s0mY2Hk','CanvasAdapter');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.CanvasAdapter=void 0;var s=t('EventClient'),a=t('AppEventConst'),c=cc._decorator,l=c.ccclass,p=c.property,u=c.menu,h=c.executeInEditMode,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._designSize=new cc.Size(cc.view.getDesignResolutionSize()),e._adaptMaxSize=new cc.Size(cc.view.getDesignResolutionSize()),e;}var i;return n(e,t),i=e,Object.defineProperty(e.prototype,'designSize',{get:function(){return this._designSize;},set:function(){cc.warn('[CanvasAdapter] 设计宽高只能在项目设置中修改');},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'adaptMaxSize',{get:function(){return this._adaptMaxSize;},set:function(t){t.width<this.designSize.width&&(cc.warn('[CanvasAdapter] 最大适配宽度不能小于设计宽度'),t.width=this.designSize.width),t.height<this.designSize.height&&(cc.warn('[CanvasAdapter] 最大适配高度不能小于设计高度'),t.height=this.designSize.height),this._adaptMaxSize=t,this.onResize();},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this;i.I=this,this.onResize(),cc.view.setResizeCallback(function(){return t.onResize();});},e.prototype.onResize=function(){var t=cc.view.getFrameSize(),e=t.width,i=t.height,o=this.designSize.width,n=this.designSize.height,r=e,c=i;e/ i>o/n?(c=n,r=Math.min(Math.max(c*e/ i,o),this.adaptMaxSize.width)):(r=o,c=Math.min(Math.max(r*i/e,n),this.adaptMaxSize.height)),this.node.setContentSize(r,c),cc.view.setDesignResolutionSize(r,c,cc.ResolutionPolicy.SHOW_ALL),s.EventClient.I.emit(a.AppEvent.WindowViewChange,e,i);},e.prototype.onChangeDesignResolution=function(t){this._designSize=new cc.Size(t.width,t.height);},e.I=null,r([p],e.prototype,'_designSize',void 0),r([p({displayName:'\uD83D\uDD12设计大小'})],e.prototype,'designSize',null),r([p],e.prototype,'_adaptMaxSize',void 0),r([p({displayName:'适配最大宽高',tooltip:'推荐使用960x1680'})],e.prototype,'adaptMaxSize',null),i=r([l,u('适配/CanvasAdapter'),h],e);}(cc.Component);i.CanvasAdapter=d,cc._RF.pop();},{}],CenterPoint:[function(t,e,i){'use strict';cc._RF.push(e,'49c0827//RH4ZxUBX9mqBlk','CenterPoint');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0});var r=t('SATCircleCld'),s=t('SATConst'),a=t('EntityConst'),c=function(t){function e(e){var i=t.call(this)||this;return i._SATCircle=null,i._colliderR=10,i._toPos=cc.Vec2.ZERO,i._joystickAngle=0,i._isStop=!0,i.x=e.initX,i.y=e.initY,i.name='CenterPoint',i.init(e.initX,e.initY),i;}return n(e,t),Object.defineProperty(e.prototype,'isStop',{get:function(){return this._isStop;},set:function(t){this._isStop=t;},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e){var i=this.addComponent(cc.Label);i.fontSize=24,i.string='o',this._SATCircle=this.addComponent(r.default),this._SATCircle.init(cc.SATVec2(t,e),this._colliderR,{massLev:4,type:s.SATColliderType.CenterPoint}),this.width=10,this.height=10;},e.prototype.onJoystickMove=function(t){this._isStop=!1,this._joystickAngle=t;},e.prototype.onJoystickStop=function(){this._isStop=!0;},e.prototype.mainUpdate=function(){if(this.isStop);else{var t=this._joystickAngle*Math.PI/180,e=cc.v2(Math.cos(t)*a.MOVESPEED,Math.sin(t)*a.MOVESPEED),i=cc.v2(this.x+e.x,this.y+e.y),o=cc.v2(Math.cos(t)*a.CENTER_R,Math.sin(t)*a.CENTER_R);this._toPos=cc.v2(this.x+o.x,this.y+o.y),this._SATCircle.setPostion(i);}},e.prototype.toPos=function(){return this._toPos;},e;}(cc.Node);i.default=c,cc._RF.pop();},{}],CfgBase:[function(t,e,i){'use strict';cc._RF.push(e,'519ccdlnOhNC4aCHZM7aj3i','CfgBase');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.CfgBase=void 0;var r=t('ConfigMgr'),s=function(){function t(t){var e=this;this._keyCount=0,this.keysByIndex=[],this.keysLength=0,this.length=0,this._nestedMap=cc.js.createMap(!0),this.cfgInfo=t,t.key.split('>').forEach(function(t){t&&e._keyCount++;});}return Object.defineProperty(t.prototype,'keyCount',{get:function(){return this._keyCount;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'nestedMap',{get:function(){return this._nestedMap;},enumerable:!1,configurable:!0}),t.prototype.walkDatas=function(e,i,o){if(void 0===o&&(o=0),null!=e&&e.length>0){var n=this.cfgInfo,s=n.name;t.Debug&&console.time('配置表\u3010'+s+'\u3011_walk耗时');var a=n.key,c=[];null!=a&&(c=a.split('>'));for(var l=[],p=null,u=null,h=[],d=i,f=function(t){var i=e[t];if(y.length++,d.walk(i,t),!n.ex||n.ex.deleteSource,p='',u=null,l.length=0,h.length=0,c.forEach(function(t){p='',t.length>0&&null!=(u=i[t]||r.ConfigMgr.I.getDefaultValue(s,t))&&(p=u),l.push(p);}),1===l.length)y.keysByIndex.push(l[0]),y.keysLength++;else for(var o=y.nestedMap,a=!1,f=0,_=l.length;f<_;f++){a=f+1>=_;var g=l[f],m=l[f+1];o||(o='number'==typeof g||g.length>0?cc.js.createMap(!0):[]),a?'number'==typeof g||g.length>0?o[g]=t:''===g&&o.push(t):(o[g]||(o[g]=''===m?[]:cc.js.createMap(!0)),o=o[g]);}d.walks(s,i,t),n.ex&&d.walkEx(n,i,t);},y=this,_=o,g=e.length;_<g;_++)f(_);t.Debug&&console.timeEnd('配置表\u3010'+s+'\u3011_walk耗时');}},t.prototype.parseArgs=function(t,e){e=e||t.length;var i=t[0],o=[];return e<=this.keyCount?('string'==typeof i?1===(o=this.getArgsByKey(i)).length&&(o=t.concat()):o=t.concat(),t.splice(0,this.keyCount)):o=t.splice(0,this.keyCount),o;},t.prototype.getArgsByKey=function(t){return t.split('>');},t.prototype.getValueByIndex=function(t,e){if(0===t||t)return this._getValueByIndex(this.cfgInfo.name,t,e);},t.prototype._getValueByIndex=function(t,e,i){var o=this.getData(e,t);return i&&'string'==typeof i&&i?o[i]:o;},t.prototype.getValueByKey=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t.length;if(0!==i){var o=this.parseArgs(t,i),r=this.getDataByKey.apply(this,n(o));if(r){var s=t[0];return s&&'string'==typeof s?r[s]:r;}}},t.prototype.getDataByKey=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0];if(i||0===i){if(this.keysLength>0){var o=this.keysByIndex.indexOf(i);return this.getData(o);}var n=void 0;'string'!=typeof i||t[1]||(t=this.getArgsByKey(i));for(var r=0,s=t.length;r<s;r++)if(null==(n=null==n?this._nestedMap[t[r]]:n[t[r]]))return;return'number'==typeof n?this.getData(n):n;}},t.prototype.getData=function(t,e){return r.ConfigMgr.I.getOneData(e||this.cfgInfo.name,t);},t.prototype.clearFlag=function(){this.keysByIndex.length=0,this.keysLength=0,this.length=0,this._nestedMap=cc.js.createMap(!0);},t.Debug=!1,t;}();i.CfgBase=s,cc._RF.pop();},{}],ColorFull:[function(t,e,i){'use strict';cc._RF.push(e,'b2fe8MajZdIM4lapd39G6aE','ColorFull');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('UtilColor'),a=t('GradientColorIpad'),c=(t('RenderImg'),cc._decorator),l=c.ccclass,p=c.executeInEditMode,u=c.requireComponent,h=(c.executionOrder,c.property),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=a.GradientType.FULL,e._colors=[],e._isColorFull=!0,e._isDarkBg=!1,e._isPreView=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'type',{get:function(){return this._type;},set:function(t){this._type=t,this.updateColor();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'colors',{get:function(){return this._colors;},set:function(t){this._colors=t,this.updateColor();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'colorsHex',{get:function(){return this.colors.map(function(t){return s.UtilColor.Rgb2Hex(t);});},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isColorFull',{get:function(){return this._isColorFull;},set:function(t){this._isColorFull=t,this.updateColor();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isDarkBg',{get:function(){return this._isDarkBg;},set:function(t){this._isDarkBg=t,this.updateColor();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isPreView',{get:function(){return this._isPreView;},set:function(t){this._isPreView=t,this.updateColor();},enumerable:!1,configurable:!0}),e.prototype.updateColor=function(){},r([h({type:cc.Enum(a.GradientType)})],e.prototype,'_type',void 0),r([h({type:a.GradientType})],e.prototype,'type',null),r([h({type:[cc.Color]})],e.prototype,'_colors',void 0),r([h({type:[cc.Color]})],e.prototype,'colors',null),r([h(cc.Boolean)],e.prototype,'_isColorFull',void 0),r([h(cc.Boolean)],e.prototype,'isColorFull',null),r([h(cc.Boolean)],e.prototype,'_isDarkBg',void 0),r([h(cc.Boolean)],e.prototype,'isDarkBg',null),r([h(cc.Boolean)],e.prototype,'_isPreView',void 0),r([h(cc.Boolean)],e.prototype,'isPreView',null),r([l,u(cc.Label),p],e);}(cc.Component);i.default=d,cc._RF.pop();},{}],CompUtil:[function(t,e,i){'use strict';cc._RF.push(e,'dd0811jvVdOPKJ/KSCF43LM','CompUtil'),Object.defineProperty(i,'__esModule',{value:!0}),i.CompUtil=void 0;var o=t('UtilColorFull'),n=t('UtilColor'),r=function(){function t(){}return t.createLabelUuid=function(t){var e,i=t.string,n=t.node.color._val,r=t.fontSize,s=t.fontFamily;(null===(e=t._N$file)||void 0===e?void 0:e._fontFamily)&&(s=t._N$file._fontFamily);var a=t.enableWrapText?1:0,c=t.enableItalic?1:0,l=t.enableBold?1:0,p=t.enableUnderline?1:0,u=t.overflow,h=t.getComponent(cc.LabelOutline);return i+'_'+(h?h.color.toString():'')+'_'+r+'_'+s+'_'+a+'_'+c+'_'+n+'_'+l+'_'+p+'_'+u+'_'+t[''+o.UtilColorFull.ISCOLORFULL];},t.createRichTextUuid=function(t){return t.string+'_'+t.fontSize+'_'+t.node.color.toHEX(n.UtilColor.ColorFormat)+'_'+t.maxWidth;},t;}();i.CompUtil=r,cc._RF.pop();},{}],ConfigConst:[function(t,e,i){'use strict';cc._RF.push(e,'1962dbvWoxN7LSilK/g4tDY','ConfigConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.LoadLocalCfg=i.ConfigConst=void 0;var o=t('ResConst'),n=t('ResMgr'),r=t('Config'),s=function(t,e,i,o){var n=cc.js.createMap(!0);return n.name=t,n.key=e,n.indexerName=i,n.ex=o,n;};i.LoadLocalCfg=function(t){i.ConfigConst||(i.ConfigConst=cc.js.createMap(!0)),n.ResMgr.I.loadLocal('cfg/config',cc.JsonAsset,function(e,o){if(e)i.LoadLocalCfg(t);else{cc.resources.release('cfg/config');var n=o.json;for(var a in n){var c=[a].concat(n[a]);i.ConfigConst[a]=s.apply(null,c);}r.Config.Type=i.ConfigConst,t&&t();}},{bundle:o.EBundleType.resources});},cc._RF.pop();},{}],ConfigIndexer:[function(t,e,i){'use strict';cc._RF.push(e,'3e296bVP2tMob21euHZXKmF','ConfigIndexer');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.ConfigIndexer=void 0;var r,s=t('ConfigMgr'),a=t('CfgBase'),c=t('UtilsMain'),l=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.CfgBaseData={},this.TableName='',this.Walked=!1,this.maxIntervals=cc.js.createMap(!0);for(var i=0,o=t.length;i<o;i++){var n=t[i];this.TableName||(this.TableName=n.name),this.CfgBaseData[n.name]=new a.CfgBase(n);}}return Object.defineProperty(t.prototype,'CfgmI',{get:function(){return r||(r=s.ConfigMgr.I),r;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'keysLength',{get:function(){return this._walks(),this.CfgBaseData[this.TableName].keysLength;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'length',{get:function(){return this._walks(),this.CfgBaseData[this.TableName].length;},enumerable:!1,configurable:!0}),t.prototype.walks=function(){},t.prototype.walk=function(){},t.prototype.walkEx=function(t,e,i){t.ex.intervalKey&&this.walkInterval(t.name,t.ex,e,i);},t.prototype.getKeys=function(t){return void 0===t&&(t=this.TableName),this._walks(),this.CfgBaseData[t].keysByIndex;},t.prototype._walks=function(){if(!this.Walked)for(var t in this.CfgBaseData){var e=this.CfgmI.getDatas(t);(null==e?void 0:e.length)>0&&(this.Walked=!0,this.CfgBaseData[t].walkDatas(e,this));}},t.prototype.getValueByIndex=function(t,e){return this._getValueByIndex(this.TableName,t,e);},t.prototype._getValueByIndex=function(t,e,i){if(0===e||e){this._walks();var o=this.CfgBaseData[t];return null==o?void 0:o.getValueByIndex(e,i);}},t.prototype.getValueByKey=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getValueByKey.apply(this,n([this.TableName],t));},t.prototype._getValueByKey=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=e.length;if(0!==o){this._walks();var r=this.CfgBaseData[t];return r?r.getValueByKey.apply(r,n(e)):void 0;}},t.prototype.getData=function(t){return this._walks(),this.CfgmI.getOneData(this.TableName,t);},t.prototype.walkInterval=function(t,e,i,o){var n;if(n=e.types&&e.types.length?this.maxIntervals[t]=this.maxIntervals[t]||cc.js.createMap(!0):this.maxIntervals[t]=this.maxIntervals[t]||[],e.types){for(var r=void 0,s=0,a=e.types.length;s<a;s++)r=i[e.types[s]],s+1===e.types.length?n[r]=n[r]||[]:n[r]=n[r]||cc.js.createMap(!0),n=n[r];n.push({v:i[e.intervalKey],index:o});}else n.push(i[e.intervalKey]);},t.prototype.getIntervalIndex=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getIntervalIndex.apply(this,n([this.TableName],t));},t.prototype._getIntervalIndex=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._walks();var o=this.maxIntervals[t],n=this.CfgBaseData[t].cfgInfo;if(n.ex&&n.ex.intervalKey){if(n.ex.types){for(var r=0,s=n.ex.types.length;r<s;r++)o&&(o=o[e.shift()]);if(!o)return-1;var a=c.UtilsMainArr.LowerBound(o,{v:e[e.length-1]},function(t){return t.v||0;}),l=o;return null===l[a]||void 0===l[a]?this.length:l[a].index;}var p=o;return c.UtilsMainArr.LowerBound(p,e[e.length-1]);}return-1;},t.prototype.getIntervalData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.getIntervalIndex.apply(this,n(t));if(!(i<0)){var o=this.getValueByIndex(i);if(o){var r=this.CfgBaseData[this.TableName].cfgInfo;if(r.ex&&r.ex.intervalKey){var s=o[r.ex.intervalKey],a=t[t.length-1];if(a>s)return;}return o;}}},t.prototype.getIntervalDataByTableName=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this._getIntervalIndex.apply(this,n([t],e));if(!(o<0)){var r=this.getValueByIndex(o);if(r){var s=this.CfgBaseData[t].cfgInfo;if(s.ex&&s.ex.intervalKey){var a=r[s.ex.intervalKey],c=e[e.length-1];if(c>a)return;}return r;}}},t.prototype.getNestedMap=function(){return this._walks(),this.CfgBaseData[this.TableName].nestedMap;},t.prototype.forEach=function(t){this._walks();for(var e=0,i=this.length;e<i;e++)if(!1===t(this.getValueByIndex(e),e))return;},t.prototype.setDynamicDatas=function(t,e,i){void 0===i&&(i='');var o=this.CfgmI.setDynamicDatas(t,e,i);(o.newDatas.length>0||o.hotDatas.length>0)&&(this.Walked=!0,this.CfgBaseData[t].clearFlag(),this.cleanFlag(t),this.CfgBaseData[t].walkDatas(this.CfgmI.CfgData[t],this));},t.prototype.cleanFlag=function(){},t.prototype.getLastData=function(){var t=this.length;return this.getValueByIndex(t-1);},t;}();i.ConfigIndexer=l,cc._RF.pop();},{}],ConfigMgr:[function(t,e,i){'use strict';cc._RF.push(e,'493a0WwPoFCX4TcefJrdQ9Z','ConfigMgr');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0}),i.ConfigMgr=void 0;var r=t('EventClient'),s=t('HttpReq'),a=t('TimerMgr'),c=t('GameApp'),l=t('AppEventConst'),p=t('ConfigConst'),u=t('DataReportConst'),h=function(){function t(t,e){this.v=cc.js.createMap(!0),e&&(this.v=e,this.name=t);}return t.prototype.getValue=function(t){return this.v[t]||d.I.getDefaultValue(this.name,t);},t;}(),d=function(){function t(){this.CfgData=cc.js.createMap(!0),this.jsonData=void 0,this.inited=!1,this.ATTRNUM=20,this.structs=cc.js.createMap(!0);}return Object.defineProperty(t,'I',{get:function(){return this._I||(this._I=new t(),this._I.init()),this._I;},enumerable:!1,configurable:!0}),t.prototype.do=function(){},t.prototype.init=function(){r.EventClient.I.on(l.AppEvent.InitConfigStart,this.onInitConfigStart,this);},t.prototype.onInitConfigStart=function(){console.warn('onInitConfigStart'),r.EventClient.I.off(l.AppEvent.InitConfigStart,this.onInitConfigStart,this),this.loadMergeJson();},t.prototype.initStruct=function(){r.EventClient.I.emit(l.AppEvent.DataReport,u.EDataReportId.CfgLoadSuc);var t=this.jsonData,e=t.d,i=this.transDataView(e);for(var o in(t.d=JSON.parse(i),t.d))this.structs[o]=t.d[o];delete t.d;},t.prototype.getDefaultValue=function(t,e){var i=this.structs[t];if(i)return i[e];},t.prototype.loadMergeJson=function(){this.loadExcel();},t.prototype.loadZipRes=function(t,e,i,o){var n=this,p=c.default.I.ResDirUrl()+t;s.default.I.getMpq(p,function(t){n.getMPQData(t,e,function(){i.call(o),e=null;},n);},function(){console.log(t+'载入失败,50毫秒后重试:'+t);var s=a.default.I.setTimeout(function(){a.default.I.clearTimeout(s),n.loadZipRes(t,e,i,o);},50);r.EventClient.I.emit(l.AppEvent.DataReport,u.EDataReportId.CfgLoadFail);});},t.prototype.getMPQData=function(t,e,i,o){var n;n=t instanceof ArrayBuffer?t:t._buffer;var r=new DataView(n),s=r.getInt16(0);this.parseMPQ(0,s,2,r,n,e,i,o),e=null;},t.prototype.parseMPQ=function(t,e,i,o,n,r,s,a){for(var c=0;c<e;c++){var l={},p=o.getInt16(i);i+=2;var u=new Uint8Array(n,i,p),h=String.fromCharCode.apply(null,u).split('.');i+=p,l.begin=o.getUint32(i),i+=4,l.length=o.getUint32(i),i+=4,l.suffix=h[1],'json'!==l.suffix&&'txt'!==l.suffix||(r[h[0]+'.'+h[1]]=l,l.data=n);}s.call(a),r=null;},t.prototype.loadExcel=function(){var t=this;console.warn('loadExcel');var e={},i=1,o=[],n=function(){if(--i<=0){for(var n in(t.jsonData=cc.js.createMap(!0),e)){var s=e[n],a=n.replace('.json',''),c=o.indexOf(a);c>=0?o.splice(c,1):t.jsonData[n.replace('.json','')]=s;}p.LoadLocalCfg(function(){console.warn('loadExcel------'),t.initStruct(),t.inited=!0,r.EventClient.I.emit(l.AppEvent.InitConfigSuccess),e=null;});}};r.EventClient.I.emit(l.AppEvent.DataReport,u.EDataReportId.CfgStartLoad);for(var s=0;s<i;s++){var a=c.default.I.getConfigUrl(s);this.loadZipRes(a,e,n,this);}},t.prototype.transDataView=function(t){var e=t.data;if(!e)return t;for(var i='',o=Math.ceil(t.length/8192),n=0;n<8192*o;n+=8192){var r=8192;n+8192>t.length&&(r=t.length-n);var s=new Uint8Array(e,t.begin+n,r);i+=String.fromCharCode.apply(null,s);}return decodeURIComponent(escape(i));},t.prototype.initItem=function(t,e){null!=e&&void 0!==e||(e={});var i=this.structs[t];if(i)for(var o in i)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=i[o]);return e;},t.prototype.transJsonData=function(t){var e=this.jsonData[t];if(!e.k||!e.l||'object'!=typeof e.k||'object'!=typeof e.l)return e;var i,o=[],n=e.l,r=e.k;return n.forEach(function(t){for(var e in(i=cc.js.createMap(!0),t))i[r[e]]=t[e];o.push(i);}),o;},t.prototype.getOneData=function(t,e){return this.getDatas(t)[e];},t.prototype.getDataValue=function(t,e,i){var o=this.getDatas(t)[e];if(o&&o[i]&&null!==o[i]&&void 0!==o[i])return o[i];},t.prototype.getDatas=function(t){var e,i,o,r,s=this;if(this.CfgData[t])return this.CfgData[t];if(this.jsonData&&this.jsonData[t]){this.jsonData[t].data&&(this.jsonData[t]=this.transDataView(this.jsonData[t])),'string'==typeof this.jsonData[t]&&(this.jsonData[t]=JSON.parse(this.jsonData[t]));var a=void 0,c=p.ConfigConst[t];return c&&!(null===(e=c.ex)||void 0===e?void 0:e.deleteSource)?(this.cls=(o=this.cls,r=Object.keys(this.structs[t]),o=o||function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e;}(h),r.forEach(function(t){Object.prototype.hasOwnProperty.call(o.prototype,t)||Object.defineProperty(o.prototype,t,{get:function(){return this.getValue(t);}});}),o),a=this.transJsonData(t),this.CfgData[t]=[],a.forEach(function(e){var i=new s.cls(t,e);s.CfgData[t].push(i);})):c&&(a=(null===(i=this.jsonData[t])||void 0===i?void 0:i.t)?this.jsonData[t]:this.transJsonData(t)),delete this.jsonData[t],a;}return-1===t.indexOf('Cfg_Server_')&&(this.structs&&this.structs[t]?console.error('表结构有\uFF0C但是配置表内容没有=',t):console.error('表结构没有\uFF0C配置表内容也没有\uFF0C检查一下表名是否正确=',t)),[];},t.prototype.setDynamicDatas=function(t,e,i){var o=this;if(e){var n=[],r=[],s=[];if(this.CfgData[t]||(this.CfgData[t]=[]),e.forEach(function(e){var r=JSON.parse(e),a=!1;if(o.CfgData[t]){for(var c=i,l=0;l<o.CfgData[t].length;l++)if(i&&r[i]&&r[i]===o.CfgData[t][l][i]){a=!0;break;}a?n.push({key:c,data:r}):s.push(r);}else console.warn(t,'没有该表结构');}),n.length>0&&this.CfgData[t]&&this.CfgData[t].length>0){for(var a=0;a<n.length;a++)for(var c=n[a].key,l=n[a].data,p=0;p<this.CfgData[t].length;p++)if(this.CfgData[t][p][c]===l[c]){this.CfgData[t][p]=l;break;}r=this.CfgData[t];}return s.length>0&&(0===this.CfgData[t].length?this.CfgData[t]=s:this.CfgData[t]=this.CfgData[t].concat(s)),{hotDatas:r,newDatas:s};}return{hotDatas:[],newDatas:[]};},t;}();i.ConfigMgr=d,cc._RF.pop();},{}],Config:[function(t,e,i){'use strict';cc._RF.push(e,'dde4awRv/ZABJ8nVRFQsYep','Config'),Object.defineProperty(i,'__esModule',{value:!0}),i.Config=void 0;var o=t('ConfigConst'),n=t('ConfigIndexer'),r=function(){function t(){}return t.Get=function(e){if(e&&(e.name||e.indexer)){if(e.indexerName&&!e.indexer){var i=cc.js.getClassByName(e.indexerName);e.indexer=i;}return window.Config=t,e.indexer?e.indexer.I:this.getIndexer(e);}console.warn('Config getI error:',e);},t.getIndexer=function(t){var e='_'+t.name;return this[e]?this[e]:(this[e]=new n.ConfigIndexer(t),this[e]);},t.ShowCfgTime=function(){for(var e in t.Type)t.Get(t.Type[e]).getValueByIndex(0);},t.Type=o.ConfigConst,t;}();i.Config=r,cc._RF.pop();},{}],CreateAnimaForSheet:[function(t,e,i){'use strict';cc._RF.push(e,'41d45SoNoFM86W6XVEj2ml6','CreateAnimaForSheet');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.CreateAnimaForSheet=i.RemoveSpriteAtlas=void 0;var s=t('ResMgr'),a=cc._decorator.ccclass;i.RemoveSpriteAtlas=function(t){return!!t&&t.refCount>0&&(s.ResMgr.I.decRef(t),t.isValid&&t.getSpriteFrames()?(t.refCount,!0):(console.log('当前的序列帧已经没有了',t._uuid),!1));};var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteAtlas=cc.js.createMap(!0),e;}return n(e,t),e.prototype.addRef=function(t){var e=t._uuid;this.spriteAtlas[e]||(this.spriteAtlas[e]=t,t.addRef());},e.prototype.decRef=function(){for(var t in this.spriteAtlas){var e=this.spriteAtlas[t];i.RemoveSpriteAtlas(e);}this.spriteAtlas=cc.js.createMap(!0);},e.prototype.onDestroy=function(){var t=this.node.getComponent(cc.Animation);if(cc.isValid(t)){var e=t.getClips();if(t&&e){for(var i=e.length;i>0;){var o=e[0];t.removeClip(o,!0),o.destroy(),i--;}t.currentClip&&(t.currentClip.isValid&&t.currentClip.destroy(),t.currentClip=null);}}this.decRef();},r([a],e);}(cc.Component);i.CreateAnimaForSheet=c,cc._RF.pop();},{}],CreateRoleView:[function(t,e,i){'use strict';cc._RF.push(e,'f130cwozB1HioTl+yd622nC','CreateRoleView');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('AppEventConst'),a=t('EventClient'),c=t('StorageMgr'),l=t('BaseUiView'),p=t('DynamicImage'),u=t('TickTimer'),h=t('MsgToastMgr'),d=t('i18n'),f=t('DataReportConst'),y=t('LoginConst'),_=t('LoginModel'),g=t('UtilClk'),m=t('SpineMain'),v=t('UtilsMain'),b=t('SdkMgr'),C=cc._decorator,S=C.ccclass,w=C.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SexRadio=null,e.BtnGetName=null,e.EditBoxName=null,e.BtnStartGame=null,e.NdAutoStart=null,e.NdMain=null,e.TimerCd=null,e._curSex=1,e.autoStatr=0,e;}return n(e,t),e.prototype.init=function(){this.addEvent(),this.initUI();var t=c.StorageMgr.I.getValue('musicEnable'),e=c.StorageMgr.I.getValue('MusicVol');(t||void 0===t)&&Number(e||0.5);var i=v.UtilsMainTime.NowSec(),o=i+80;this.TimerCd.onTickEndHandler=this.isAutoStart.bind(this),this.TimerCd.tick(o,i,{format:'%ss'+d.i18n.tt(d.Lang.com_second)});},e.prototype.addEvent=function(){a.EventClient.I.on(s.AppEvent.ResultRoleNick,this.onResultRoleNick,this);},e.prototype.delEvent=function(){a.EventClient.I.off(s.AppEvent.ResultRoleNick,this.onResultRoleNick,this);},e.prototype.initUI=function(){var t=this;g.UtilClk.Click(this.BtnStartGame,function(){t.startGame();},this,{unRepeat:!0,time:2000}),g.UtilClk.Click(this.BtnGetName,function(){t.getRandomNick();},this);var e=this.SexRadio.node.getChildByName('Toggle1').children[0],i=this.SexRadio.node.getChildByName('Toggle2').children[0];g.UtilClk.Click(e,function(){t.sexSetChose(1);},this),g.UtilClk.Click(i,function(){t.sexSetChose(2);},this),this.sexSetChose(1),this.NdAutoStart.active=!0;},e.prototype.startGame=function(){var t=this;a.EventClient.I.emit(s.AppEvent.DataReport,f.EDataReportId.ClickCreateRole);var e=this.EditBoxName.string;if(e){var i=v.UtilsMainStr.IsChinese(e),o=v.UtilsMainStr.IsEnglish(e);if(i||o){var n={role_id:0,content:e,scene:1,server_id:0,server_name:0,role_nick:''};b.SdkMgr.I.sdkMsgCheck(n,function(){a.EventClient.I.emit(s.AppEvent.ReqCreateRole,e,t.autoStatr);});}else 1===this.autoStatr?this.getRandomNick():h.default.Show(d.i18n.tt(d.Lang.login_nick_err));}else h.default.Show(d.i18n.tt(d.Lang.login_nick_null));},e.prototype.getRandomNick=function(){a.EventClient.I.emit(s.AppEvent.DataReport,f.EDataReportId.GetRandomNick);var t=this._curSex;_.default.I.sex=this._curSex,a.EventClient.I.emit(s.AppEvent.ReqRoleNick,t);},e.prototype.onResultRoleNick=function(t){a.EventClient.I.emit(s.AppEvent.DataReport,f.EDataReportId.GetRandomNickSuc),t&&(this.EditBoxName.string=t,1===this.autoStatr&&a.EventClient.I.emit(s.AppEvent.ReqCreateRole,t,this.autoStatr));},e.prototype.sexSetChose=function(t){var e=this.SexRadio.node.getChildByName('Toggle1'),i=this.SexRadio.node.getChildByName('Toggle2');e.children[0].active=1!==t,i.children[0].active=2!==t,e.getChildByName('Select').active=1===t,i.getChildByName('Select').active=2===t,this.NdMain.node.destroyAllChildren(),this.NdMain.node.removeAllChildren();var o=1===t?y.CREATE_ROLE_SPINE_ID.Man:y.CREATE_ROLE_SPINE_ID.Women,n='action/spine/role/action_'+o+'/action_'+o,r=new m.default({path:n,actionName:'stand',loop:!0});this.NdMain.node.addChild(r),a.EventClient.I.emit(s.AppEvent.DataReport,f.EDataReportId.CreateModeSuc),this._curSex=t,_.default.I.sex=this._curSex,this.getRandomNick();},e.prototype.isAutoStart=function(){this.autoStatr=1,this.NdAutoStart.active=!1,this.startGame();},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},r([w(cc.ToggleContainer)],e.prototype,'SexRadio',void 0),r([w(cc.Node)],e.prototype,'BtnGetName',void 0),r([w(cc.EditBox)],e.prototype,'EditBoxName',void 0),r([w(cc.Node)],e.prototype,'BtnStartGame',void 0),r([w(cc.Node)],e.prototype,'NdAutoStart',void 0),r([w(p.DynamicImage)],e.prototype,'NdMain',void 0),r([w(u.TickTimer)],e.prototype,'TimerCd',void 0),r([S],e);}(l.default);i.default=R,cc._RF.pop();},{}],DataReportConst:[function(t,e,i){'use strict';cc._RF.push(e,'bd917DaWBJBEZI2WyOXIEt2','DataReportConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.EDataReportId=void 0,function(t){t[t.AppRun=501]='AppRun',t[t.LocalCfg=502]='LocalCfg',t[t.SDKInit=503]='SDKInit',t[t.Bugly=504]='Bugly',t[t.ServerVersionSuc=505]='ServerVersionSuc',t[t.ServerVersionFail=506]='ServerVersionFail',t[t.ReServerCfg=507]='ReServerCfg',t[t.GameAppVersion=508]='GameAppVersion',t[t.GameResVersion=509]='GameResVersion',t[t.ShowLoadingUI=510]='ShowLoadingUI',t[t.NeedDownloadRes=511]='NeedDownloadRes',t[t.ResDownloadFinish=512]='ResDownloadFinish',t[t.LoginViewShow=13]='LoginViewShow',t[t.ClickRegisterArgument=14]='ClickRegisterArgument',t[t.ShowRegisterArgumentUI=15]='ShowRegisterArgumentUI',t[t.ShowRegisterArgumentCancel=16]='ShowRegisterArgumentCancel',t[t.ShowRegisterArgumentSure=17]='ShowRegisterArgumentSure',t[t.LoadingClose=518]='LoadingClose',t[t.NetUrl=519]='NetUrl',t[t.NetUrlSuc=520]='NetUrlSuc',t[t.NetUrlFail=521]='NetUrlFail',t[t.NetUrlNull=522]='NetUrlNull',t[t.ServerList=23]='ServerList',t[t.ServerListSuc=24]='ServerListSuc',t[t.ServerListFail=25]='ServerListFail',t[t.ServerListErr=26]='ServerListErr',t[t.NoticeList=27]='NoticeList',t[t.NoticeListSuc=28]='NoticeListSuc',t[t.NoticeListFail=29]='NoticeListFail',t[t.ClickSelectServer=30]='ClickSelectServer',t[t.ClickSelectLeft=31]='ClickSelectLeft',t[t.ClickSelectRight=32]='ClickSelectRight',t[t.ClickStart=33]='ClickStart',t[t.OpenCreateRole=534]='OpenCreateRole',t[t.GetRandomNick=535]='GetRandomNick',t[t.GetRandomNickFail=536]='GetRandomNickFail',t[t.GetRandomNickSuc=537]='GetRandomNickSuc',t[t.CreateModeSuc=538]='CreateModeSuc',t[t.ClickCreateRole=539]='ClickCreateRole',t[t.ClickCreateRoleNetErr=540]='ClickCreateRoleNetErr',t[t.ClickCreateRoleDataErr=541]='ClickCreateRoleDataErr',t[t.CreateRoleSuc=542]='CreateRoleSuc',t[t.SendLogin=43]='SendLogin',t[t.SendLoginFail=44]='SendLoginFail',t[t.SendLoginSuc=45]='SendLoginSuc',t[t.LoginEnd=546]='LoginEnd',t[t.LoginSuc=547]='LoginSuc',t[t.LoginFail=548]='LoginFail',t[t.BeginEnter=549]='BeginEnter',t[t.EnterSuc=550]='EnterSuc',t[t.LoadingBg=551]='LoadingBg',t[t.LoadingBg1=552]='LoadingBg1',t[t.CfgStartLoad=553]='CfgStartLoad',t[t.CfgLoadSuc=554]='CfgLoadSuc',t[t.CfgLoadFail=555]='CfgLoadFail',t[t.SubpackStartLoad=556]='SubpackStartLoad',t[t.SubpackLoadSuc=557]='SubpackLoadSuc',t[t.SubpackLoadFail=558]='SubpackLoadFail',t[t.SocketSuc=559]='SocketSuc',t[t.SocketFail=560]='SocketFail',t[t.SocketClose=561]='SocketClose',t[t.SocketReConnect=562]='SocketReConnect',t[t.StarGame1=563]='StarGame1',t[t.ClickGetEquip=564]='ClickGetEquip',t[t.ClickStateGameLevel=565]='ClickStateGameLevel',t[t.SubpackTTFLoadSuc=566]='SubpackTTFLoadSuc',t[t.LoadSubScript=567]='LoadSubScript',t[t.MapLodEnd=568]='MapLodEnd',t[t.LoadStartGameBtttleBg=569]='LoadStartGameBtttleBg',t[t.LoadStartGameBtttleFile=570]='LoadStartGameBtttleFile',t[t.MAIN_LAYER=571]='MAIN_LAYER',t[t.MainUIInit=572]='MainUIInit',t[t.MapBlurBg=573]='MapBlurBg',t[t.MapInit=574]='MapInit',t[t.UILobbySuc=575]='UILobbySuc',t[t.ErrLogReport=999]='ErrLogReport';}(i.EDataReportId||(i.EDataReportId={})),cc._RF.pop();},{}],DataReportMgr:[function(t,e,i){'use strict';cc._RF.push(e,'0db56tKcLtJcK3WaJaFRj6d','DataReportMgr');var o=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s;};Object.defineProperty(i,'__esModule',{value:!0});var n=t('AppEventConst'),r=t('EventClient'),s=t('UtilUrl'),a=t('HttpReq'),c=t('GameApp'),l=t('LoginModel'),p=t('DataReportConst'),u=t('UtilsMain'),h=t('UtilPaltform'),d=cc._decorator.ccclass,f=function(){function t(){}var e;return e=t,Object.defineProperty(t,'I',{get:function(){return this._I||(this._I=new e()),this._I;},enumerable:!1,configurable:!0}),t.prototype.init=function(){r.EventClient.I.on(n.AppEvent.DataReport,this.dateReport,this);},t.prototype.dateReport=function(t,e){if(t)if(t!==p.EDataReportId.ErrLogReport){console.log('数据上报id=',t);var i=this.getReportData(t);console.log('数据上报参数',i);var o=c.default.I.GameCfgGlobal.DataReport_Url+'/r/button1';o=s.UtilUrl.replaceHttpHead(o),a.default.I.post(o,i,function(t){console.log('请求数据上报返回',t);});}else this.reportErrLog(t,e);},t.prototype.reportErrLog=function(t,e){if(c.default.I.GameCfgGlobal.ErrLogReportUrl.length<=0)console.log('未配置err上报地址');else if(console.warn('errReport',e),c.default.I.GameCfgGlobal.IsOpenErrReport){var i=c.default.I.GameCfgGlobal.ErrLogReportUrl+'/r/client_log';i=s.UtilUrl.replaceHttpHead(i);var o={server_id:l.default.I.selServerId||0,user_id:l.default.I.selUserId||0,data:JSON.stringify(e)};a.default.I.post(i,o,function(t){console.log('错误日志上报返回',t);});}else console.log('未开启错误日志上报');},t.prototype.dateReportMulti=function(){},t.prototype.getReportData=function(t){var e=t;'number'==typeof t&&h.UtilPaltform.isWeChatGame&&t<500&&(e=500+t);var i=l.default.I;return{uuid:i.pf_uuid,game_uuid:i.game_uuid,imei:i.imei,user_id:i.selUserId||0,channel_id:i.channel_id,id:e,time:u.UtilsMainTime.NowSec()};},t.prototype.destroy=function(){r.EventClient.I.off(n.AppEvent.DataReport,this.dateReport,this);},t._I=null,e=o([d],t);}();i.default=f,cc._RF.pop();},{}],DefMap:[function(t,e,i){'use strict';cc._RF.push(e,'6d2a356+rtD85JRhETBt7+j','DefMap');var ac=window.extend_func(this,'__extends__decorate__values');var n=ac.__extends;var r=ac.__decorate;var s=ac.__values;Object.defineProperty(i,'__esModule',{value:!0});var a=t('QuadtreeMgr'),c=t('SATConst'),l=t('EntityConst'),p=t('EntityMgr'),u=t('RoleMgr'),h=t('UtilMap'),d=t('MapMode'),f=t('PathFindingAgent'),y=t('RoadPointLayer'),_=cc._decorator,g=_.ccclass,m=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tiledMap=null,e.mapMove=null,e.mapCamrea=null,e.NdMonster=null,e.roadPointLayer=null,e.buildeNodePool=new cc.NodePool(),e.rigidBodyNodePool=new cc.NodePool(),e.nodesByLayer=cc.js.createMap(!0),e.buildObjByTl={},e.lastCheckPos=null,e.lastCameraPos=cc.v2(0,0),e.showHalfSize=cc.Size.ZERO,e._layerBuilding=null,e._layerCell=null,e._inited=!1,e.spriteFrameByGid={},e._prevStaticMap={},e;}return n(e,t),Object.defineProperty(e.prototype,'layerBuilding',{get:function(){return this._layerBuilding||(this._layerBuilding=this.tiledMap.getObjectGroup('staticLayer')),this._layerBuilding;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'layerCell',{get:function(){return this._layerCell||(this._layerCell=this.tiledMap.getLayer('cell')),this._layerCell;},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.node.width/4*3,e=this.node.height/4*3;this.showHalfSize.width=t,this.showHalfSize.height=e,p.default.I.setParent(this.mapMove),this.init();},e.prototype.start=function(){window.closeSplashFunc&&window.closeSplashFunc();},e.prototype.init=function(){this._inited=!0,this.initMap(),this.initMonster();},e.prototype.initBuildObj=function(){var t,e,i=this.layerBuilding.getObjects();try{for(var o=s(i),n=o.next();!n.done;n=o.next()){var r=n.value;this.buildObjByTl[r.tlPos]=this.buildObjByTl[r.tlPos]||[],this.buildObjByTl[r.tlPos].push(r);}}catch(a){t={error:a};}finally{try{n&&!n.done&&(e=o.return)&&e.call(o);}finally{if(t)throw t.error;}}this.layerBuilding.enabled=!1;},e.prototype.initStatic=function(){var t=this,e=cc.mat4(),i=this.tiledMap.getObjectGroup('blockObjectLayer');i.getObjects().forEach(function(o){var n=o.x-i.node.width/2,r=o.y-i.node.height/2;p.default.I.worldPosNode.x=n,p.default.I.worldPosNode.y=r;var s=~~n+'_'+~~r,l=t.getObjectPoints(o),u=p.default.I.worldPosNode.getWorldMatrix(e),h=new c.SATTreeWorldPos();h.type=2,h.matrix=u,h.worldPos=cc.v2(u.m12,u.m13),h.points=l,h.key=s,h.nodePos=[~~n,~~r],p.default.I.staticDataMap[s]=h,a.default.I.updateCollider(h),a.default.I.insert(h);});},e.prototype.getObjectPoints=function(t){var e=[],i=t.points||t.polylinePoints;return i?i.forEach(function(i){var o=(t.offset.x-i.x)/h.default.tileSize.height,n=(+t.offset.y+ +i.y)/h.default.tileSize.height,r=h.default.tileSizeHalf.width*(h.default.gridSize.height+o-n),s=h.default.tileSizeHalf.height*(h.default.gridSize.width+h.default.gridSize.height-o-n);r=t.x-r,s=t.y-s,e.push(cc.SATVec2(r,s));}):e=[cc.SATVec2(0,0),cc.SATVec2(0,-t.height),cc.SATVec2(t.width,0),cc.SATVec2(0,t.height)],e;},e.prototype.initMonster=function(){var t=this.tiledMap.getObjectGroup('monsterLayer');t.getObjects().forEach(function(e){var i=Math.floor(e.width/50),o=Math.floor(e.height/50),n=e.x-t.node.width/2,r=e.y-t.node.height/2;p.default.I.createMonsterGround(l.MonsterType[e.pointID],Math.max(i,o),cc.v2(n,r));});},e.prototype.getBulidObjByTl=function(t,e){return'number'==typeof t&&(t=cc.v2(t,e)),this.buildObjByTl[t.x+'_'+t.y];},e.prototype.initMap=function(){this.initMapBaseData(),this.initBuildObj(),this.initStatic();},e.prototype.initMapBaseData=function(){h.default.mapCamra=this.mapCamrea,h.default.initMapSize(this.tiledMap.getMapSize(),this.tiledMap.getTileSize()),a.default.I.initTree(this.tiledMap.node.getBoundingBox());var t=[];this.layerCell&&(t=this.layerCell._tiles);var e={type:d.MapMode.angle45,cellWidth:h.default.tileSize.width,cellHeight:h.default.tileSize.height,row:h.default.gridSize.width,col:h.default.gridSize.height,roadDataArr:t};f.default.I.init(e),this.roadPointLayer.initRoadPointInfo(f.default.I.mapData);},e.prototype.onMapMouseDown=function(t){var e=t.getLocation(),i=this.node.convertToNodeSpaceAR(e),o=u.default.I.centerPos,n=i.add(o);console.warn('onMapMouseDown:',e.x,e.y,'clickPos=',i.x,i.y,'pos=',n.x,n.y),this.movePlayer(n,null,null);},e.prototype.movePlayer=function(t,e,i,o){void 0===o&&(o=null);var n=u.default.I.getMainRole(),r=cc.v2(n.x,n.y),s=t,a=f.default.I.findPath(r,s);n.walkByRoad(a,e,o),i&&i.call(o,a);},e.prototype.delRigidBodyNode=function(t){this.rigidBodyNodePool.put(t);},e.prototype.delBuildNode=function(t){for(var e=0,i=t.length;e<i;e++)this.buildeNodePool.put(t[e]);},e.prototype.newBuildNode=function(){var t;return this.buildeNodePool.size()>0?t=this.buildeNodePool.get():(t=new cc.Node()).addComponent(cc.Sprite),t;},e.prototype.getGidSpriteFrame=function(t){var e,i;if(this.spriteFrameByGid[t])return this.spriteFrameByGid[t];var o=this.tiledMap._texGrids;return(null===(i=null===(e=o[t])||void 0===e?void 0:e.tileset)||void 0===i?void 0:i.sourceImage)?(this.spriteFrameByGid[t]=new cc.SpriteFrame(o[t].tileset.sourceImage),this.spriteFrameByGid[t]):void console.error('缺失资源,gid=',t);},e.prototype.updateBuildeNode=function(t,e){for(var i,o,n=this.getBulidObjByTl(e),r=0,s=t.length;r<s;r++){var a=t[r],c=e.x+'_'+e.y,l=this.tiledMap._texGrids,p=this.layerBuilding,u=n[r];(null===(o=null===(i=l[u.gid])||void 0===i?void 0:i.tileset)||void 0===o?void 0:o.sourceImage)?a.getComponent(cc.Sprite).spriteFrame=this.getGidSpriteFrame(u.gid):console.error('缺失资源,gid=',u.gid);var h=u.x-p.node.width/2,d=u.y-p.node.height/2;a.x=h,a.y=d,a.zIndex=-(a.y+10050),a.name='building_'+c+'_'+r,a.anchorX=0.5,a.anchorY=0.5,a.attr({tl:cc.v2(e.x,e.y)});}},e.prototype.getTargetCenterTl=function(t){return h.default.getTargetTlPos(t);},e.prototype.lateUpdate=function(){if(this._inited){var t=this.mapCamrea.node.getPosition();if(t.x=Math.round(t.x),t.y=Math.round(t.y),this.lastCameraPos.x!==t.x||this.lastCameraPos.y!==t.y){if(this.lastCameraPos=t,this.lastCheckPos){var e=Math.abs(Math.abs(this.lastCheckPos.x)-Math.abs(t.x)),i=Math.abs(Math.abs(this.lastCheckPos.y)-Math.abs(t.y));if(e<h.default.tileSizeHalf.width&&i<h.default.tileSizeHalf.height)return;}this.lastCheckPos=t;var o=this.getTargetCenterTl(cc.v2(-t.x,-t.y));this.checkCanShowBuildNode(o),this.checkMonsterNodeShow(),this.checkStaticNodeShow();}}},e.prototype.checkStaticNodeShow=function(){var t={x:0,y:0,width:0,height:0},e=this.mapCamrea.node.getWorldVec2();t.x=e.x,t.y=e.y,t.width=cc.winSize.width+200,t.height=cc.winSize.height+200;for(var i=a.default.I.retrieve(t),o=this._prevStaticMap,n={},r=0;r<i.length;r++)(c=p.default.I.staticDataMap[i[r].key])&&!c.Node?c.Node=p.default.I.createStaticNode(c.key,c.points,c.nodePos[0],c.nodePos[1]):c.Node.active=!0,o[i[r].key]&&delete o[i[r].key],n[i[r].key]=1;for(var s in o){var c;(c=p.default.I.staticDataMap[s])&&c.Node&&(c.Node.active=!1);}this._prevStaticMap=n;},e.prototype.checkMonsterNodeShow=function(){var t=p.default.I.monsterPixMap;for(var e in t)if(t[e].length)for(var i=0;i<t[e].length;i++){var o=t[e][i];h.default.checkNodeInCamera(o.WolrdPos)?o.MonsterNode?o.MonsterNode.active=!0:o.MonsterNode=p.default.I.createMonster(o.Type,o.RealPos):o.MonsterNode&&(o.MonsterNode.active=!1,o.MonsterNode.destroy(),o.MonsterNode=null);}},e.prototype.checkCanShowBuildNode=function(t){for(var e,i=this,o=[this.layerBuilding,this.tiledMap.getObjectGroup('blockObjectLayer')],n=this.getCurShowTileds(o,t),r=[],s=cc.js.createMap(!0),a='',c='',l=0,p=o.length;l<p;l++)if(e=n[a=o[l].name]){s=this.nodesByLayer[a]=this.nodesByLayer[a]||cc.js.createMap(!0);for(var u=0,h=e.dels.length;u<h;u++)(null==(r=s[c=e.dels[u]])?void 0:r.length)>0&&(this.delBuildNode(r),s[c]=null,delete s[c]);for(u=0,h=e.adds.length;u<h;u++){r=s[c=e.adds[u]]=s[c]||[];for(var d=c.split('_'),f=0,y=this.getBulidObjByTl(parseInt(d[0]),parseInt(d[1])).length;f<y;f++)r.push(this.newBuildNode());this.updateBuildeNode(r,cc.v2(parseInt(d[0]),parseInt(d[1]))),r.forEach(function(t){t.active=!0,t.parent||(t.parent=i.mapMove);});}}},e.prototype.getVaildGid=function(t){if(t)for(var e=0,i=t.length;e<i;e++)if(t[e].gid>0)return t[e].gid;return 0;},e.prototype.getCurShowTileds=function(t,e){for(var i,o,n=[],r='',s=cc.js.createMap(!0),a=h.default.tileToOpengl(e),c=this.showHalfSize.width,l=this.showHalfSize.height,p=cc.v2(a.x-c,a.y-l),u=cc.v2(a.x+c,a.y+l),d=cc.v2(a.x-c,a.y+l),f=cc.v2(a.x+c,a.y-l),y=Math.min(p.x,u.x),_=Math.max(p.x,u.x),g=Math.min(p.y,u.y),m=Math.max(d.y,f.y),v=[],b=y;b<_;b+=h.default.tileSizeHalf.width)for(var C=g;C<m;C+=h.default.tileSizeHalf.height)if(r=(o=h.default.openglToTile(cc.v2(b,C))).x+'_'+o.y,!(v.indexOf(r)>=0)){v.push(r);for(var S=0,w=t.length;S<w;S++){var R=t[S];if(s[R.name]||(s[R.name]={adds:[],noChanges:[],dels:[]},s[R.name].dels=this.nodesByLayer[R.name]?Object.keys(this.nodesByLayer[R.name]):[]),(R instanceof cc.TiledLayer?R.getTileGIDAt(o.x,o.y):this.getVaildGid(this.getBulidObjByTl(o.x,o.y)))>0){var I=s[R.name],M=null===(i=I.dels)||void 0===i?void 0:i.indexOf(r);M>=0?(I.dels.splice(M,1),I.noChanges.push(r)):(n.push(o),I.adds.push(r));}}}return s;},e.prototype.onDestroy=function(){},r([m(cc.TiledMap)],e.prototype,'tiledMap',void 0),r([m(cc.Node)],e.prototype,'mapMove',void 0),r([m(cc.Camera)],e.prototype,'mapCamrea',void 0),r([m(cc.Node)],e.prototype,'NdMonster',void 0),r([m(y.default)],e.prototype,'roadPointLayer',void 0),r([g],e);}(cc.Component);i.default=v,cc._RF.pop();},{}],DynamicImage:[function(t,e,i){'use strict';cc._RF.push(e,'6a9b49Kmi1HSZvRlR3aeti6','DynamicImage');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.DynamicImage=i.ImageType=void 0;var s,a=t('BaseCmp'),c=t('ResConst'),l=t('UtilsMain'),p=cc._decorator,u=p.ccclass,h=p.property,d=p.requireComponent,f=p.menu;(function(t){t[t.UNKNOWN=0]='UNKNOWN',t[t.PNG=1]='PNG',t[t.JPG=2]='JPG';}(s=i.ImageType||(i.ImageType={})));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._path='',e._type=s.UNKNOWN,e.remote=!1,e.border=!1,e._preview=!1,e.bundle=null,e._sprite=null,e._startLoad=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'path',{get:function(){return this._path;},set:function(t){this._path=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'type',{get:function(){return this._type;},set:function(t){this._type=t,this._type===s.UNKNOWN||this.remote||this.loadImage(this.path,t,this.remote,this.bundle);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'preview',{get:function(){return this._preview;},set:function(){this._preview=!1,this._preview?(this._startLoad=!0,this.loadImage(this.path,this.type,this.remote,this.bundle,this.border)):this.sprite.spriteFrame=null;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'sprite',{get:function(){return this._sprite||(this._sprite=this.getComponent(cc.Sprite)),this._sprite;},enumerable:!1,configurable:!0}),e.prototype.start=function(){t.prototype.start.call(this),this.bundle=c.EBundleType.subpack,this.path.length>0&&(this._startLoad=!0,this.loadImage(this.path,this.type,this.remote,this.bundle,this.border)),this._preview=!1;},e.prototype.loadImage=function(t,e,i,o,n,r){if(void 0===o&&(o=c.EBundleType.subpack),void 0===n&&(n=!1),void 0===r&&(r=null),t!==this.path||this._startLoad||!this.sprite.spriteFrame)if(this._startLoad=!1,this._path=t,this._type=e,this.remote=i,this.bundle=o,this.border=n,this.path&&0!==this.path.length)if(i){var s=void 0;if(1===e)s=c.AssetType.SpriteFrame;else{if(2!==e)return void cc.warn('DynamicImage.loadImage: assetType unknown');s=c.AssetType.SpriteFrame_jpg;}if(n){var a=this.setBorder(this._path);this.sprite.type=cc.Sprite.Type.SLICED,l.UtilsMainNode.LoadSpriteFrameRemote(this.sprite,t,s,r||this.loadComplete.bind(this),a);}else l.UtilsMainNode.LoadSpriteFrameRemote(this.sprite,t,s,r||this.loadComplete.bind(this));}else n?(a=this.setBorder(this._path),this.sprite.type=cc.Sprite.Type.SLICED,l.UtilsMainNode.LoadSpriteFrame(this.sprite,t,r||this.loadComplete.bind(this),this.bundle,a)):l.UtilsMainNode.LoadSpriteFrame(this.sprite,t,r||this.loadComplete.bind(this),this.bundle);else cc.warn('DynamicImage.loadImage: path is null');},e.prototype.setBorder=function(t){var e=t.split('@9')[1],i=JSON.parse(l.UtilsMainStr.replaceAll(e,'_',','));if(i.length<4)return console.warn('DynamicImage.loadImage: 九宫格图片名字解析出错,使用默认九宫格数据',e[1]),[0,0,0,0];var o=[];return i.forEach(function(t,e){o[e]=parseInt(t);}),o;},e.prototype.loadComplete=function(){this.preview;},e.prototype.loadSpriteFrameInEditor=function(){this.type!==s.UNKNOWN&&this.type;},e.prototype.pngPath=function(t){this.loadImage(t,s.PNG,!0);},e.prototype.jpgPath=function(t){this.loadImage(t,s.JPG,!0);},r([h],e.prototype,'_path',void 0),r([h({displayName:'图片路径',tooltip:'路径不需要带文件后缀'})],e.prototype,'path',null),r([h],e.prototype,'_type',void 0),r([h({type:cc.Enum(s),displayName:'图片类型'})],e.prototype,'type',null),r([h({displayName:'远程'})],e.prototype,'remote',void 0),r([h({displayName:'九宫格'})],e.prototype,'border',void 0),r([h],e.prototype,'_preview',void 0),r([h({displayName:'预览',tooltip:'只在编辑器模式生效',visible:function(){return this._preview=!1,!1;}})],e.prototype,'preview',null),r([h({displayName:'资源包',tooltip:'资源所在的资源包',visible:function(){return this.bundle=c.EBundleType.subpack,!1;}})],e.prototype,'bundle',void 0),r([u,d(cc.Sprite),f('常用组件/DynamicImage')],e);}(a.default);i.DynamicImage=y,cc._RF.pop();},{}],1:[function(t,e){'use strict';e.exports=function(t,e){for(var i=new Array(arguments.length-1),o=0,n=2,r=!0;n<arguments.length;)i[o++]=arguments[n++];return new Promise(function(n,s){i[o]=function(t){if(r)if(r=!1,t)s(t);else{for(var e=new Array(arguments.length-1),i=0;i<e.length;)e[i++]=arguments[i];n.apply(null,e);}};try{t.apply(e||null,i);}catch(a){r&&(r=!1,s(a));}});};},{}],2:[function(t,e,i){'use strict';var o=i;o.length=function(t){var e=t.length;if(!e)return 0;for(var i=0;--e%4>1&&'='===t.charAt(e);)++i;return Math.ceil(3*t.length)/4-i;};for(var n=new Array(64),r=new Array(123),s=0;s<64;)r[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;o.encode=function(t,e,i){for(var o,r=null,s=[],a=0,c=0;e<i;){var l=t[e++];switch(c){case 0:s[a++]=n[l>>2],o=(3&l)<<4,c=1;break;case 1:s[a++]=n[o|l>>4],o=(15&l)<<2,c=2;break;case 2:s[a++]=n[o|l>>6],s[a++]=n[63&l],c=0;}a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),a=0);}return c&&(s[a++]=n[o],s[a++]=61,1===c&&(s[a++]=61)),r?(a&&r.push(String.fromCharCode.apply(String,s.slice(0,a))),r.join('')):String.fromCharCode.apply(String,s.slice(0,a));},o.decode=function(t,e,i){for(var o,n=i,s=0,a=0;a<t.length;){var c=t.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=r[c]))throw Error('invalid encoding');switch(s){case 0:o=c,s=1;break;case 1:e[i++]=o<<2|(48&c)>>4,o=c,s=2;break;case 2:e[i++]=(15&o)<<4|(60&c)>>2,o=c,s=3;break;case 3:e[i++]=(3&o)<<6|c,s=0;}}if(1===s)throw Error('invalid encoding');return i-n;},o.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t);};},{}],3:[function(t,e){'use strict';function i(t,e){'string'==typeof t&&(e=t,t=void 0);var o=[];function n(t){if('string'!=typeof t){var e=r();if(i.verbose&&console.log('codegen: '+e),e='return '+e,t){for(var s=Object.keys(t),a=new Array(s.length+1),c=new Array(s.length),l=0;l<s.length;)a[l]=s[l],c[l]=t[s[l++]];return a[l]=e,Function.apply(null,a).apply(null,c);}return Function(e)();}for(var p=new Array(arguments.length-1),u=0;u<p.length;)p[u]=arguments[++u];if(u=0,t=t.replace(/%([%dfijs])/g,function(t,e){var i=p[u++];switch(e){case'd':case'f':return String(Number(i));case'i':return String(Math.floor(i));case'j':return JSON.stringify(i);case's':return String(i);}return'%';}),u!==p.length)throw Error('parameter count mismatch');return o.push(t),n;}function r(i){return'function '+(i||e||'')+'('+(t&&t.join(',')||'')+'){\n  '+o.join('\n  ')+'\n}';}return n.toString=r,n;}e.exports=i,i.verbose=!1;},{}],4:[function(t,e){'use strict';function i(){this._listeners={};}e.exports=i,i.prototype.on=function(t,e,i){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:i||this}),this;},i.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var i=this._listeners[t],o=0;o<i.length;)i[o].fn===e?i.splice(o,1):++o;return this;},i.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var i=[],o=1;o<arguments.length;)i.push(arguments[o++]);for(o=0;o<e.length;)e[o].fn.apply(e[o++].ctx,i);}return this;};},{}],5:[function(t,e){'use strict';e.exports=n;var i=t('@protobufjs/aspromise'),o=t('@protobufjs/inquire')('fs');function n(t,e,r){return'function'==typeof e?(r=e,e={}):e||(e={}),r?!e.xhr&&o&&o.readFile?o.readFile(t,function(i,o){return i&&'undefined'!=typeof XMLHttpRequest?n.xhr(t,e,r):i?r(i):r(null,e.binary?o:o.toString('utf8'));}):n.xhr(t,e,r):i(n,this,t,e);}n.xhr=function(t,e,i){var o=new XMLHttpRequest();o.onreadystatechange=function(){if(4===o.readyState){if(0!==o.status&&200!==o.status)return i(Error('status '+o.status));if(e.binary){var t=o.response;if(!t){t=[];for(var n=0;n<o.responseText.length;++n)t.push(255&o.responseText.charCodeAt(n));}return i(null,'undefined'!=typeof Uint8Array?new Uint8Array(t):t);}return i(null,o.responseText);}},e.binary&&('overrideMimeType'in o&&o.overrideMimeType('text/plain; charset=x-user-defined'),o.responseType='arraybuffer'),o.open('GET',t),o.send();};},{'@protobufjs/aspromise':1,'@protobufjs/inquire':7}],6:[function(t,e){'use strict';function i(t){return'undefined'!=typeof Float32Array?function(){var e=new Float32Array([-0]),i=new Uint8Array(e.buffer),o=128===i[3];function n(t,o,n){e[0]=t,o[n]=i[0],o[n+1]=i[1],o[n+2]=i[2],o[n+3]=i[3];}function r(t,o,n){e[0]=t,o[n]=i[3],o[n+1]=i[2],o[n+2]=i[1],o[n+3]=i[0];}function s(t,o){return i[0]=t[o],i[1]=t[o+1],i[2]=t[o+2],i[3]=t[o+3],e[0];}function a(t,o){return i[3]=t[o],i[2]=t[o+1],i[1]=t[o+2],i[0]=t[o+3],e[0];}t.writeFloatLE=o?n:r,t.writeFloatBE=o?r:n,t.readFloatLE=o?s:a,t.readFloatBE=o?a:s;}():function(){function e(t,e,i,o){var n=e<0?1:0;if(n&&(e=-e),0===e)t(1/e>0?0:2147483648,i,o);else if(isNaN(e))t(2143289344,i,o);else if(e>3.4028234663852886e+38)t((n<<31|2139095040)>>>0,i,o);else if(e<1.1754943508222875e-38)t((n<<31|Math.round(e/1.401298464324817e-45))>>>0,i,o);else{var r=Math.floor(Math.log(e)/Math.LN2);t((n<<31|r+127<<23|8388607&Math.round(e*Math.pow(2,-r)*8388608))>>>0,i,o);}}function i(t,e,i){var o=t(e,i),n=2*(o>>31)+1,r=o>>>23&255,s=8388607&o;return 255===r?s?NaN:n*(1/0):0===r?1.401298464324817e-45*n*s:n*Math.pow(2,r-150)*(s+8388608);}t.writeFloatLE=e.bind(null,o),t.writeFloatBE=e.bind(null,n),t.readFloatLE=i.bind(null,r),t.readFloatBE=i.bind(null,s);}(),'undefined'!=typeof Float64Array?function(){var e=new Float64Array([-0]),i=new Uint8Array(e.buffer),o=128===i[7];function n(t,o,n){e[0]=t,o[n]=i[0],o[n+1]=i[1],o[n+2]=i[2],o[n+3]=i[3],o[n+4]=i[4],o[n+5]=i[5],o[n+6]=i[6],o[n+7]=i[7];}function r(t,o,n){e[0]=t,o[n]=i[7],o[n+1]=i[6],o[n+2]=i[5],o[n+3]=i[4],o[n+4]=i[3],o[n+5]=i[2],o[n+6]=i[1],o[n+7]=i[0];}function s(t,o){return i[0]=t[o],i[1]=t[o+1],i[2]=t[o+2],i[3]=t[o+3],i[4]=t[o+4],i[5]=t[o+5],i[6]=t[o+6],i[7]=t[o+7],e[0];}function a(t,o){return i[7]=t[o],i[6]=t[o+1],i[5]=t[o+2],i[4]=t[o+3],i[3]=t[o+4],i[2]=t[o+5],i[1]=t[o+6],i[0]=t[o+7],e[0];}t.writeDoubleLE=o?n:r,t.writeDoubleBE=o?r:n,t.readDoubleLE=o?s:a,t.readDoubleBE=o?a:s;}():function(){function e(t,e,i,o,n,r){var s=o<0?1:0;if(s&&(o=-o),0===o)t(0,n,r+e),t(1/o>0?0:2147483648,n,r+i);else if(isNaN(o))t(0,n,r+e),t(2146959360,n,r+i);else if(o>1.7976931348623157e+308)t(0,n,r+e),t((s<<31|2146435072)>>>0,n,r+i);else{var a;if(o<2.2250738585072014e-308)t((a=o/5e-324)>>>0,n,r+e),t((s<<31|a/4294967296)>>>0,n,r+i);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(a=o*Math.pow(2,-c))>>>0,n,r+e),t((s<<31|c+1023<<20|1048576*a&1048575)>>>0,n,r+i);}}}function i(t,e,i,o,n){var r=t(o,n+e),s=t(o,n+i),a=2*(s>>31)+1,c=s>>>20&2047,l=4294967296*(1048575&s)+r;return 2047===c?l?NaN:a*(1/0):0===c?5e-324*a*l:a*Math.pow(2,c-1075)*(l+4503599627370496);}t.writeDoubleLE=e.bind(null,o,0,4),t.writeDoubleBE=e.bind(null,n,4,0),t.readDoubleLE=i.bind(null,r,0,4),t.readDoubleBE=i.bind(null,s,4,0);}(),t;}function o(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24;}function n(t,e,i){e[i]=t>>>24,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t;}function r(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0;}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0;}e.exports=i(i);},{}],7:[function(require,module,exports){'use strict';function inquire(moduleName){try{var mod=eval('quire'.replace(/^/,'re'))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod;}catch(e){}return null;}module.exports=inquire;},{}],8:[function(t,e,i){'use strict';var o=i,n=o.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t);},r=o.normalize=function(t){var e=(t=t.replace(/\\/g,'/').replace(/\/{2,}/g,'/')).split('/'),i=n(t),o='';i&&(o=e.shift()+'/');for(var r=0;r<e.length;)'..'===e[r]?r>0&&'..'!==e[r-1]?e.splice(--r,2):i?e.splice(r,1):++r:'.'===e[r]?e.splice(r,1):++r;return o+e.join('/');};o.resolve=function(t,e,i){return i||(e=r(e)),n(e)?e:(i||(t=r(t)),(t=t.replace(/(?:\/|^)[^/]+$/,'')).length?r(t+'/'+e):e);};},{}],9:[function(t,e){'use strict';e.exports=function(t,e,i){var o=i||8192,n=o>>>1,r=null,s=o;return function(i){if(i<1||i>n)return t(i);s+i>o&&(r=t(o),s=0);var a=e.call(r,s,s+=i);return 7&s&&(s=1+(7|s)),a;};};},{}],10:[function(t,e,i){'use strict';var o=i;o.length=function(t){for(var e=0,i=0,o=0;o<t.length;++o)(i=t.charCodeAt(o))<128?e+=1:i<2048?e+=2:55296==(64512&i)&&56320==(64512&t.charCodeAt(o+1))?(++o,e+=4):e+=3;return e;},o.read=function(t,e,i){if(i-e<1)return'';for(var o,n=null,r=[],s=0;e<i;)(o=t[e++])<128?r[s++]=o:o>191&&o<224?r[s++]=(31&o)<<6|63&t[e++]:o>239&&o<365?(o=((7&o)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,r[s++]=55296+(o>>10),r[s++]=56320+(1023&o)):r[s++]=(15&o)<<12|(63&t[e++])<<6|63&t[e++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,r)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,r.slice(0,s))),n.join('')):String.fromCharCode.apply(String,r.slice(0,s));},o.write=function(t,e,i){for(var o,n,r=i,s=0;s<t.length;++s)(o=t.charCodeAt(s))<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=t.charCodeAt(s+1)))?(o=65536+((1023&o)<<10)+(1023&n),++s,e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=63&o|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=63&o|128);return i-r;};},{}],11:[function(t,e){'use strict';e.exports=t('./src/index');},{'./src/index':20}],12:[function(t,e){'use strict';e.exports=n;var i,o=/\/|\./;function n(t,e){o.test(t)||(t='google/protobuf/'+t+'.proto',e={nested:{google:{nested:{protobuf:{nested:e}}}}}),n[t]=e;}n('any',{Any:{fields:{type_url:{type:'string',id:1},value:{type:'bytes',id:2}}}}),n('duration',{Duration:i={fields:{seconds:{type:'int64',id:1},nanos:{type:'int32',id:2}}}}),n('timestamp',{Timestamp:i}),n('empty',{Empty:{fields:{}}}),n('struct',{Struct:{fields:{fields:{keyType:'string',type:'Value',id:1}}},Value:{oneofs:{kind:{oneof:['nullValue','numberValue','stringValue','boolValue','structValue','listValue']}},fields:{nullValue:{type:'NullValue',id:1},numberValue:{type:'double',id:2},stringValue:{type:'string',id:3},boolValue:{type:'bool',id:4},structValue:{type:'Struct',id:5},listValue:{type:'ListValue',id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:'repeated',type:'Value',id:1}}}}),n('wrappers',{DoubleValue:{fields:{value:{type:'double',id:1}}},FloatValue:{fields:{value:{type:'float',id:1}}},Int64Value:{fields:{value:{type:'int64',id:1}}},UInt64Value:{fields:{value:{type:'uint64',id:1}}},Int32Value:{fields:{value:{type:'int32',id:1}}},UInt32Value:{fields:{value:{type:'uint32',id:1}}},BoolValue:{fields:{value:{type:'bool',id:1}}},StringValue:{fields:{value:{type:'string',id:1}}},BytesValue:{fields:{value:{type:'bytes',id:1}}}}),n('field_mask',{FieldMask:{fields:{paths:{rule:'repeated',type:'string',id:1}}}}),n.get=function(t){return n[t]||null;};},{}],13:[function(t,e,i){'use strict';var o=i,n=t('./enum'),r=t('./util');function s(t,e,i,o){if(e.resolvedType)if(e.resolvedType instanceof n){t('switch(d%s){',o);for(var r=e.resolvedType.values,s=Object.keys(r),a=0;a<s.length;++a)e.repeated&&r[s[a]]===e.typeDefault&&t('default:'),t('case%j:',s[a])('case %i:',r[s[a]])('m%s=%j',o,r[s[a]])('break');t('}');}else t('if(typeof d%s!=="object")',o)('throw TypeError(%j)',e.fullName+': object expected')('m%s=types[%i].fromObject(d%s)',o,i,o);else{var c=!1;switch(e.type){case'double':case'float':t('m%s=Number(d%s)',o,o);break;case'uint32':case'fixed32':t('m%s=d%s>>>0',o,o);break;case'int32':case'sint32':case'sfixed32':t('m%s=d%s|0',o,o);break;case'uint64':c=!0;case'int64':case'sint64':case'fixed64':case'sfixed64':t('if(util.Long)')('(m%s=util.Long.fromValue(d%s)).unsigned=%j',o,o,c)('else if(typeof d%s==="string")',o)('m%s=parseInt(d%s,10)',o,o)('else if(typeof d%s==="number")',o)('m%s=d%s',o,o)('else if(typeof d%s==="object")',o)('m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)',o,o,o,c?'true':'');break;case'bytes':t('if(typeof d%s==="string")',o)('util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)',o,o,o)('else if(d%s.length)',o)('m%s=d%s',o,o);break;case'string':t('m%s=String(d%s)',o,o);break;case'bool':t('m%s=Boolean(d%s)',o,o);}}return t;}function a(t,e,i,o){if(e.resolvedType)e.resolvedType instanceof n?t('d%s=o.enums===String?types[%i].values[m%s]:m%s',o,i,o,o):t('d%s=types[%i].toObject(m%s,o)',o,i,o);else{var r=!1;switch(e.type){case'double':case'float':t('d%s=o.json&&!isFinite(m%s)?String(m%s):m%s',o,o,o,o);break;case'uint64':r=!0;case'int64':case'sint64':case'fixed64':case'sfixed64':t('if(typeof m%s==="number")',o)('d%s=o.longs===String?String(m%s):m%s',o,o,o)('else')('d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s',o,o,o,o,r?'true':'',o);break;case'bytes':t('d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s',o,o,o,o,o);break;default:t('d%s=m%s',o,o);}}return t;}o.fromObject=function(t){var e=t.fieldsArray,i=r.codegen(['d'],t.name+'$fromObject')('if(d instanceof this.ctor)')('return d');if(!e.length)return i('return new this.ctor');i('var m=new this.ctor');for(var o=0;o<e.length;++o){var a=e[o].resolve(),c=r.safeProp(a.name);a.map?(i('if(d%s){',c)('if(typeof d%s!=="object")',c)('throw TypeError(%j)',a.fullName+': object expected')('m%s={}',c)('for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){',c),s(i,a,o,c+'[ks[i]]')('}')('}')):a.repeated?(i('if(d%s){',c)('if(!Array.isArray(d%s))',c)('throw TypeError(%j)',a.fullName+': array expected')('m%s=[]',c)('for(var i=0;i<d%s.length;++i){',c),s(i,a,o,c+'[i]')('}')('}')):(a.resolvedType instanceof n||i('if(d%s!=null){',c),s(i,a,o,c),a.resolvedType instanceof n||i('}'));}return i('return m');},o.toObject=function(t){var e=t.fieldsArray.slice().sort(r.compareFieldsById);if(!e.length)return r.codegen()('return {}');for(var i=r.codegen(['m','o'],t.name+'$toObject')('if(!o)')('o={}')('var d={}'),o=[],s=[],c=[],l=0;l<e.length;++l)e[l].partOf||(e[l].resolve().repeated?o:e[l].map?s:c).push(e[l]);if(o.length){for(i('if(o.arrays||o.defaults){'),l=0;l<o.length;++l)i('d%s=[]',r.safeProp(o[l].name));i('}');}if(s.length){for(i('if(o.objects||o.defaults){'),l=0;l<s.length;++l)i('d%s={}',r.safeProp(s[l].name));i('}');}if(c.length){for(i('if(o.defaults){'),l=0;l<c.length;++l){var p=c[l],u=r.safeProp(p.name);if(p.resolvedType instanceof n)i('d%s=o.enums===String?%j:%j',u,p.resolvedType.valuesById[p.typeDefault],p.typeDefault);else if(p.long)i('if(util.Long){')('var n=new util.Long(%i,%i,%j)',p.typeDefault.low,p.typeDefault.high,p.typeDefault.unsigned)('d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n',u)('}else')('d%s=o.longs===String?%j:%i',u,p.typeDefault.toString(),p.typeDefault.toNumber());else if(p.bytes){var h='['+Array.prototype.slice.call(p.typeDefault).join(',')+']';i('if(o.bytes===String)d%s=%j',u,String.fromCharCode.apply(String,p.typeDefault))('else{')('d%s=%s',u,h)('if(o.bytes!==Array)d%s=util.newBuffer(d%s)',u,u)('}');}else i('d%s=%j',u,p.typeDefault);}i('}');}var d=!1;for(l=0;l<e.length;++l){p=e[l];var f=t._fieldsArray.indexOf(p);u=r.safeProp(p.name),p.map?(d||(d=!0,i('var ks2')),i('if(m%s&&(ks2=Object.keys(m%s)).length){',u,u)('d%s={}',u)('for(var j=0;j<ks2.length;++j){'),a(i,p,f,u+'[ks2[j]]')('}')):p.repeated?(i('if(m%s&&m%s.length){',u,u)('d%s=[]',u)('for(var j=0;j<m%s.length;++j){',u),a(i,p,f,u+'[j]')('}')):(i('if(m%s!=null&&m.hasOwnProperty(%j)){',u,p.name),a(i,p,f,u),p.partOf&&i('if(o.oneofs)')('d%s=%j',r.safeProp(p.partOf.name),p.name)),i('}');}return i('return d');};},{'./enum':16,'./util':38}],14:[function(t,e){'use strict';e.exports=function(t){var e=n.codegen(['r','l'],t.name+'$decode')('if(!(r instanceof Reader))')('r=Reader.create(r)')('var c=l===undefined?r.len:r.pos+l,m=new this.ctor'+(t.fieldsArray.filter(function(t){return t.map;}).length?',k,value':''))('while(r.pos<c){')('var t=r.uint32()');t.group&&e('if((t&7)===4)')('break'),e('switch(t>>>3){');for(var s=0;s<t.fieldsArray.length;++s){var a=t._fieldsArray[s].resolve(),c=a.resolvedType instanceof i?'int32':a.type,l='m'+n.safeProp(a.name);e('case %i:',a.id),a.map?(e('if(%s===util.emptyObject)',l)('%s={}',l)('var c2 = r.uint32()+r.pos'),void 0!==o.defaults[a.keyType]?e('k=%j',o.defaults[a.keyType]):e('k=null'),void 0!==o.defaults[c]?e('value=%j',o.defaults[c]):e('value=null'),e('while(r.pos<c2){')('var tag2=r.uint32()')('switch(tag2>>>3){')('case 1: k=r.%s(); break',a.keyType)('case 2:'),void 0===o.basic[c]?e('value=types[%i].decode(r,r.uint32())',s):e('value=r.%s()',c),e('break')('default:')('r.skipType(tag2&7)')('break')('}')('}'),void 0!==o.long[a.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',l):e('%s[k]=value',l)):a.repeated?(e('if(!(%s&&%s.length))',l,l)('%s=[]',l),void 0!==o.packed[c]&&e('if((t&7)===2){')('var c2=r.uint32()+r.pos')('while(r.pos<c2)')('%s.push(r.%s())',l,c)('}else'),void 0===o.basic[c]?e(a.resolvedType.group?'%s.push(types[%i].decode(r))':'%s.push(types[%i].decode(r,r.uint32()))',l,s):e('%s.push(r.%s())',l,c)):void 0===o.basic[c]?e(a.resolvedType.group?'%s=types[%i].decode(r)':'%s=types[%i].decode(r,r.uint32())',l,s):e('%s=r.%s()',l,c),e('break');}for(e('default:')('r.skipType(t&7)')('break')('}')('}'),s=0;s<t._fieldsArray.length;++s){var p=t._fieldsArray[s];p.required&&e('if(!m.hasOwnProperty(%j))',p.name)('throw util.ProtocolError(%j,{instance:m})',r(p));}return e('return m');};var i=t('./enum'),o=t('./types'),n=t('./util');function r(t){return'missing required \''+t.name+'\'';}},{'./enum':16,'./types':37,'./util':38}],15:[function(t,e){'use strict';e.exports=function(t){for(var e,s=n.codegen(['m','w'],t.name+'$encode')('if(!w)')('w=Writer.create()'),a=t.fieldsArray.slice().sort(n.compareFieldsById),c=0;c<a.length;++c){var l=a[c].resolve(),p=t._fieldsArray.indexOf(l),u=l.resolvedType instanceof i?'int32':l.type,h=o.basic[u];e='m'+n.safeProp(l.name),l.map?(s('if(%s!=null&&Object.hasOwnProperty.call(m,%j)){',e,l.name)('for(var ks=Object.keys(%s),i=0;i<ks.length;++i){',e)('w.uint32(%i).fork().uint32(%i).%s(ks[i])',(l.id<<3|2)>>>0,8|o.mapKey[l.keyType],l.keyType),void 0===h?s('types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()',p,e):s('.uint32(%i).%s(%s[ks[i]]).ldelim()',16|h,u,e),s('}')('}')):l.repeated?(s('if(%s!=null&&%s.length){',e,e),l.packed&&void 0!==o.packed[u]?s('w.uint32(%i).fork()',(l.id<<3|2)>>>0)('for(var i=0;i<%s.length;++i)',e)('w.%s(%s[i])',u,e)('w.ldelim()'):(s('for(var i=0;i<%s.length;++i)',e),void 0===h?r(s,l,p,e+'[i]'):s('w.uint32(%i).%s(%s[i])',(l.id<<3|h)>>>0,u,e)),s('}')):(l.optional&&s('if(%s!=null&&Object.hasOwnProperty.call(m,%j))',e,l.name),void 0===h?r(s,l,p,e):s('w.uint32(%i).%s(%s)',(l.id<<3|h)>>>0,u,e));}return s('return w');};var i=t('./enum'),o=t('./types'),n=t('./util');function r(t,e,i,o){return e.resolvedType.group?t('types[%i].encode(%s,w.uint32(%i)).uint32(%i)',i,o,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t('types[%i].encode(%s,w.uint32(%i).fork()).ldelim()',i,o,(e.id<<3|2)>>>0);}},{'./enum':16,'./types':37,'./util':38}],16:[function(t,e){'use strict';e.exports=r;var i=t('./object');((r.prototype=Object.create(i.prototype)).constructor=r).className='Enum';var o=t('./namespace'),n=t('./util');function r(t,e,o,n,r){if(i.call(this,t,o),e&&'object'!=typeof e)throw TypeError('values must be an object');if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.reserved=void 0,e)for(var s=Object.keys(e),a=0;a<s.length;++a)'number'==typeof e[s[a]]&&(this.valuesById[this.values[s[a]]=e[s[a]]]=s[a]);}r.fromJSON=function(t,e){var i=new r(t,e.values,e.options,e.comment,e.comments);return i.reserved=e.reserved,i;},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(['options',this.options,'values',this.values,'reserved',this.reserved&&this.reserved.length?this.reserved:void 0,'comment',e?this.comment:void 0,'comments',e?this.comments:void 0]);},r.prototype.add=function(t,e,i){if(!n.isString(t))throw TypeError('name must be a string');if(!n.isInteger(e))throw TypeError('id must be an integer');if(void 0!==this.values[t])throw Error('duplicate name \''+t+'\' in '+this);if(this.isReservedId(e))throw Error('id '+e+' is reserved in '+this);if(this.isReservedName(t))throw Error('name \''+t+'\' is reserved in '+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error('duplicate id '+e+' in '+this);this.values[t]=e;}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=i||null,this;},r.prototype.remove=function(t){if(!n.isString(t))throw TypeError('name must be a string');var e=this.values[t];if(null==e)throw Error('name \''+t+'\' does not exist in '+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this;},r.prototype.isReservedId=function(t){return o.isReservedId(this.reserved,t);},r.prototype.isReservedName=function(t){return o.isReservedName(this.reserved,t);};},{'./namespace':24,'./object':25,'./util':38}],17:[function(t,e){'use strict';e.exports=c;var i=t('./object');((c.prototype=Object.create(i.prototype)).constructor=c).className='Field';var o,n=t('./enum'),r=t('./types'),s=t('./util'),a=/^required|optional|repeated$/;function c(t,e,o,n,c,l,p){if(s.isObject(n)?(p=c,l=n,n=c=void 0):s.isObject(c)&&(p=l,l=c,c=void 0),i.call(this,t,l),!s.isInteger(e)||e<0)throw TypeError('id must be a non-negative integer');if(!s.isString(o))throw TypeError('type must be a string');if(void 0!==n&&!a.test(n=n.toString().toLowerCase()))throw TypeError('rule must be a string rule');if(void 0!==c&&!s.isString(c))throw TypeError('extend must be a string');'proto3_optional'===n&&(n='optional'),this.rule=n&&'optional'!==n?n:void 0,this.type=o,this.id=e,this.extend=c||void 0,this.required='required'===n,this.optional=!this.required,this.repeated='repeated'===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!s.Long&&void 0!==r.long[o],this.bytes='bytes'===o,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=p;}c.fromJSON=function(t,e){return new c(t,e.id,e.type,e.rule,e.extend,e.options,e.comment);},Object.defineProperty(c.prototype,'packed',{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption('packed')),this._packed;}}),c.prototype.setOption=function(t,e,o){return'packed'===t&&(this._packed=null),i.prototype.setOption.call(this,t,e,o);},c.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return s.toObject(['rule','optional'!==this.rule&&this.rule||void 0,'type',this.type,'id',this.id,'extend',this.extend,'options',this.options,'comment',e?this.comment:void 0]);},c.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=r.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof o?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof n&&'string'==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof n)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=s.Long.fromNumber(this.typeDefault,'u'===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&'string'==typeof this.typeDefault){var t;s.base64.test(this.typeDefault)?s.base64.decode(this.typeDefault,t=s.newBuffer(s.base64.length(this.typeDefault)),0):s.utf8.write(this.typeDefault,t=s.newBuffer(s.utf8.length(this.typeDefault)),0),this.typeDefault=t;}return this.map?this.defaultValue=s.emptyObject:this.repeated?this.defaultValue=s.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof o&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this);},c.d=function(t,e,i,o){return'function'==typeof e?e=s.decorateType(e).name:e&&'object'==typeof e&&(e=s.decorateEnum(e).name),function(n,r){s.decorateType(n.constructor).add(new c(r,t,e,i,{default:o}));};},c._configure=function(t){o=t;};},{'./enum':16,'./object':25,'./types':37,'./util':38}],18:[function(t,e){'use strict';var i=e.exports=t('./index-minimal');i.build='light',i.load=function(t,e,o){return'function'==typeof e?(o=e,e=new i.Root()):e||(e=new i.Root()),e.load(t,o);},i.loadSync=function(t,e){return e||(e=new i.Root()),e.loadSync(t);},i.encoder=t('./encoder'),i.decoder=t('./decoder'),i.verifier=t('./verifier'),i.converter=t('./converter'),i.ReflectionObject=t('./object'),i.Namespace=t('./namespace'),i.Root=t('./root'),i.Enum=t('./enum'),i.Type=t('./type'),i.Field=t('./field'),i.OneOf=t('./oneof'),i.MapField=t('./mapfield'),i.Service=t('./service'),i.Method=t('./method'),i.Message=t('./message'),i.wrappers=t('./wrappers'),i.types=t('./types'),i.util=t('./util'),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service,i.Enum),i.Root._configure(i.Type),i.Field._configure(i.Type);},{'./converter':13,'./decoder':14,'./encoder':15,'./enum':16,'./field':17,'./index-minimal':19,'./mapfield':21,'./message':22,'./method':23,'./namespace':24,'./object':25,'./oneof':26,'./root':30,'./service':34,'./type':36,'./types':37,'./util':38,'./verifier':41,'./wrappers':42}],19:[function(t,e,i){'use strict';var o=i;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader);}o.build='minimal',o.Writer=t('./writer'),o.BufferWriter=t('./writer_buffer'),o.Reader=t('./reader'),o.BufferReader=t('./reader_buffer'),o.util=t('./util/minimal'),o.rpc=t('./rpc'),o.roots=t('./roots'),o.configure=n,n();},{'./reader':28,'./reader_buffer':29,'./roots':31,'./rpc':32,'./util/minimal':40,'./writer':43,'./writer_buffer':44}],20:[function(t,e){'use strict';var i=e.exports=t('./index-light');i.build='full',i.tokenize=t('./tokenize'),i.parse=t('./parse'),i.common=t('./common'),i.Root._configure(i.Type,i.parse,i.common);},{'./common':12,'./index-light':18,'./parse':27,'./tokenize':35}],21:[function(t,e){'use strict';e.exports=r;var i=t('./field');((r.prototype=Object.create(i.prototype)).constructor=r).className='MapField';var o=t('./types'),n=t('./util');function r(t,e,o,r,s,a){if(i.call(this,t,e,r,void 0,void 0,s,a),!n.isString(o))throw TypeError('keyType must be a string');this.keyType=o,this.resolvedKeyType=null,this.map=!0;}r.fromJSON=function(t,e){return new r(t,e.id,e.keyType,e.type,e.options,e.comment);},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(['keyType',this.keyType,'type',this.type,'id',this.id,'extend',this.extend,'options',this.options,'comment',e?this.comment:void 0]);},r.prototype.resolve=function(){if(this.resolved)return this;if(void 0===o.mapKey[this.keyType])throw Error('invalid key type: '+this.keyType);return i.prototype.resolve.call(this);},r.d=function(t,e,i){return'function'==typeof i?i=n.decorateType(i).name:i&&'object'==typeof i&&(i=n.decorateEnum(i).name),function(o,s){n.decorateType(o.constructor).add(new r(s,t,e,i));};};},{'./field':17,'./types':37,'./util':38}],22:[function(t,e){'use strict';e.exports=o;var i=t('./util/minimal');function o(t){if(t)for(var e=Object.keys(t),i=0;i<e.length;++i)this[e[i]]=t[e[i]];}o.create=function(t){return this.$type.create(t);},o.encode=function(t,e){return this.$type.encode(t,e);},o.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e);},o.decode=function(t){return this.$type.decode(t);},o.decodeDelimited=function(t){return this.$type.decodeDelimited(t);},o.verify=function(t){return this.$type.verify(t);},o.fromObject=function(t){return this.$type.fromObject(t);},o.toObject=function(t,e){return this.$type.toObject(t,e);},o.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions);};},{'./util/minimal':40}],23:[function(t,e){'use strict';e.exports=n;var i=t('./object');((n.prototype=Object.create(i.prototype)).constructor=n).className='Method';var o=t('./util');function n(t,e,n,r,s,a,c,l,p){if(o.isObject(s)?(c=s,s=a=void 0):o.isObject(a)&&(c=a,a=void 0),void 0!==e&&!o.isString(e))throw TypeError('type must be a string');if(!o.isString(n))throw TypeError('requestType must be a string');if(!o.isString(r))throw TypeError('responseType must be a string');i.call(this,t,c),this.type=e||'rpc',this.requestType=n,this.requestStream=!!s||void 0,this.responseType=r,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=l,this.parsedOptions=p;}n.fromJSON=function(t,e){return new n(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions);},n.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return o.toObject(['type','rpc'!==this.type&&this.type||void 0,'requestType',this.requestType,'requestStream',this.requestStream,'responseType',this.responseType,'responseStream',this.responseStream,'options',this.options,'comment',e?this.comment:void 0,'parsedOptions',this.parsedOptions]);},n.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this));};},{'./object':25,'./util':38}],24:[function(t,e){'use strict';e.exports=p;var i=t('./object');((p.prototype=Object.create(i.prototype)).constructor=p).className='Namespace';var o,n,r,s=t('./field'),a=t('./oneof'),c=t('./util');function l(t,e){if(t&&t.length){for(var i={},o=0;o<t.length;++o)i[t[o].name]=t[o].toJSON(e);return i;}}function p(t,e){i.call(this,t,e),this.nested=void 0,this._nestedArray=null;}function u(t){return t._nestedArray=null,t;}p.fromJSON=function(t,e){return new p(t,e.options).addJSON(e.nested);},p.arrayToJSON=l,p.isReservedId=function(t,e){if(t)for(var i=0;i<t.length;++i)if('string'!=typeof t[i]&&t[i][0]<=e&&t[i][1]>e)return!0;return!1;},p.isReservedName=function(t,e){if(t)for(var i=0;i<t.length;++i)if(t[i]===e)return!0;return!1;},Object.defineProperty(p.prototype,'nestedArray',{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested));}}),p.prototype.toJSON=function(t){return c.toObject(['options',this.options,'nested',l(this.nestedArray,t)]);},p.prototype.addJSON=function(t){if(t)for(var e,i=Object.keys(t),a=0;a<i.length;++a)e=t[i[a]],this.add((void 0!==e.fields?o.fromJSON:void 0!==e.values?r.fromJSON:void 0!==e.methods?n.fromJSON:void 0!==e.id?s.fromJSON:p.fromJSON)(i[a],e));return this;},p.prototype.get=function(t){return this.nested&&this.nested[t]||null;},p.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof r)return this.nested[t].values;throw Error('no such enum: '+t);},p.prototype.add=function(t){if(!(t instanceof s&&void 0!==t.extend||t instanceof o||t instanceof r||t instanceof n||t instanceof p||t instanceof a))throw TypeError('object must be a valid nested object');if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof p&&t instanceof p)||e instanceof o||e instanceof n)throw Error('duplicate name \''+t.name+'\' in '+this);for(var i=e.nestedArray,c=0;c<i.length;++c)t.add(i[c]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0);}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),u(this);},p.prototype.remove=function(t){if(!(t instanceof i))throw TypeError('object must be a ReflectionObject');if(t.parent!==this)throw Error(t+' is not a member of '+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),u(this);},p.prototype.define=function(t,e){if(c.isString(t))t=t.split('.');else if(!Array.isArray(t))throw TypeError('illegal path');if(t&&t.length&&''===t[0])throw Error('path must be relative');for(var i=this;t.length>0;){var o=t.shift();if(i.nested&&i.nested[o]){if(!((i=i.nested[o])instanceof p))throw Error('path conflicts with non-namespace objects');}else i.add(i=new p(o));}return e&&i.addJSON(e),i;},p.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof p?t[e++].resolveAll():t[e++].resolve();return this.resolve();},p.prototype.lookup=function(t,e,i){if('boolean'==typeof e?(i=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),c.isString(t)&&t.length){if('.'===t)return this.root;t=t.split('.');}else if(!t.length)return this;if(''===t[0])return this.root.lookup(t.slice(1),e);var o=this.get(t[0]);if(o){if(1===t.length){if(!e||e.indexOf(o.constructor)>-1)return o;}else if(o instanceof p&&(o=o.lookup(t.slice(1),e,!0)))return o;}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof p&&(o=this._nestedArray[n].lookup(t,e,!0)))return o;return null===this.parent||i?null:this.parent.lookup(t,e);},p.prototype.lookupType=function(t){var e=this.lookup(t,[o]);if(!e)throw Error('no such type: '+t);return e;},p.prototype.lookupEnum=function(t){var e=this.lookup(t,[r]);if(!e)throw Error('no such Enum \''+t+'\' in '+this);return e;},p.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[o,r]);if(!e)throw Error('no such Type or Enum \''+t+'\' in '+this);return e;},p.prototype.lookupService=function(t){var e=this.lookup(t,[n]);if(!e)throw Error('no such Service \''+t+'\' in '+this);return e;},p._configure=function(t,e,i){o=t,n=e,r=i;};},{'./field':17,'./object':25,'./oneof':26,'./util':38}],25:[function(t,e){'use strict';e.exports=n,n.className='ReflectionObject';var i,o=t('./util');function n(t,e){if(!o.isString(t))throw TypeError('name must be a string');if(e&&!o.isObject(e))throw TypeError('options must be an object');this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null;}Object.defineProperties(n.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t;}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join('.');}}}),n.prototype.toJSON=function(){throw Error();},n.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof i&&e._handleAdd(this);},n.prototype.onRemove=function(t){var e=t.root;e instanceof i&&e._handleRemove(this),this.parent=null,this.resolved=!1;},n.prototype.resolve=function(){return this.resolved?this:(this.root instanceof i&&(this.resolved=!0),this);},n.prototype.getOption=function(t){if(this.options)return this.options[t];},n.prototype.setOption=function(t,e,i){return i&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this;},n.prototype.setParsedOption=function(t,e,i){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(i){var r=n.find(function(e){return Object.prototype.hasOwnProperty.call(e,t);});if(r){var s=r[t];o.setProperty(s,i,e);}else(r={})[t]=o.setProperty({},i,e),n.push(r);}else{var a={};a[t]=e,n.push(a);}return this;},n.prototype.setOptions=function(t,e){if(t)for(var i=Object.keys(t),o=0;o<i.length;++o)this.setOption(i[o],t[i[o]],e);return this;},n.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+' '+e:t;},n._configure=function(t){i=t;};},{'./util':38}],26:[function(t,e){'use strict';e.exports=r;var i=t('./object');((r.prototype=Object.create(i.prototype)).constructor=r).className='OneOf';var o=t('./field'),n=t('./util');function r(t,e,o,n){if(Array.isArray(e)||(o=e,e=void 0),i.call(this,t,o),void 0!==e&&!Array.isArray(e))throw TypeError('fieldNames must be an Array');this.oneof=e||[],this.fieldsArray=[],this.comment=n;}function s(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e]);}r.fromJSON=function(t,e){return new r(t,e.oneof,e.options,e.comment);},r.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(['options',this.options,'oneof',this.oneof,'comment',e?this.comment:void 0]);},r.prototype.add=function(t){if(!(t instanceof o))throw TypeError('field must be a Field');return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,s(this),this;},r.prototype.remove=function(t){if(!(t instanceof o))throw TypeError('field must be a Field');var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+' is not a member of '+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this;},r.prototype.onAdd=function(t){i.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var o=t.get(this.oneof[e]);o&&!o.partOf&&(o.partOf=this,this.fieldsArray.push(o));}s(this);},r.prototype.onRemove=function(t){for(var e,o=0;o<this.fieldsArray.length;++o)(e=this.fieldsArray[o]).parent&&e.parent.remove(e);i.prototype.onRemove.call(this,t);},r.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,i){n.decorateType(e.constructor).add(new r(i,t)),Object.defineProperty(e,i,{get:n.oneOfGetter(t),set:n.oneOfSetter(t)});};};},{'./field':17,'./object':25,'./util':38}],27:[function(t,e){'use strict';e.exports=w,w.filename=null,w.defaults={keepCase:!1};var i=t('./tokenize'),o=t('./root'),n=t('./type'),r=t('./field'),s=t('./mapfield'),a=t('./oneof'),c=t('./enum'),l=t('./service'),p=t('./method'),u=t('./types'),h=t('./util'),d=/^[1-9][0-9]*$/,f=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,_=/^-?0[x][0-9a-fA-F]+$/,g=/^0[0-7]+$/,m=/^-?0[0-7]+$/,v=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,b=/^[a-zA-Z_][a-zA-Z_0-9]*$/,C=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,S=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function w(t,e,R){e instanceof o||(R=e,e=new o()),R||(R=w.defaults);var I,M,T,E,A,P=R.preferTrailingComment||!1,x=i(t,R.alternateCommentMode||!1),L=x.next,k=x.push,O=x.peek,N=x.skip,D=x.cmnt,B=!0,U=!1,F=e,j=R.keepCase?function(t){return t;}:h.camelCase;function V(t,e,i){var o=w.filename;return i||(w.filename=null),Error('illegal '+(e||'token')+' \''+t+'\' ('+(o?o+', ':'')+'line '+x.line+')');}function G(){var t,e=[];do{if('"'!==(t=L())&&'\''!==t)throw V(t);e.push(L()),N(t),t=O();}while('"'===t||'\''===t);return e.join('');}function H(t){var e=L();switch(e){case'\'':case'"':return k(e),G();case'true':case'TRUE':return!0;case'false':case'FALSE':return!1;}try{return z(e,!0);}catch(i){if(t&&C.test(e))return e;throw V(e,'value');}}function W(t,e){var i,o;do{!e||'"'!==(i=O())&&'\''!==i?t.push([o=K(L()),N('to',!0)?K(L()):o]):t.push(G());}while(N(',',!0));N(';');}function z(t,e){var i=1;switch('-'===t.charAt(0)&&(i=-1,t=t.substring(1)),t){case'inf':case'INF':case'Inf':return i*(1/0);case'nan':case'NAN':case'Nan':case'NaN':return NaN;case'0':return 0;}if(d.test(t))return i*parseInt(t,10);if(y.test(t))return i*parseInt(t,16);if(g.test(t))return i*parseInt(t,8);if(v.test(t))return i*parseFloat(t);throw V(t,'number',e);}function K(t,e){switch(t){case'max':case'MAX':case'Max':return 536870911;case'0':return 0;}if(!e&&'-'===t.charAt(0))throw V(t,'id');if(f.test(t))return parseInt(t,10);if(_.test(t))return parseInt(t,16);if(m.test(t))return parseInt(t,8);throw V(t,'id');}function q(){if(void 0!==I)throw V('package');if(I=L(),!C.test(I))throw V(I,'name');F=F.define(I),N(';');}function Y(){var t,e=O();switch(e){case'weak':t=T||(T=[]),L();break;case'public':L();default:t=M||(M=[]);}e=G(),N(';'),t.push(e);}function J(){if(N('='),E=G(),!(U='proto3'===E)&&'proto2'!==E)throw V(E,'syntax');N(';');}function X(t,e){switch(e){case'option':return rt(t,e),N(';'),!0;case'message':return Q(t,e),!0;case'enum':return ot(t,e),!0;case'service':return pt(t,e),!0;case'extend':return ht(t,e),!0;}return!1;}function Z(t,e,i){var o=x.line;if(t&&('string'!=typeof t.comment&&(t.comment=D()),t.filename=w.filename),N('{',!0)){for(var n;'}'!==(n=L());)e(n);N(';',!0);}else i&&i(),N(';'),t&&('string'!=typeof t.comment||P)&&(t.comment=D(o)||t.comment);}function Q(t,e){if(!b.test(e=L()))throw V(e,'type name');var i=new n(e);Z(i,function(t){if(!X(i,t))switch(t){case'map':et(i);break;case'required':case'repeated':$(i,t);break;case'optional':$(i,U?'proto3_optional':'optional');break;case'oneof':it(i,t);break;case'extensions':W(i.extensions||(i.extensions=[]));break;case'reserved':W(i.reserved||(i.reserved=[]),!0);break;default:if(!U||!C.test(t))throw V(t);k(t),$(i,'optional');}}),t.add(i);}function $(t,e,i){var o=L();if('group'!==o){if(!C.test(o))throw V(o,'type');var n=L();if(!b.test(n))throw V(n,'name');n=j(n),N('=');var s=new r(n,K(L()),o,e,i);if(Z(s,function(t){if('option'!==t)throw V(t);rt(s,t),N(';');},function(){lt(s);}),'proto3_optional'===e){var c=new a('_'+n);s.setOption('proto3_optional',!0),c.add(s),t.add(c);}else t.add(s);U||!s.repeated||void 0===u.packed[o]&&void 0!==u.basic[o]||s.setOption('packed',!1,!0);}else tt(t,e);}function tt(t,e){var i=L();if(!b.test(i))throw V(i,'name');var o=h.lcFirst(i);i===o&&(i=h.ucFirst(i)),N('=');var s=K(L()),a=new n(i);a.group=!0;var c=new r(o,s,i,e);c.filename=w.filename,Z(a,function(t){switch(t){case'option':rt(a,t),N(';');break;case'required':case'repeated':$(a,t);break;case'optional':$(a,U?'proto3_optional':'optional');break;default:throw V(t);}}),t.add(a).add(c);}function et(t){N('<');var e=L();if(void 0===u.mapKey[e])throw V(e,'type');N(',');var i=L();if(!C.test(i))throw V(i,'type');N('>');var o=L();if(!b.test(o))throw V(o,'name');N('=');var n=new s(j(o),K(L()),e,i);Z(n,function(t){if('option'!==t)throw V(t);rt(n,t),N(';');},function(){lt(n);}),t.add(n);}function it(t,e){if(!b.test(e=L()))throw V(e,'name');var i=new a(j(e));Z(i,function(t){'option'===t?(rt(i,t),N(';')):(k(t),$(i,'optional'));}),t.add(i);}function ot(t,e){if(!b.test(e=L()))throw V(e,'name');var i=new c(e);Z(i,function(t){switch(t){case'option':rt(i,t),N(';');break;case'reserved':W(i.reserved||(i.reserved=[]),!0);break;default:nt(i,t);}}),t.add(i);}function nt(t,e){if(!b.test(e))throw V(e,'name');N('=');var i=K(L(),!0),o={};Z(o,function(t){if('option'!==t)throw V(t);rt(o,t),N(';');},function(){lt(o);}),t.add(e,i,o.comment);}function rt(t,e){var i=N('(',!0);if(!C.test(e=L()))throw V(e,'name');var o,n=e,r=n;i&&(N(')'),r=n='('+n+')',e=O(),S.test(e)&&(o=e.substr(1),n+=e,L())),N('='),ct(t,r,st(t,n),o);}function st(t,e){if(N('{',!0)){for(var i={};!N('}',!0);){if(!b.test(A=L()))throw V(A,'name');var o,n=A;'{'===O()?o=st(t,e+'.'+A):(N(':'),'{'===O()?o=st(t,e+'.'+A):(o=H(!0),at(t,e+'.'+A,o)));var r=i[n];r&&(o=[].concat(r).concat(o)),i[n]=o,N(',',!0);}return i;}var s=H(!0);return at(t,e,s),s;}function at(t,e,i){t.setOption&&t.setOption(e,i);}function ct(t,e,i,o){t.setParsedOption&&t.setParsedOption(e,i,o);}function lt(t){if(N('[',!0)){do{rt(t,'option');}while(N(',',!0));N(']');}return t;}function pt(t,e){if(!b.test(e=L()))throw V(e,'service name');var i=new l(e);Z(i,function(t){if(!X(i,t)){if('rpc'!==t)throw V(t);ut(i,t);}}),t.add(i);}function ut(t,e){var i=D(),o=e;if(!b.test(e=L()))throw V(e,'name');var n,r,s,a,c=e;if(N('('),N('stream',!0)&&(r=!0),!C.test(e=L()))throw V(e);if(n=e,N(')'),N('returns'),N('('),N('stream',!0)&&(a=!0),!C.test(e=L()))throw V(e);s=e,N(')');var l=new p(c,o,n,s,r,a);l.comment=i,Z(l,function(t){if('option'!==t)throw V(t);rt(l,t),N(';');}),t.add(l);}function ht(t,e){if(!C.test(e=L()))throw V(e,'reference');var i=e;Z(null,function(e){switch(e){case'required':case'repeated':$(t,e,i);break;case'optional':$(t,U?'proto3_optional':'optional',i);break;default:if(!U||!C.test(e))throw V(e);k(e),$(t,'optional',i);}});}for(;null!==(A=L());)switch(A){case'package':if(!B)throw V(A);q();break;case'import':if(!B)throw V(A);Y();break;case'syntax':if(!B)throw V(A);J();break;case'option':rt(F,A),N(';');break;default:if(X(F,A)){B=!1;continue;}throw V(A);}return w.filename=null,{package:I,imports:M,weakImports:T,syntax:E,root:e};}},{'./enum':16,'./field':17,'./mapfield':21,'./method':23,'./oneof':26,'./root':30,'./service':34,'./tokenize':35,'./type':36,'./types':37,'./util':38}],28:[function(t,e){'use strict';e.exports=a;var i,o=t('./util/minimal'),n=o.LongBits,r=o.utf8;function s(t,e){return RangeError('index out of range: '+t.pos+' + '+(e||1)+' > '+t.len);}function a(t){this.buf=t,this.pos=0,this.len=t.length;}var c,l='undefined'!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new a(t);throw Error('illegal buffer');}:function(t){if(Array.isArray(t))return new a(t);throw Error('illegal buffer');},p=function(){return o.Buffer?function(t){return(a.create=function(t){return o.Buffer.isBuffer(t)?new i(t):l(t);})(t);}:l;};function u(){var t=new n(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t;}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t;}throw Error('invalid varint encoding');}function h(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0;}function d(){if(this.pos+8>this.len)throw s(this,8);return new n(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4));}a.create=p(),a.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,a.prototype.uint32=(c=4294967295,function(){if(c=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return c;if(c=(c|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return c;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return c;}),a.prototype.int32=function(){return 0|this.uint32();},a.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0;},a.prototype.bool=function(){return 0!==this.uint32();},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4);},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4);},a.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t;},a.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t;},a.prototype.bytes=function(){var t=this.uint32(),e=this.pos,i=this.pos+t;if(i>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,i):e===i?new this.buf.constructor(0):this._slice.call(this.buf,e,i);},a.prototype.string=function(){var t=this.bytes();return r.read(t,0,t.length);},a.prototype.skip=function(t){if('number'==typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t;}else do{if(this.pos>=this.len)throw s(this);}while(128&this.buf[this.pos++]);return this;},a.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error('invalid wire type '+t+' at offset '+this.pos);}return this;},a._configure=function(t){i=t,a.create=p(),i._configure();var e=o.Long?'toLong':'toNumber';o.merge(a.prototype,{int64:function(){return u.call(this)[e](!1);},uint64:function(){return u.call(this)[e](!0);},sint64:function(){return u.call(this).zzDecode()[e](!1);},fixed64:function(){return d.call(this)[e](!0);},sfixed64:function(){return d.call(this)[e](!1);}});};},{'./util/minimal':40}],29:[function(t,e){'use strict';e.exports=n;var i=t('./reader');(n.prototype=Object.create(i.prototype)).constructor=n;var o=t('./util/minimal');function n(t){i.call(this,t);}n._configure=function(){o.Buffer&&(n.prototype._slice=o.Buffer.prototype.slice);},n.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString('utf-8',this.pos,this.pos=Math.min(this.pos+t,this.len));},n._configure();},{'./reader':28,'./util/minimal':40}],30:[function(t,e){'use strict';e.exports=p;var i=t('./namespace');((p.prototype=Object.create(i.prototype)).constructor=p).className='Root';var o,n,r,s=t('./field'),a=t('./enum'),c=t('./oneof'),l=t('./util');function p(t){i.call(this,'',t),this.deferred=[],this.files=[];}function u(){}p.fromJSON=function(t,e){return e||(e=new p()),t.options&&e.setOptions(t.options),e.addJSON(t.nested);},p.prototype.resolvePath=l.path.resolve,p.prototype.fetch=l.fetch,p.prototype.load=function t(e,i,o){'function'==typeof i&&(o=i,i=void 0);var s=this;if(!o)return l.asPromise(t,s,e,i);var a=o===u;function c(t,e){if(o){var i=o;if(o=null,a)throw t;i(t,e);}}function p(t){var e=t.lastIndexOf('google/protobuf/');if(e>-1){var i=t.substring(e);if(i in r)return i;}return null;}function h(t,e){try{if(l.isString(e)&&'{'===e.charAt(0)&&(e=JSON.parse(e)),l.isString(e)){n.filename=t;var o,r=n(e,s,i),u=0;if(r.imports)for(;u<r.imports.length;++u)(o=p(r.imports[u])||s.resolvePath(t,r.imports[u]))&&d(o);if(r.weakImports)for(u=0;u<r.weakImports.length;++u)(o=p(r.weakImports[u])||s.resolvePath(t,r.weakImports[u]))&&d(o,!0);}else s.setOptions(e.options).addJSON(e.nested);}catch(h){c(h);}a||f||c(null,s);}function d(t,e){if(!(s.files.indexOf(t)>-1))if(s.files.push(t),t in r)a?h(t,r[t]):(++f,setTimeout(function(){--f,h(t,r[t]);}));else if(a){var i;try{i=l.fs.readFileSync(t).toString('utf8');}catch(n){return void(e||c(n));}h(t,i);}else++f,s.fetch(t,function(i,n){--f,o&&(i?e?f||c(null,s):c(i):h(t,n));});}var f=0;l.isString(e)&&(e=[e]);for(var y,_=0;_<e.length;++_)(y=s.resolvePath('',e[_]))&&d(y);if(a)return s;f||c(null,s);},p.prototype.loadSync=function(t,e){if(!l.isNode)throw Error('not supported');return this.load(t,e,u);},p.prototype.resolveAll=function(){if(this.deferred.length)throw Error('unresolvable extensions: '+this.deferred.map(function(t){return'\'extend '+t.extend+'\' in '+t.parent.fullName;}).join(', '));return i.prototype.resolveAll.call(this);};var h=/^[A-Z]/;function d(t,e){var i=e.parent.lookup(e.extend);if(i){var o=new s(e.fullName,e.id,e.type,e.rule,void 0,e.options);return o.declaringField=e,e.extensionField=o,i.add(o),!0;}return!1;}p.prototype._handleAdd=function(t){if(t instanceof s)void 0===t.extend||t.extensionField||d(0,t)||this.deferred.push(t);else if(t instanceof a)h.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof c)){if(t instanceof o)for(var e=0;e<this.deferred.length;)d(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var i=0;i<t.nestedArray.length;++i)this._handleAdd(t._nestedArray[i]);h.test(t.name)&&(t.parent[t.name]=t);}},p.prototype._handleRemove=function(t){if(t instanceof s){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1);}}else if(t instanceof a)h.test(t.name)&&delete t.parent[t.name];else if(t instanceof i){for(var o=0;o<t.nestedArray.length;++o)this._handleRemove(t._nestedArray[o]);h.test(t.name)&&delete t.parent[t.name];}},p._configure=function(t,e,i){o=t,n=e,r=i;};},{'./enum':16,'./field':17,'./namespace':24,'./oneof':26,'./util':38}],31:[function(t,e){'use strict';e.exports={};},{}],32:[function(t,e,i){'use strict';i.Service=t('./rpc/service');},{'./rpc/service':33}],33:[function(t,e){'use strict';e.exports=o;var i=t('../util/minimal');function o(t,e,o){if('function'!=typeof t)throw TypeError('rpcImpl must be a function');i.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(o);}(o.prototype=Object.create(i.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function t(e,o,n,r,s){if(!r)throw TypeError('request must be specified');var a=this;if(!s)return i.asPromise(t,a,e,o,n,r);if(a.rpcImpl)try{return a.rpcImpl(e,o[a.requestDelimited?'encodeDelimited':'encode'](r).finish(),function(t,i){if(t)return a.emit('error',t,e),s(t);if(null!==i){if(!(i instanceof n))try{i=n[a.responseDelimited?'decodeDelimited':'decode'](i);}catch(t){return a.emit('error',t,e),s(t);}return a.emit('data',i,e),s(null,i);}a.end(!0);});}catch(c){return a.emit('error',c,e),void setTimeout(function(){s(c);},0);}else setTimeout(function(){s(Error('already ended'));},0);},o.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit('end').off()),this;};},{'../util/minimal':40}],34:[function(t,e){'use strict';e.exports=s;var i=t('./namespace');((s.prototype=Object.create(i.prototype)).constructor=s).className='Service';var o=t('./method'),n=t('./util'),r=t('./rpc');function s(t,e){i.call(this,t,e),this.methods={},this._methodsArray=null;}function a(t){return t._methodsArray=null,t;}s.fromJSON=function(t,e){var i=new s(t,e.options);if(e.methods)for(var n=Object.keys(e.methods),r=0;r<n.length;++r)i.add(o.fromJSON(n[r],e.methods[n[r]]));return e.nested&&i.addJSON(e.nested),i.comment=e.comment,i;},s.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),o=!!t&&Boolean(t.keepComments);return n.toObject(['options',e&&e.options||void 0,'methods',i.arrayToJSON(this.methodsArray,t)||{},'nested',e&&e.nested||void 0,'comment',o?this.comment:void 0]);},Object.defineProperty(s.prototype,'methodsArray',{get:function(){return this._methodsArray||(this._methodsArray=n.toArray(this.methods));}}),s.prototype.get=function(t){return this.methods[t]||i.prototype.get.call(this,t);},s.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return i.prototype.resolve.call(this);},s.prototype.add=function(t){if(this.get(t.name))throw Error('duplicate name \''+t.name+'\' in '+this);return t instanceof o?(this.methods[t.name]=t,t.parent=this,a(this)):i.prototype.add.call(this,t);},s.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+' is not a member of '+this);return delete this.methods[t.name],t.parent=null,a(this);}return i.prototype.remove.call(this,t);},s.prototype.create=function(t,e,i){for(var o,s=new r.Service(t,e,i),a=0;a<this.methodsArray.length;++a){var c=n.lcFirst((o=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,'');s[c]=n.codegen(['r','c'],n.isReserved(c)?c+'_':c)('return this.rpcCall(m,q,s,r,c)')({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor});}return s;};},{'./method':23,'./namespace':24,'./rpc':32,'./util':38}],35:[function(t,e){'use strict';e.exports=h;var i=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,r=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,c=/\s/,l=/\\(.?)/g,p={0:'\0',r:'\r',n:'\n',t:'\t'};function u(t){return t.replace(l,function(t,e){switch(e){case'\\':case'':return e;default:return p[e]||'';}});}function h(t,e){t=t.toString();var l=0,p=t.length,h=1,d=null,f=null,y=0,_=!1,g=!1,m=[],v=null;function b(t){return Error('illegal '+t+' (line '+h+')');}function C(){var e='\''===v?n:o;e.lastIndex=l-1;var i=e.exec(t);if(!i)throw b('string');return l=e.lastIndex,T(v),v=null,u(i[1]);}function S(e){return t.charAt(e);}function w(i,o,n){d=t.charAt(i++),y=h,_=!1,g=n;var c,l=i-(e?2:3);do{if(--l<0||'\n'===(c=t.charAt(l))){_=!0;break;}}while(' '===c||'\t'===c);for(var p=t.substring(i,o).split(a),u=0;u<p.length;++u)p[u]=p[u].replace(e?s:r,'').trim();f=p.join('\n').trim();}function R(e){var i=I(e),o=t.substring(e,i);return/^\s*\/{1,2}/.test(o);}function I(t){for(var e=t;e<p&&'\n'!==S(e);)e++;return e;}function M(){if(m.length>0)return m.shift();if(v)return C();var o,n,r,s,a,u=0===l;do{if(l===p)return null;for(o=!1;c.test(r=S(l));)if('\n'===r&&(u=!0,++h),++l===p)return null;if('/'===S(l)){if(++l===p)throw b('comment');if('/'===S(l))if(e){if(s=l,a=!1,R(l)){a=!0;do{if((l=I(l))===p)break;l++;}while(R(l));}else l=Math.min(p,I(l)+1);a&&w(s,l,u),h++,o=!0;}else{for(a='/'===S(s=l+1);'\n'!==S(++l);)if(l===p)return null;++l,a&&w(s,l-1,u),++h,o=!0;}else{if('*'!==(r=S(l)))return'/';s=l+1,a=e||'*'===S(s);do{if('\n'===r&&++h,++l===p)throw b('comment');n=r,r=S(l);}while('*'!==n||'/'!==r);++l,a&&w(s,l-2,u),o=!0;}}}while(o);var d=l;if(i.lastIndex=0,!i.test(S(d++)))for(;d<p&&!i.test(S(d));)++d;var f=t.substring(l,l=d);return'"'!==f&&'\''!==f||(v=f),f;}function T(t){m.push(t);}function E(){if(!m.length){var t=M();if(null===t)return null;T(t);}return m[0];}return Object.defineProperty({next:M,peek:E,push:T,skip:function(t,e){var i=E();if(i===t)return M(),!0;if(!e)throw b('token \''+i+'\', \''+t+'\' expected');return!1;},cmnt:function(t){var i=null;return void 0===t?y===h-1&&(e||'*'===d||_)&&(i=g?f:null):(y<t&&E(),y!==t||_||!e&&'/'!==d||(i=g?null:f)),i;}},'line',{get:function(){return h;}});}h.unescape=u;},{}],36:[function(t,e){'use strict';e.exports=g;var i=t('./namespace');((g.prototype=Object.create(i.prototype)).constructor=g).className='Type';var o=t('./enum'),n=t('./oneof'),r=t('./field'),s=t('./mapfield'),a=t('./service'),c=t('./message'),l=t('./reader'),p=t('./writer'),u=t('./util'),h=t('./encoder'),d=t('./decoder'),f=t('./verifier'),y=t('./converter'),_=t('./wrappers');function g(t,e){i.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null;}function m(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t;}Object.defineProperties(g.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var i=this.fields[t[e]],o=i.id;if(this._fieldsById[o])throw Error('duplicate id '+o+' in '+this);this._fieldsById[o]=i;}return this._fieldsById;}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=u.toArray(this.fields));}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=u.toArray(this.oneofs));}},ctor:{get:function(){return this._ctor||(this.ctor=g.generateConstructor(this)());},set:function(t){var e=t.prototype;e instanceof c||((t.prototype=new c()).constructor=t,u.merge(t.prototype,e)),t.$type=t.prototype.$type=this,u.merge(t,c,!0),this._ctor=t;for(var i=0;i<this.fieldsArray.length;++i)this._fieldsArray[i].resolve();var o={};for(i=0;i<this.oneofsArray.length;++i)o[this._oneofsArray[i].resolve().name]={get:u.oneOfGetter(this._oneofsArray[i].oneof),set:u.oneOfSetter(this._oneofsArray[i].oneof)};i&&Object.defineProperties(t.prototype,o);}}}),g.generateConstructor=function(t){for(var e,i=u.codegen(['p'],t.name),o=0;o<t.fieldsArray.length;++o)(e=t._fieldsArray[o]).map?i('this%s={}',u.safeProp(e.name)):e.repeated&&i('this%s=[]',u.safeProp(e.name));return i('if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)')('this[ks[i]]=p[ks[i]]');},g.fromJSON=function(t,e){var c=new g(t,e.options);c.extensions=e.extensions,c.reserved=e.reserved;for(var l=Object.keys(e.fields),p=0;p<l.length;++p)c.add((void 0!==e.fields[l[p]].keyType?s.fromJSON:r.fromJSON)(l[p],e.fields[l[p]]));if(e.oneofs)for(l=Object.keys(e.oneofs),p=0;p<l.length;++p)c.add(n.fromJSON(l[p],e.oneofs[l[p]]));if(e.nested)for(l=Object.keys(e.nested),p=0;p<l.length;++p){var u=e.nested[l[p]];c.add((void 0!==u.id?r.fromJSON:void 0!==u.fields?g.fromJSON:void 0!==u.values?o.fromJSON:void 0!==u.methods?a.fromJSON:i.fromJSON)(l[p],u));}return e.extensions&&e.extensions.length&&(c.extensions=e.extensions),e.reserved&&e.reserved.length&&(c.reserved=e.reserved),e.group&&(c.group=!0),e.comment&&(c.comment=e.comment),c;},g.prototype.toJSON=function(t){var e=i.prototype.toJSON.call(this,t),o=!!t&&Boolean(t.keepComments);return u.toObject(['options',e&&e.options||void 0,'oneofs',i.arrayToJSON(this.oneofsArray,t),'fields',i.arrayToJSON(this.fieldsArray.filter(function(t){return!t.declaringField;}),t)||{},'extensions',this.extensions&&this.extensions.length?this.extensions:void 0,'reserved',this.reserved&&this.reserved.length?this.reserved:void 0,'group',this.group||void 0,'nested',e&&e.nested||void 0,'comment',o?this.comment:void 0]);},g.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var o=this.oneofsArray;for(e=0;e<o.length;)o[e++].resolve();return i.prototype.resolveAll.call(this);},g.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null;},g.prototype.add=function(t){if(this.get(t.name))throw Error('duplicate name \''+t.name+'\' in '+this);if(t instanceof r&&void 0===t.extend){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error('duplicate id '+t.id+' in '+this);if(this.isReservedId(t.id))throw Error('id '+t.id+' is reserved in '+this);if(this.isReservedName(t.name))throw Error('name \''+t.name+'\' is reserved in '+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),m(this);}return t instanceof n?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),m(this)):i.prototype.add.call(this,t);},g.prototype.remove=function(t){if(t instanceof r&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+' is not a member of '+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),m(this);}if(t instanceof n){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+' is not a member of '+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),m(this);}return i.prototype.remove.call(this,t);},g.prototype.isReservedId=function(t){return i.isReservedId(this.reserved,t);},g.prototype.isReservedName=function(t){return i.isReservedName(this.reserved,t);},g.prototype.create=function(t){return new this.ctor(t);},g.prototype.setup=function(){for(var t=this.fullName,e=[],i=0;i<this.fieldsArray.length;++i)e.push(this._fieldsArray[i].resolve().resolvedType);this.encode=h(this)({Writer:p,types:e,util:u}),this.decode=d(this)({Reader:l,types:e,util:u}),this.verify=f(this)({types:e,util:u}),this.fromObject=y.fromObject(this)({types:e,util:u}),this.toObject=y.toObject(this)({types:e,util:u});var o=_[t];if(o){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=o.fromObject.bind(n),n.toObject=this.toObject,this.toObject=o.toObject.bind(n);}return this;},g.prototype.encode=function(t,e){return this.setup().encode(t,e);},g.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim();},g.prototype.decode=function(t,e){return this.setup().decode(t,e);},g.prototype.decodeDelimited=function(t){return t instanceof l||(t=l.create(t)),this.decode(t,t.uint32());},g.prototype.verify=function(t){return this.setup().verify(t);},g.prototype.fromObject=function(t){return this.setup().fromObject(t);},g.prototype.toObject=function(t,e){return this.setup().toObject(t,e);},g.d=function(t){return function(e){u.decorateType(e,t);};};},{'./converter':13,'./decoder':14,'./encoder':15,'./enum':16,'./field':17,'./mapfield':21,'./message':22,'./namespace':24,'./oneof':26,'./reader':28,'./service':34,'./util':38,'./verifier':41,'./wrappers':42,'./writer':43}],37:[function(t,e,i){'use strict';var o=i,n=t('./util'),r=['double','float','int32','uint32','sint32','fixed32','sfixed32','int64','uint64','sint64','fixed64','sfixed64','bool','string','bytes'];function s(t,e){var i=0,o={};for(e|=0;i<t.length;)o[r[i+e]]=t[i++];return o;}o.basic=s([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=s([0,0,0,0,0,0,0,0,0,0,0,0,!1,'',n.emptyArray,null]),o.long=s([0,0,0,1,1],7),o.mapKey=s([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=s([1,5,0,0,0,5,5,0,0,0,1,1,0]);},{'./util':38}],38:[function(t,e){'use strict';var i,o,n=e.exports=t('./util/minimal'),r=t('./roots');n.codegen=t('@protobufjs/codegen'),n.fetch=t('@protobufjs/fetch'),n.path=t('@protobufjs/path'),n.fs=n.inquire('fs'),n.toArray=function(t){if(t){for(var e=Object.keys(t),i=new Array(e.length),o=0;o<e.length;)i[o]=t[e[o++]];return i;}return[];},n.toObject=function(t){for(var e={},i=0;i<t.length;){var o=t[i++],n=t[i++];void 0!==n&&(e[o]=n);}return e;};var s=/\\/g,a=/"/g;n.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t);},n.safeProp=function(t){return!/^[$\w_]+$/.test(t)||n.isReserved(t)?'["'+t.replace(s,'\\\\').replace(a,'\\"')+'"]':'.'+t;},n.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1);};var c=/_([a-z])/g;n.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(c,function(t,e){return e.toUpperCase();});},n.compareFieldsById=function(t,e){return t.id-e.id;},n.decorateType=function(e,o){if(e.$type)return o&&e.$type.name!==o&&(n.decorateRoot.remove(e.$type),e.$type.name=o,n.decorateRoot.add(e.$type)),e.$type;i||(i=t('./type'));var r=new i(o||e.name);return n.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,'$type',{value:r,enumerable:!1}),Object.defineProperty(e.prototype,'$type',{value:r,enumerable:!1}),r;};var l=0;n.decorateEnum=function(e){if(e.$type)return e.$type;o||(o=t('./enum'));var i=new o('Enum'+l++,e);return n.decorateRoot.add(i),Object.defineProperty(e,'$type',{value:i,enumerable:!1}),i;},n.setProperty=function(t,e,i){if('object'!=typeof t)throw TypeError('dst must be an object');if(!e)throw TypeError('path must be specified');return function t(e,i,o){var n=i.shift();if(i.length>0)e[n]=t(e[n]||{},i,o);else{var r=e[n];r&&(o=[].concat(r).concat(o)),e[n]=o;}return e;}(t,e=e.split('.'),i);},Object.defineProperty(n,'decorateRoot',{get:function(){return r.decorated||(r.decorated=new(t('./root'))());}});},{'./enum':16,'./root':30,'./roots':31,'./type':36,'./util/minimal':40,'@protobufjs/codegen':3,'@protobufjs/fetch':5,'@protobufjs/path':8}],39:[function(t,e){'use strict';e.exports=o;var i=t('../util/minimal');function o(t,e){this.lo=t>>>0,this.hi=e>>>0;}var n=o.zero=new o(0,0);n.toNumber=function(){return 0;},n.zzEncode=n.zzDecode=function(){return this;},n.length=function(){return 1;};var r=o.zeroHash='\0\0\0\0\0\0\0\0';o.fromNumber=function(t){if(0===t)return n;var e=t<0;e&&(t=-t);var i=t>>>0,r=(t-i)/4294967296>>>0;return e&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new o(i,r);},o.from=function(t){if('number'==typeof t)return o.fromNumber(t);if(i.isString(t)){if(!i.Long)return o.fromNumber(parseInt(t,10));t=i.Long.fromString(t);}return t.low||t.high?new o(t.low>>>0,t.high>>>0):n;},o.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,i=~this.hi>>>0;return e||(i=i+1>>>0),-(e+4294967296*i);}return this.lo+4294967296*this.hi;},o.prototype.toLong=function(t){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)};};var s=String.prototype.charCodeAt;o.fromHash=function(t){return t===r?n:new o((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0);},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24);},o.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this;},o.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this;},o.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:i<128?9:10;};},{'../util/minimal':40}],40:[function(t,e,i){(function(e){'use strict';var o=i;function n(t,e,i){for(var o=Object.keys(e),n=0;n<o.length;++n)void 0!==t[o[n]]&&i||(t[o[n]]=e[o[n]]);return t;}function r(t){function e(t,i){if(!(this instanceof e))return new e(t,i);Object.defineProperty(this,'message',{get:function(){return t;}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,'stack',{value:new Error().stack||''}),i&&n(this,i);}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,'name',{get:function(){return t;}}),e.prototype.toString=function(){return this.name+': '+this.message;},e;}o.asPromise=t('@protobufjs/aspromise'),o.base64=t('@protobufjs/base64'),o.EventEmitter=t('@protobufjs/eventemitter'),o.float=t('@protobufjs/float'),o.inquire=t('@protobufjs/inquire'),o.utf8=t('@protobufjs/utf8'),o.pool=t('@protobufjs/pool'),o.LongBits=t('./longbits'),o.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),o.global=o.isNode&&e||'undefined'!=typeof window&&window||'undefined'!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(t){return'number'==typeof t&&isFinite(t)&&Math.floor(t)===t;},o.isString=function(t){return'string'==typeof t||t instanceof String;},o.isObject=function(t){return t&&'object'==typeof t;},o.isset=o.isSet=function(t,e){var i=t[e];return!(null==i||!t.hasOwnProperty(e))&&('object'!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0);},o.Buffer=function(){try{var t=o.inquire('buffer').Buffer;return t.prototype.utf8Write?t:null;}catch(e){return null;}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(t){return'number'==typeof t?o.Buffer?o._Buffer_allocUnsafe(t):new o.Array(t):o.Buffer?o._Buffer_from(t):'undefined'==typeof Uint8Array?t:new Uint8Array(t);},o.Array='undefined'!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire('long'),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(t){return t?o.LongBits.from(t).toHash():o.LongBits.zeroHash;},o.longFromHash=function(t,e){var i=o.LongBits.fromHash(t);return o.Long?o.Long.fromBits(i.lo,i.hi,e):i.toNumber(Boolean(e));},o.merge=n,o.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1);},o.newError=r,o.ProtocolError=r('ProtocolError'),o.oneOfGetter=function(t){for(var e={},i=0;i<t.length;++i)e[t[i]]=1;return function(){for(var t=Object.keys(this),i=t.length-1;i>-1;--i)if(1===e[t[i]]&&void 0!==this[t[i]]&&null!==this[t[i]])return t[i];};},o.oneOfSetter=function(t){return function(e){for(var i=0;i<t.length;++i)t[i]!==e&&delete this[t[i]];};},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var t=o.Buffer;t?(o._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,i){return new t(e,i);},o._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e);}):o._Buffer_from=o._Buffer_allocUnsafe=null;};}.call(this,'undefined'!=typeof global?global:'undefined'!=typeof self?self:'undefined'!=typeof window?window:{}));},{'./longbits':39,'@protobufjs/aspromise':1,'@protobufjs/base64':2,'@protobufjs/eventemitter':4,'@protobufjs/float':6,'@protobufjs/inquire':7,'@protobufjs/pool':9,'@protobufjs/utf8':10}],41:[function(t,e){'use strict';e.exports=function(t){var e=o.codegen(['m'],t.name+'$verify')('if(typeof m!=="object"||m===null)')('return%j','object expected'),i={};t.oneofsArray.length&&e('var p={}');for(var a=0;a<t.fieldsArray.length;++a){var c=t._fieldsArray[a].resolve(),l='m'+o.safeProp(c.name);if(c.optional&&e('if(%s!=null&&m.hasOwnProperty(%j)){',l,c.name),c.map)e('if(!util.isObject(%s))',l)('return%j',n(c,'object'))('var k=Object.keys(%s)',l)('for(var i=0;i<k.length;++i){'),s(e,c,'k[i]'),r(e,c,a,l+'[k[i]]')('}');else if(c.repeated)e('if(!Array.isArray(%s))',l)('return%j',n(c,'array'))('for(var i=0;i<%s.length;++i){',l),r(e,c,a,l+'[i]')('}');else{if(c.partOf){var p=o.safeProp(c.partOf.name);1===i[c.partOf.name]&&e('if(p%s===1)',p)('return%j',c.partOf.name+': multiple values'),i[c.partOf.name]=1,e('p%s=1',p);}r(e,c,a,l);}c.optional&&e('}');}return e('return null');};var i=t('./enum'),o=t('./util');function n(t,e){return t.name+': '+e+(t.repeated&&'array'!==e?'[]':t.map&&'object'!==e?'{k:'+t.keyType+'}':'')+' expected';}function r(t,e,o,r){if(e.resolvedType)if(e.resolvedType instanceof i){t('switch(%s){',r)('default:')('return%j',n(e,'enum value'));for(var s=Object.keys(e.resolvedType.values),a=0;a<s.length;++a)t('case %i:',e.resolvedType.values[s[a]]);t('break')('}');}else t('{')('var e=types[%i].verify(%s);',o,r)('if(e)')('return%j+e',e.name+'.')('}');else switch(e.type){case'int32':case'uint32':case'sint32':case'fixed32':case'sfixed32':t('if(!util.isInteger(%s))',r)('return%j',n(e,'integer'));break;case'int64':case'uint64':case'sint64':case'fixed64':case'sfixed64':t('if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))',r,r,r,r)('return%j',n(e,'integer|Long'));break;case'float':case'double':t('if(typeof %s!=="number")',r)('return%j',n(e,'number'));break;case'bool':t('if(typeof %s!=="boolean")',r)('return%j',n(e,'boolean'));break;case'string':t('if(!util.isString(%s))',r)('return%j',n(e,'string'));break;case'bytes':t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)('return%j',n(e,'buffer'));}return t;}function s(t,e,i){switch(e.keyType){case'int32':case'uint32':case'sint32':case'fixed32':case'sfixed32':t('if(!util.key32Re.test(%s))',i)('return%j',n(e,'integer key'));break;case'int64':case'uint64':case'sint64':case'fixed64':case'sfixed64':t('if(!util.key64Re.test(%s))',i)('return%j',n(e,'integer|Long key'));break;case'bool':t('if(!util.key2Re.test(%s))',i)('return%j',n(e,'boolean key'));}return t;}},{'./enum':16,'./util':38}],42:[function(t,e,i){'use strict';var o=i,n=t('./message');o['.google.protobuf.Any']={fromObject:function(t){if(t&&t['@type']){var e=t['@type'].substring(t['@type'].lastIndexOf('/')+1),i=this.lookup(e);if(i){var o='.'===t['@type'].charAt(0)?t['@type'].substr(1):t['@type'];return-1===o.indexOf('/')&&(o='/'+o),this.create({type_url:o,value:i.encode(i.fromObject(t)).finish()});}}return this.fromObject(t);},toObject:function(t,e){var i='',o='';if(e&&e.json&&t.type_url&&t.value){o=t.type_url.substring(t.type_url.lastIndexOf('/')+1),i=t.type_url.substring(0,t.type_url.lastIndexOf('/')+1);var r=this.lookup(o);r&&(t=r.decode(t.value));}if(!(t instanceof this.ctor)&&t instanceof n){var s=t.$type.toObject(t,e);return''===i&&(i='type.googleapis.com/'),o=i+('.'===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),s['@type']=o,s;}return this.toObject(t,e);}};},{'./message':22}],43:[function(t,e){'use strict';e.exports=p;var i,o=t('./util/minimal'),n=o.LongBits,r=o.base64,s=o.utf8;function a(t,e,i){this.fn=t,this.len=e,this.next=void 0,this.val=i;}function c(){}function l(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states;}function p(){this.len=0,this.head=new a(c,0,0),this.tail=this.head,this.states=null;}var u=function(){return o.Buffer?function(){return(p.create=function(){return new i();})();}:function(){return new p();};};function h(t,e,i){e[i]=255&t;}function d(t,e){this.len=t,this.next=void 0,this.val=e;}function f(t,e,i){for(;t.hi;)e[i++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[i++]=127&t.lo|128,t.lo=t.lo>>>7;e[i++]=t.lo;}function y(t,e,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24;}p.create=u(),p.alloc=function(t){return new o.Array(t);},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(t,e,i){return this.tail=this.tail.next=new a(t,e,i),this.len+=e,this;},d.prototype=Object.create(a.prototype),d.prototype.fn=function(t,e,i){for(;t>127;)e[i++]=127&t|128,t>>>=7;e[i]=t;},p.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new d((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this;},p.prototype.int32=function(t){return t<0?this._push(f,10,n.fromNumber(t)):this.uint32(t);},p.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0);},p.prototype.uint64=function(t){var e=n.from(t);return this._push(f,e.length(),e);},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(t){var e=n.from(t).zzEncode();return this._push(f,e.length(),e);},p.prototype.bool=function(t){return this._push(h,1,t?1:0);},p.prototype.fixed32=function(t){return this._push(y,4,t>>>0);},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(t){var e=n.from(t);return this._push(y,4,e.lo)._push(y,4,e.hi);},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(t){return this._push(o.float.writeFloatLE,4,t);},p.prototype.double=function(t){return this._push(o.float.writeDoubleLE,8,t);};var _=o.Array.prototype.set?function(t,e,i){e.set(t,i);}:function(t,e,i){for(var o=0;o<t.length;++o)e[i+o]=t[o];};p.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(h,1,0);if(o.isString(t)){var i=p.alloc(e=r.length(t));r.decode(t,i,0),t=i;}return this.uint32(e)._push(_,e,t);},p.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(h,1,0);},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new a(c,0,0),this.len=0,this;},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new a(c,0,0),this.len=0),this;},p.prototype.ldelim=function(){var t=this.head,e=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=t.next,this.tail=e,this.len+=i),this;},p.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),i=0;t;)t.fn(t.val,e,i),i+=t.len,t=t.next;return e;},p._configure=function(t){i=t,p.create=u(),i._configure();};},{'./util/minimal':40}],44:[function(t,e){'use strict';e.exports=n;var i=t('./writer');(n.prototype=Object.create(i.prototype)).constructor=n;var o=t('./util/minimal');function n(){i.call(this);}function r(t,e,i){t.length<40?o.utf8.write(t,e,i):e.utf8Write?e.utf8Write(t,i):e.write(t,i);}n._configure=function(){n.alloc=o._Buffer_allocUnsafe,n.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&'set'===o.Buffer.prototype.set.name?function(t,e,i){e.set(t,i);}:function(t,e,i){if(t.copy)t.copy(e,i,0,t.length);else for(var o=0;o<t.length;)e[i++]=t[o++];};},n.prototype.bytes=function(t){o.isString(t)&&(t=o._Buffer_from(t,'base64'));var e=t.length>>>0;return this.uint32(e),e&&this._push(n.writeBytesBuffer,e,t),this;},n.prototype.string=function(t){var e=o.Buffer.byteLength(t);return this.uint32(e),e&&this._push(r,e,t),this;},n._configure();},{'./util/minimal':40,'./writer':43}],ES6Polyfill:[function(t,e,i){'use strict';cc._RF.push(e,'022290GTH9GnrXeAqqgh1gw','ES6Polyfill'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('TSMap'),n=window;n.Map||(n.Map=o.default),cc._RF.pop();},{}],EffectBase:[function(t,e,i){'use strict';cc._RF.push(e,'8ca17P4RCtMxbFh/7Zuydoo','EffectBase'),Object.defineProperty(i,'__esModule',{value:!0}),i.EffectBase=void 0;var o=t('CreateAnimaForSheet'),n=t('ResConst'),r=t('ResMgr'),s=t('UtilColor'),a=function(){function t(){this._isLoading=!1,this.ACTION_FRAMERATE=8;}return Object.defineProperty(t,'Int',{get:function(){return null==this._int&&(this._int=new t()),this._int;},enumerable:!1,configurable:!0}),t.prototype.showAnima=function(t,e,i,a,c,l,p,u,h){var d=this;void 0===p&&(p=this.ACTION_FRAMERATE),void 0===u&&(u=0),void 0===h&&(h=0),this._isLoading=!0,e&&(e._curLoadPath=t),r.ResMgr.I.loadRemote(t,n.AssetType.SpriteAtlas_json,function(n,r){if(!(n||e&&!e.isValid||e&&e._curLoadPath!==t)){var f=e||new cc.Node(t);f._curLoadPath=t;var y=f.getComponent(o.CreateAnimaForSheet);y||(y=f.addComponent(o.CreateAnimaForSheet));var _=f.getComponent(cc.Sprite);_||((_=f.addComponent(cc.Sprite)).trim=!1,_.sizeMode=cc.Sprite.SizeMode.RAW,s.UtilColor.setGrayByMode(_.node,h)),_.DA='--',y.addRef(r);var g=d.ACTION_FRAMERATE;p&&(g=p);var m=cc.AnimationClip.createWithSpriteFrames(r.getSpriteFrames(),g);m.wrapMode=c,m.name='default';var v=f.getComponent(cc.Animation);v||(v=f.addComponent(cc.Animation)),v.playOnLoad=!1;var b=v.addClip(m);v.play('default'),c===cc.WrapMode.Loop&&u>0&&(b.repeatCount=u),i.call(a,f),f.parent||(v.removeClip(m,!0),f.destroy()),l&&(v.targetOff(d),v.on(cc.Animation.EventType.FINISHED,function(){l.call(a,f),v.targetOff(d),l=null;},a)),d._isLoading=!1;}});},t.prototype.showAnim=function(t,e,i,o,n,r,s){void 0===i&&(i=cc.WrapMode.Loop),void 0===o&&(o=null),void 0===n&&(n=!1),void 0===r&&(r=1),void 0===s&&(s=this.ACTION_FRAMERATE),this.showAnima(t,null,function(i){i._curLoadPath===t&&e&&e(i);},this,i,function(t){o&&o(t),i===cc.WrapMode.Normal&&t.destroy();},s,0,n?r:0);},t.prototype.showAnimaLocal=function(t,e,i,o,n,r,s,a,c){var l=this;void 0===s&&(s=this.ACTION_FRAMERATE),void 0===a&&(a=0),void 0===c&&(c=0),this._isLoading=!0,e&&(e._curLoadPath=t);var p=null,u=null,h=function(c){var p=e||new cc.Node(t);p._curLoadPath=t;var u=p.getComponent(cc.Sprite);u||((u=p.addComponent(cc.Sprite)).trim=!1,u.sizeMode=cc.Sprite.SizeMode.RAW),u.DA='--';var h=l.ACTION_FRAMERATE;s&&(h=s);var d=/[a-zA-Z]+/g,f={};for(var y in c._spriteFrames){var _=t.split('/'),g=_[_.length-1],m='';if(y.indexOf(g+'_')>=0)m=y.split(g+'_')[1];else{var v=y.split('-');m=v[v.length-1];}if(m){var b=m.split('_');if(b.length>1){var C=b[0].match(d)[0];f[C]=f[C]||[],f[C].push(c.getSpriteFrame(y));}}}var S=p.getComponent(cc.Animation);S||(S=p.addComponent(cc.Animation));var w=[];for(var m in f){var R=cc.AnimationClip.createWithSpriteFrames(f[m],h);R.wrapMode=n,R.name=m;var I=S.addClip(R);n===cc.WrapMode.Loop&&a>0&&(I.repeatCount=a),w.push(R);}S&&(S.playOnLoad=!1,S.play('Idle'),i.call(o,p),p.parent||(w.forEach(function(t){S.removeClip(t,!0);}),p.destroy()),r&&(S.targetOff(l),S.on(cc.Animation.EventType.FINISHED,function(){r.call(o,p),S.targetOff(l),r=null;},o)),l._isLoading=!1);};cc.resources.load(t,cc.Texture2D,function(t,e){if(t)console.error(t);else if(p=e,e.addRef(),u){var i=l.getSpriteAtlasByPlists(p,u.json);h(i);}}),cc.resources.load(t,cc.JsonAsset,function(t,e){if(t)console.error(t);else if(u=e,p){var i=l.getSpriteAtlasByPlists(p,u.json);h(i);}});},t.prototype.getSpriteAtlasByPlists=function(t,e){var i=this,o=new cc.SpriteAtlas();return Array.isArray(t)&&Array.isArray(e)?e.forEach(function(e,n){i.assembleSpriteAtlas(o,t[n],e);}):Array.isArray(t)||Array.isArray(e)||this.assembleSpriteAtlas(o,t,e),o;},t.prototype.assembleSpriteAtlas=function(t,e,i){for(var o in i){var n=i[o],r=n.split(','),s=1==+r.shift(),a=[[+r.shift(),+r.shift()],[+r.shift(),+r.shift()]],c=[+r.shift(),+r.shift()],l=[+r.shift(),+r.shift()],p=cc.rect(a[0][0],a[0][1],a[1][0],a[1][1]),u=cc.v2(c[0],c[1]),h=cc.size(l[0],l[1]),d=new cc.SpriteFrame(e,p,s,u,h);d.addRef(),d.name=o,t._spriteFrames[o]=d,n=null,a=null,c=null,l=null;}return t._uuid=t._uuid||e._uuid,t;},t._int=null,t;}();i.EffectBase=a,cc._RF.pop();},{}],EffectMgr:[function(t,e,i){'use strict';cc._RF.push(e,'a4984Ry3xRNxKTzaHvX/HQK','EffectMgr');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.EffectMgr=void 0;var s=t('EffectBase'),a=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}var i;return n(e,t),i=e,Object.defineProperty(e,'I',{get:function(){return null==this._I&&(this._I=new i()),this._I;},enumerable:!1,configurable:!0}),e.prototype.showAnimaResult=function(t,e,i){if(i&&i.isValid&&cc.isValid(i)){if(e._curLoadPath!==t)return;var o=i.getChildByName(e.name);o&&(o.destroy(),i.removeChild(o)),i.addChild(e),e.x=0.5*i.width-i.anchorX*i.width,e.y=0.5*i.height-i.anchorY*i.height;}},e.prototype.showEffectLocal=function(t,e,i,o,n){var r=this;void 0===i&&(i=cc.WrapMode.Loop),void 0===o&&(o=null),void 0===n&&(n=null),this.showAnimaLocal(t,null,function(i){r.showAnimaResult(t,i,e),o&&o(i);},this,i,function(t){n&&n(t),i===cc.WrapMode.Normal&&t.destroy(),t.destroy();});},e.prototype.showEffect=function(t,e,i,o,n){var r=this;void 0===i&&(i=cc.WrapMode.Loop),void 0===o&&(o=null),void 0===n&&(n=null),this.showAnima(t,null,function(i){r.showAnimaResult(t,i,e),o&&o(i);},this,i,function(t){n&&n(t),i===cc.WrapMode.Normal&&t.destroy();});},e.prototype.delEffect=function(t,e){var i=null==e?void 0:e.getChildByName(t);i&&i.isValid&&(i.destroy(),e.removeChild(i));},e.prototype.showEffectBySelf=function(t,e,i,o,n){void 0===i&&(i=cc.WrapMode.Loop),this.showAnima(t,e,function(t){o&&o(t);},this,i,function(t){n&&n(t),i===cc.WrapMode.Normal&&t.destroy();});},e._I=null,i=r([a('EffectMgr')],e);}(s.EffectBase);i.EffectMgr=c,cc._RF.pop();},{}],EntityConst:[function(t,e,i){'use strict';cc._RF.push(e,'a7f36kD9XhMyYEjbd4iWK+Q','EntityConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.MonsterType=i.RoleType=i.EntityType=i.RoleStatus=i.PLAYER_MOVE_SPEED=i.CCheckDistance=i.BACKDISTANCE=i.LOSTDISTANCE=i.CENTER_R=i.MOVESPEED=void 0,i.MOVESPEED=5,i.CENTER_R=180,i.LOSTDISTANCE=150000,i.BACKDISTANCE=500000,i.CCheckDistance=10000,i.PLAYER_MOVE_SPEED=500,function(t){t[t.Idle=0]='Idle',t[t.Move=1]='Move',t[t.FindTarget=2]='FindTarget',t[t.Back=3]='Back',t[t.Lost=4]='Lost',t[t.Attack=5]='Attack';}(i.RoleStatus||(i.RoleStatus={})),function(t){t[t.CenterPoint=0]='CenterPoint',t[t.Role=1]='Role',t[t.Monster=2]='Monster';}(i.EntityType||(i.EntityType={})),function(t){t[t.Role1=0]='Role1',t[t.Role2=1]='Role2',t[t.Role3=2]='Role3',t[t.Role4=3]='Role4',t[t.Role5=4]='Role5',t[t.Role6=5]='Role6',t[t.Role7=6]='Role7',t[t.Role8=7]='Role8';}(i.RoleType||(i.RoleType={})),function(t){t[t.monster3=3]='monster3',t[t.monster4=4]='monster4',t[t.monster5=5]='monster5',t[t.monster6=6]='monster6',t[t.monster7=7]='monster7',t[t.monster8=8]='monster8',t[t.monster9=9]='monster9',t[t.monster11=11]='monster11',t[t.monster12=12]='monster12',t[t.monster16=16]='monster16',t[t.monster17=17]='monster17',t[t.monster22=22]='monster22',t[t.monster23=23]='monster23',t[t.monster24=24]='monster24',t[t.monster25=25]='monster25',t[t.monster26=26]='monster26',t[t.monster28=28]='monster28',t[t.monster29=29]='monster29',t[t.monster30=30]='monster30',t[t.monster31=31]='monster31',t[t.monster32=32]='monster32',t[t.monster33=33]='monster33',t[t.monster34=34]='monster34',t[t.monster35=35]='monster35',t[t.monster37=37]='monster37',t[t.monster38=38]='monster38',t[t.monster40=40]='monster40',t[t.monster41=41]='monster41',t[t.monster51=51]='monster51',t[t.monster52=52]='monster52',t[t.monster53=53]='monster53',t[t.monster54=54]='monster54',t[t.monster55=55]='monster55',t[t.monster56=56]='monster56',t[t.monster57=57]='monster57',t[t.monster58=58]='monster58',t[t.monster59=59]='monster59',t[t.monster60=60]='monster60',t[t.monster61=61]='monster61',t[t.monster62=62]='monster62',t[t.monster63=63]='monster63',t[t.monster64=64]='monster64',t[t.monster65=65]='monster65',t[t.monster66=66]='monster66',t[t.monster67=67]='monster67',t[t.monster68=68]='monster68',t[t.monster69=69]='monster69',t[t.monster70=70]='monster70',t[t.monster71=71]='monster71',t[t.monster72=72]='monster72',t[t.monster73=73]='monster73',t[t.monster74=74]='monster74',t[t.monster75=75]='monster75',t[t.monster76=76]='monster76',t[t.monster77=77]='monster77',t[t.monster78=78]='monster78',t[t.monster79=79]='monster79',t[t.monster80=80]='monster80',t[t.monster81=81]='monster81',t[t.monster82=82]='monster82',t[t.monster83=83]='monster83',t[t.monster84=84]='monster84',t[t.monster85=85]='monster85',t[t.monster86=86]='monster86',t[t.monster87=87]='monster87',t[t.monster95=95]='monster95',t[t.monster96=96]='monster96',t[t.monster97=97]='monster97',t[t.monster98=98]='monster98',t[t.monster99=99]='monster99',t[t.monster105=105]='monster105',t[t.monster113=113]='monster113',t[t.monster117=117]='monster117',t[t.monster122=122]='monster122',t[t.monster181=181]='monster181',t[t.monster182=182]='monster182',t[t.monster183=183]='monster183',t[t.monster184=184]='monster184',t[t.monster185=185]='monster185',t[t.monster187=187]='monster187',t[t.monster188=188]='monster188',t[t.monster189=189]='monster189',t[t.monster190=190]='monster190',t[t.monster191=191]='monster191',t[t.monster192=192]='monster192',t[t.monster193=193]='monster193',t[t.monster194=194]='monster194',t[t.monster195=195]='monster195',t[t.monster196=196]='monster196',t[t.monster197=197]='monster197',t[t.monster198=198]='monster198',t[t.monster199=199]='monster199',t[t.monster200=200]='monster200',t[t.monster201=201]='monster201',t[t.monster202=202]='monster202',t[t.monster203=203]='monster203',t[t.monster204=204]='monster204',t[t.monster205=205]='monster205',t[t.monster206=206]='monster206',t[t.monster207=207]='monster207',t[t.monster208=208]='monster208';}(i.MonsterType||(i.MonsterType={})),cc._RF.pop();},{}],EntityMgr:[function(t,e,i){'use strict';cc._RF.push(e,'2ba2bp9ZR9IlKX3hF5iy2mQ','EntityMgr'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('SATConst'),n=t('SATPolygonCld'),r=t('EntityConst'),s=t('Monster'),a=function(){function t(){this.parent=null,this.monsterPixMap=cc.js.createMap(),this.worldPosNode=new cc.Node('test'),this.staticDataMap=cc.js.createMap();}return Object.defineProperty(t,'I',{get:function(){return null==this._i&&(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.setParent=function(t){this.parent=t,this.worldPosNode.parent=t;},t.prototype.addMonster=function(t){return new s.Monster({id:t,entityType:r.EntityType.Monster,name:'Monster'+t});},t.prototype.createMonsterGround=function(t,e,i){for(var o=0;o<e;o++){var n=Math.floor(200*Math.random()),r=360/e*o+60*Math.random(),s=i.x+n*Math.cos(r*Math.PI/180),a=i.y+n*Math.sin(r*Math.PI/180);this.worldPosNode.x=s,this.worldPosNode.y=a;var c={WolrdPos:this.worldPosNode.getWorldVec2(),Type:t,RealPos:cc.v2(s,a),MonsterNode:null};this.monsterPixMap[t]||(this.monsterPixMap[t]=[]),this.monsterPixMap[t].push(c);}},t.prototype.createMonster=function(t,e){var i=this.addMonster(t);return this.parent.addChild(i),i.initCom(e),i;},t.prototype.createStaticNode=function(t,e,i,r){var s=new cc.Node(t);return s.x=i,s.y=r,s.addComponent(n.default).init(cc.SATVec2(s.x,s.y),e,{massLev:100,type:o.SATColliderType.Static}),s.width=100,s.height=100,this.parent.addChild(s),s;},t._i=null,t;}();i.default=a,cc._RF.pop();},{}],EntityRole:[function(t,e,i){'use strict';cc._RF.push(e,'c525eIdcIZFGIU8QPe9Uugk','EntityRole');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0});var r=t('EventClient'),s=t('Entity'),a=t('EntityConst'),c=t('RoleAI'),l=t('RoleMgr'),p=function(t){function e(e){var i=t.call(this,e)||this;return i._isStop=!0,i._isLost=!1,i._roleAI=null,i.eventOnOff(!0),i;}return n(e,t),Object.defineProperty(e.prototype,'roleAI',{get:function(){return this._roleAI?this._roleAI:(this._roleAI=this.getCom(c.default)||this.addComponent(c.default),this._roleAI);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isStop',{get:function(){return this._isStop;},set:function(t){this._isStop=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isLost',{get:function(){return this._isLost;},set:function(t){this._isLost!==t&&(this._isLost=t,t&&(console.log('掉队了',this.id),this.roleAI.setStatus(a.RoleStatus.Lost)));},enumerable:!1,configurable:!0}),e.prototype.backToTeam=function(){console.log('归队\uFF1A',this.id);var t=l.default.I.getCenterPoint().position;this.setPosition(t),this._isLost=!1;},e.prototype.run=function(){var t,e,i;(null===(e=null===(t=this._anim)||void 0===t?void 0:t.getAnimationState('Move'))||void 0===e?void 0:e.isPlaying)||null===(i=this._anim)||void 0===i||i.play('Move');},e.prototype.stand=function(){var t,e,i;(null===(e=null===(t=this._anim)||void 0===t?void 0:t.getAnimationState('Idle'))||void 0===e?void 0:e.isPlaying)||null===(i=this._anim)||void 0===i||i.play('Idle');},e.prototype.updateDir=function(t){2===t?this._anim&&(this._anim.node.scaleX=1):this._anim&&(this._anim.node.scaleX=-1);},e.prototype.eventOnOff=function(t){void 0===t&&(t=!0),t?r.EventClient.I.on:r.EventClient.I.off;},e.prototype.onJoystickMove=function(t){this._isStop=!1,this._SATCircle.resetRadius(this._colliderMoveR),this.run(),this.zIndex=-(this.y+10000),t>=90&&t<=180||t>=-180&&t<=-90?this.updateDir(2):t>=-90&&t<=90&&this.updateDir(-2);},e.prototype.onJoystickStop=function(){this._isStop=!0,this._SATCircle.resetRadius(this._colliderStopR),this.stand();},e.prototype.followCenterPoint=function(){var t=cc.v2(0,0);if(this._isStop){var e=(r=(n=l.default.I.centerPos).x-this.x)*r+(s=n.y-this.y)*s,i=Math.atan2(s,r);if(e>20000){var o=1;e>40000?o=1.5:e>30000&&(o=1.2),t=cc.v2(Math.cos(i)*a.MOVESPEED*o,Math.sin(i)*a.MOVESPEED*o);}else t=cc.v2(0,0);}else{e=(r=(n=l.default.I.toPos()).x-this.x)*r+(s=n.y-this.y)*s;var n,r,s,c=180*(i=Math.atan2(s,r))/Math.PI;e>10000?(o=1,e>40000?o=1.5:e>20000&&(o=1.2),t=cc.v2(Math.cos(i)*a.MOVESPEED*o,Math.sin(i)*a.MOVESPEED*o)):t=cc.v2(0,0),c>=90&&c<=180||c>=-180&&c<=-90?this.updateDir(2):c>=-90&&c<=90&&this.updateDir(-2);}var p=cc.v2(this.x+t.x,this.y+t.y);this._SATCircle.setPostion(p);},e.prototype.checkDrop=function(){var t=l.default.I.centerPos,e=(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y);e>a.LOSTDISTANCE?(this.isLost=!0,e>a.BACKDISTANCE&&this.backToTeam()):this.isLost=!1;},e.prototype.mainUpdate=function(t){this.isMoving?this.walkUpdate(t):(this.followCenterPoint(),this.checkDrop());},e.prototype.release=function(){this.eventOnOff(!1);},e;}(s.default);i.default=p,cc._RF.pop();},{}],Entity:[function(t,e,i){'use strict';cc._RF.push(e,'1401dEAz1lJwY+pDZB6qbvz','Entity');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('SATCircleCld'),a=t('EffectMgr'),c=t('UtilMap'),l=t('EntityConst'),p=cc._decorator,u=p.ccclass,h=(p.property,function(t){function e(e){var i=t.call(this)||this;return i._id=0,i._entityType=l.EntityType.Role,i._SATCircle=null,i._colliderStopR=32,i._colliderMoveR=18,i._anim=null,i._moveSpeed=l.PLAYER_MOVE_SPEED,i._moveAngle=0,i._nodeIndex=0,i._roadNodeArr=[],i._ctx=null,i._checkDistance=l.CCheckDistance,i._moving=null,i._test=!0,i._id=e.id,i._entityType=e.entityType,i.x=e.initX,i.y=e.initY,i.name=e.name||'entity'+e.id,e.colliderMoveR&&(i._colliderMoveR=e.colliderMoveR),e.colliderStopR&&(i._colliderStopR=e.colliderStopR),i.initEntity(e.initX,e.initY,e.colliderType),i;}return n(e,t),Object.defineProperty(e.prototype,'id',{get:function(){return this._id;},enumerable:!1,configurable:!0}),e.prototype.initEntity=function(t,e,i){i&&(this._SATCircle=this.addComponent(s.default),this._SATCircle.init(cc.SATVec2(t,e),this._colliderStopR,{massLev:4,type:i})),this.width=30,this.height=50,this._entityType===l.EntityType.Role?this.addRoleAnim():this._entityType===l.EntityType.Monster&&this.addAnim();},e.prototype.addAnim=function(){},e.prototype.addRoleAnim=function(){var t=this,e=0;switch(this._id){case l.RoleType.Role1:e=81002;break;case l.RoleType.Role2:e=81003;break;case l.RoleType.Role3:e=82001;break;case l.RoleType.Role4:e=82002;break;case l.RoleType.Role5:e=82003;break;case l.RoleType.Role6:e=83002;break;case l.RoleType.Role7:e=83004;break;case l.RoleType.Role8:e=83006;break;default:e=82005;}a.EffectMgr.I.showEffectLocal('action/Hero'+e,this,cc.WrapMode.Loop,function(e){t._anim=e.getComponent(cc.Animation);});},e.prototype.run=function(){},e.prototype.stand=function(){},e.prototype.attack=function(){},Object.defineProperty(e.prototype,'isMoving',{get:function(){return this._moving;},set:function(t){this._moving=t;},enumerable:!1,configurable:!0}),e.prototype.walkByRoad=function(t,e,i){void 0===i&&(i=null),console.warn('-------walkByRoad--------',t),this._moveEndCallback=e,this._ctx=i,this._roadNodeArr=t,this._nodeIndex=0,this._moveAngle=0,this._walk(),this._move();},e.prototype._walk=function(){this._nodeIndex>=this._roadNodeArr.length-1||(this._nodeIndex++,console.warn('-------_walk--------',this._nodeIndex));},e.prototype._move=function(){this.isMoving=!0,this.run(),console.warn('-------_move--------');},e.prototype.stop=function(t){void 0===t&&(t=!0),console.warn('-------stop--------'),this.isMoving=!1,this._nodeIndex=0,this._roadNodeArr=[],this.stand(),t&&(this._moveEndCallback=null);},e.prototype.runToEnd=function(){if(console.warn('------runToEnd',this.x,this.y),this.stop(!1),this._moveEndCallback){var t=this._moveEndCallback;this._moveEndCallback=null,t.call(this._ctx);}},e.prototype.cleanRoad=function(){this._nodeIndex=0,this._roadNodeArr=[],this._moveEndCallback=null;},e.prototype.walkUpdate=function(t){if(this.isMoving){var e=this._roadNodeArr[this._nodeIndex];if(!e)return console.warn('没有下个寻路节点了, runToEnd'),void this.runToEnd();var i=this.x,o=this.y,n=e.px-i,r=e.py-o,s=n*n+r*r,a=this._moveSpeed*t;if(this._test){var l=Math.atan2(r,n);this._moveAngle&&l.toPrecision(1)!==this._moveAngle.toPrecision(1)&&(console.log('玩家移动出现异常了\uFF0C当前位置是',i,o,'下个节点是',e.px,e.py,'正常的角度应该是',l,'实际',this._moveAngle),this._moveAngle=l);}if(i<-c.default.mapSizeHalf.width||i>c.default.mapSizeHalf.width||o<-c.default.mapSizeHalf.height||o>c.default.mapSizeHalf.height){var p=this._roadNodeArr.length;i=this._roadNodeArr[p-1].px,o=this._roadNodeArr[p-1].py,console.warn('异常的 runToEnd'),this.runToEnd();}else if(s>a*a){0===this._moveAngle&&(this._moveAngle=Math.atan2(r,n));var u=Math.cos(this._moveAngle)*a,h=Math.sin(this._moveAngle)*a;this._checkDistance&&this._nodeIndex===this._roadNodeArr.length-1&&s<this._checkDistance&&(console.log('进入范围内\uFF0C认为达到了目的地'),this.runToEnd()),this.isMoving&&(i+=u,o+=h);}else this._moveAngle=0,this._nodeIndex===this._roadNodeArr.length-1?(i=e.px,o=e.py,console.log('正常常的 runToEnd',i,o),this.runToEnd()):this._walk();this._SATCircle.setPostion(cc.v2(i,o));}},r([u],e);}(cc.Node));i.default=h,cc._RF.pop();},{}],EventClient:[function(t,e,i){'use strict';cc._RF.push(e,'e2cc3iV5JVDn6FBGee3qpGt','EventClient');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.EventClient=void 0;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),Object.defineProperty(e,'I',{get:function(){return this._Instance||(this._Instance=new e(),this._Instance.init()),this._Instance;},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.tag='普通事件管理器';},e.prototype.emit=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.prototype.emit.apply(this,s([e],i));},e._Instance=null,e;}(t('BaseEvent').BaseEvent);i.EventClient=a,cc._RF.pop();},{}],EventName:[function(t,e,i){'use strict';cc._RF.push(e,'2e1a4L4YnNJpJc9gYHkOc7H','EventName'),Object.defineProperty(i,'__esModule',{value:!0}),i.E=void 0,i.E={Map:{InitPathFinding:'Map_InitPathFinding',InitMapLoaded:'Map_InitMapLoaded'}},cc._RF.pop();},{}],EventProto:[function(t,e,i){'use strict';cc._RF.push(e,'58b5fRR4VBFi5xmJNENjY9t','EventProto');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0}),i.EventProto=void 0;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),Object.defineProperty(e,'I',{get:function(){return this._Instance||(this._Instance=new e(),this._Instance.init()),this._Instance;},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.tag='协议事件管理器';},e._Instance=null,e;}(t('BaseEvent').BaseEvent);i.EventProto=r,cc._RF.pop();},{}],ExecutorList:[function(t,e,i){'use strict';cc._RF.push(e,'a46beJonqpBaJM5pOib1IHY','ExecutorList');var o=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s;};Object.defineProperty(i,'__esModule',{value:!0}),i.ExecutorList=void 0;var n=t('Executor'),r=cc._decorator.ccclass,s=function(){function t(){this.testLength=0,this.executors_=[],this.invoked_=void 0,this.invoking_=!1,this.invokingWithArgs_=!1,this.waitingForRemove_=[],this.waitingForClear_=!1;}return Object.defineProperty(t.prototype,'length',{get:function(){return this.testLength;},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.invoking_||this.invokingWithArgs_?this.waitingForClear_=!0:this._clear();},t.prototype._clear=function(){return!!this.waitingForClear_&&(this.waitingForRemove_.length=0,this.executors_.length=0,this.testLength=0,this.waitingForClear_=!1,!0);},t.prototype._push=function(t,e){var i=new n.Executor(t,e);this.executors_.push(i),this.testLength++;},t.prototype.push=function(t,e){t&&'function'==typeof t&&this._push(t,e);},t.prototype.pushUnique=function(t,e){return!(!t||'function'!=typeof t||this.indexOf(t,e)>=0||(this._push(t,e),0));},t.prototype.indexOf=function(t,e){if(!t)return-1;for(var i=this.executors_,o=0,n=i.length;o<n;++o)if(i[o].equals(t,e))return o;return-1;},t.prototype.invoke=function(){var t=[];if(this.invoking_)return t;var e=this.executors_;this.invoking_=!0;for(var i=this.waitingForRemove_,o=0,n=e.length;o<n;++o){var r=e[o];try{t.push(r.invoke.call(r,arguments));}catch(s){console.error(s.stack);}}return this.invoking_=!1,this._clear()||this.removes(i),t;},t.prototype.invokeWithArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.invokingWithArgs_)return[];var i=this.executors_;this.invokingWithArgs_=!0;for(var o=this.waitingForRemove_,n=0,r=i.length;n<r;++n){var s=i[n];try{s.invokeWithArgs.apply(s,t);}catch(a){console.error(a.stack);}}return this.invokingWithArgs_=!1,this._clear()||this.removes(o),i;},t.prototype.remove=function(t,e){if(!t||'function'!=typeof t)return!1;var i=this.indexOf(t,e);return!(i<0||(this.invokingWithArgs_||this.invoking_?this.waitingForRemove_.push(i):(this.executors_.splice(i,1),this.testLength--),0));},t.prototype.removeAllOf=function(t,e){if(t&&'function'==typeof t){for(var i=this.executors_,o=this.invokingWithArgs_||this.invoking_?this.waitingForRemove_:[],n=0,r=i.length;n<r;++n)i[n].equals(t,e)&&o.push(n);this.invokingWithArgs_||this.invoking_||this.removes(o);}},t.prototype.removes=function(t){for(var e=this.executors_,i=t.length-1;i>=0;--i){var o=t[i];e.splice(o,1),this.testLength--;}t.length=0;},o([r],t);}();i.ExecutorList=s,cc._RF.pop();},{}],Executor:[function(t,e,i){'use strict';cc._RF.push(e,'328c78qIYpAV4igHoT2w9uO','Executor'),Object.defineProperty(i,'__esModule',{value:!0}),i.Executor=void 0,cc._decorator.ccclass;var o=function(){function t(t,e){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.caller_=void 0,this.this_=void 0,this.args_=[],this.caller_=t,this.this_=e,this.args_=Array.prototype.slice.call(arguments,2);}return t.prototype.invoke=function(t){var e;if(this.caller_)return arguments.length?(t=t||window,e=Array.prototype.slice.call(arguments,1)):(t=this.this_||window,e=this.args_),this.caller_.apply(t,e);},t.prototype.invokeWithArgs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.caller_;if(i&&'function'==typeof i){var o=this.this_||window;if(o&&!1===o.isValid){var n=new Error().stack;console.warn('invokeWithArgs this.isValid is false:',o,n);}return i.apply(o,t);}},t.prototype.equals=function(t,e){return this.caller_===t&&this.this_===e;},t.prototype.callback=function(){return this.caller_;},t.prototype.target=function(){return this.this_;},t.prototype.getArgs=function(){return this.args_;},t.prototype.clear=function(){this.caller_=void 0,this.this_=void 0,this.args_.length=0,this.args_=void 0;},t;}();i.Executor=o,cc._RF.pop();},{}],FBUtil:[function(t,e,i){'use strict';cc._RF.push(e,'517dd+fY3JDToZtk1SUiNXU','FBUtil'),Object.defineProperty(i,'__esModule',{value:!0}),i.ElementType=i.FBUtil=void 0;var o=t('CCFRAMEBLOCK'),n=t('GameApp'),r=t('UtilColor'),s=t('FrameBlockConst'),a=function(){function t(){}return t.createSpriteNode=function(){var t=new cc.Node();t.name=s.RenderImgConst.labelLayout;var e=t.addComponent(cc.Sprite);return e.trim=!1,e.sizeMode=cc.Sprite.SizeMode.RAW,t;},t.getContextAlign=function(t){var e='center';switch(t.horizontalAlign){case cc.Label.HorizontalAlign.LEFT:e='start';break;case cc.Label.HorizontalAlign.CENTER:e='center';break;case cc.Label.HorizontalAlign.RIGHT:e='end';break;default:e='center';}return cc.sys.platform===cc.sys.VIVO_GAME&&(e='center'),e;},t.getAnchrX=function(t,e,i){void 0===i&&(i=0);var o=0;switch(t){case'start':case'left':o=0+i/2;break;case'center':o=e/2;break;case'end':case'right':o=e-i/2;break;default:o=e/2+i/2;}return o;},t.getAddOffset=function(t){var e=0.55;return t!==s.RenderImgConst.defaultFont&&(e='FZSHENGSKSJW_LABEL'===t?0.45:0.6),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&(e=0.35),e;},t.processIOS_RT=function(t,e){if(cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS){for(var i='',o=!1,n=0;n<t.length;n++){var r=t[n];r.style&&(r.style.multiColor?(o=!0,r.style.multiColor.color):i+='<color='+r.style.color+'>'+r.text+'</c>');}o&&setTimeout(function(){e&&e.node&&(e.string=i);},0);}},t.creatGradient=function(t){var e=t.ctx2d,i=t.x0,o=t.y0,n=t.x1,s=t.y1,a=t.isDarkBg,c=t.colorType,l=t.clist,p=c||r.ColorType.COLORFUL,u=l||r.UtilColor.GetColor_S(p,a),h=e.createLinearGradient(i,o,n,s),d=[];p===r.ColorType.COLORFUL&&(d=[0,0.65,1]);var f=u.length;if(f>1)for(var y=1/(f-1),_=0,g=f;_<g;_++){var m=d[_]||_*y;m>1&&(m=1),h.addColorStop(m,u[_]);}else 1===f&&h.addColorStop(1,u[0]);return h;},t.createLabel=function(){if(!t.labelNode){t.labelNode=new cc.Node(),t.labelNode.addComponent(o.default),t.labelNode.setPosition(0,0),t.labelNode.setAnchorPoint(0.5,0.5),t.labelNode.skewX=0;var e=t.labelNode.getComponent(cc.Label);e||(e=t.labelNode.addComponent(cc.Label)),e.string='';}return t.labelNode;},t.getHorizOffset=function(t,e,i){var o=0,r=0;switch(t.horizontalAlign){case cc.macro.TextAlignment.LEFT:o=0;break;case cc.macro.TextAlignment.CENTER:for(var s=0;s<e.length;s++)r+=e[s].width;o=(i/n.default.I.canvasScale-r)/2;break;case cc.macro.TextAlignment.RIGHT:for(s=0;s<e.length;s++)r+=e[s].width;o=i/n.default.I.canvasScale-r;}return o;},t.labelNode=null,t;}();i.FBUtil=a,function(t){t[t.text=1]='text',t[t.image=2]='image';}(i.ElementType||(i.ElementType={})),cc._RF.pop();},{}],FrameBlockConst:[function(t,e,i){'use strict';cc._RF.push(e,'20fa9AQ0tZODJpQWaBnPh7U','FrameBlockConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.MultiColorType=i.MultiColor=i.RTconst=i.RenderImgConst=void 0;i.default=function(){},function(t){t.defaultFont='Microsoft YaHei',t.labelLayout='labelLayout';}(i.RenderImgConst||(i.RenderImgConst={})),function(t){t.rtclick='ck',t._clickHandler='RichTextClick',t._clickParam='_clickParam';}(i.RTconst||(i.RTconst={})),function(t){t.dark='#multiColorDark',t.light='#multiColorLight',t.multiColor='multiColor',t.mulStr='#multiColor';}(i.MultiColor||(i.MultiColor={})),function(t){t[t.light=1]='light',t[t.dark=2]='dark';}(i.MultiColorType||(i.MultiColorType={})),cc._RF.pop();},{}],FrameBlockMgr:[function(t,e,i){'use strict';cc._RF.push(e,'58d8eDt6KFCcJTRKnPYwEcb','FrameBlockMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.FrameBlockMgr=void 0;var o=t('FBUtil'),n=t('RenderImg'),r=function(){function t(){this.openFrameBlock=!0,this._rtQueue={};}return Object.defineProperty(t,'I',{get:function(){return null==this._i&&(this._i=new t(),this._i._init()),this._i;},enumerable:!1,configurable:!0}),t.prototype._init=function(){this.openFrameBlock&&(this._labelArr=[],this._labelUuidArr=[],this._injectWindowFunc());},t.prototype._injectWindowFunc=function(){var t=this;window.blockRichTextRender=function(e){return!!t.openFrameBlock&&!!e.node&&!e.node.getComponent('CCFRAMEBLOCK');},window.pushRTIntoQueue=function(e){if(e.node.getCom('CustomRichText'))n.RenderImg.I.richText2Img(e);else{var i=e.uuid;t._rtQueue[i]=e;}},window.blockLabelRender=function(e){var i;if(!t.openFrameBlock)return!1;if(!e||!e.getComponent||!e.node)return!1;if(!(e instanceof cc.Label))return!1;if('--'===(null===(i=e.getComponent('CCDAN'))||void 0===i?void 0:i.key))return!1;if(e.node.getComponent('CCFRAMEBLOCK'))return!1;if(e._N$file&&e._N$file instanceof cc.BitmapFont)return!1;if(e.getComponent('BMFont'))return!1;switch(e.node.name){case'RIGHT-PANEL':case'LEFT-PANEL':case'RICHTEXT_CHILD':case'PLACEHOLDER_LABEL':case'TEXT_LABEL':return!1;default:return!0;}},window.pushLabelIntoQueue=function(e){-1===t._labelUuidArr.indexOf(e.uuid)&&(t._labelUuidArr.push(e.uuid),t._labelArr.push(e));};},t.prototype._loadLabelString=function(){for(var t,e,i=null;null==i||null==i.node||!1===cc.isValid(i.node)||!1===i.node.isValid;){if(this._labelArr.length<1)return!1;i=this._labelArr.shift();var o=this._labelUuidArr.indexOf(i.uuid);o>-1&&this._labelUuidArr.splice(o,1);}var r=i.oldString,s=i.node.color.toString(),a=i.node.oldColor,c=i.node.oldMat,l=i.oldFontFamily,p='Microsoft YaHei';(null===(t=i._N$file)||void 0===t?void 0:t._fontFamily)&&(p=i._N$file._fontFamily);var u=null===(e=i.getMaterial(0))||void 0===e?void 0:e.name;return i.string===r&&s===a&&p===l&&u===c||(i.oldString=i.string,i.node.oldColor=i.node.color.toString(),i.oldFontFamily=p,i.node.oldMat=u,n.RenderImg.I.label2Img(i));},t.prototype.lateUpdate=function(){if(this.openFrameBlock){for(var t=0;t<16;)this._loadLabelString()||t++;for(var e in(t=0,this._rtQueue)){var i=this._rtQueue[e];if((null==i?void 0:i.node)&&n.RenderImg.I.richText2Img(i),delete this._rtQueue[e],++t>=3)break;}n.RenderImg.I.labelPool.size()<50&&n.RenderImg.I.labelPool.put(o.FBUtil.createSpriteNode());}},t._i=null,t;}();i.FrameBlockMgr=r,cc._RF.pop();},{}],GameApp:[function(t,e,i){'use strict';cc._RF.push(e,'53344JiEoFKqYvGJBEAWp9d','GameApp'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('AppEventConst'),n=t('EventClient'),r=t('UtilUrl'),s=t('GameConst'),a=t('MsgToastMgr'),c=function(){function t(){var t,e,i,o,n,r;if(this.canvasScale=2,this.BTN_CLICK_SCALE=0.9,this.debug=!1,this.IsWhite=0,this._GateUrl='',this._ResRootUrl='',this._ResUrl='',this._ProtoMsgUrl='',this._ResMD5Url='',this._LoginHttpUri='',this.RunState=0,this.IsBanShu=!1,this.IsBattleIng=!1,this.IsShowPreview=!0,this.WXTS=0,this.WXTSHIDEPAY=1,this.RealNameState=0,this.JumpType=0,this.TestBattle=!1,this.LobbyViewType=null,this.isWechatIosIpad=!1,this.IsGameHide=!1,this._GameCfgGlobal=window.GameCfgGlobal,this.es1=null,this.es2=null,this.es3=null,this.t=null,this.e=null,cc.sys.isBrowser&&!cc.sys.isMobile&&0===(null===(t=this.GameCfgGlobal.Branch)||void 0===t?void 0:t.indexOf('release'))&&(this.e=this.enDebFn()),this.WXTS=window.IndexGlobal&&(null===(i=null===(e=window.IndexGlobal.commonParams)||void 0===e?void 0:e.client_info)||void 0===i?void 0:i.auth_status)||0,this.WXTSHIDEPAY=window.IndexGlobal&&(null===(n=null===(o=window.IndexGlobal.commonParams)||void 0===o?void 0:o.client_info)||void 0===n?void 0:n.hide_charge)||0,cc.sys.platform===cc.sys.WECHAT_GAME&&cc.sys.os===cc.sys.OS_IOS){var s=window.IndexGlobal&&(null===(r=window.IndexGlobal.commonParams)||void 0===r?void 0:r.systemInfo)||0;s&&s.model.indexOf('iPad ')>-1&&(this.canvasScale=1,this.isWechatIosIpad=!0);}if(cc.sys.platform===cc.sys.WECHAT_GAME&&window.IndexGlobal&&window.IndexGlobal.commonParams&&window.IndexGlobal.commonParams.hashFileName){var a=window.IndexGlobal.commonParams.hashFileName;if(a.indexOf('tzkj')>-1){var c=a.split('tzkj')[1];(c=null==c?void 0:c.split('_'))&&(this._GameCfgGlobal.SVN_CODE=c[0],this._GameCfgGlobal.SVN_RES=c[1],this._GameCfgGlobal.SVN_CFG=c[2]);}}}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t()),this.Instance;},enumerable:!1,configurable:!0}),t.prototype.IsGameShowFunc=function(){return window&&window.document&&'visible'==window.document.visibilityState;},t.prototype.enDebFn=function(){var t=this,e=function(){},i=0,o=new Date();return o.toString=function(){return i++,console.clear(),'';},setInterval(function(){e.constructor('debugger')(),i=0,console.log('',o),i>1?t.es1||(clearInterval(t.t),t.es1=!0,t.es3=!0,t.SDT(1)):!t.es2&&t.es3&&(t.es2=!0,t.SDT(0));},500);},t.prototype.zxc=function(){var t=this;this.e&&(clearInterval(this.e),setTimeout(function(){t.SDT(0);},0));},t.prototype.SDT=function(t){var e=this;if(t){if(!this.t){this.t=1;var i=10;a.default.Show('当前控制台已打开\uFF0C存在风险\uFF0C将在'+--i+'秒之后刷新网页'),this.t=setInterval(function(){i<=1?(clearInterval(e.t),e.es1=!1,e.exitGame()):a.default.Show(--i+'秒之后刷新网页');},1000);}}else this.es1=!1,this.es2=!1,this.es3=!1,clearInterval(this.t),this.t=null,a.default.Show('已关闭控制台');},Object.defineProperty(t.prototype,'GameCfgGlobal',{get:function(){if(window.GameCfgGlobal)this._GameCfgGlobal=window.GameCfgGlobal;else{this._GameCfgGlobal={Branch:'dev-local',Run_State:0,GAME_RES_VER:'',Client_Version:'',Channel_Id:6,Login_Http_Uri:'https://dev-hl3-login.kaixinxiyou.com',Res_Root_Url:'https://dev-hl3-client.kaixinxiyou.com',Res_Root_Url_List:[],IS_SDK:0,SDK_TYPE:0,CFG_VER:'main',PROTO_VER:'main',RES_AD_DIR:'https://dev-hl3-client.kaixinxiyou.com/com_login/H5/res_ad',RES_DIR:'res_dev',DataReport_Url:'http://dev-hl3-button.kaixinxiyou.com/',IsGm:1,IsOpenErrReport:1,ErrLogReportUrl:'http://dev-hl3-clientlog.kaixinxiyou.com',Pt_Login_Http_Api:'https://dev-gz-sdk.kaixinxiyou.com/v1/sdk/login',App_Id:666,Wx_Proto:0};var t=r.UtilUrl.getQueryString('cfgVer');t&&(this._GameCfgGlobal.CFG_VER=t);var e=r.UtilUrl.getQueryString('protoVer');e&&(this._GameCfgGlobal.PROTO_VER=e);var i=r.UtilUrl.getQueryString('wxproto');i&&(this._GameCfgGlobal.Wx_Proto=+i);}return this._GameCfgGlobal;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'PtLoginHttpApi',{get:function(){return this.GameCfgGlobal.Pt_Login_Http_Api;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'ChannelId',{get:function(){return this.GameCfgGlobal.Channel_Id;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'AppId',{get:function(){return this.GameCfgGlobal.App_Id;},enumerable:!1,configurable:!0}),t.prototype.initRunState=function(){this.RunState=this.GameCfgGlobal.Run_State;},t.prototype.getGameVersion=function(){return this.GameCfgGlobal.GAME_RES_VER;},Object.defineProperty(t.prototype,'GateUrl',{get:function(){return this._GateUrl=r.UtilUrl.replaceWss(this._GateUrl),this._GateUrl;},set:function(t){this._GateUrl=r.UtilUrl.replaceWss(t);},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'ResRootUrl',{get:function(){return this._ResRootUrl=this.GameCfgGlobal.Res_Root_Url,this._ResRootUrl=r.UtilUrl.replaceHttpHead(this._ResRootUrl),this._ResRootUrl;},enumerable:!1,configurable:!0}),t.prototype.ResDirUrl=function(){return this.ResRootUrl+'/'+this.GameCfgGlobal.RES_DIR;},t.prototype.ResAdDirUrl=function(){return''+this.GameCfgGlobal.RES_AD_DIR;},Object.defineProperty(t.prototype,'ResUrl',{get:function(){var t=this.ResDirUrl();return this._ResUrl=t+'/resources',this._ResUrl;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'ResAd',{get:function(){var t=this.ResAdDirUrl();return this._ResUrl=t+'/',this._ResUrl;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'ResAdBg',{get:function(){var t=this.ResAdDirUrl();return this._ResUrl=t+'/bg/',this._ResUrl;},enumerable:!1,configurable:!0}),t.prototype.getConfigUrl=function(t){return'/config/'+this.GameCfgGlobal.CFG_VER+'/cfg_'+t+'_data.txt';},Object.defineProperty(t.prototype,'ProtoMsgUrl',{get:function(){if(!this._ProtoMsgUrl){var t=this.ResDirUrl(),e=this.GameCfgGlobal.PROTO_VER;this._ProtoMsgUrl=t+'/proto/'+e;}return this._ProtoMsgUrl;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'ResMD5Url',{get:function(){if(!this._ResMD5Url){var t=this.ResDirUrl();this._ResMD5Url=t+'/resmd5';}return this._ResMD5Url;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'LoginHttpUri',{get:function(){return this._LoginHttpUri=this.GameCfgGlobal.Login_Http_Uri,this._LoginHttpUri=r.UtilUrl.replaceHttpHead(this._LoginHttpUri),this._LoginHttpUri;},enumerable:!1,configurable:!0}),t.prototype.exitGame=function(){t.I.isOpenSDK()?n.EventClient.I.emit(o.AppEvent.SDKExitGame):window.location.reload();},t.prototype.isOpenSDK=function(){return!!this.GameCfgGlobal.IS_SDK;},t.prototype.isDEV=function(){return!!this.GameCfgGlobal.Branch.startsWith(s.GameBranchVer.Dev);},t.prototype.isDevOrWD=function(){return!!this.isDEV()||!!this.GameCfgGlobal.RES_DIR.startsWith('res_release_md5');},t.prototype.isBanshu=function(){return this.GameCfgGlobal.Branch===s.GameBranchVer.BanShu;},t.prototype.isRelease=function(){return this.GameCfgGlobal.Branch===s.GameBranchVer.Release;},t.prototype.isTestRecharge=function(){var t=this.GameCfgGlobal.Branch;return!this.isOpenSDK()&&(t===s.GameBranchVer.Dev||t===s.GameBranchVer.Release);},t.prototype.isOpenGm=function(){return!!this.GameCfgGlobal.IsGm;},t;}();i.default=c,cc._RF.pop();},{}],GameConst:[function(t,e,i){'use strict';cc._RF.push(e,'025f3AqEsVKS4ut59v0TDfZ','GameConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.EActiveStatus=i.ESex=i.GameBranchVer=void 0,function(t){t.BanShu='BanShu',t.Release='release',t.Dev='dev';}(i.GameBranchVer||(i.GameBranchVer={})),function(t){t[t.Male=1]='Male',t[t.Female=2]='Female';}(i.ESex||(i.ESex={})),function(t){t[t.UnActive=0]='UnActive',t[t.CanActive=1]='CanActive',t[t.Active=2]='Active';}(i.EActiveStatus||(i.EActiveStatus={})),cc._RF.pop();},{}],GameMain:[function(t,e,i){'use strict';cc._RF.push(e,'735278ZvTRCs63CHRo8eSoY','GameMain');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.GameMain=void 0;var s=t('EventClient'),a=t('WinMgr'),c=t('ResMgr'),l=t('CCResMD5'),p=t('SdkMgr'),u=t('FrameBlockMgr'),h=t('AppEventConst'),d=t('UtilUrl'),f=t('DataReportConst'),y=t('DataReportMgr'),_=t('UtilLog'),g=t('LoginController'),m=t('AppViewConst'),v=t('ResConst'),b=t('LoginModel'),C=t('StorageMgr'),S=t('ConfigMgr'),w=t('GameApp'),R=t('MsgToastMgr'),I=t('ProtoManager'),M=t('StorageConst'),T=t('TaskCollector'),E=t('TimerMgr'),A=cc._decorator,P=A.ccclass,x=A.property;window.ResJsonStopCache=0,cc.assetManager.downloader.maxConcurrency=255,cc.assetManager.downloader.maxRequestsPerFrame=255,cc.assetManager.presets.default.maxConcurrency=255,cc.assetManager.presets.default.maxRequestsPerFrame=255,cc.assetManager.presets.scene.maxConcurrency=255,cc.assetManager.presets.scene.maxRequestsPerFrame=255,cc.assetManager.presets.bundle.maxConcurrency=255,cc.assetManager.presets.bundle.maxRequestsPerFrame=255,cc.assetManager.presets.preload.maxConcurrency=255,cc.assetManager.presets.preload.maxRequestsPerFrame=255;var L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camrea=null,e._initEnd=!1,e._timeTemp=0,e._frameLowNum=0,e._showSkillEditor=!1,e;}return n(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),c.ResMgr.I.setResUrl(w.default.I.ResUrl);var t=w.default.I.GameCfgGlobal.Client_Version;console.log('客户端版本号',t),l.CCResMD5.ResUrl=w.default.I.ResDirUrl();},e.prototype.onKeyDown=function(t){switch(t.keyCode){case 38:this.camrea.zoomRatio+=0.1;break;case 40:this.camrea.zoomRatio-=0.1;break;case 80:this.camrea.zoomRatio=1;}},e.prototype.doListeningGameState=function(){cc.game.on(cc.game.EVENT_GAME_INITED,function(){cc.game.on(cc.game.EVENT_SHOW,function(){w.default.I.IsGameHide=!1,cc.audioEngine.resumeAll(),s.EventClient.I.emit(h.AppEvent.Game_Hide,!1);}),cc.game.on(cc.game.EVENT_HIDE,function(){w.default.I.IsGameHide=!0,cc.audioEngine.pauseAll(),s.EventClient.I.emit(h.AppEvent.Game_Hide,!0);}),window.SDK_On_Game_Hide=function(){w.default.I.IsGameHide=!0,cc.audioEngine.pauseAll(),s.EventClient.I.emit(h.AppEvent.Game_Hide,!0);},window.SDK_On_Game_Show=function(){w.default.I.IsGameHide=!1,cc.audioEngine.resumeAll(),s.EventClient.I.emit(h.AppEvent.Game_Hide,!1);};});},e.prototype.lateUpdate=function(t){u.FrameBlockMgr.I.lateUpdate(),E.default.I.update(t),this._updateFrameCheck(t);},e.prototype._updateFrameCheck=function(t){this._timeTemp<=1&&t>0.05?(this._frameLowNum++,this._frameLowNum>=25&&s.EventClient.I.emit(h.AppEvent.DeviceFrameLow)):(this._timeTemp=0,this._frameLowNum=0),this._timeTemp+=t,t>0.05&&cc.warn('lateUpdate ==== 警告当前帧大于50ms ',Math.floor(1000*t)+'ms');},e.prototype.setSprBg=function(){},e.prototype.initPlatform=function(){w.default.I.isOpenSDK()&&p.SdkMgr.I.init();},e.prototype.initGame=function(){T.default.I.clear(),T.default.I.addTaskList(T.DB_KEY_ENUM.ShowLoginUI,[T.DB_ID_ENUM.LodgingProto,T.DB_ID_ENUM.InitRoot],this.onRunGame,this),T.default.I.addTaskList(T.DB_KEY_ENUM.LodgingEnd,[T.DB_ID_ENUM.MapLodEnd,T.DB_ID_ENUM.ConfigLodEnd,T.DB_ID_ENUM.MainUIInit,T.DB_ID_ENUM.LoadSubScript,T.DB_ID_ENUM.EnterGame,T.DB_ID_ENUM.GateUrl],this.onGameResLoadEnd,this),T.default.I.addTaskList(T.DB_KEY_ENUM.GameStart,[T.DB_ID_ENUM.LoginBack,T.DB_ID_ENUM.MapInit,T.DB_ID_ENUM.MapBlurBg,T.DB_ID_ENUM.GameWelcomeSuccess,T.DB_ID_ENUM.LoadingProgressFull],this.onStartGame,this),T.default.I.addTaskList(T.DB_KEY_ENUM.GameWelcomeShow,[T.DB_ID_ENUM.LoadingProgressFull,T.DB_ID_ENUM.GameWelcomeSuccess],this.creatRoleHandle,this),w.default.I.initRunState(),c.ResMgr.I.setResUrl(w.default.I.ResUrl);var t=w.default.I.GameCfgGlobal.Client_Version;console.log('客户端版本号',t),l.CCResMD5.ResUrl=w.default.I.ResDirUrl(),window.GlobalConfig||(window.GlobalConfig={}),window.GlobalConfig.ResPath=w.default.I.ResDirUrl(),'release'===w.default.I.GameCfgGlobal.Branch&&(l.CCResMD5.ResPaths=w.default.I.GameCfgGlobal.Res_Root_Url_List),w.default.I.GameCfgGlobal.IsGm||(C.StorageMgr.I.removeValue(M.EStorageKey.DebugItemMode),C.StorageMgr.I.removeValue(M.EStorageKey.DebugItemModeCount)),S.ConfigMgr.I.do(),this.initRoot(),I.default.I.init();},e.prototype.onRunGame=function(){g.default.I,this.showLoginView(),p.SdkMgr.I.initPocoSDK();},e.prototype.onGameResLoadEnd=function(){console.log('===============onGameResLoadEnd==========11========='),this._initEnd=!0,s.EventClient.I.emit(h.AppEvent.InitEnd);},e.prototype.onStartGame=function(){console.log('===============onStartGame============22==========='),s.EventClient.I.emit(h.AppEvent.Start),a.default.I.close(m.AppViewConst.LoginView),a.default.I.close(m.AppViewConst.ResLoading),console.timeEnd('resLoading'),s.EventClient.I.emit(h.AppEvent.DataReport,f.EDataReportId.LoadingClose);},e.prototype.initRoot=function(){var t=this;cc.resources.load(m.APP_UI_PATH.Base_Root,cc.Prefab,function(e,i){if(e)t.initRoot();else{var o=cc.instantiate(i);cc.find('Canvas').addChild(o),T.default.I.endTask(T.DB_KEY_ENUM.ShowLoginUI,T.DB_ID_ENUM.InitRoot),t.loadOutsideEdges();}});},e.prototype.loadOutsideEdges=function(){var t=this;cc.resources.load(m.APP_UI_PATH.Com_NdOutsideEdges,cc.Prefab,function(e,i){if(e)t.loadOutsideEdges();else{var o=cc.instantiate(i);cc.find('Canvas').addChild(o);}});},e.prototype.showLoginView=function(){this.initGameMgr(),this.initSDKJumpParam(),g.default.I.reqGetGameSwitch().then(function(){a.default.I.open(m.AppViewConst.LoginView);},function(t){console.error(t),a.default.I.open(m.AppViewConst.LoginView);});},e.prototype.initSDKJumpParam=function(){if(1===w.default.I.JumpType){var t=d.UtilUrl.getQueryString('SerParam'),e=window.GameSDKGlobal.login_param,i=JSON.parse(t),o=i.user_id,n=i.token,r=b.default.I;s.EventClient.I.emit(h.AppEvent.SetSdkLoginParam,e),r.UserAcc=o,r.UserPwd=n,r.AccountID=i.AccountID,r.selServerId=i.server_id,r.selUserId=i.user_id,r.Token=i.Token,w.default.I.IsWhite=i.is_white,w.default.I.GateUrl=i.gate_url;}},e.prototype.onAccountId=function(t,e){console.log('GameMain onAccountId',t,e);},e.prototype.onAccountId2=function(t,e){console.log('GameMain onAccountId2',t,e);},e.prototype.onAccountId3=function(t,e){console.log('GameMain onAccountId3',t,e);},e.prototype.initConfig=function(){},e.prototype.initGameMgr=function(){},e.prototype.initDataReport=function(){y.default.I.init();},e.prototype.initErrReport=function(){_.UtilLog.I.Init();},e.prototype.initSkillEditor=function(){var t=this;if(this._showSkillEditor)R.default.Show('已经加载了技能编辑器');else{cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(t){t.keyCode===cc.macro.KEY.e&&e();},this);var e=function(){t._showSkillEditor?R.default.Show('已经加载了技能编辑器'):(a.default.I.closeAll(!0),s.EventClient.I.on(h.AppEvent.InitConfigSuccess,function(){cc.assetManager.loadBundle(v.EBundleType.subpack,function(t,e){console.log('++++++++++++===subpack===',t,e);var i=cc.find('Canvas');cc.assetManager.loadBundle('skillEditor',function(t,e){console.log('++++++++++++===skillEditor===',t,e),e.load('view/SkillEditorMain',cc.Prefab,function(t,e){if(t)console.log(t);else{var o=cc.instantiate(e);i.addChild(o);}});});});},t),s.EventClient.I.emit(h.AppEvent.InitConfigStart),t._showSkillEditor=!0);};}},e.prototype.creatRoleHandle=function(){s.EventClient.I.emit(h.AppEvent.creatRoleHandle);},r([x(cc.Camera)],e.prototype,'camrea',void 0),r([P],e);}(cc.Component);i.GameMain=L,cc._RF.pop();},{}],GameSocket:[function(t,e,i){'use strict';cc._RF.push(e,'bb29eAv87FPNqlptokG+ZP0','GameSocket'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('AppEventConst'),n=t('EventClient'),r=t('UtilPaltform'),s=function(){function t(){this._url='',this._socket=null,this._needReconnect=!0,this._sessionId=1,this._maxReconnectCount=5,this._reconnectCount=0,this._isConnecting=!1;}return t.prototype.connect=function(t){this._needReconnect=!0,this._socket&&this._socket.readyState===WebSocket.OPEN||(t&&(this._url=t),this._url&&(this._socket=new WebSocket(this._url),this.registerCallBack(),this._socket.binaryType='arraybuffer',this._socket.sessionId=this._sessionId++));},t.prototype.reconnect=function(){this.closeCurrentSocket(),this._reconnectCount++,this._reconnectCount<=this._maxReconnectCount?(this.connect(),console.log('====do reconnect=======',this._reconnectCount)):(this._reconnectCount=0,this._needReconnect=!1,n.EventClient.I.emit(o.AppEvent.SocketReconnectFail),console.log('====do reconnect faill=======',this._reconnectCount));},t.prototype.registerCallBack=function(){var t=this;this._socket.onopen=function(){console.log('===Socket==onopen==',t._connectFlag,t._needReconnect,t._socket),t._socket?(t._reconnectCount=0,t._isConnecting=!0,t._connectFlag&&t._needReconnect?n.EventClient.I.emit(o.AppEvent.SocketReconnectSucc):n.EventClient.I.emit(o.AppEvent.SocketConnect),t._connectFlag=!0):(t._isConnecting=!1,t._needReconnect&&t._connectFlag?n.EventClient.I.emit(o.AppEvent.SocketStartReconnect):n.EventClient.I.emit(o.AppEvent.SocketClose));},this._socket.onclose=function(e){console.log('===Socket==onclose==',t._needReconnect,t._connectFlag,t._socket),(t._socket===e.target||r.UtilPaltform.isWeChatGame)&&(t._socket.onopen=null,t._socket.onclose=null,t._socket.onmessage=null,t._socket.onerror=null,t._socket=null,t._isConnecting=!1,t._needReconnect&&t._connectFlag?n.EventClient.I.emit(o.AppEvent.SocketStartReconnect):n.EventClient.I.emit(o.AppEvent.SocketClose));},this._socket.onmessage=function(t){t.data instanceof ArrayBuffer&&n.EventClient.I.emit(o.AppEvent.SocketMessage,t);},this._socket.onerror=function(){t._isConnecting=!1,t._needReconnect?n.EventClient.I.emit(o.AppEvent.SocketStartReconnect):n.EventClient.I.emit(o.AppEvent.SocketNoConnect),console.log('===Socket==onerror==');};},t.prototype.getState=function(){return this._socket?this._socket.readyState:null;},t.prototype.close=function(){this.closeCurrentSocket();},t.prototype.closeCurrentSocket=function(){this._socket&&(this._socket.close(),console.warn('======closeCurrentSocket======')),this._isConnecting=!1;},t.prototype.send=function(t){var e=this;if(this._socket){var i=this._socket.readyState,r=null;switch(i){case WebSocket.CONNECTING:r=function(){n.EventClient.I.off(o.AppEvent.SocketConnect,r,e),e._socket.send(t);},n.EventClient.I.on(o.AppEvent.SocketConnect,r,this);break;case WebSocket.OPEN:this._socket.send(t);break;case WebSocket.CLOSING:case WebSocket.CLOSED:}}},t.prototype.isConnecting=function(){return this._isConnecting;},Object.defineProperty(t.prototype,'needReconnect',{get:function(){return this._needReconnect;},set:function(t){this._needReconnect=t;},enumerable:!1,configurable:!0}),t;}();i.default=s,cc._RF.pop();},{}],GameWelcomeWin:[function(t,e,i){'use strict';cc._RF.push(e,'a6403hZy+tIgZ6IPHtaseRn','GameWelcomeWin');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('AppEventConst'),a=t('EventClient'),c=t('WinBase'),l=t('TaskCollector'),p=t('i18n'),u=t('DataReportConst'),h=t('UtilClk'),d=cc._decorator,f=d.ccclass,y=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NdBottom=null,e.timeLab=null,e.BtnStart=null,e.RichStr=null,e.Time=15,e.text='',e.oneTimesNum=0,e.curTime=0,e.curTextNum=0,e.maxTextNum=0,e._canClick=!1,e._showAll=!1,e;}return n(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this),this.scheduleOnce(function(){e.NdBottom.active=!0,e._canClick=!0;},3),h.UtilClk.Click(this.BtnStart,function(){e._showAll&&e.oncloseView();},this,{time:500}),h.UtilClk.Click(this.node,function(){e.NdBottom.active&&e._showAll&&e.oncloseView();},this,{scale:1,time:500}),this.text=p.i18n.tt(p.Lang.game_welcome_str),this.maxTextNum=this.text.length,this.oneTimesNum=Math.ceil(this.maxTextNum/10),this.updateText(this.maxTextNum);},e.prototype.update=function(t){this.curTime+=t,this.NdBottom.active&&(this.Time-=t),this.curTextNum<this.maxTextNum||(this.Time>0&&(this.timeLab.string='('+Math.ceil(this.Time)+')'+p.i18n.tt(p.Lang.com_second)),this.Time<=0&&this.oncloseView(!0));},e.prototype.updateText=function(t){t>=this.maxTextNum?(this.curTextNum=this.maxTextNum,this.RichStr.string=this.text,this.timeLab.node.active=!0,this._showAll=!0,this.RichStr.node.opacity=0,this.RichStr.node.runAction(cc.fadeIn(2))):(this.curTextNum=t,this.RichStr.string=this.text.substring(0,Math.min(this.curTextNum,this.maxTextNum)));},e.prototype.oncloseView=function(t){void 0===t&&(t=!1),a.EventClient.I.emit(s.AppEvent.DataReport,u.EDataReportId.BeginEnter),this.close();},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),l.default.I.endTask(l.DB_KEY_ENUM.GameStart,l.DB_ID_ENUM.GameWelcomeSuccess),l.default.I.endTask(l.DB_KEY_ENUM.GameWelcomeShow,l.DB_ID_ENUM.GameWelcomeSuccess);},r([y(cc.Node)],e.prototype,'NdBottom',void 0),r([y(cc.Label)],e.prototype,'timeLab',void 0),r([y(cc.Node)],e.prototype,'BtnStart',void 0),r([y(cc.RichText)],e.prototype,'RichStr',void 0),r([f],e);}(c.default);i.default=_,cc._RF.pop();},{}],GradientColorIpad:[function(t,e,i){'use strict';cc._RF.push(e,'14faeLu5FlEN4E9ARNSEzoV','GradientColorIpad');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.GradientType=void 0;var s,a=cc._decorator,c=a.ccclass,l=a.executeInEditMode,p=a.requireComponent,u=(a.executionOrder,a.property);(function(t){t[t.FULL=1]='FULL',t[t.VERTICAL=2]='VERTICAL',t[t.HORIZOBTAL=3]='HORIZOBTAL';}(s=i.GradientType||(i.GradientType={})));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type=s.VERTICAL,e._colors=[],e;}return n(e,t),Object.defineProperty(e.prototype,'type',{get:function(){return this._type;},set:function(t){this._type=t,this.updateColor();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'colors',{get:function(){return this._colors;},set:function(t){this._colors=t,this.updateColor();},enumerable:!1,configurable:!0}),e.prototype.start=function(){},e.prototype.updateColor=function(){},r([u({type:cc.Enum(s)})],e.prototype,'_type',void 0),r([u({type:s})],e.prototype,'type',null),r([u({type:[cc.Color]})],e.prototype,'_colors',void 0),r([u({type:[cc.Color]})],e.prototype,'colors',null),r([c,p(cc.Label),l],e);}(cc.Component);i.default=h,cc._RF.pop();},{}],HackEngine:[function(t,e,i){'use strict';cc._RF.push(e,'ded88zKM/1J973wCfPrJDtg','HackEngine'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('FrameBlockConst'),n=t('FrameBlockMgr'),r=t('GradientColorIpad');cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){if(n.FrameBlockMgr.I.openFrameBlock){cc.SafeArea&&(cc.SafeArea.prototype.updateArea=function(){});var t=cc.Sprite.__assembler__.Simple,e=t.prototype.updateColor;t.prototype.updateColor=function(t,i){var o;if(e.call(this,t,i),t&&t._GradientColorIpad){var n=null===(o=t.node)||void 0===o?void 0:o.parent;if(n&&n.isValid){var s=n.getComponent(r.default);if(!s)return;var a=s.colors,c=this._renderData.uintVDatas[0];s.type===r.GradientType.FULL&&a.length>=3?a.length>=4?(c[4]=a[0]._val,c[9]=a[1]._val,c[14]=a[2]._val,c[19]=a[3]._val):(c[4]=a[0]._val,c[14]=a[0]._val,c[9]=a[1]._val,c[19]=a[2]._val):s.type===r.GradientType.VERTICAL&&a.length>=2?(c[14]=a[0]._val,c[19]=a[0]._val,a.length>=3?(c[4]=a[2]._val,c[9]=a[2]._val):(c[4]=a[1]._val,c[9]=a[1]._val)):s.type===r.GradientType.HORIZOBTAL&&a.length>=2&&(c[4]=a[0]._val,c[14]=a[0]._val,c[9]=a[1]._val,c[19]=a[1]._val);}}};var i=cc.RenderComponent.prototype._resetAssembler;cc.RenderComponent.prototype._resetAssembler=function(){window.blockLabelRender&&window.blockLabelRender(this)||i.call(this);};var s=cc.RenderComponent.prototype.__preload;cc.RenderComponent.prototype.__preload=function(){window.blockLabelRender&&window.blockLabelRender(this)||s.call(this);};var a=cc.RenderComponent.prototype.onEnable;cc.RenderComponent.prototype.onEnable=function(){window.blockLabelRender&&window.blockLabelRender(this)||a.call(this);};var c=cc.RenderComponent.prototype.onDisable;cc.RenderComponent.prototype.onDisable=function(){window.blockLabelRender&&window.blockLabelRender(this)||c.call(this);};var l=cc.RenderComponent.prototype.onDestroy;cc.RenderComponent.prototype.onDestroy=function(){window.blockLabelRender&&window.blockLabelRender(this)||l.call(this);};var p=cc.RenderComponent.prototype.setVertsDirty;cc.RenderComponent.prototype.setVertsDirty=function(){window.blockLabelRender&&window.blockLabelRender(this)||p.call(this);};var u=cc.RenderComponent.prototype._on3DNodeChanged;cc.RenderComponent.prototype._on3DNodeChanged=function(){window.blockLabelRender&&window.blockLabelRender(this)||u.call(this);};var h=cc.RenderComponent.prototype.markForValidate;cc.RenderComponent.prototype.markForValidate=function(){window.blockLabelRender&&window.blockLabelRender(this)||h.call(this);};var d=cc.Label.prototype.markForRender;cc.Label.prototype.markForRender=function(t){this.node&&d.call(this,t);};var f=cc.RenderComponent.prototype.disableRender;cc.RenderComponent.prototype.disableRender=function(){window.blockLabelRender&&window.blockLabelRender(this)||f.call(this);},cc.RenderComponent.prototype.setMaterial,cc.RenderComponent.prototype.setMaterial=function(t,e){return e!==this._materials[t]&&(e=cc.MaterialVariant.create(e,this),this._materials[t]=e),this._updateMaterial(),e;};var y=cc.RenderComponent.prototype._activateMaterial;cc.RenderComponent.prototype._activateMaterial=function(){window.blockLabelRender&&window.blockLabelRender(this)||y.call(this);},Object.defineProperty(cc.Label.prototype,'useSystemFont',{get:function(){return this._isSystemFontUsed;},set:function(t){if(this._isSystemFontUsed!==t){if(this._isSystemFontUsed=!!t,t){if(this.font=null,!this.enabledInHierarchy)return;this._forceUpdateRenderData();}this.setVertsDirty(),this.markForValidate();}},animatable:!1,tooltip:!1});var _=cc.Label.prototype.onLoad;cc.Label.prototype.onLoad=function(){window.blockLabelRender&&window.blockLabelRender(this)||_.call(this);};var g=cc.Label.prototype.onEnable;cc.Label.prototype.onEnable=function(){this.setVertsDirty(),window.blockLabelRender&&window.blockLabelRender(this)||g.call(this);};var m=cc.Label.prototype.onDisable;cc.Label.prototype.onDisable=function(){window.blockLabelRender&&window.blockLabelRender(this)||m.call(this);};var v=cc.Label.prototype.onDestroy;cc.Label.prototype.onDestroy=function(){window.blockLabelRender&&window.blockLabelRender(this)||v.call(this);};var b=cc.Label.prototype.onRestore;cc.Label.prototype.onRestore=function(){window.blockLabelRender&&window.blockLabelRender(this)||b.call(this);};var C=cc.Label.prototype.setVertsDirty;cc.Label.prototype.setVertsDirty=function(){if(window.blockLabelRender)if(window.blockLabelRender(this)){if(window.pushLabelIntoQueue)return void window.pushLabelIntoQueue(this);}else if(this.node&&this.node.isValid){var t=this.node.getChildByName(o.RenderImgConst.labelLayout);t&&t.destroy();}C.call(this);};var S=cc.Label.prototype._checkStringEmpty;cc.Label.prototype._checkStringEmpty=function(){if(window.blockLabelRender)if(window.blockLabelRender(this)){if(window.pushLabelIntoQueue)return void window.pushLabelIntoQueue(this);}else if(this.node&&this.node.isValid){var t=this.node.getChildByName(o.RenderImgConst.labelLayout);t&&t.destroy();}S.call(this);},cc.Label.prototype.pushIntoQueue=function(){if(window.blockLabelRender)if(window.blockLabelRender(this))window.pushLabelIntoQueue&&window.pushLabelIntoQueue(this);else if(this.node&&this.node.isValid){var t=this.node.getChildByName(o.RenderImgConst.labelLayout);t&&t.destroy();}};var w=cc.Label.prototype._updateColor;cc.Label.prototype._updateColor=function(){window.blockLabelRender&&window.blockLabelRender(this)||w.call(this);};var R=cc.Label.prototype._resetAssembler;cc.Label.prototype._resetAssembler=function(){window.blockLabelRender&&window.blockLabelRender(this)||R.call(this);};var I=cc.Label.prototype._on3DNodeChanged;cc.Label.prototype._on3DNodeChanged=function(){window.blockLabelRender&&window.blockLabelRender(this)||I.call(this);};var M=cc.Label.prototype._onBMFontTextureLoaded;cc.Label.prototype._onBMFontTextureLoaded=function(){window.blockLabelRender&&window.blockLabelRender(this)||M.call(this);};var T=cc.Label.prototype._onBlendChanged;cc.Label.prototype._onBlendChanged=function(){window.blockLabelRender&&window.blockLabelRender(this)||T.call(this);};var E=cc.Label.prototype._applyFontTexture;cc.Label.prototype._applyFontTexture=function(){this.setVertsDirty(),window.blockLabelRender&&window.blockLabelRender(this)||E.call(this);};var A=cc.Label.prototype._updateMaterialCanvas;cc.Label.prototype._updateMaterialCanvas=function(){this.setVertsDirty(),window.blockLabelRender&&window.blockLabelRender(this)||A.call(this);};var P=cc.Label.prototype._updateMaterialWebgl;cc.Label.prototype._updateMaterialWebgl=function(){this.setVertsDirty(),window.blockLabelRender&&window.blockLabelRender(this)||P.call(this);},cc.Label.prototype._forceUpdateRenderData=function(){this.setVertsDirty(),this._resetAssembler(),window.blockLabelRender&&window.blockLabelRender(this)||this._applyFontTexture();};var x=cc.RichText.prototype._updateRichText;cc.RichText.prototype._updateRichText=function(){if(this.enabledInHierarchy&&this.enabled){if(window.blockRichTextRender)if(window.blockRichTextRender(this)){if(window.pushRTIntoQueue)return void window.pushRTIntoQueue(this);}else{var t=this.node.getChildByName(o.RenderImgConst.labelLayout);t&&t.destroy();}x.call(this);}},Object.defineProperty(cc.Node.prototype,'color',{get:function(){return this._color.clone();},set:function(t){if(!this._color.equals(t)){this._color.set(t);var e=this.getComponent(cc.Label);e&&e.setVertsDirty(),this._renderFlag|=cc.RenderFlow.FLAG_COLOR,this._eventMask&&this.emit(cc.Node.EventType.COLOR_CHANGED,t);}}}),cc.Label._canvasPool.put=function(t){t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.canvas.width=t.canvas.height=0,cc.Label._canvasPool.pool.length>=32||cc.Label._canvasPool.pool.push(t);},['Label','Sprite','Button','Toggle','Layout','ScrollView','RichText','Widget'].forEach(function(t){cc.js.get(cc.Node.prototype,'$'+t,function(){return this['#'+t]||(this['#'+t]=this.getComponent(cc[t])),this['#'+t];});});var L=cc.Layout.prototype._doLayoutDirty;cc.Layout.prototype._doLayoutDirty=function(){L.call(this),this.updateLayout();};var k=cc.Layout.prototype._doScaleDirty;if(cc.Layout.prototype._doScaleDirty=function(){k.call(this),this.updateLayout();},cc.sys.isBrowser&&cc.sys.os===cc.sys.OS_IOS){var O=new Image();O.onload=O.onerror=function(){cc.sys.capabilities.webp=2===O.height;},O.src='data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';}else!cc.sys.capabilities.webp&&cc.sys.platform===cc.sys.WECHAT_GAME&&wx&&wx.__first__canvas&&(cc.sys.capabilities.webp=wx.__first__canvas.toDataURL('image/webp').startsWith('data:image/webp'));var N={9728:0,9729:1},D={width:void 0,height:void 0,minFilter:void 0,magFilter:void 0,wrapS:void 0,wrapT:void 0,format:void 0,genMipmaps:void 0,images:void 0,image:void 0,flipY:void 0,premultiplyAlpha:void 0},B=[];cc.Texture2D.prototype.handleLoadedTexture=function(){if(this._image&&this._image.width&&this._image.height){this.width=this._image.width,this.height=this._image.height;var t=j();t.image=this._image,t.images=[t.image],t.width=this.width,t.height=this.height,t.genMipmaps=this._genMipmaps,t.format=this._getGFXPixelFormat(this._format),('.jpg'===this._native||this._nativeUrl&&this._nativeUrl.indexOf('.jpg')>-1)&&(t.format=cc.Texture2D.PixelFormat.RGB888),t.premultiplyAlpha=this._premultiplyAlpha,t.flipY=this._flipY,t.minFilter=N[this._minFilter],t.magFilter=N[this._magFilter],t.wrapS=this._wrapS,t.wrapT=this._wrapT,this._texture?this._texture.update(t):this._texture=new cc.renderer.Texture2D(cc.renderer.device,t),this._updateFormat(),this._checkPackable(),this.loaded=!0,this.emit('load'),cc.macro.CLEANUP_IMAGE_CACHE&&this._cleanupImageCache();}},cc.textUtils._getFirstWordLen=function(t,e,i){var o=cc.textUtils,n=[',','\u3002','\uFF0C',';','\uFF1B','\uFF01','\uFF1F','\u3001',')','\uFF09','\u3011','\u2014','\uFF1A'],r=t.charAt(e);if(o.isUnicodeCJK(r)||o.isUnicodeSpace(r)){if(n.indexOf(t[e+1])>-1){var s=2;return n.indexOf(t[e+2])>-1&&(s+=1),s;}return 1;}for(var a=1,c=e+1;c<i;++c){if(r=t.charAt(c),o.isUnicodeSpace(r)||o.isUnicodeCJK(r)){if(n.indexOf(t[c])>-1)return a+=1,n.indexOf(t[c+1])>-1&&(a+=1),a;break;}a++;}return a;},cc.RichText.prototype._getFirstWordLen=function(t,e,i){return cc.textUtils._getFirstWordLen(t,e,i);};var U=cc.errorID,F=[1405,4930,4929];cc.errorID=function(t){F.indexOf(t)>-1||U.apply(null,arguments);},cc.assetManager.downloader.maxRetryCount=25,cc.assetManager.presets.remote.maxRetryCount=25;}function j(){for(var t in D)D[t]=void 0;return B.length=0,D.images=B,D;}}),cc._RF.pop();},{}],HttpReq:[function(t,e,i){'use strict';cc._RF.push(e,'53bbfYgRdxCcbn1HuaL+5v1','HttpReq'),Object.defineProperty(i,'__esModule',{value:!0}),i.HttpResultInfo=void 0;var o=function(){function t(){this.timeoutNum=60000;}return Object.defineProperty(t,'I',{get:function(){return t._i||(t._i=new t()),t._i;},enumerable:!1,configurable:!0}),t.prototype.get=function(t,e,i,o){var n=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!1);var r=this.setXMLHttpRequest(function(t){e&&e(t);},function(r){if(o)var s=setTimeout(function(){s&&(clearTimeout(s),s=null),n.get(t,e,i,o);},1000);else i&&i(r);});r.open('GET',t,!0),r.timeout=this.timeoutNum,r.send(),r=null;},t.prototype.getAsync=function(t,e){var i=this;return void 0===e&&(e=!1),new Promise(function(o){var r=new n();i.get(t,function(t){r.resultInfo=t,o(r);},function(t){r.errInfo=t,o(r);},e);});},t.prototype.post=function(t,e,i,o,n,r){var s=this;void 0===o&&(o=null),void 0===n&&(n=!1),void 0===r&&(r=!1);var a='';if(e)for(var c in e)''!==a&&(a+='&'),a+=c+'='+e[c];var l=this.setXMLHttpRequest(function(t){i&&i(t);},function(a){if(n)var c=setTimeout(function(){c&&(clearTimeout(c),c=null),s.post(t,e,i,o,n,r);},1000);else o&&o(a);});l.open('GET',t+'?'+a,!0),l.setRequestHeader('Content-Type','application/x-www-form-urlencoded;charset=UTF-8'),r&&l.setRequestHeader('X-Requested-With','XMLHttpRequest'),l.send(),l=null;},t.prototype.postAsync=function(t,e,i,o){var r=this;return void 0===i&&(i=!1),void 0===o&&(o=!1),new Promise(function(s){var a=new n();r.post(t,e,function(t){a.resultInfo=t,s(a);},function(t){a.errInfo=t,s(a);},i,o);});},t.prototype.postjson=function(t,e,i,o,n){var r=this;void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=!1);var s=this.setXMLHttpRequest(function(t){i&&i(t);},function(){if(n)var s=setTimeout(function(){s&&(clearTimeout(s),s=null),r.postjson(t,e,i,o,n);},1000);else o&&o();}),a=window.btoa(JSON.stringify(e));s.open('GET',t+'?data='+a,!0),s.send(),s=null;},t.prototype.getMpq=function(t,e,i){void 0===i&&(i=null),cc.assetManager.loadRemote(t,{ext:'.bin'},function(t,o){if(null==t){var n=cc.sys.platform;n===cc.sys.VIVO_GAME||n===cc.sys.XIAOMI_GAME||n===cc.sys.WECHAT_GAME||n===cc.sys.OPPO_GAME?e&&e(o):e&&e(o._buffer),cc.assetManager.releaseAsset(o),o=null;}else i&&i();});},t.prototype.setXMLHttpRequest=function(t,e){var i=new XMLHttpRequest();return i.onreadystatechange=function(){4===this.readyState&&this.status>=200&&this.status<300?(this.onreadystatechange=null,this.onerror=null,this.ontimeout=null,t&&(t(this.response,this),i=null)):this.status>=400&&this.status<600&&(e&&e('状态码异常'),this.onreadystatechange=null,this.onerror=null,this.ontimeout=null);},i.onerror=function(t){e&&e(t||'xhr.onerror');},i.ontimeout=function(){e&&e('超时');},i;},t._i=null,t;}();i.default=o;var n=function(){this.resultInfo=null,this.errInfo=null;};i.HttpResultInfo=n,cc._RF.pop();},{}],IRoadSeeker:[function(t,e,i){'use strict';cc._RF.push(e,'d3460AksPpNWKNyzczaIksx','IRoadSeeker'),Object.defineProperty(i,'__esModule',{value:!0}),cc._RF.pop();},{}],IdentitykBox:[function(t,e,i){'use strict';cc._RF.push(e,'96bbfx9Vj1Hwo7JRoFiPZ3d','IdentitykBox');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.IdentitykBox=i.EIdentiType=void 0;var s,a=t('AppEventConst'),c=t('EventClient'),l=t('UtilColor'),p=t('BaseUiView'),u=t('WinMgr'),h=t('i18n'),d=t('LoginController'),f=t('GameApp'),y=t('MsgToastMgr'),_=t('AppViewConst'),g=t('UtilClk'),m=t('UtilsMain'),v=cc._decorator,b=v.ccclass,C=v.property;(function(t){t[t.Logout=0]='Logout',t[t.State=1]='State',t[t.PayLimit=2]='PayLimit',t[t.NotAdult=3]='NotAdult';}(s=i.EIdentiType||(i.EIdentiType={})));var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SureBtn=null,e.LbTitleText=null,e.RtInfoText=null,e.type=0,e.ret=0,e;}return n(e,t),e.prototype.init=function(e){t.prototype.init.call(this,e),this.type=e[0],this.ret=e[1],console.log('实名认证',e),this.setInfo(),g.UtilClk.Click(this.SureBtn,this.ClickEvent,this),this.type===s.Logout&&d.default.I.onDoKill();},e.prototype.start=function(){t.prototype.start.call(this);},e.prototype.setInfo=function(){var t=m.UtilsMainStr.FormatArgs(h.i18n.tt(h.Lang.realname_logout_info),l.UtilColor.D.Green),e=m.UtilsMainStr.FormatArgs(h.i18n.tt(h.Lang.realname_fcmzt_info),l.UtilColor.D.Green,l.UtilColor.B.PURPLE),i=m.UtilsMainStr.FormatArgs(h.i18n.tt(h.Lang.realname_charge_info),l.UtilColor.D.Green,l.UtilColor.B.PURPLE),o=[];o[s.Logout]={title:h.i18n.tt(h.Lang.realname_logout_tips),text:t},o[s.State]={title:h.i18n.tt(h.Lang.realname_fcmzt_tips),text:e},o[s.PayLimit]={title:h.i18n.tt(h.Lang.realname_charge_tips),text:i},o[s.NotAdult]={title:h.i18n.tt(h.Lang.realname_logout_tips),text:h.i18n.tt(h.Lang.realname_notadult_info)};var n=o[this.type]||o[s.NotAdult];if(this.LbTitleText.string=(null==n?void 0:n.title)||h.i18n.tt(h.Lang.realname_logout_tips),this.RtInfoText.string=(null==n?void 0:n.text)||h.i18n.tt(h.Lang.realname_notadult_info),this.type===s.PayLimit){var r=y.default.GetErrTipsStr(this.ret);this.RtInfoText.string=''+r;}},e.prototype.ClickEvent=function(){this.type===s.Logout?(c.EventClient.I.emit(a.AppEvent.BacktoLogin),u.default.I.closeAll(!1),u.default.I.open(_.AppViewConst.LoginView)):this.type===s.NotAdult&&(f.default.I.isOpenSDK()?c.EventClient.I.emit(a.AppEvent.SDKExitGame):u.default.I.open(_.AppViewConst.AccountLoginView)),this.close();},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);},r([C(cc.Node)],e.prototype,'SureBtn',void 0),r([C(cc.Label)],e.prototype,'LbTitleText',void 0),r([C(cc.RichText)],e.prototype,'RtInfoText',void 0),r([b],e);}(p.default);i.IdentitykBox=S,cc._RF.pop();},{}],JoyStickArrow:[function(t,e,i){'use strict';cc._RF.push(e,'9dd55Hz5jxLxZgJA8hZE5g8','JoyStickArrow');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EntityConst'),a=cc._decorator,c=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.onLoad=function(){this.node.active=!1;},e.prototype.onJoystickMove=function(t){var e=t*Math.PI/180,i=s.CENTER_R*Math.cos(e),o=s.CENTER_R*Math.sin(e);this.node.x=i,this.node.y=o,this.node.active=!0,this.node.angle=t+90;},e.prototype.onJoystickStop=function(){this.node.active=!1;},r([c],e);}(cc.Component));i.default=l,cc._RF.pop();},{}],Joystick:[function(t,e,i){'use strict';cc._RF.push(e,'ef40d8fXHFLt4+RY1LPS5vZ','Joystick');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s,a=t('SATMgr'),c=t('RoleMgr'),l=t('UtilMap'),p=cc._decorator,u=p.ccclass,h=p.property;(function(t){t[t.FIXED=0]='FIXED',t[t.FOLLOW=1]='FOLLOW';}(s||(s={})));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stick=null,e.dot=null,e.dotBg=null,e.NdPlayer=null,e.camrea=null,e.joystickType=s.FOLLOW,e.isStart=!1,e._stickPos=null,e._touchLocation=null,e._radius=0,e._ttt=0,e;}return n(e,t),e.prototype.onLoad=function(){this._radius=this.dotBg.width/2-this.dot.width/2,this._initTouchEvent(),this.joystickType===s.FOLLOW&&(this.stick.active=!1),c.default.I.createRole(cc.find('Canvas/mapMove')),c.default.I.eventOnOff(!0);},e.prototype._initTouchEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this);},e.prototype._touchStartEvent=function(t){this.isStart=!0;var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.joystickType===s.FIXED){this._stickPos=this.dotBg.getPosition();var i=e.sub(this.dotBg.getPosition()).mag();this._radius>i&&this.dot.setPosition(e);}else this.joystickType===s.FOLLOW&&(this._stickPos=e,this.stick.active=!0,this._touchLocation=t.getLocation(),this.dot.setPosition(e),this.dotBg.setPosition(e));},e.prototype._touchMoveEvent=function(t){if(this.isStart&&(this.joystickType!==s.FOLLOW||this._touchLocation!==t.getLocation())){var e=this.dotBg.convertToNodeSpaceAR(t.getLocation()),i=e.mag(),o=this._stickPos.x+ +e.x,n=this._stickPos.y+ +e.y,r=cc.v2(o,n).sub(this.dotBg.getPosition()).normalize();if(this._radius>i)this.dot.setPosition(cc.v2(o,n));else{var a=this._stickPos.x+r.x*this._radius,l=this._stickPos.y+r.y*this._radius;this.dot.setPosition(cc.v2(a,l));}var p=Math.atan2(this.dot.y-this._stickPos.y,this.dot.x-this._stickPos.x);p=180*p/Math.PI,c.default.I.onJoystickMove(p);}},e.prototype._touchEndEvent=function(){this.isStart=!1,this.dot.setPosition(this.dotBg.getPosition()),this.joystickType===s.FOLLOW&&(this.stick.active=!1),c.default.I.onJoystickStop();},e.prototype.lateUpdate=function(t){var e=c.default.I.getCenterPoint();if(e){var i=this.camrea.node.position,o=e.position;this.camrea.node.x=cc.misc.lerp(i.x,o.x,0.1),this.camrea.node.y=cc.misc.lerp(i.y,o.y,0.1);}c.default.I.mainUpdate(t),a.default.I.lateUpdate(),this._ttt+=t,this._ttt>0.2&&(l.default.setEntitySiblingIndex(this.NdPlayer),this._ttt=0);},e.prototype.onDestroy=function(){c.default.I.eventOnOff(!1);},r([h(cc.Node)],e.prototype,'stick',void 0),r([h(cc.Node)],e.prototype,'dot',void 0),r([h(cc.Node)],e.prototype,'dotBg',void 0),r([h(cc.Node)],e.prototype,'NdPlayer',void 0),r([h(cc.Camera)],e.prototype,'camrea',void 0),r([h({type:cc.Enum(s)})],e.prototype,'joystickType',void 0),r([u],e);}(cc.Component);i.default=d,cc._RF.pop();},{}],KdTree:[function(t,e,i){'use strict';cc._RF.push(e,'1bc34ezFLtDcaKYQkqMYItM','KdTree'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('RVOMath'),n=t('Simulator'),r=t('commonDefine'),s=function(){},a=function(){},c=function(){function t(t,e){this.a=t,this.b=e;}return t.prototype.lessThan=function(t){return this.a<t.a||!(t.a<this.a)&&this.b<t.b;},t.prototype.lessEqualThan=function(t){return this.a===t.a&&this.b===t.b||this.lessThan(t);},t.prototype.morethan=function(t){return!this.lessEqualThan(t);},t.prototype.morethanOrEqual=function(t){return!this.lessThan(t);},t.prototype.bigEqualThan=function(t){return!this.lessThan(t);},t;}(),l=function(){function t(){this.MAX_LEAF_SIZE=10;}return t.prototype.buildAgentTree=function(t){if(!this.agents||this.agents.length!==t){this.agents=new Array(t);for(var e=0;e<this.agents.length;e++)this.agents[e]=n.Simulator.I.getAgent(e);for(this.agentTree=new Array(2*this.agents.length),e=0;e<this.agentTree.length;e++)this.agentTree[e]=new a();}0!==this.agents.length&&this.buildAgentTreeRecursive(0,this.agents.length,0);},t.prototype.buildObstacleTree=function(){this.obstacleTree=new s();for(var t=new Array(n.Simulator.I.obstacles.length),e=0;e<t.length;e++)t[e]=n.Simulator.I.obstacles[e];this.obstacleTree=this.buildObstacleTreeRecursive(t);},t.prototype.computeAgentNeighbors=function(t,e){return this.queryAgentTreeRecursive(t,e,0);},t.prototype.computeObstacleNeighbors=function(t,e){this.queryObstacleTreeRecursive(t,e,this.obstacleTree);},t.prototype.queryVisibility=function(t,e,i){return this.queryVisibilityRecursive(t,e,i,this.obstacleTree);},t.prototype.buildAgentTreeRecursive=function(t,e,i){this.agentTree[i].begin=t,this.agentTree[i].end=e,this.agentTree[i].minX=this.agentTree[i].maxX=this.agents[t].position.x,this.agentTree[i].minY=this.agentTree[i].maxY=this.agents[t].position.y;for(var o=t+1;o<e;++o)this.agentTree[i].maxX=Math.max(this.agentTree[i].maxX,this.agents[o].position.x),this.agentTree[i].minX=Math.min(this.agentTree[i].minX,this.agents[o].position.x),this.agentTree[i].maxY=Math.max(this.agentTree[i].maxY,this.agents[o].position.y),this.agentTree[i].minY=Math.min(this.agentTree[i].minY,this.agents[o].position.y);if(e-t>this.MAX_LEAF_SIZE){for(var n=this.agentTree[i].maxX-this.agentTree[i].minX>this.agentTree[i].maxY-this.agentTree[i].minY,r=0.5*(n?this.agentTree[i].maxX+this.agentTree[i].minX:this.agentTree[i].maxY+this.agentTree[i].minY),s=t,a=e;s<a;){for(;s<a&&(n?this.agents[s].position.x:this.agents[s].position.y)<r;)++s;for(;a>s&&(n?this.agents[a-1].position.x:this.agents[a-1].position.y)>=r;)--a;if(s<a){var c=this.agents[s];this.agents[s]=this.agents[a-1],this.agents[a-1]=c,++s,--a;}}var l=s-t;0===l&&(++l,++s,++a),this.agentTree[i].left=i+1,this.agentTree[i].right=i+2*l,this.buildAgentTreeRecursive(t,s,this.agentTree[i].left),this.buildAgentTreeRecursive(s,e,this.agentTree[i].right);}},t.prototype.buildObstacleTreeRecursive=function(t){if(0===t.length)return null;for(var e=new s(),i=0,a=t.length,l=a,p=0;p<t.length;++p){for(var u=0,h=0,d=(I=t[p]).next,f=0;f<t.length;f++)if(p!==f){var y=(E=t[f]).next,_=o.RVOMath.leftOf(I.point,d.point,E.point),g=o.RVOMath.leftOf(I.point,d.point,y.point);_>=-o.RVOMath.RVO_EPSILON&&g>=-o.RVOMath.RVO_EPSILON?++u:_<=o.RVOMath.RVO_EPSILON&&g<=o.RVOMath.RVO_EPSILON?++h:(++u,++h);var m=new c(Math.max(u,h),Math.min(u,h)),v=new c(Math.max(a,l),Math.min(a,l));if(m.bigEqualThan(v))break;}var b=new c(Math.max(u,h),Math.min(u,h)),C=new c(Math.max(a,l),Math.min(a,l));b.lessThan(C)&&(a=u,l=h,i=p);}for(var S=[],w=0;w<a;++w)S.push(null);var R=[];for(w=0;w<l;++w)R.push(null);var I,M=0,T=0;for(d=(I=t[p=i]).next,f=0;f<t.length;++f)if(p!==f){var E;if(y=(E=t[f]).next,_=o.RVOMath.leftOf(I.point,d.point,E.point),g=o.RVOMath.leftOf(I.point,d.point,y.point),_>=-o.RVOMath.RVO_EPSILON&&g>=-o.RVOMath.RVO_EPSILON)S[M++]=t[f];else if(_<=o.RVOMath.RVO_EPSILON&&g<=o.RVOMath.RVO_EPSILON)R[T++]=t[f];else{var A=o.RVOMath.det(d.point.minus(I.point),E.point.minus(I.point))/o.RVOMath.det(d.point.minus(I.point),E.point.minus(y.point)),P=E.point.plus(y.point.minus(E.point).scale(A)),x=new r.Obstacle();x.point=P,x.previous=E,x.next=y,x.convex=!0,x.direction=E.direction,x.id=n.Simulator.I.obstacles.length,n.Simulator.I.obstacles.push(x),E.next=x,y.previous=x,_>0?(S[M++]=E,R[T++]=x):(R[T++]=E,S[M++]=x);}}return e.obstacle=I,e.left=this.buildObstacleTreeRecursive(S),e.right=this.buildObstacleTreeRecursive(R),e;},t.prototype.queryAgentTreeRecursive=function(t,e,i){if(this.agentTree[i].end-this.agentTree[i].begin<=this.MAX_LEAF_SIZE)for(var n=this.agentTree[i].begin;n<this.agentTree[i].end;++n)e=t.insertAgentNeighbor(this.agents[n],e);else{var r=o.RVOMath.sqr(Math.max(0,this.agentTree[this.agentTree[i].left].minX-t.position.x))+o.RVOMath.sqr(Math.max(0,t.position.x-this.agentTree[this.agentTree[i].left].maxX))+o.RVOMath.sqr(Math.max(0,this.agentTree[this.agentTree[i].left].minY-t.position.y))+o.RVOMath.sqr(Math.max(0,t.position.y-this.agentTree[this.agentTree[i].left].maxY)),s=o.RVOMath.sqr(Math.max(0,this.agentTree[this.agentTree[i].right].minX-t.position.x))+o.RVOMath.sqr(Math.max(0,t.position.x-this.agentTree[this.agentTree[i].right].maxX))+o.RVOMath.sqr(Math.max(0,this.agentTree[this.agentTree[i].right].minY-t.position.y))+o.RVOMath.sqr(Math.max(0,t.position.y-this.agentTree[this.agentTree[i].right].maxY));r<s?r<e&&s<(e=this.queryAgentTreeRecursive(t,e,this.agentTree[i].left))&&(e=this.queryAgentTreeRecursive(t,e,this.agentTree[i].right)):s<e&&r<(e=this.queryAgentTreeRecursive(t,e,this.agentTree[i].right))&&(e=this.queryAgentTreeRecursive(t,e,this.agentTree[i].left));}return e;},t.prototype.queryObstacleTreeRecursive=function(t,e,i){if(null==i)return e;var n=i.obstacle,r=n.next,s=o.RVOMath.leftOf(n.point,r.point,t.position);return e=this.queryObstacleTreeRecursive(t,e,s>=0?i.left:i.right),o.RVOMath.sqr(s)/o.RVOMath.absSq(r.point.minus(n.point))<e&&(s<0&&t.insertObstacleNeighbor(i.obstacle,e),this.queryObstacleTreeRecursive(t,e,s>=0?i.right:i.left)),e;},t.prototype.queryVisibilityRecursive=function(t,e,i,n){if(null==n)return!0;var r=n.obstacle,s=r.next,a=o.RVOMath.leftOf(r.point,s.point,t),c=o.RVOMath.leftOf(r.point,s.point,e),l=1/o.RVOMath.absSq(s.point.minus(r.point));if(a>=0&&c>=0)return this.queryVisibilityRecursive(t,e,i,n.left)&&(o.RVOMath.sqr(a)*l>=o.RVOMath.sqr(i)&&o.RVOMath.sqr(c)*l>=o.RVOMath.sqr(i)||this.queryVisibilityRecursive(t,e,i,n.right));if(a<=0&&c<=0)return this.queryVisibilityRecursive(t,e,i,n.right)&&(o.RVOMath.sqr(a)*l>=o.RVOMath.sqr(i)&&o.RVOMath.sqr(c)*l>=o.RVOMath.sqr(i)||this.queryVisibilityRecursive(t,e,i,n.left));if(a>=0&&c<=0)return this.queryVisibilityRecursive(t,e,i,n.left)&&this.queryVisibilityRecursive(t,e,i,n.right);var p=o.RVOMath.leftOf(t,e,r.point),u=o.RVOMath.leftOf(t,e,s.point),h=1/o.RVOMath.absSq(e.minus(t));return p*u>=0&&o.RVOMath.sqr(p)*h>o.RVOMath.sqr(i)&&o.RVOMath.sqr(u)*h>o.RVOMath.sqr(i)&&this.queryVisibilityRecursive(t,e,i,n.left)&&this.queryVisibilityRecursive(t,e,i,n.right);},t;}();i.default=l,cc._RF.pop();},{}],LayerMgr:[function(t,e,i){'use strict';cc._RF.push(e,'824c8RZKlFMDZQAxnwnXeNN','LayerMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.LayerMgr=void 0;var o=t('AppEventConst'),n=t('EventClient'),r=t('WinConst'),s=t('TimerMgr'),a=t('AppViewConst'),c=t('EffectBase'),l=function(){function t(){this.Root=null,this._MapLayer=null,this._BattleLayer=null,this._MainCityLayer=null,this._MainLayer=null,this._DefaultLayer=null,this._TipsLayer=null,this._PopLayer=null,this._GamaManagerLayer=null,this._WarnLayer=null,this._MiniGameLayer=null,this._NdClickLayer=null,this._clickEffect=null,this._notchHeight=0,this._bottomHeight=0;}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t(),this.Instance.init()),this.Instance;},enumerable:!1,configurable:!0}),t.prototype.init=function(){n.EventClient.I.on(o.AppEvent.ViewAddToLayer,this.onAddToLayer,this),n.EventClient.I.on(o.AppEvent.WinBigAllClose,this.dealWinBigClose,this);},Object.defineProperty(t.prototype,'MapLayer',{get:function(){return this._MapLayer;},set:function(t){this._MapLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'BattleLayer',{get:function(){return this._BattleLayer;},set:function(t){this._BattleLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'MainCityLayer',{get:function(){return this._MainCityLayer;},set:function(t){this._MainCityLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'MainLayer',{get:function(){return this._MainLayer;},set:function(t){this._MainLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'DefaultLayer',{get:function(){return this._DefaultLayer;},set:function(t){this._DefaultLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'TipsLayer',{get:function(){return this._TipsLayer;},set:function(t){this._TipsLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'PopLayer',{get:function(){return this._PopLayer;},set:function(t){this._PopLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'GameManagerLayer',{get:function(){return this._GamaManagerLayer;},set:function(t){this._GamaManagerLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'WarnLayer',{set:function(t){this._WarnLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'MiniGameLayer',{set:function(t){this._MiniGameLayer=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'notchHeight',{get:function(){return this._notchHeight;},set:function(t){this._notchHeight!==t&&(this._notchHeight=t,n.EventClient.I.emit(o.AppEvent.NotchHeightChange));},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'bottomHeight',{get:function(){return this._bottomHeight;},set:function(t){this._bottomHeight!==t&&(this._bottomHeight=t,n.EventClient.I.emit(o.AppEvent.NotchHeightChange));},enumerable:!1,configurable:!0}),t.prototype.setRoot=function(t){this.Root=t;},t.prototype.addToLayer=function(t,e){if(e){var i=null;switch(t){case r.GameLayerEnum.MAP_LAYER:i=this._MapLayer;break;case r.GameLayerEnum.BATTLE_LAYER:i=this._BattleLayer;break;case r.GameLayerEnum.MAIN_CITY_LAYER:i=this._MainCityLayer;break;case r.GameLayerEnum.MAIN_LAYER:i=this._MainLayer;break;case r.GameLayerEnum.DEFAULT_LAYER:i=this._DefaultLayer;break;case r.GameLayerEnum.TIPS_LAYER:i=this._TipsLayer;break;case r.GameLayerEnum.POP_LAYER:i=this._PopLayer;break;case r.GameLayerEnum.GAME_MANAGER_LAYER:i=this._GamaManagerLayer;break;case r.GameLayerEnum.WARN_LAYER:i=this._WarnLayer;break;case r.GameLayerEnum.MINI_GAME_LAYER:i=this._MiniGameLayer;}i?i.addChild(e):console.warn('无效的层级: ',t);}},t.prototype.onAddToLayer=function(t,e){this.addToLayer(t,e);},t.prototype.dealWinBigClose=function(t){this.hideLayer(t);},t.prototype.hideLayer=function(t){var e=this,i=s.default.I.setTimeout(function(){s.default.I.clearTimeout(i),e._MainLayer.active!==t&&(e._MainLayer.active=t),e._MainCityLayer.active!==t&&(e._MainCityLayer.active=t);});},t.prototype.initClickAnima=function(){n.EventClient.I.on(o.AppEvent.UIClick,this.onMouseDown,this);},t.prototype.onMouseDown=function(t){var e=this,i=this._NdClickLayer,o=i.convertToNodeSpaceAR(t.getLocation());if(this._clickEffect){this._clickEffect.x=o.x,this._clickEffect.y=o.y;var n=this._clickEffect.getComponent(cc.Animation);n&&n.play('default');}else c.EffectBase.Int.showAnim(''+a.APP_UI_PATH.Touch_Ui,function(t){if(i&&i.isValid){var n=i.getChildByName('btnEffect');n&&n.destroy(),t.name='btnEffect',e._clickEffect=t,i.addChild(t),e._clickEffect.x=o.x,e._clickEffect.y=o.y;}},cc.WrapMode.Default);},t.prototype.isDefaultLayerOpen=function(){return this._DefaultLayer.childrenCount>0;},t;}();i.LayerMgr=l,cc._RF.pop();},{}],LevelRender:[function(t,e,i){'use strict';cc._RF.push(e,'94895VqTwxOjoOgFif4Hc8f','LevelRender');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BOL=!0,e;}return n(e,t),e.prototype.onLoad=function(){this.node.__enableLevelRender=this.BOL;},r([c(cc.Boolean)],e.prototype,'BOL',void 0),r([a],e);}(cc.Component);i.default=l,cc._RF.pop();},{}],ListConst:[function(t,e,i){'use strict';cc._RF.push(e,'11e4e/wcpBOJoRp8lwOzJbh','ListConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.ShowEffectType=i.SvType=i.SelectedType=i.SlideType=void 0,function(t){t[t.NORMAL=1]='NORMAL',t[t.ADHERING=2]='ADHERING',t[t.PAGE=3]='PAGE';}(i.SlideType||(i.SlideType={})),function(t){t[t.NONE=0]='NONE',t[t.SINGLE=1]='SINGLE',t[t.MULT=2]='MULT';}(i.SelectedType||(i.SelectedType={})),function(t){t[t.OnlyMask=0]='OnlyMask',t[t.Shadow_4=1]='Shadow_4',t[t.Shadow_30=2]='Shadow_30',t[t.Horizon=3]='Horizon',t[t.NotEdge=4]='NotEdge';}(i.SvType||(i.SvType={})),function(t){t[t.Default=0]='Default',t[t.OneByOne_fadeIn=1]='OneByOne_fadeIn',t[t.OneByOne_ToUp=2]='OneByOne_ToUp';}(i.ShowEffectType||(i.ShowEffectType={})),cc._RF.pop();},{}],ListItem:[function(t,e,i){'use strict';cc._RF.push(e,'7483f08SKRFjqLdc0sXmVbQ','ListItem');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s,a=cc._decorator,c=a.ccclass,l=a.property,p=a.disallowMultiple,u=a.menu,h=a.executionOrder;(function(t){t[t.NONE=0]='NONE',t[t.TOGGLE=1]='TOGGLE',t[t.SWITCH=2]='SWITCH';}(s||(s={})));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedMode=s.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'selected',{get:function(){return this._selected;},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case s.TOGGLE:this.updateToggleUI(t);break;case s.SWITCH:this.updateSwitchUI(t);}},enumerable:!1,configurable:!0}),e.prototype.updateSwitchUI=function(t){var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame);},e.prototype.updateToggleUI=function(t){this.selectedFlag.active=t;},e.prototype.onLoad=function(){if(this.selectedMode===s.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame;}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this);},e.prototype._registerEvent=function(){this._eventReg||(this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0);},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node);},e.prototype.showAni=function(t,e,i){var o=this,n=new cc.Tween();switch(t){case 0:n=n.to(0.2,{scale:cc.v3(0.7,0.7,0.7)}).by(0.3,{position:cc.v3(0,2*this.node.height)});break;case 1:n=n.to(0.2,{scale:cc.v3(0.7,0.7,0.7)}).by(0.3,{position:cc.v3(2*this.node.width,0)});break;case 2:n=n.to(0.2,{scale:cc.v3(0.7,0.7,0.7)}).by(0.3,{position:cc.v3(0,-2*this.node.height)});break;case 3:n=n.to(0.2,{scale:cc.v3(0.7,0.7,0.7)}).by(0.3,{position:cc.v3(-2*this.node.width,0)});break;default:n=n.to(0.2,{scale:cc.v3(0.1,0.1,0.1)});}(e||i)&&(n=n.call(function(){if(i){o.list._delSingleItem(o.node);for(var t=o.list.displayData.length-1;t>=0;t--)if(o.list.displayData[t].id===o.listId){o.list.displayData.splice(t,1);break;}}e();})),cc.tween(this.node).sequence(n).start();},e.prototype.onClickThis=function(){this.list.selectedId=this.listId;},r([l({type:cc.Enum(s),tooltip:!1})],e.prototype,'selectedMode',void 0),r([l({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>s.NONE;}})],e.prototype,'selectedFlag',void 0),r([l({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode===s.SWITCH;}})],e.prototype,'selectedSpriteFrame',void 0),r([l({tooltip:!1})],e.prototype,'adaptiveSize',void 0),r([c,p(),u('滚动列表组件/List Item'),h(-5001)],e);}(cc.Component);i.default=d,cc._RF.pop();},{}],ListView:[function(t,e,i){'use strict';cc._RF.push(e,'7e1c6zb5/lBQrdVrSUxhJk9','ListView');var ac=window.extend_func(this,'__extends__decorate__values');var n=ac.__extends;var r=ac.__decorate;var s=ac.__values;Object.defineProperty(i,'__esModule',{value:!0});var a=t('EventClient'),c=t('UtilColor'),l=t('UtilListEff'),p=t('UtilsMain'),u=t('AppEventConst'),h=t('ListItem'),d=t('ScrollInner'),f=t('ScrollOutter'),y=t('ListConst'),_=cc._decorator,g=_.ccclass,m=_.property,v=_.disallowMultiple,b=_.menu,C=_.executionOrder,S=_.requireComponent,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tmpNode=null,e.tmpPrefab=null,e.itemScale=1,e._slideMode=y.SlideType.NORMAL,e.pageDistance=0.3,e.pageChangeEvent=new cc.Component.EventHandler(),e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler(),e.selectedMode=y.SelectedType.NONE,e.repeatEventSingle=!1,e.selectedEvent=null,e._bottomShadow=y.SvType.OnlyMask,e.ShadowWidth=0,e._showEffectType=y.ShowEffectType.Default,e.startDelay=0,e.playDelay=0,e.outterState=0,e._showEffectClose=!1,e._selectedId=-1,e._lastSelectedId=-1,e._NdBlock=null,e._playExistedItemEff=!1,e._forceUpdate=!1,e.content=null,e._updateDone=!0,e._numItems=0,e.startShowIndex=0,e.endShowIndex=0,e.changeSizeFlag=!1,e._inited=!1,e._scrollView=null,e._layout=null,e._itemTmp=null,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e.testP=cc.v2(0,0),e.playIdx=0,e;}var i;return n(e,t),i=e,Object.defineProperty(e.prototype,'slideMode',{get:function(){return this._slideMode;},set:function(t){this._slideMode=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'virtual',{get:function(){return this._virtual;},set:function(t){null!=t&&(this._virtual=t),0!==this._numItems&&this._onScrolling();},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'updateRate',{get:function(){return this._updateRate;},set:function(t){t>=0&&t<=6&&(this._updateRate=t);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'BottomShadow',{get:function(){return this._bottomShadow;},set:function(t){this._bottomShadow=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'showEffectType',{get:function(){return this._showEffectType;},set:function(t){this._showEffectType=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'ShowEffectClose',{set:function(t){this._showEffectClose=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'selectedId',{get:function(){return this._selectedId;},set:function(t){var e;switch(this.selectedMode){case y.SelectedType.SINGLE:if(!this.repeatEventSingle&&t===this._selectedId)return;e=this.getItemByListId(t);var i=void 0;if(this._lastSelectedId=this._selectedId>=0?this._selectedId:-1,this._selectedId=t,e&&((i=e.getComponent(h.default)).selected=!0),this._lastSelectedId>=0&&this._lastSelectedId!==this._selectedId){var o=this.getItemByListId(this._lastSelectedId);o&&(o.getComponent(h.default).selected=!1);}this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],e,this.selectedId);break;case y.SelectedType.MULT:if(!(e=this.getItemByListId(t)))return;i=e.getComponent(h.default),this._selectedId>=0&&(this._lastSelectedId=this._selectedId),this._selectedId=t;var n=!i.selected;i.selected=n;var r=this.multSelected.indexOf(t);n&&r<0?this.multSelected.push(t):!n&&r>=0&&this.multSelected.splice(r,1),this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],e,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems,n);}},enumerable:!1,configurable:!0}),e.prototype.setListViewBlockState=function(t){this._NdBlock||cc.isValid(this._NdBlock,!0)||!0!==t||(this._NdBlock=new cc.Node(),this._NdBlock.name='_NdBlock',this._NdBlock.setContentSize(this.viewSize.width,this.viewSize.height),this._NdBlock.addComponent(cc.BlockInputEvents),this.node.addChild(this._NdBlock),this._NdBlock.anchorX=this.node.anchorX,this._NdBlock.anchorY=this.node.anchorY),!0===t?(this._NdBlock.active=!0,this.scrollView&&!this.scrollView._isPlayAnimIng&&(this.scrollView._isPlayAnimIng=this.isPlayAnimIng,this.scrollView._ListViewCtx=this)):(this._NdBlock&&cc.isValid(this._NdBlock,!0)&&(this._NdBlock.active=!1),this.scrollView&&this.scrollView._isPlayAnimIng&&(this.scrollView._isPlayAnimIng=null,this.scrollView._ListViewCtx=null));},e.prototype.forceSelectItem=function(t){if(this._selectedId=t,this.selectedEvent){var e=this.getItemByListId(t);cc.Component.EventHandler.emitEvents([this.selectedEvent],e,this.selectedId);}},e.prototype.setNumItems=function(t,e,o){if(void 0===e&&(e=void 0),void 0===o&&(o=0.5),this.checkInited(!1))if(null==t||t<0)console.warn('numItems set the wrong::',t);else{if(this._showEffectType!==y.ShowEffectType.Default&&(o=0),this.changeSizeFlag=!1,this._actualNumItems=this._numItems=t,this._forceUpdate=!0,this.startShowIndex=0,this._virtual){this._resizeContent(),this.cyclic&&(this._numItems*=this._cyclicNum);var n=!1;if(t>0&&null!=e){this._calcViewPos();var r=this.getStartAndEndId();(e<=r.curId||e>=r.endId)&&(n=this.scrollTo(e,o));}n||this._onScrolling(),this.frameByFrameRenderNum||this.slideMode!==y.SlideType.PAGE||(this.curPageNum=this.nearestListId);}else{var s=this.content.getComponent(cc.Layout);if(s&&(s.enabled=!0),this._delRedundantItem(),this.firstListId=0,this.frameByFrameRenderNum>0){for(var a=this.frameByFrameRenderNum>this._numItems?this._numItems:this.frameByFrameRenderNum,c=0;c<a;c++)this._createOrUpdateItem2(c);this.frameByFrameRenderNum<this._numItems&&(this._updateCounter=this.frameByFrameRenderNum,this._updateDone=!1);}else{for(c=0;c<t;c++)this._createOrUpdateItem2(c);this.displayItemNum=t;}}this.BottomShadow===y.SvType.OnlyMask&&this.content.getComponent(cc.Layout).type===cc.Layout.Type.HORIZONTAL&&(this.BottomShadow=y.SvType.Horizon),i.setScrollViewBottomEdge({target:this.node,type:this.BottomShadow,width:this.ShadowWidth});}},e.prototype.getCanStartShowIndex=function(t){if(void 0===t&&(t=void 0),null!=t){if(this.startShowIndex=t||0,this.startShowIndex>0){var e=this._numItems-1;this.startShowIndex=Math.min(e,t);var i=0,o=this.scrollView.content.parent.getContentSize();this._align===cc.Layout.Type.VERTICAL?i=Math.ceil(o.height/this._itemSize.height):this._align===cc.Layout.Type.HORIZONTAL?i=Math.ceil(o.width/this._itemSize.width):this._align===cc.Layout.Type.GRID&&(i=Math.ceil(o.height/this._itemSize.height),i*=Math.floor(o.width/this._itemSize.width)),this.endShowIndex=this.startShowIndex+i,this.endShowIndex>=this._numItems&&(this.startShowIndex=Math.min(this.endShowIndex,e-i),this.endShowIndex=this.startShowIndex+i);}}else this.startShowIndex=0;},Object.defineProperty(e.prototype,'numItems',{get:function(){return this._actualNumItems;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'scrollView',{get:function(){return this._scrollView;},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this._init();},e.prototype.onDestroy=function(){var t,e;for((null===(t=this._itemTmp)||void 0===t?void 0:t.isValid)&&this._itemTmp.destroy(),(null===(e=this.tmpNode)||void 0===e?void 0:e.isValid)&&this.tmpNode.destroy();this._pool&&this._pool.size();)this._pool.get().destroy();},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on('touch-up',this._onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.node.on('scroll-began',this._onScrollBegan,this),this.node.on('scroll-ended',this._onScrollEnded,this),this.node.on('scrolling',this._onScrolling,this),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this),this._init(),this._scrollView._startBounceBackIfNeeded();},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off('touch-up',this._onTouchUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.node.off('scroll-began',this._onScrollBegan,this),this.node.off('scroll-ended',this._onScrollEnded,this),this.node.off('scrolling',this._onScrolling,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.resetEffectAll();},e.prototype._init=function(){var t,e=this.node.getComponent('CCDAN');if(e||(e=this.node.addComponent('CCDAN')),e.key='',this.outterState=this.node.getComponent(f.default)?1:0,!this._inited&&(this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this._scrollView.content,null!=this.tmpPrefab||null!=this.tmpNode))if(this.content){for(this._layout=this.content.getComponent(cc.Layout),this._align=this._layout.type,this._resizeMode=this._layout.resizeMode,this._startAxis=this._layout.startAxis,this._topGap=this._layout.paddingTop,this._rightGap=this._layout.paddingRight,this._bottomGap=this._layout.paddingBottom,this._leftGap=this._layout.paddingLeft,this._columnGap=this._layout.spacingX,this._lineGap=this._layout.spacingY,this._colLineNum=1,this._verticalDir=this._layout.verticalDirection,this._horizontalDir=this._layout.horizontalDirection,this.setTemplateItem(cc.instantiate(this.tmpPrefab||this.tmpNode)),this._slideMode!==y.SlideType.ADHERING&&this._slideMode!==y.SlideType.PAGE||(this._scrollView.inertia=!1,this._scrollView._onMouseWheel=function(){}),this.virtual||(this.lackCenter=!1),this._lastDisplayData=[],this.displayData=[];null===(t=this._pool)||void 0===t?void 0:t.size();)this._pool.get().destroy();this._pool=new cc.NodePool(),this._forceUpdate=!1,this._updateCounter=0,this._updateDone=!0,this.curPageNum=0,this.cyclic&&(this._scrollView._processAutoScrolling=this._processAutoScrolling.bind(this),this._scrollView._startBounceBackIfNeeded=function(){return!1;}),this._setAlignCalcType(),this._inited=!0;}else console.warn(this.node.name+'\'s cc.ScrollView unset content!');},e.prototype._setAlignCalcType=function(){switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2;}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4;}break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4;}break;case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2;}}}},e.prototype._processAutoScrolling1=function(t){var e=this.scrollView._isNecessaryAutoScrollBrake(),i=e?0.05:1;this.scrollView._autoScrollAccumulatedTime+=t*(1/ i);var o=Math.min(1,this.scrollView._autoScrollAccumulatedTime/this.scrollView._autoScrollTotalTime);if(this.scrollView._autoScrollAttenuate){var n=o-1;console.log('percentage=',o),o=n*n*n*n*n+1,console.log('percentage=',o);}var r=this.scrollView._autoScrollStartPosition.add(this.scrollView._autoScrollTargetDelta.mul(o)),s=this.scrollView.getScrollEndedEventTiming(),a=Math.abs(o-1)<=s;if(Math.abs(o-1)<=s&&!this.scrollView._isScrollEndedWithThresholdEventFired&&(this.scrollView._dispatchEvent('scroll-ended-with-threshold'),this.scrollView._isScrollEndedWithThresholdEventFired=!0),this.scrollView.elastic){var c=r.sub(this.scrollView._autoScrollBrakingStartPosition);e&&(c=c.mul(i)),r=this.scrollView._autoScrollBrakingStartPosition.add(c);}else{var l=r.sub(this.scrollView.getContentPosition()),p=this.scrollView._getHowMuchOutOfBoundary(l);p.fuzzyEquals(cc.v2(0,0),s)||(r=r.add(p),a=!0);}a&&(this.scrollView._autoScrolling=!1);var u=r.sub(this.scrollView.getContentPosition());console.log('deltaMove=',r.y,this.scrollView.getContentPosition().y,u.y),this.scrollView._moveContent(this.scrollView._clampDelta(u),a),this.scrollView._dispatchEvent('scrolling'),this.scrollView._autoScrolling||(this.scrollView._isBouncing=!1,this.scrollView._scrolling=!1,this.scrollView._dispatchEvent('scroll-ended'));},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1;}var o=this._scrollView._autoScrollTargetDelta,n=this._scrollView._autoScrollStartPosition.add(o.multiplyScalar(e)),r=this._scrollView.getScrollEndedEventTiming(),s=Math.abs(e-1)<=r;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent('scroll-ended-with-threshold'),this._scrollView._isScrollEndedWithThresholdEventFired=!0),s&&(this._scrollView._autoScrolling=!1);var a=n.subtract(this._scrollView.getContentPosition());a=this._scrollView._clampDelta(a);var c=this.scrollView._isNecessaryAutoScrollBrake(),l=100;a.x=Math.floor(a.x*l)/l,a.y=Math.floor(a.y*l)/l,Math.abs(a.x)<=2&&Math.abs(a.y)<=2&&!c&&(this._autoScrolling=!1),this._scrollView._moveContent(a,s),this._scrollView._dispatchEvent('scrolling'),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent('scroll-ended'));},e.prototype.getTempLateItemNode=function(){return this.tmpNode;},e.prototype.setTemplateItem=function(t){if(t){for(;this._pool&&this._pool.size();)this._pool.get().destroy();if(t instanceof cc.Prefab?(this.tmpNode=cc.instantiate(t),this._itemTmp=this.tmpNode):t instanceof cc.Node&&(this.tmpNode=t,this._itemTmp=t),this._itemTmp.scale=this.itemScale,this._itemTmp.setPosition(0,0),this._resizeMode===cc.Layout.ResizeMode.CHILDREN)this._itemSize=this._layout.cellSize,this._itemSizeSource=this._layout.cellSize;else{var e=this._itemTmp.getContentSize();this._itemSizeSource=new cc.Size(e.width,e.height),this._itemSize=new cc.Size(e.width*this.itemScale,e.height*this.itemScale);}var i=!1;this._itemTmp.getComponent(h.default)||(i=!0),i&&(this.selectedMode=y.SelectedType.NONE);var o=this._itemTmp.getComponent(cc.Widget);switch(o&&o.enabled&&(this._needUpdateWidget=!0),this.selectedMode===y.SelectedType.MULT&&(this.multSelected=[]),this._align){case cc.Layout.Type.HORIZONTAL:this._colLineNum=1,this._sizeType=!1;break;case cc.Layout.Type.VERTICAL:this._colLineNum=1,this._sizeType=!0;break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=this.content.width-this._leftGap-this._rightGap;this._colLineNum=Math.floor((n+this._columnGap)/(this._itemSize.width+this._columnGap)),this._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var r=this.content.height-this._topGap-this._bottomGap;this._colLineNum=Math.floor((r+this._lineGap)/(this._itemSize.height+this._lineGap)),this._sizeType=!1;}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&console.warn('List initialization not completed!'),!1);},Object.defineProperty(e.prototype,'viewSize',{get:function(){return this.scrollView.content.parent.getContentSize();},enumerable:!1,configurable:!0}),e.prototype._resizeContent=function(){var t;switch(this._align){case cc.Layout.Type.HORIZONTAL:if(this._customSize){var e=this._getFixedSize(null);t=this._leftGap+e.val+this._itemSize.width*(this._numItems-e.count)+this._columnGap*(this._numItems-1)+this._rightGap;}else t=this._leftGap+this._itemSize.width*this._numItems+this._columnGap*(this._numItems-1)+this._rightGap;break;case cc.Layout.Type.VERTICAL:this._customSize?(e=this._getFixedSize(null),t=this._topGap+e.val+this._itemSize.height*(this._numItems-e.count)+this._lineGap*(this._numItems-1)+this._bottomGap):t=this._topGap+this._itemSize.height*this._numItems+this._lineGap*(this._numItems-1)+this._bottomGap;break;case cc.Layout.Type.GRID:switch(this.lackCenter&&(this.lackCenter=!1),this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=Math.ceil(this._numItems/this._colLineNum);t=this._topGap+this._itemSize.height*i+this._lineGap*(i-1)+this._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var o=Math.ceil(this._numItems/this._colLineNum);t=this._leftGap+this._itemSize.width*o+this._columnGap*(o-1)+this._rightGap;}}if(this.content&&this.content._components){var n=this.content.getComponent(cc.Layout);n&&(n.enabled=!1),this._allItemSize=t,this._allItemSizeNoEdge=this._allItemSize-(this._sizeType?this._topGap+this._bottomGap:this._leftGap+this._rightGap);var r=0;if(this.cyclic){var s=this._sizeType?this.viewSize.height:this.viewSize.width;this._cyclicPos1=0,s-=this._cyclicPos1,this._cyclicNum=Math.ceil(s/this._allItemSizeNoEdge)+1;var a=this._sizeType?this._lineGap:this._columnGap;this._cyclicPos2=this._cyclicPos1+this._allItemSizeNoEdge+a,r=this._allItemSize+this._allItemSizeNoEdge*(this._cyclicNum-1)+a*(this._cyclicNum-1);}this._lack=!this.cyclic&&this._allItemSize<(this._sizeType?this.viewSize.height:this.viewSize.width);var c=this._lack&&this.lackCenter||!this.lackSlide?0.1:0,l=0;(l=this._lack?this._sizeType?this.viewSize.height-c:this.viewSize.width-c:this.cyclic?r:this._allItemSize)<0&&(l=0),this._sizeType?this.content.height=l:this.content.width=l;}},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&'scroll-ended'!==t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.scrollView.getContentPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(o))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(o)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(o)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.subtract(o))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));}}if(this._calcViewPos(),this._virtual){if(this._customSize?this.displayData=this.getCustomSizeDatas():this.displayData=this.getDisplayDatas(),this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.displayItemNum=this.displayData.length;var n=this._lastDisplayData.length,r=this.displayItemNum!==n;if(r&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e;}),this.firstListId=this.displayData[0].id,r=this.firstListId!==this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!==this._lastDisplayData[n-1]),this._forceUpdate||r)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var s=0;s<this.displayItemNum;s++)this._createOrUpdateItem(this.displayData[s]);this._forceUpdate=!1;}this._calcNearestItem();}}},e.prototype.getCustomSizeDatas=function(){for(var t,e=[],i=this._numItems-1,o=!1,n=0;n<=i&&!o;n++)switch(t=this._calcItemPos(n),this._align){case cc.Layout.Type.HORIZONTAL:t.right>=this.viewLeft&&t.left<=this.viewRight?e.push(t):0!==n&&e.length>0&&(o=!0);break;case cc.Layout.Type.VERTICAL:t.bottom<=this.viewTop&&t.top>=this.viewBottom?e.push(t):0!==n&&e.length>0&&(o=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:t.bottom<=this.viewTop&&t.top>=this.viewBottom?e.push(t):0!==n&&e.length>0&&(o=!0);break;case cc.Layout.AxisDirection.VERTICAL:t.right>=this.viewLeft&&t.left<=this.viewRight?e.push(t):0!==n&&e.length>0&&(o=!0);}}return e;},e.prototype.getDisplayDatas=function(){for(var t=[],e=this.getStartAndEndId(),i=e.curId;i<=e.endId;i++)t.push(this._calcItemPos(i));return t;},e.prototype.getStartAndEndId=function(){var t=0,e=0,i=this._itemSize.width+this._columnGap,o=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:t=this.viewLeft/ i,e=this.viewRight/ i;break;case 2:t=-this.viewRight/ i,e=-this.viewLeft/ i;break;case 3:t=-this.viewTop/o,e=-this.viewBottom/o;break;case 4:t=this.viewBottom/o,e=this.viewTop/o;}return t=Math.floor(t)*this._colLineNum,e=Math.ceil(e)*this._colLineNum,t<0&&(t=0),--e>=this._numItems&&(e=this._numItems-1),{curId:t,endId:e};},e.prototype._calcViewPos=function(){if(this.content){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop;}}},e.prototype._calcItemPos=function(t){var e,i,o,n,r,s,a,c;if(!this._itemSize)return{};switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);r=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(p=this._customSize[t])>0?p:this._itemSize.width;}else r=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;return s=r+e,this.lackCenter&&(r+=u=this.content.width/2-this._allItemSizeNoEdge/2,s+=u),{id:t,left:r,right:s,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.position.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:return this._customSize?(l=this._getFixedSize(t),s=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(p=this._customSize[t])>0?p:this._itemSize.width):(s=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width),r=s-e,this.lackCenter&&(r-=u=this.content.width/2-this._allItemSizeNoEdge/2,s-=u),{id:t,right:s,left:r,x:r+this._itemTmp.anchorX*e,y:this._itemTmp.position.y};}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(l=this._getFixedSize(t),o=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),i=(p=this._customSize[t])>0?p:this._itemSize.height):(o=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height),n=o-i,this.lackCenter&&(o-=u=this.content.height/2-this._allItemSizeNoEdge/2,n-=u),{id:t,top:o,bottom:n,x:this._itemTmp.position.x,y:n+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var p,u;if(this._customSize)l=this._getFixedSize(t),n=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),i=(p=this._customSize[t])>0?p:this._itemSize.height;else n=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;return o=n+i,this.lackCenter&&(o+=u=this.content.height/2-this._allItemSizeNoEdge/2,n+=u),{id:t,top:o,bottom:n,x:this._itemTmp.position.x,y:n+this._itemTmp.anchorY*i};}break;case cc.Layout.Type.GRID:var h=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(n=(o=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(n=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,c=n+this._itemTmp.anchorY*this._itemSize.height;}switch(a=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a+=this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a+=(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1;}return{id:t,top:o,bottom:n,x:a,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s=(r=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,a=r+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(r=(s=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width;}switch(c=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1;}return{id:t,left:r,right:s,x:a,y:c};}}return{id:t,top:o,bottom:n,x:a,y:c};},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.position.x,y:e.position.y};return this._sizeType?(i.top=e.position.y+e.height*(1-e.anchorY),i.bottom=e.position.y-e.height*e.anchorY):(i.left=e.position.x-e.width*e.anchorX,i.right=e.position.x+e.width*(1-e.anchorX)),i;},e.prototype.getItemPos=function(t){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t);},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var o in this._customSize)parseInt(o)<t&&(e+=this._customSize[o],i++);return{val:e,count:i};},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft;},e.prototype._onScrollEnded=function(){if(null!=this.scrollToListId){var t=this.getItemByListId(this.scrollToListId);this.scrollToListId=null,t&&cc.tween(t).to(0.1,{scale:cc.v3(1.06,1.06,1.06)}).to(0.1,{scale:cc.v3(1,1,1)}).start();}this._onScrolling(),this._slideMode!==y.SlideType.ADHERING||this.adhering?this._slideMode===y.SlideType.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()):this.adhere();},e.prototype._onTouchStart=function(t,e){if(null!=this._scrollView&&!this._scrollView.hasNestedViewGroup(t,e)&&(t.eventPhase!==cc.Event.AT_TARGET||t.target!==this.node)){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target;}},e.prototype._onTouchUp=function(){this._scrollPos=null,this._slideMode===y.SlideType.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===y.SlideType.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null;},e.prototype._onTouchCancelled=function(t,e){!this._scrollView||this._scrollView.hasNestedViewGroup(t,e)||t.simulate||(this._scrollPos=null,this._slideMode===y.SlideType.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===y.SlideType.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null);},e.prototype._onSizeChanged=function(){var t=this;this.changeSizeFlag=!0,this.checkInited(!1)&&this.scheduleOnce(function(){t.changeSizeFlag&&t._onScrolling();});var e=this.scrollView.content.parent.getComponent(cc.Widget);e&&e.updateAlignment(),this._resizeContent();},e.prototype._onItemAdaptive=function(t){if(this.checkInited(!1)){var e=!this._sizeType&&t.width!==this._itemSize.width,i=this._sizeType&&t.height!==this._itemSize.height;if(e||i){this._customSize||(this._customSize={});var o=this._sizeType?t.height:t.width;this._customSize[t._listId]!==o&&(this._customSize[t._listId]=o,this._resizeContent(),this.updateAll(),Number.isNaN(this._scrollToListId)||null===this._scrollToListId||void 0===this._scrollToListId||(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-new Date().getTime()/1000))));}}},e.prototype._pageAdhere=function(){if(this.cyclic||!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){var t=this._sizeType?this.viewTop:this.viewLeft,e=(this._sizeType?this.viewSize.height:this.viewSize.width)*this.pageDistance;if(Math.abs(this._beganPos-t)>e)switch(this._alignCalcType){case 1:case 4:this._beganPos>t?this.prePage(0.5):this.nextPage(0.5);break;case 2:case 3:this._beganPos<t?this.prePage(0.5):this.nextPage(0.5);}else this.elasticTop<=0&&this.elasticRight<=0&&this.elasticBottom<=0&&this.elasticLeft<=0&&this.adhere();this._beganPos=null;}},e.prototype.adhere=function(){if(this.checkInited()&&!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){this.adhering=!0,this._calcNearestItem();var t=(this._sizeType?this._topGap:this._leftGap)/(this._sizeType?this.viewSize.height:this.viewSize.width);this.scrollTo(this.nearestListId,0.7,t);}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i);}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode===y.SlideType.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum;}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum;}else this._updateDone=!0,this._calcNearestItem(),this.slideMode===y.SlideType.PAGE&&(this.curPageNum=this.nearestListId);},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id),i=t.id%this._actualNumItems;if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(t.x,t.y),this.renderEvent&&e&&(this.startShowIndex<=0||this.startShowIndex<=i&&this.endShowIndex>=i)&&(this.startShowIndex=0,this.endShowIndex=this._numItems-1),this.showEffect(e,Math.abs(i)),cc.Component.EventHandler.emitEvents([this.renderEvent],e,Math.abs(i)));else{var o=this._pool.size()>0;if(e=o?this._pool.get():cc.instantiate(this._itemTmp),this.outterState&&!e._outtser){e._outtser=1;var n=e.getComponent(d.default);n&&(n.m_OuterScrollView=this.node.getComponent(f.default));}if(e._listId!==t.id&&(e._listId=t.id,e.setContentSize(this._itemSizeSource)),e.setPosition(t.x,t.y),e.active=!0,this.content.addChild(e),this.showEffect(e,Math.abs(i)),o&&this._needUpdateWidget){var r=e.getComponent(cc.Widget);r&&r.updateAlignment();}e.setSiblingIndex(this.content.children.length-1);var s=e.getComponent(h.default);e.listItem=s,s&&(s.listId=t.id,s.list=this,s._registerEvent()),this.renderEvent&&e&&(this.startShowIndex<=0||this.startShowIndex<=i&&this.endShowIndex>=i)&&(this.startShowIndex=0,this.endShowIndex=this._numItems-1),cc.Component.EventHandler.emitEvents([this.renderEvent],e,Math.abs(i));}this._playExistedItemEff&&this.showEffect(e,Math.abs(i)),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id);},e.prototype._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)):((i=cc.instantiate(this._itemTmp))._listId=t,i.active=!0,i.setPosition(0,0),this.content.addChild(i),e=i.getComponent(h.default),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t);},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>y.SelectedType.NONE){var e=t.node;switch(this.selectedMode){case y.SelectedType.SINGLE:t.selected=this.selectedId===e._listId;break;case y.SelectedType.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0;}}},e.prototype._updateItemPos=function(t){var e=Number.isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y);},e.prototype.setMultSelected=function(t,e){if(this.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)this.multSelected=t;else{var i=void 0,o=void 0;if(e)for(var n=t.length-1;n>=0;n--)i=t[n],(o=this.multSelected.indexOf(i))<0&&this.multSelected.push(i);else for(n=t.length-1;n>=0;n--)i=t[n],(o=this.multSelected.indexOf(i))>=0&&this.multSelected.splice(o,1);}this._forceUpdate=!0,this._onScrolling();}},e.prototype.updateItem=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.checkInited()&&e.forEach(function(e){var i=t.getItemByListId(e);i&&cc.Component.EventHandler.emitEvents([t.renderEvent],i,e%t._actualNumItems);});},e.prototype.updateAll=function(){if(this.checkInited()){var t=this.numItems;this.setNumItems(t);}},e.prototype.getItemByListId=function(t){if(null!=this.content)for(var e=this.content.children.length-1;e>=0;e--){var i=this.content.children[e];if(i._listId===t)return i;}},e.prototype._getOutsideItem=function(){for(var t,e,i,o=[],n=this.content.children.length-1;n>=0;n--){i=this.content.children[n];var r=!1;try{for(var a=(t=void 0,s(this.displayData)),c=a.next();!c.done;c=a.next())c.value.id!==i._listId||(r=!0);}catch(l){t={error:l};}finally{try{c&&!c.done&&(e=a.return)&&e.call(a);}finally{if(t)throw t.error;}}r||o.push(i);}return o;},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!==this._scrollItem._listId){this._pool.put(i);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]===i._listId){this._lastDisplayData.splice(o,1);break;}}}else for(;this.content.children.length>this._numItems;)this._delSingleItem(this.content.children[this.content.children.length-1]);},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null;},e.prototype.aniDelItem=function(t,e,i){var o=this;if(!this.checkInited()||this.cyclic||!this._virtual)return console.warn('This function is not allowed to be called!');if(this._aniDelRuning)return console.warn('Please wait for the current deletion to finish!');var n,r=this.getItemByListId(t);if(r){n=r.getComponent(h.default),this._aniDelRuning=!0;var s=this.displayData[this.displayData.length-1].id,a=n.selected;n.showAni(i,function(){var i;if(s<o._numItems-2&&(i=s+1),null!=i){var n=o._calcItemPos(i);o.displayData.push(n),o._virtual?o._createOrUpdateItem(n):o._createOrUpdateItem2(i);}else o._numItems--;if(o.selectedMode===y.SelectedType.SINGLE)a?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode===y.SelectedType.MULT&&o.multSelected.length){var c=o.multSelected.indexOf(t);c>=0&&o.multSelected.splice(c,1);for(var l=o.multSelected.length-1;l>=0;l--)(h=o.multSelected[l])>=t&&o.multSelected[l]--;}if(o._customSize){o._customSize[t]&&delete o._customSize[t];var p={},u=void 0;for(var h in o._customSize){u=o._customSize[h];var d=parseInt(h);p[d-(d>=t?1:0)]=u;}o._customSize=p;}var f,_=new cc.Tween();for(l=null!=i?i:s;l>=t+1;l--)if(r=o.getItemByListId(l)){var g=o._calcItemPos(l-1);_=_.to(0.2333,{position:cc.v3(g.x,g.y)}),l<=t+1&&(f=!0,_=_.call(function(){o._aniDelRuning=!1,e(t);})),cc.tween(r).sequence(_).start();}f||(o._aniDelRuning=!1,e(t));},!0);}else e(t);},e.prototype.scrollTo=function(t,e,i,o){var n=this;if(void 0===e&&(e=0.5),void 0===i&&(i=null),void 0===o&&(o=!1),!this.checkInited(!1))return!1;null==e?e=0.5:e<0&&(e=0),t<0?t=0:t>=this._numItems&&(t=this._numItems-1),!this._virtual&&this._layout&&this._layout.enabled&&this._layout.updateLayout(),this.getCanStartShowIndex(Math.max(0,t-1));var r,s,a=this.getItemPos(t);switch(this._alignCalcType){case 1:r=a.left,r-=null!=i?this.viewSize.width*i:this._leftGap,a=cc.v2(r,0);break;case 2:r=a.right-this.viewSize.width,r+=null!=i?this.viewSize.width*i:this._rightGap,a=cc.v2(r+this.content.width,0);break;case 3:s=a.top,s+=null!=i?this.viewSize.height*i:this._topGap,a=cc.v2(0,-s);break;case 4:s=Number(a.bottom)+this.viewSize.height,s-=null!=i?this.viewSize.height*i:this._bottomGap,a=cc.v2(0,-s+this.content.height);}var c=this.content.getPosition();c=Math.abs(this._sizeType?c.y:c.x);var l=this._sizeType?a.y:a.x;return Math.abs((null!=this._scrollPos?this._scrollPos:c)-l)>0.5&&(this._scrollView.scrollToOffset(a,e),this._scrollToListId=t,this._scrollToEndTime=new Date().getTime()/1000+e,this._scrollToSo=this.scheduleOnce(function(){if(n.adhering=n._adheringBarrier=!1,n._scrollPos=n._scrollToListId=n._scrollToEndTime=n._scrollToSo=null,o){var e=n.getItemByListId(t);e&&cc.tween(e).to(0.1,{scale:1.05}).to(0.1,{scale:1}).start();}},e+0.1),e<=0&&this._onScrolling(),!0);},e.prototype._calcNearestItem=function(){var t,e;this.nearestListId=null,this._virtual&&this._calcViewPos();for(var i=this.viewTop,o=this.viewRight,n=this.viewBottom,r=this.viewLeft,s=!1,a=0;a<this.content.children.length&&!s&&(t=this._virtual?this.displayData[a]:this._calcExistItemPos(a));a+=this._colLineNum)switch(e=this._sizeType?(Number(t.top)+Number(t.bottom))/2:e=(Number(t.left)+Number(t.right))/2,this._alignCalcType){case 1:t.right>=r&&(this.nearestListId=t.id,r>e&&(this.nearestListId+=this._colLineNum),s=!0);break;case 2:t.left<=o&&(this.nearestListId=t.id,o<e&&(this.nearestListId+=this._colLineNum),s=!0);break;case 3:t.bottom<=i&&(this.nearestListId=t.id,i<e&&(this.nearestListId+=this._colLineNum),s=!0);break;case 4:t.top>=n&&(this.nearestListId=t.id,n>e&&(this.nearestListId+=this._colLineNum),s=!0);}if((t=this._virtual?this.displayData[this.displayItemNum-1]:this._calcExistItemPos(this._numItems-1))&&t.id===this._numItems-1)switch(e=this._sizeType?(Number(t.top)+Number(t.bottom))/2:e=(Number(t.left)+Number(t.right))/2,this._alignCalcType){case 1:o>e&&(this.nearestListId=t.id);break;case 2:r<e&&(this.nearestListId=t.id);break;case 3:n<e&&(this.nearestListId=t.id);break;case 4:i>e&&(this.nearestListId=t.id);}},e.prototype.prePage=function(t){void 0===t&&(t=0.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t);},e.prototype.nextPage=function(t){void 0===t&&(t=0.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t);},e.prototype.skipPage=function(t,e){this.checkInited()&&(this._slideMode===y.SlideType.PAGE?t<0||t>=this._numItems||this.curPageNum!==t&&(this.curPageNum=t,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],t),this.scrollTo(t,e)):console.warn('This function is not allowed to be called, Must SlideMode = PAGE!'));},e.prototype.calcCustomSize=function(t){if(this.checkInited())if(this._itemTmp){if(this.renderEvent){this._customSize={};var e=cc.instantiate(this._itemTmp);this.content.addChild(e);for(var i=0;i<t;i++)cc.Component.EventHandler.emitEvents([this.renderEvent],e,i),e.height===this._itemSize.height&&e.width===this._itemSize.width||(this._customSize[i]=this._sizeType?e.height:e.width);return Object.keys(this._customSize).length||(this._customSize=null),e.removeFromParent(),e.destroy&&e.destroy(),this._customSize;}console.warn('Unset Render-Event!');}else console.warn('Unset template item!');},e.setScrollViewBottomEdge=function(t){var e=null==t?void 0:t.target;if(e&&cc.isValid(e,!0)&&t.type!==y.SvType.NotEdge){var i=e.$ScrollView;if(i){var o=i.content,n=o.parent,r=(null==o?void 0:o.$Layout)||null;if(r){var s=(null==t?void 0:t.color)||((null==t?void 0:t.type)===y.SvType.Shadow_4?c.UtilColor.ComMaskB:c.UtilColor.ComMaskA),a=n.width,l=n.height,u=e.getChildByName('_BottomEdge');if(u){u.active=!0;var h=e.getComponentsInChildren(cc.Widget);h&&h.forEach(function(t){t.updateAlignment();});}else{var d,f=e.anchorX===n.anchorX?1:0,_=e.anchorY===n.anchorY?1:0,g=function(i){var o=p.UtilsMainNode.NewNode(e,[cc.Sprite,cc.Widget]),r=o.$Sprite;if(r.sizeMode=cc.Sprite.SizeMode.CUSTOM,r.type=cc.Sprite.Type.SLICED,i&&(null==t?void 0:t.type)){var u=o.$Widget;o.name='_BottomShadow',o.setAnchorPoint(0.5,0),o.setContentSize(cc.size((null==t?void 0:t.width)||(t.type===y.SvType.Shadow_4?648:740),t.type===y.SvType.Shadow_4?46:28)),u.isAlignBottom=!0,u.alignMode=cc.Widget.AlignMode.ALWAYS,u.bottom=(e.height-n.height)*e.anchorY+n.y*_,p.UtilsMainNode.LoadSpriteFrame(o,i);}else o.name='_BottomEdge',o.color=c.UtilColor.Hex2Rgba(s),o.setContentSize(cc.size((null==t?void 0:t.width)||(t.type===y.SvType.Horizon?l:a),12)),o.y=o.width/2,p.UtilsMainNode.LoadSpriteFrame(o,'texture/com/newUI/com_img_zhezhao@9[0_0_4_4]');return o;},m=g(),v=m.$Widget;if((null==t?void 0:t.type)===y.SvType.Horizon){m.setAnchorPoint(1,0),v.isAlignRight=!0,v.right=(e.width-n.width)*(1-e.anchorX)+n.x*f,m.angle=90,(d=g()).name='_BottomEdge2';var b=d.$Widget;d.setAnchorPoint(0,0),b.isAlignLeft=!0,b.left=(e.width-n.width)*e.anchorX+n.x*f,d.angle=-90;}else switch(m.setAnchorPoint(0.5,0),v.isAlignBottom=!0,v.bottom=(e.height-n.height)*e.anchorY+n.y*_,t.needLeftRightWidget&&(v.left=0,v.right=0,v.isAlignLeft=!0,v.isAlignRight=!0),t.type){case y.SvType.Shadow_4:d=g('texture/com/newUI/com_line_sjtc@9[0_0_4_4]');break;case y.SvType.Shadow_30:d=g('texture/com/newUI/com_line_sjtc02@9[0_0_30_30]');break;case y.SvType.OnlyMask:}var C=function(){var t,e;o.childrenCount<1||(m.$Sprite.enabled=o.width>n.width||o.height>n.height,r.type===cc.Layout.Type.HORIZONTAL&&(d.$Sprite.enabled=o.width>n.width),i.enabled||(m.getComponent(cc.Sprite).enabled=!1),null===(t=null==m?void 0:m.getComponent(cc.Widget))||void 0===t||t.updateAlignment(),null===(e=null==d?void 0:d.getComponent(cc.Widget))||void 0===e||e.updateAlignment());};r.node.targetOff(this),i.node.targetOff(this),C(),r.node.on(cc.Node.EventType.CHILD_ADDED,C,this),r.node.on(cc.Node.EventType.CHILD_REMOVED,C,this),r.enabled&&r.node.on(cc.Node.EventType.SIZE_CHANGED,C,this);}}}}},e.prototype.showEffect=function(t,e){switch(this._showEffectType){case y.ShowEffectType.OneByOne_fadeIn:this.showOneByOne(t,e);break;case y.ShowEffectType.OneByOne_ToUp:this.oneByOneToUp(t,e);}},e.prototype.resetEffectAll=function(){switch(this.setListViewBlockState(!1),this._showEffectType){case y.ShowEffectType.OneByOne_fadeIn:this.resetFadeInStete();break;case y.ShowEffectType.OneByOne_ToUp:this.resetMoveToUpStete();}},e.prototype.showOneByOne=function(t){var e=this;this._showEffectClose||(this.setListViewBlockState(!0),l.default.fadeIn(t,this.playIdx,this.playDelay,this.startDelay||0.1,function(t){t>=e.displayItemNum-1&&(e.setListViewBlockState(!1),a.EventClient.I.emit(u.AppEvent.ListViewAnimEnd));},this),this.playIdx++,this.playIdx>=this.displayItemNum&&(this.ShowEffectClose=!0,this.playIdx=0));},e.prototype.oneByOneToUp=function(t){var e=this;this._showEffectClose||(this.setListViewBlockState(!0),l.default.moveToUp(t,this.playIdx,function(t){t>=e.displayItemNum-1&&(e.setListViewBlockState(!1),a.EventClient.I.emit(u.AppEvent.ListViewAnimEnd));},this),this.playIdx++,this.playIdx>=this.displayItemNum&&(this.ShowEffectClose=!0,this.playIdx=0,this._playExistedItemEff=!1));},e.prototype.replayEffect=function(t,e){if(void 0===t&&(t=!0),void 0===e&&(e=!1),this._scrollView&&this._scrollView.stopAutoScroll(),this.resetEffectAll(),this._showEffectClose=!1,this._playExistedItemEff=e,t&&this._lastDisplayData)for(var i=this._lastDisplayData.length,o=0;o<i;o++){var n=this.getItemByListId(this._lastDisplayData[o]);this.showEffect(n,o);}},e.prototype.resetMoveToUpStete=function(){var t,e=(null===(t=this._lastDisplayData)||void 0===t?void 0:t.length)||0;if(e)for(var i=0;i<e;i++){var o=this.getItemByListId(this._lastDisplayData[i]);l.default.resetMoveToUp(o,i);}},e.prototype.resetFadeInStete=function(){var t,e=(null===(t=this._lastDisplayData)||void 0===t?void 0:t.length)||0;if(e)for(var i=0;i<e;i++){var o=this.getItemByListId(this._lastDisplayData[i]);l.default.resetFadeIn(o,i);}},e.prototype.isPlayAnimIng=function(){if(this._lastDisplayData)for(var t=0;t<this._lastDisplayData.length;t++){var e=this.getItemByListId(this._lastDisplayData[t]);if(l.default.isPlayAnimIng(e))return!0;}return this.setListViewBlockState(!1),!1;},e.prototype.resetCustomSize=function(t,e){void 0===t?this._customSize=null:this._customSize[t]=e;},r([m({type:cc.Node,tooltip:!1,visible:function(){return!this.tmpPrefab;}})],e.prototype,'tmpNode',void 0),r([m({type:cc.Prefab,tooltip:!1,visible:function(){return!this.tmpNode;}})],e.prototype,'tmpPrefab',void 0),r([m({type:cc.Float,tooltip:!1})],e.prototype,'itemScale',void 0),r([m],e.prototype,'_slideMode',void 0),r([m({type:cc.Enum(y.SlideType),tooltip:!1})],e.prototype,'slideMode',null),r([m({type:cc.Float,range:[0,1,0.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode===y.SlideType.PAGE;}})],e.prototype,'pageDistance',void 0),r([m({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode===y.SlideType.PAGE;}})],e.prototype,'pageChangeEvent',void 0),r([m],e.prototype,'_virtual',void 0),r([m({type:cc.Boolean,tooltip:!1})],e.prototype,'virtual',null),r([m({tooltip:!1,visible:function(){var t=this.virtual&&this.slideMode===y.SlideType.NORMAL;return t||(this.cyclic=!1),t;}})],e.prototype,'cyclic',void 0),r([m({tooltip:!1,visible:function(){return this.virtual;}})],e.prototype,'lackCenter',void 0),r([m({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t;}})],e.prototype,'lackSlide',void 0),r([m],e.prototype,'_updateRate',void 0),r([m({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,'updateRate',null),r([m({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,'frameByFrameRenderNum',void 0),r([m({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,'renderEvent',void 0),r([m({type:cc.Enum(y.SelectedType),tooltip:!1})],e.prototype,'selectedMode',void 0),r([m({tooltip:!1,visible:function(){return this.selectedMode===y.SelectedType.SINGLE;}})],e.prototype,'repeatEventSingle',void 0),r([m({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>y.SelectedType.NONE;}})],e.prototype,'selectedEvent',void 0),r([m],e.prototype,'_bottomShadow',void 0),r([m({type:cc.Enum(y.SvType),tooltip:!1})],e.prototype,'BottomShadow',null),r([m({type:cc.Float,tooltip:!1})],e.prototype,'ShadowWidth',void 0),r([m],e.prototype,'_showEffectType',void 0),r([m({type:cc.Enum(y.ShowEffectType),tooltip:!1})],e.prototype,'showEffectType',null),r([m({type:cc.Float,tooltip:!1})],e.prototype,'startDelay',void 0),r([m({type:cc.Float,tooltip:!1})],e.prototype,'playDelay',void 0),r([m({serializable:!1})],e.prototype,'_numItems',void 0),i=r([g,v(),b('滚动列表组件/ListView'),S(cc.ScrollView),C(-5000)],e);}(cc.Component);i.default=w,cc._RF.pop();},{}],LocalizedLabel:[function(t,e,i){'use strict';cc._RF.push(e,'bad1d62e89Iy6TG0q0RZE1k','LocalizedLabel');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.LocalizedLabel=void 0;var s=t('BaseCmp'),a=t('i18n'),c=cc._decorator,l=c.ccclass,p=c.property,u=c.executeInEditMode,h=c.menu,d=c.disallowMultiple,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._key='',e._label=null,e._refresh=!1,e._findKey=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'key',{get:function(){return this._key;},set:function(t){t=t||'',this._key=t,this._key&&this.label&&(this.label.string=a.Lang[this._key]||'');},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'label',{get:function(){return this._label?this._label:(this._label=this.node.getComponent(cc.Label)||this.node.getComponent(cc.RichText),this._label);},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'refresh',{get:function(){return this._refresh;},set:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'findKey',{get:function(){return this._findKey;},set:function(){},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),a.Lang?this.updateLabel():a.LoadLocalI18n(function(){e.updateLabel();});},e.prototype.updateLabel=function(){this.label?this.key?(this.label.string=a.Lang[this.key]||this.label.string,this.label.string!==a.Lang[this.key]&&console.warn('value is undefined node.name='+this.node.name+', str='+this.label.string+'\uFF0C'+this.key)):console.warn('key is undefined, node.name='+this.node.name+', str='+this.label.string):console.error('Failed to update localized label, label component is invalid!');},e.prototype.update=function(){},r([p(cc.String)],e.prototype,'_key',void 0),r([p({type:cc.String})],e.prototype,'key',null),r([p(cc.Boolean)],e.prototype,'_refresh',void 0),r([p(cc.Boolean)],e.prototype,'refresh',null),r([p(cc.Boolean)],e.prototype,'_findKey',void 0),r([p(cc.Boolean)],e.prototype,'findKey',null),r([l,u(),d(),h('LocalizedLabel')],e);}(s.default);i.LocalizedLabel=f,cc._RF.pop();},{}],LogMgr:[function(t,e,i){'use strict';cc._RF.push(e,'f072c2kL8BMxZaV9cFfMwZR','LogMgr');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.LogMgr=void 0;var r=t('UtilPaltform');i.LogMgr=function(){var t=!r.UtilPaltform.isWeChatGame,e=console.log;console.log=function(i){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];t&&e.apply(console,n([i],o));};var i=console.error;console.error=function(e){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];t&&i.apply(console,n([e],o));};var o=console.assert;console.assert=function(e,i){for(var r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];t&&o.apply(console,n([e,i],r));};var s=console.table;console.table=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t&&s.apply(console,n(e));};var a=console.clear;console.clear=function(){t&&a.apply(console);};var c=console.count;console.count=function(e){t&&c.apply(console,[e]);};var l=console.debug;console.debug=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t&&l.apply(console,n([e],i));};var p=console.dir;console.dir=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t&&p.apply(console,n([e],i));};var u=console.dirxml;console.dirxml=function(e){t&&u.apply(console,[e]);};var h=console.group;console.group=function(e){t&&h.apply(console,[e]);};var d=console.groupCollapsed;console.groupCollapsed=function(e){t&&d.apply(console,[e]);};var f=console.groupEnd;console.groupEnd=function(){t&&f.apply(console);};var y=console.info;console.info=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t&&y.apply(console,n([e],i));};var _=console.time;console.time=function(e){t&&_.apply(console,[e]);};var g=console.timeEnd;console.timeEnd=function(e){t&&g.apply(console,[e]);};var m=console.trace;console.trace=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t&&m.apply(console,n([e],i));};var v=console.warn;console.warn=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t&&v.apply(console,n([e],i));};},cc._RF.pop();},{}],LoginConst:[function(t,e,i){'use strict';cc._RF.push(e,'0c4c0N7VEVF8bnBmNhM2UoC','LoginConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.JUMP_NOTICE_WINDOW_KEY=i.JUMP_NOTICE_WINDOW=i.CREATE_ROLE_SPINE_ID=i.LOGIN_ERROR_CODE=i.ACC_STATE_ENUM=i.RealName=i.LoginHttpApi=void 0,function(t){t.Register='/api/register',t.Login='/api/login',t.Createrole='/api/createrole',t.Getrandnick='/api/getrandnick',t.Getconfig='/api/getconfig',t.Getnotice='/api/getnotice',t.Getgateaddr='/api/getgateaddr',t.GetGameSwitch='/api/getgameswitch';}(i.LoginHttpApi||(i.LoginHttpApi={})),(i.RealName||(i.RealName={})).ReqRealName='/api/uploadrealname',function(t){t[t.completed=1]='completed',t[t.NoCompleted=2]='NoCompleted';}(i.ACC_STATE_ENUM||(i.ACC_STATE_ENUM={})),function(t){t[t.NoRealName=602]='NoRealName',t[t.AntiAddiction=603]='AntiAddiction',t[t.NoAdult=605]='NoAdult',t[t.AccountBan=34]='AccountBan';}(i.LOGIN_ERROR_CODE||(i.LOGIN_ERROR_CODE={})),function(t){t[t.Man=10003]='Man',t[t.Women=10004]='Women';}(i.CREATE_ROLE_SPINE_ID||(i.CREATE_ROLE_SPINE_ID={})),function(t){t[t.One=0]='One',t[t.Nothing=2]='Nothing';}(i.JUMP_NOTICE_WINDOW||(i.JUMP_NOTICE_WINDOW={})),function(t){t.Red='red',t.Orange='orange',t.Green='green';}(i.JUMP_NOTICE_WINDOW_KEY||(i.JUMP_NOTICE_WINDOW_KEY={})),cc._RF.pop();},{}],LoginController:[function(t,e,i){'use strict';cc._RF.push(e,'cb52aN+VftE3JkAtm0B8PiA','LoginController');var ac=window.extend_func(this,'__extends__decorate__awaiter__generator');var n=ac.__extends;var r=ac.__decorate;var s=ac.__awaiter;var a=ac.__generator;Object.defineProperty(i,'__esModule',{value:!0});var c=t('EventClient'),l=t('EventProto'),p=t('BaseController'),u=t('WinMgr'),h=t('HttpReq'),d=t('GameApp'),f=t('NetMgr'),y=t('LoginConst'),_=t('AppEventConst'),g=t('TaskCollector'),m=t('MsgToastMgr'),v=t('i18n'),b=t('IdentitykBox'),C=t('DataReportConst'),S=t('TimerMgr'),w=t('LoginModel'),R=t('AppViewConst'),I=t('UtilsMain'),M=t('SdkMgr'),T=t('StorageMgr'),E=t('UtilUrl'),A=t('UtilPaltform'),P=cc._decorator.ccclass,x=function(t){function e(){var e=t.call(this)||this;return e._hasSendEvt=!1,e._pingTimeout=null,e._time3000=3000,e._sendNum=0,e._sendNumMax=3,e._PingTimerFlag='PingTimerFlag',e.syncTime=0,e.haveNotice=null,e.isGameStart=!1,e._isWelcomeOpened=!1,e;}var i;return n(e,t),i=e,Object.defineProperty(e,'I',{get:function(){return this._I||(this._I=new i()),this._I;},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.addClientEvent=function(){c.EventClient.I.on(_.AppEvent.ReqRegister,this.onReqRegister,this),c.EventClient.I.on(_.AppEvent.ReqLogin,this.onReqLogin,this),c.EventClient.I.on(_.AppEvent.ReqCreateRole,this.onReqCreaterole,this),c.EventClient.I.on(_.AppEvent.ReqRoleNick,this.onReqRoleNick,this),c.EventClient.I.on(_.AppEvent.ReqGetgateaddr,this.onReqGetgateaddr,this),c.EventClient.I.on(_.AppEvent.ReConnect,this.onReConnect,this),c.EventClient.I.on(_.AppEvent.BacktoLogin,this.onBacktoLoginView,this),c.EventClient.I.on(_.AppEvent.SocketConnect,this.onConnectServerSucc,this),c.EventClient.I.on(_.AppEvent.SocketReconnectSucc,this.onSocketReconnectSucc,this),c.EventClient.I.on(_.AppEvent.InitConfigSuccess,this.onInitConfigSuccess,this),c.EventClient.I.on(_.AppEvent.SocketReconnectFail,this.onReconnectFail,this),c.EventClient.I.on(_.AppEvent.InitEnd,this.onGameInitEnd,this);},e.prototype.delClientEvent=function(){c.EventClient.I.off(_.AppEvent.ReqRegister,this.onReqRegister,this),c.EventClient.I.off(_.AppEvent.ReqLogin,this.onReqLogin,this),c.EventClient.I.off(_.AppEvent.ReqCreateRole,this.onReqCreaterole,this),c.EventClient.I.off(_.AppEvent.ReqRoleNick,this.onReqRoleNick,this),c.EventClient.I.off(_.AppEvent.ReqGetgateaddr,this.onReqGetgateaddr,this),c.EventClient.I.off(_.AppEvent.ReConnect,this.onReConnect,this),c.EventClient.I.off(_.AppEvent.BacktoLogin,this.onBacktoLoginView,this),c.EventClient.I.off(_.AppEvent.SocketConnect,this.onConnectServerSucc,this),c.EventClient.I.off(_.AppEvent.SocketReconnectSucc,this.onSocketReconnectSucc,this),c.EventClient.I.off(_.AppEvent.InitConfigSuccess,this.onInitConfigSuccess,this),c.EventClient.I.off(_.AppEvent.SocketReconnectFail,this.onReconnectFail,this),c.EventClient.I.off(_.AppEvent.InitEnd,this.onGameInitEnd,this);},e.prototype.netEventHandler=function(e){t.prototype.netEventHandler.call(this,e),this.netEvt.call(l.EventProto.I,ProtoId.S2CLogin_ID,this.onS2CLogin,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CLoginEnd_ID,this.onS2CLoginEnd,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CPing_ID,this.onS2CPing,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CReLogin_ID,this.onS2CReLogin,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CKill_ID,this.onS2CKill,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CRealNameTimeLimit_ID,this.onS2CRealNameTimeLimil,this),this.netEvt.call(l.EventProto.I,ProtoId.S2CWindowNotice_ID,this.onS2CWindowNotice,this);},e.prototype.clearAll=function(){this.clearHearBeat();},e.prototype.onReqRegister=function(t,e){w.default.I.setClickRegState(!0),this.reqRegister(t,e).then(function(){},function(t){console.log(t);});},e.prototype.onReqLogin=function(t,e){w.default.I.setClickLoginState(!0),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.SendLogin),this.reqLogin(t,e).then(function(){},function(t){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.SendLoginFail),console.log(t);});},e.prototype.onReqCreaterole=function(t,e){this.reqCreaterole(t,e).then(function(){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.CreateRoleSuc);},function(t){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ClickCreateRoleDataErr),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ClickCreateRoleNetErr),console.log(t);});},e.prototype.onReqRoleNick=function(t){this.reqGetrandnick(t).then(function(){},function(t){console.log(t);});},e.prototype.onReqGetgateaddr=function(){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NetUrl),this.reqGetgateaddr().then(function(){},function(t){console.log(t);});},e.prototype.onInitConfigSuccess=function(){console.warn('onInitConfigSuccess'),g.default.I.endTask(g.DB_KEY_ENUM.WXSubLoaded,g.DB_ID_ENUM.ConfigLodEnd),g.default.I.endTask(g.DB_KEY_ENUM.LodgingEnd,g.DB_ID_ENUM.ConfigLodEnd);},e.prototype.onReconnectFail=function(){this.clearHearBeat(),f.default.I.closeNet(!1);var t=v.i18n.tt(v.Lang.login_net_err);u.default.I.open(R.AppViewConst.ReqLoginWarnWin,t,3);},e.prototype.onGameInitEnd=function(){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.LoginEnd),this.reqC2SLoginEnd();},e.prototype.reqRegister_pt=function(t,e){return s(this,void 0,void 0,function(){var i,o,n,r,s,c,l;return a(this,function(a){switch(a.label){case 0:return i=E.UtilUrl.getQueryString('channel_id'),o=E.UtilUrl.getQueryString('app_id'),n={sdk:'account_reg',app_id:o?Number(o):d.default.I.AppId,channel_id:i?Number(i):d.default.I.ChannelId,uid:t,token:e},[4,h.default.I.postAsync(d.default.I.PtLoginHttpApi,n)];case 1:if((r=a.sent()).errInfo)return console.error('register fail, result:',r.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),w.default.I.setClickRegState(!1),[2];s=null;try{s=JSON.parse(r.resultInfo);}catch(p){return console.error('login error, result:',r.resultInfo),w.default.I.setClickRegState(!1),[2];}return 200!==s.status?(console.error('login error2, result:',s),this.ShowHttpErrTipsWin(s),w.default.I.setClickRegState(!1),[2]):(c=t,l=e,u.default.I.close(R.AppViewConst.AccountRegView),[4,this.reqLogin(c,l)]);case 2:return a.sent(),w.default.I.setClickRegState(!1),[2];}});});},e.prototype.reqRegister=function(t,e){return s(this,void 0,void 0,function(){var i,o,n,r,s,c,l,p;return a(this,function(a){switch(a.label){case 0:return 0!==d.default.I.JumpType?[3,2]:[4,this.reqRegister_pt(t,e)];case 1:return a.sent(),[2];case 2:return i=w.default.I,o=d.default.I.LoginHttpUri,n=o+y.LoginHttpApi.Register,r={UserName:t,UserPass:e,channel_id:i.channel_id},[4,h.default.I.postAsync(n,r)];case 3:if((s=a.sent()).errInfo)return console.error('register fail, result:',s.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),w.default.I.setClickRegState(!1),[2];c=null;try{c=JSON.parse(s.resultInfo);}catch(f){return console.error('login error, result:',s.resultInfo),w.default.I.setClickRegState(!1),[2];}return 0!==c.tag?(console.error('login error2, result:',c),this.ShowHttpErrTipsWin(c),w.default.I.setClickRegState(!1),[2]):(l=c.UserName,p=c.UserPass,u.default.I.close(R.AppViewConst.AccountRegView),[4,this.reqLogin(l,p)]);case 4:return a.sent(),w.default.I.setClickRegState(!1),[2];}});});},e.prototype.reqLogin_pt=function(t,e){var i,o;return s(this,void 0,void 0,function(){var n,r,s,l,p,u,f;return a(this,function(a){switch(a.label){case 0:return n=E.UtilUrl.getQueryString('channel_id'),r=E.UtilUrl.getQueryString('app_id'),s=w.default.I,l={sdk:'account',app_id:r?Number(r):d.default.I.AppId,channel_id:n?Number(n):d.default.I.ChannelId,uid:t,token:e},[4,h.default.I.postAsync(d.default.I.PtLoginHttpApi,l)];case 1:if((p=a.sent()).errInfo)return console.error('login fail, result:',p.errInfo),s.setClickLoginState(!1),[2];u=null;try{u=JSON.parse(p.resultInfo);}catch(y){console.error('pt login error, result:',p.resultInfo),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ServerListFail),s.setClickLoginState(!1);}return u?((f=T.StorageMgr.I.getValue('_deviceUniqueIdentifier_'))||(f=I.UtilsMainStr.GetUUID(),T.StorageMgr.I.setValue('_deviceUniqueIdentifier_',f)),[2,{acc:null===(i=u.data)||void 0===i?void 0:i.user_id,pwd:null===(o=u.data)||void 0===o?void 0:o.token,sdktype:1,uuid:f,channel_id:l.channel_id}]):[2];}});});},e.prototype.reqLogin=function(t,e){return s(this,void 0,void 0,function(){var i,o,n,r,s,l,p,f,g,b,S,I;return a(this,function(a){switch(a.label){case 0:return i=d.default.I.LoginHttpUri,o=i+y.LoginHttpApi.Login,(n=w.default.I).UserAcc=t,n.UserPwd=e,d.default.I.JumpType||!A.UtilPaltform.isWebMobile||d.default.I.isOpenSDK()?[3,2]:[4,this.reqLogin_pt(t,e)];case 1:r=a.sent(),t=r.acc,e=r.pwd,n.UserAccExt=t,n.sdktype=r.sdktype,n.game_uuid=r.uuid.toString(),n.pf_uuid=r.uuid.toString(),n.channel_id=r.channel_id.toString(),a.label=2;case 2:return A.UtilPaltform.isWeChatGame&&(n.client_version=window.IndexGlobal.commonParams.version),d.default.I.isOpenSDK()&&(n.sdktype=1),s={UserName:t,UserPass:e,sdktype:n.sdktype,version:n.client_version,channel_id:n.channel_id,user_id:n.selUserId,imei:n.imei,game_uuid:n.game_uuid,uuid:n.pf_uuid},c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ServerList),[4,h.default.I.postAsync(o,s)];case 3:if((l=a.sent()).errInfo)return console.error('login fail, result:',l.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),n.setClickLoginState(!1),[2];p=null;try{p=JSON.parse(l.resultInfo);}catch(M){return console.error('login error, result:',l.resultInfo),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ServerListFail),n.setClickLoginState(!1),[2];}return 0!==p.tag?(c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ServerListErr),console.error('login error2, result:',p),this.ShowHttpErrTipsWin(p),n.setClickLoginState(!1),[2]):(f=p.AccountID,g=p.Token,b=p.is_white,S=p.gate_url,I=p.AreaInfos||[],n.AccountID=f,n.Token=g,d.default.I.IsWhite=b,d.default.I.GateUrl=S,w.default.I.setData(I),u.default.I.close(R.AppViewConst.AccountLoginView),console.log('====登录成功=====',p),c.EventClient.I.emit(_.AppEvent.Succ),n.setClickLoginState(!1),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.SendLoginSuc),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ServerListSuc),c.EventClient.I.emit(_.AppEvent.InitConfigStart),[2]);}});});},e.prototype.reqCreaterole=function(t,e){return s(this,void 0,void 0,function(){var i,o,n,r,s,c;return a(this,function(a){switch(a.label){case 0:return i=d.default.I.LoginHttpUri,o=i+y.LoginHttpApi.Createrole,n=w.default.I,r={account_id:n.AccountID,token:n.Token,area_id:n.selServerId,sex:n.sex,nick:t,auto_create:e,channel_id:n.channel_id,user_id:n.selUserId,imei:n.imei,game_uuid:n.game_uuid,uuid:n.pf_uuid},[4,h.default.I.postAsync(o,r)];case 1:if((s=a.sent()).errInfo)return console.error('Createrole fail, result:',s.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),[2];c=null;try{c=JSON.parse(s.resultInfo);}catch(l){return console.error('Createrole error, result:',s.resultInfo),[2];}if(0!==c.tag)return console.error('Createrole error2, result:',c),this.ShowHttpErrTipsWin(c),[2];console.log('Createrole succ, result:',c),n.selUserId=c.user_id,M.SdkMgr.I.isCreateRole=1,a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.reqGetgateaddr()];case 3:return a.sent(),u.default.I.open(R.AppViewConst.GameWelcomeWin),[3,5];case 4:return a.sent(),u.default.I.close(R.AppViewConst.CreateRoleView),[3,5];case 5:return u.default.I.close(R.AppViewConst.CreateRoleView),[2];}});});},e.prototype.reqGetrandnick=function(t){return s(this,void 0,void 0,function(){var e,i,o,n,r,s,l;return a(this,function(a){switch(a.label){case 0:return e=d.default.I.LoginHttpUri,i=e+y.LoginHttpApi.Getrandnick,(o=w.default.I).sex=t,n={account_id:o.AccountID,token:o.Token,area_id:o.selServerId,sex:t,channel_id:o.channel_id,user_id:o.selUserId,imei:o.imei,game_uuid:o.game_uuid,uuid:o.pf_uuid},console.log('请求随机昵称=',i,n),[4,h.default.I.postAsync(i,n)];case 1:if((r=a.sent()).errInfo)return console.error('get nick fail, result:',r.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.GetRandomNickFail),[2];s=null;try{s=JSON.parse(r.resultInfo);}catch(p){return console.error('Getrandnick error1, result:',r.resultInfo),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.GetRandomNickFail),[2];}return 0!==s.tag?(console.error('Getrandnick error2, result:',s),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.GetRandomNickFail),m.default.Show(s.msg),[2]):(l=s.nick,c.EventClient.I.emit(_.AppEvent.ResultRoleNick,l),[2]);}});});},e.prototype.reqGetnotice=function(){return s(this,void 0,void 0,function(){var t,e,i,o,n;return a(this,function(r){switch(r.label){case 0:return t=w.default.I,e=d.default.I.LoginHttpUri,i=e+y.LoginHttpApi.Getnotice,o={sort:'',channel_id:t.channel_id,user_id:t.selUserId,imei:t.imei,game_uuid:t.game_uuid,uuid:t.pf_uuid},[4,h.default.I.postAsync(i,o)];case 1:return(n=r.sent()).errInfo||n.resultInfo,[2];}});});},e.prototype.reqGetgateaddr=function(){return s(this,void 0,void 0,function(){var t,e,i,o,n,r,s;return a(this,function(a){switch(a.label){case 0:return t=d.default.I.LoginHttpUri,e=t+y.LoginHttpApi.Getgateaddr,i=w.default.I,o=0,A.UtilPaltform.isAndroidWeChatGameTS?o=1:A.UtilPaltform.isIOSWeChatGameTS&&(o=2),n={account_id:i.AccountID,user_id:i.selUserId,token:i.Token,channel_id:i.channel_id,imei:i.imei,game_uuid:i.game_uuid,uuid:i.pf_uuid,platform:o},[4,h.default.I.postAsync(e,n)];case 1:if((r=a.sent()).errInfo)throw c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NetUrlFail),console.warn('getgateaddr fail, result:',r.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),Error('getgateaddr fail, result:'+r.errInfo);s=null;try{s=JSON.parse(r.resultInfo);}catch(l){throw c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NetUrlNull),console.warn('Getgateaddr error, result:',r.resultInfo),Error('getgateaddr fail, result:'+r.errInfo);}if(0!==s.tag)throw console.warn('Getgateaddr error2, result:',s),this.ShowHttpErrTipsWin(s),Error('getgateaddr fail, result:'+r.errInfo);return c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NetUrlSuc),d.default.I.GateUrl=s.addr,g.default.I.endTask(g.DB_KEY_ENUM.LodgingEnd,g.DB_ID_ENUM.GateUrl),console.log('获取网关地址',s),this.doConnectServer(),[2];}});});},e.prototype.reqGetconfig=function(){return s(this,void 0,void 0,function(){var t,e,i,o,n;return a(this,function(r){switch(r.label){case 0:return t=w.default.I,e=d.default.I.LoginHttpUri,i=e+y.LoginHttpApi.Getconfig,o={token:'',channel_id:t.channel_id,user_id:t.selUserId,imei:t.imei,game_uuid:t.game_uuid,uuid:t.pf_uuid},[4,h.default.I.postAsync(i,o)];case 1:return(n=r.sent()).errInfo||n.resultInfo,[2];}});});},e.prototype.doConnectServer=function(){c.EventClient.I.emit(_.AppEvent.GameLoading),console.time('resLoading'),u.default.I.open(R.AppViewConst.ResLoading);},e.prototype.onConnectServerSucc=function(){this.reqC2SLogin();},e.prototype.onSocketReconnectSucc=function(){this.reqC2SReLogin();},e.prototype.onReConnect=function(){this.clearHearBeat(),f.default.I.closeNet();},e.prototype.onBacktoLoginView=function(){d.default.I.exitGame();},e.prototype.reqC2SLogin=function(){var t=new C2SLogin();t.AccountID=w.default.I.AccountID,t.AreaID=w.default.I.selServerId,t.Token=w.default.I.Token,f.default.I.sendMessage(ProtoId.C2SLogin_ID,t),console.log('C2SLogin_ID: ',ProtoId.C2SLogin_ID,t);},e.prototype.onS2CLogin=function(t){if(t.Tag)switch(t.Tag){case 20:w.default.I.msgBoxShow(v.i18n.tt(v.Lang.login_tag1));break;case 5:w.default.I.msgBoxShow(v.i18n.tt(v.Lang.login_tag2));break;case 3:w.default.I.msgBoxShow(v.i18n.tt(v.Lang.login_tag3));break;default:m.default.Show(v.i18n.tt(v.Lang.login_net_err));}else console.log('登录成功\u3002\u3002\u3002',t),w.default.I.userID=t.UserId,w.default.I.selUserId=t.UserId;},e.prototype.reqC2SLoginEnd=function(){var t=new C2SLoginEnd();t.DataVersion='123',t.LockStepVer=1,f.default.I.sendMessage(ProtoId.C2SLoginEnd_ID,t),console.time('loginEnd');},e.prototype.onS2CLoginEnd=function(t){t.Tag?c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.LoginFail):(c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.LoginSuc),this.clearHearBeat(),this.startHearBeat(),g.default.I.endTask(g.DB_KEY_ENUM.GameStart,g.DB_ID_ENUM.LoginBack),g.default.I.endTask(g.DB_KEY_ENUM.WXSubLoaded,g.DB_ID_ENUM.LoginBack),console.timeEnd('loginEnd'),c.EventClient.I.emit(_.AppEvent.UpdateLoadingProgress,g.DB_ID_ENUM.LoginBack));},e.prototype.reqC2SReLogin=function(){var t=new C2SReLogin();t.UserId=w.default.I.userID,t.AreaID=w.default.I.selServerId,t.Token=w.default.I.Token,f.default.I.sendMessage(ProtoId.C2SReLogin_ID,t);},e.prototype.onS2CReLogin=function(t){if(t.Tag){this.clearHearBeat(),f.default.I.closeNet(!1);var e=m.default.GetErrTipsStr(t.Tag);u.default.I.open(R.AppViewConst.ReqLoginWarnWin,e,2);}else this.clearHearBeat(),this.startHearBeat(),c.EventClient.I.emit(_.AppEvent.ReConnectSuccess);},e.prototype.onS2CKill=function(t){if(t.Tag){this.clearHearBeat(),f.default.I.setkillState(!0),f.default.I.closeNet(!1);var e=m.default.GetErrTipsStr(t.Tag);u.default.I.open(R.AppViewConst.ReqLoginWarnWin,e,2);}},e.prototype.reqC2SPing=function(){var t=new C2SPing();f.default.I.sendMessage(ProtoId.C2SPing_ID,t);},e.prototype.onS2CPing=function(t){this._sendNum=0,I.UtilsMainTime.ServerTimeInit=1,I.UtilsMainTime.ServerTimeCompareLocalTime=t.ServerTime-new Date().getTime();},e.prototype.startHearBeat=function(){this.clearHearBeat(),this.reqC2SPing(),S.default.I.addScheduled(this._PingTimerFlag,this.doPing,this._time3000,this);},e.prototype.clearHearBeat=function(){S.default.I.clearScheduled(this._PingTimerFlag),this._sendNum=0;},e.prototype.doPing=function(){this._sendNum>=this._sendNumMax?this.onReConnect():(this._sendNum++,this.reqC2SPing()),this.syncTime++,this.syncTime>=60&&(this.syncTime=0);},e.prototype.onS2CRealNameTimeLimil=function(){u.default.I.closeAll(!1),u.default.I.open(R.AppViewConst.IdentitykBox,b.EIdentiType.Logout);},e.prototype.onDoKill=function(){this.clearHearBeat(),console.log(f.default.I.getState()),f.default.I.getState()&&f.default.I.closeNet(!1);},e.prototype.ShowHttpErrTipsWin=function(t){var e=t.tag,i=w.default.I;switch(e){case y.LOGIN_ERROR_CODE.NoRealName:u.default.I.open(R.AppViewConst.RealNameWin,i.UserAcc,i.UserPwd,i.sdktype,i.channel_id,i.UserAccExt);break;case y.LOGIN_ERROR_CODE.AntiAddiction:u.default.I.open(R.AppViewConst.IdentitykBox,b.EIdentiType.Logout);break;case y.LOGIN_ERROR_CODE.NoAdult:u.default.I.open(R.AppViewConst.IdentitykBox,b.EIdentiType.NotAdult);break;case y.LOGIN_ERROR_CODE.AccountBan:u.default.I.open(R.AppViewConst.ReqLoginWarnWin,t.msg,2);break;default:m.default.Show(t.msg);}},e.prototype.reqGetGameSwitch=function(){return s(this,void 0,Promise,function(){var t,e,i,o,n,r;return a(this,function(s){switch(s.label){case 0:return t=d.default.I.LoginHttpUri,e=t+y.LoginHttpApi.GetGameSwitch,i=w.default.I,o={channel_id:i.channel_id,imei:i.imei,game_uuid:i.game_uuid,uuid:i.pf_uuid},console.log('url, reqData=',e,o),[4,h.default.I.postAsync(e,o)];case 1:if((n=s.sent()).errInfo)return console.error('getgateaddr fail, result:',n.errInfo),m.default.Show(v.i18n.tt(v.Lang.login_net_err)),[2];r=null;try{r=JSON.parse(n.resultInfo);}catch(a){return console.error('Getgateaddr error, result:',n.resultInfo),[2];}return 0!==r.tag?(console.error('Getgateaddr error2, result:',r),m.default.Show(r.msg),[2]):(cc.log('获取登录界面的信息',r),w.default.I.setGameSwitch(r),[2]);}});});},e.prototype.startGame=function(){console.warn('startGame'),c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.ClickStart),g.default.I.endTask(g.DB_KEY_ENUM.LodgingEnd,g.DB_ID_ENUM.EnterGame),w.default.I.isHaveRole()?this.enterGame():this.enterCreateRole();},e.prototype.enterGame=function(){c.EventClient.I.emit(_.AppEvent.ReqGetgateaddr),g.default.I.endTask(g.DB_KEY_ENUM.GameStart,g.DB_ID_ENUM.GameWelcomeSuccess),g.default.I.endTask(g.DB_KEY_ENUM.GameWelcomeShow,g.DB_ID_ENUM.GameWelcomeSuccess);},e.prototype.enterCreateRole=function(){c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.OpenCreateRole),u.default.I.open(R.AppViewConst.CreateRoleView);},e.prototype.reqC2SWindowNotice=function(){var t=new C2SWindowNotice();c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NoticeList),f.default.I.sendMessage(ProtoId.C2SWindowNotice_ID,t);},e.prototype.onS2CWindowNotice=function(t){t.Tag&&c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NoticeListFail),w.default.I.noticeInfo=t.WindowNotice;var e=w.default.I.sortNotice();w.default.I.isClickNotice?u.default.I.open(R.AppViewConst.NoticeView,e):void 0!==t.WindowNotice&&0!==t.WindowNotice.length&&0===e[0].IsEject&&e[0].EjectType===y.JUMP_NOTICE_WINDOW.One&&0===e[0].Sort&&(c.EventClient.I.emit(_.AppEvent.DataReport,C.EDataReportId.NoticeListSuc),this.haveNotice=e,this.isGameStart&&this._isWelcomeOpened&&u.default.I.open(R.AppViewConst.NoticeView,e));},e.prototype.gameStart=function(){var t;this.isGameStart=!0,(null===(t=this.haveNotice)||void 0===t?void 0:t.length)>0&&this._isWelcomeOpened&&u.default.I.open(R.AppViewConst.NoticeView,this.haveNotice);},e.prototype.setWelcomeOpened=function(t){this._isWelcomeOpened=t;},i=r([P('LoginController')],e);}(p.default);i.default=x,cc._RF.pop();},{}],LoginModel:[function(t,e,i){'use strict';cc._RF.push(e,'a8e6c2speZGELEhCV32quSw','LoginModel');var ac=window.extend_func(this,'__extends__decorate__read__spread');var n=ac.__extends;var r=ac.__decorate;var s=ac.__read;var a=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0});var c=t('EventClient'),l=t('UtilClk'),p=t('UtilColor'),u=t('UtilUrl'),h=t('WinConst'),d=t('BaseModel'),f=t('ResMgr'),y=t('GameApp'),_=t('LayerMgr'),g=t('i18n'),m=t('AppEventConst'),v=t('AppViewConst'),b=t('ResConst'),C=t('TimerMgr'),S=t('UtilPaltform'),w=cc._decorator.ccclass,R=function(t){function e(){var e=t.call(this)||this;return e._groupCount=20,e._AreaInfos=[],e.AccountID=0,e.Token='',e.sdktype=0,e.client_version='',e.channel_id='',e.imei='',e.game_uuid='',e.pf_uuid='',e.userID=0,e.UserAcc='',e.UserPwd='',e.UserAccExt='',e.selServerId=null,e._selUserId=0,e.sex=0,e.LastPage=-1,e.createRoleSucc=!1,e._clickLoginState=!1,e._clickRegState=!1,e._clickTime=5000,e._AreaInfoPage=[],e._newAreaInfo=null,e.subpackScriptLoad=0,e.isClickNotice=!1,e._noticeInfo=null,e._gameSwitch={tag:0,msg:'成功',title:'三国大冒险内网',privacy_url:'https://pt.tianzongyouxi.com/child_agreement_yzt.html',user_agreement_url:'https://pt.tianzongyouxi.com/register_agreement.html',channel_pic_name:'',loading_pic_name:'',privacy_switch:1,version_info:'<color='+p.UtilColor.B.White+'>抵制不良游戏\uFF0C拒绝盗版游戏\u3002注意自我保护\uFF0C谨防受骗上当\u3002\\n适度游戏益脑\uFF0C沉迷游戏伤身\u3002合理安排时间\uFF0C享受健康生活\u3002</c>|<color='+p.UtilColor.B.White+'>著作权人\uFF1A广州天纵网络科技有限公司    出版单位\uFF1A杭州盛迈通信技术有限公司\n出版物号\uFF1AISBN 978-7-498-12367-1   审批文号\uFF1A国新出审\u30142023\u3015828 号</c>',newer_skip_switch:2,astc_switch:1,game_memory:'400-100'},e._isCheckUserProto=!1,e._maxAreaId=null,e._initData(),e;}var i;return n(e,t),i=e,Object.defineProperty(e,'I',{get:function(){return this._I||(this._I=new i()),this._I;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'noticeInfo',{get:function(){return this._noticeInfo;},set:function(t){this._noticeInfo=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'gameSwitch',{get:function(){return this._gameSwitch;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'newerSkipSwitch',{get:function(){return!!this.gameSwitch&&1===this.gameSwitch.newer_skip_switch;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'privacySwitch',{get:function(){return!!this.gameSwitch&&1===this.gameSwitch.privacy_switch;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'isCheckUserProto',{get:function(){return this.gameSwitch&&this.privacySwitch?this._isCheckUserProto:!this.privacySwitch||this._isCheckUserProto;},set:function(t){this._isCheckUserProto=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'selUserId',{get:function(){return this._selUserId;},set:function(t){this._selUserId=t;},enumerable:!1,configurable:!0}),e.prototype._initData=function(){this.sdktype=y.default.I.GameCfgGlobal.SDK_TYPE,this.channel_id||(this.channel_id=u.UtilUrl.getQueryString('channel_id')||'0'),S.UtilPaltform.isWeChatGame&&(this.channel_id=window.IndexGlobal.commonParams.channel_id);},e.prototype.setData=function(t){var e=this;this._AreaInfos=t,!this._AreaInfos||this._AreaInfos.length<1?this._AreaInfos=[]:(this._AreaInfoPage={},this._AreaInfos.forEach(function(t){var i=Math.floor(t.area_id/e._groupCount);e._AreaInfoPage[i]||(e._AreaInfoPage[i]=[]),e._AreaInfoPage[i].push(t),(!e._newAreaInfo||e._newAreaInfo.area_id<t.area_id)&&(e._newAreaInfo=t),t.user_id&&(e._AreaInfoPage[e.LastPage]||(e._AreaInfoPage[e.LastPage]=[]),e._AreaInfoPage[e.LastPage].push(t));}),this._AreaInfoPage[this.LastPage]&&this._AreaInfoPage[this.LastPage].sort(function(t,e){var i=t.logout_time||0;return(e.logout_time||0)-i;}));},e.prototype.getAreaInfos=function(){return this._AreaInfos;},e.prototype.isHaveRole=function(){var t=!1,e=this.getLastLoginInfo();return e&&e.user_id&&(t=!0),this.selUserId&&(t=!0),t;},e.prototype.getLastLoginInfo=function(){var t=this.getLastInfos();return 0===t.length?this.getNewLoginInfo():t[0];},e.prototype.getNewLoginInfo=function(){return this._newAreaInfo||null;},e.prototype.getLastSerName=function(){var t=this.getLastLoginInfo();return t?(this.selServerId=t.area_id,this.selUserId=t.user_id,t.area_name):'';},e.prototype.getNewSerName=function(){var t=this.getNewLoginInfo();return t?t.area_name:'';},e.prototype.getLastInfos=function(){return this._AreaInfoPage[this.LastPage]||[];},e.prototype.getMaxAreaId=function(){if(this._maxAreaId)return this._maxAreaId;for(var t=0,e=0;e<this._AreaInfos.length;e++){var i=this._AreaInfos[e];i.area_id>t&&(t=i.area_id);}return this._maxAreaId=t,this._maxAreaId;},e.prototype.getPageTitles=function(){var t=[],e=this.getMaxAreaId(),i=this._groupCount;if(e/ i<=1)t.push({labelText:'1-'+i+g.i18n.tt(g.Lang.server_fu)+' ',min:1,max:i,page:0});else{var o=e/ i,n=Math.floor(o);e%i&&(n+=1);for(var r=0;r<=n;r++){var s=i*r+1,c=i*(r+1),l=r;if(this._AreaInfoPage[l]){var p={labelText:s+' -'+c+g.i18n.tt(g.Lang.server_fu)+' ',min:s,max:c,page:l};t.push(p);}}}var u=[{labelText:g.i18n.tt(g.Lang.server_last_login)+' ',page:this.LastPage}];return a(u,t);},e.prototype.getPageInfo=function(t){return this._AreaInfoPage[t]||[];},e.prototype.setGameSwitch=function(t){this._gameSwitch=t,c.EventClient.I.emit(m.AppEvent.GameSwitch),t.game_memory&&f.ResMgr.I.resetMemory(t.game_memory);},e.prototype.msgBoxShow=function(t,e){void 0===e&&(e=!1),f.ResMgr.I.loadAsync(v.APP_UI_PATH.LoginConfirm,cc.Prefab,b.EBundleType.resources).then(function(i){var o=cc.instantiate(i),n=o.getChildByName('BtnClose');l.UtilClk.Click(n,function(){o.destroy();},n);var r=o.getChildByName('SprBlack');l.UtilClk.Click(r,function(){o.destroy();},r);var s=o.getChildByName('BtnConfirm');l.UtilClk.Click(s,function(){e&&c.EventClient.I.emit(m.AppEvent.AgreePro),o.destroy();},s),o.getChildByName('RichText2').getComponent(cc.RichText).string=t,_.LayerMgr.I.addToLayer(h.GameLayerEnum.TIPS_LAYER,o);}).catch(function(t){console.error(t);});},e.prototype.clearAll=function(){this._AreaInfos=[];},e.prototype.sortNotice=function(){var t;return null===(t=this._noticeInfo)||void 0===t?void 0:t.sort(function(t,e){if(t.Sort!==e.Sort)return t.Sort-e.Sort;var i=t.EndTime-e.EndTime;return 0!==i?i:e.CreateTime-t.CreateTime;});},e.prototype.setClickLoginState=function(t){var e=this;this._clickLoginState=t,C.default.I.clearScheduled('LoginState'),t&&C.default.I.addScheduled('LoginState',function(){e._clickLoginState=!1;},this._clickTime,this);},e.prototype.getClickLoginState=function(){return this._clickLoginState;},e.prototype.setClickRegState=function(t){var e=this;this._clickRegState=t,C.default.I.clearScheduled('RegisterState'),t&&C.default.I.addScheduled('RegisterState',function(){e._clickRegState=!1;},this._clickTime,this);},e.prototype.getClickRegState=function(){return this._clickRegState;},i=r([w('LoginModel')],e);}(d.default);i.default=R,cc._RF.pop();},{}],LoginView:[function(t,e,i){'use strict';cc._RF.push(e,'aabc2xASgZEZasj+wS8ihHv','LoginView');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('BaseUiView'),c=t('WinMgr'),l=t('StartGamePanel'),p=t('ResMgr'),u=t('GameApp'),h=t('AudioMgr'),d=t('UtilUrl'),f=t('DataReportConst'),y=t('ResConst'),_=t('LoginModel'),g=t('LoginController'),m=t('AudioModel'),v=t('AppEventConst'),b=t('AppViewConst'),C=t('LayerMgr'),S=t('UtilPaltform'),w=t('TaskCollector'),R=t('WinConst'),I=t('BundleMgr'),M=t('SdkMgr'),T=cc._decorator,E=T.ccclass,A=T.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.PanelNd=null,e.SGPanel=null,e.SprBg=null,e.RichText=null,e.Copyright=null,e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),h.AudioMgr.I.setEffectVolume(h.AudioMgr.I.effectVolume),S.UtilPaltform.isWeChatGame&&u.default.I.IsGameShowFunc()&&h.AudioMgr.I.play(0.5,m.MusicKey.bgmLogin),p.ResMgr.I.preload(b.APP_UI_PATH.MsgToast,cc.Prefab),p.ResMgr.I.preload(b.APP_UI_PATH.NetConfirmBox,cc.Prefab,!0),w.default.I.addTaskList(w.DB_KEY_ENUM.WXSubLoaded,[w.DB_ID_ENUM.ConfigLodEnd,w.DB_ID_ENUM.LoadSubScript,w.DB_ID_ENUM.LoadSubPackEnd,w.DB_ID_ENUM.LoginBack],this.onSubPackLoadEnd,this);},e.prototype.start=function(){t.prototype.start.call(this),S.UtilPaltform.isWeChatGame?window.IndexGlobal.commonMothed.loadEngine('subpack',function(){_.default.I.subpackScriptLoad=1,s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadSubScript),w.default.I.endTask(w.DB_KEY_ENUM.WXSubLoaded,w.DB_ID_ENUM.LoadSubScript),w.default.I.endTask(w.DB_KEY_ENUM.LodgingEnd,w.DB_ID_ENUM.LoadSubScript),s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.LoadSubScript);}):(_.default.I.subpackScriptLoad=1,s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadSubScript));},e.prototype.onSubPackLoadEnd=function(){s.EventClient.I.emit(v.AppEvent.LoginEnd),C.LayerMgr.I.MapLayer.getComponent('NdMapLayer')||C.LayerMgr.I.MapLayer.addComponent('NdMapLayer'),s.EventClient.I.emit(v.AppEvent.StartEnterSubPack);},e.prototype.addEvent=function(){s.EventClient.I.on(v.AppEvent.Succ,this.onLoginSucc,this),s.EventClient.I.on(v.AppEvent.GameLoading,this.onLoadStartGame,this),s.EventClient.I.on(v.AppEvent.InitConfigSuccess,this.preLoadUI,this),s.EventClient.I.on(v.AppEvent.GameSwitch,this.onGameSwitch,this);},e.prototype.delEvent=function(){s.EventClient.I.off(v.AppEvent.Succ,this.onLoginSucc,this),s.EventClient.I.off(v.AppEvent.GameLoading,this.onLoadStartGame,this),s.EventClient.I.off(v.AppEvent.InitConfigSuccess,this.preLoadUI,this),s.EventClient.I.off(v.AppEvent.GameSwitch,this.onGameSwitch,this);},e.prototype.init=function(){s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.LoginViewShow),this.addEvent(),this.initStartGamePanel(),this.onGameSwitch();},e.prototype.isJumpType=function(){return 1===u.default.I.JumpType;},e.prototype.isReqGameSwitch=function(){return 1===u.default.I.JumpType;},e.prototype.onGameSwitch=function(){var t=this,e=_.default.I.gameSwitch,i=null==e?void 0:e.channel_pic_name;i?p.ResMgr.I._loadRemoteExt(''+u.default.I.ResAdBg+i+'.jpg',{noWebp:1,ext:'.jpg'},function(e,o){if(e)t.initbgSpr();else{var n=new cc.SpriteFrame(o);n._uuid=''+u.default.I.ResAdBg+i+'.jpg',t.SprBg.spriteFrame=n,window.closeSplashFunc&&window.closeSplashFunc();}},this):this.initbgSpr();var o=e.version_info.replace(/\\n/g,'\n').split('|');this.RichText.string=o[0]||'',this.Copyright.string=o[1]||'',cc.sys.isBrowser&&document&&(document.title=e.title);},e.prototype.initbgSpr=function(){var t=this;p.ResMgr.I.loadLocal(v.RES_MAIN_ENUM.Login_bg,cc.SpriteFrame,function(e,i){e||(t.SprBg.spriteFrame=i),window.closeSplashFunc&&window.closeSplashFunc();},{bundle:y.EBundleType.resources});},e.prototype.initStartGamePanel=function(){var t=this;p.ResMgr.I.loadAsync(b.APP_UI_PATH.StartGameView,cc.Prefab,y.EBundleType.resources).then(function(e){var i=cc.instantiate(e);t.PanelNd.addChild(i),t.SGPanel=i.getComponent(l.default),t.initUI(),S.UtilPaltform.isWeChatGame&&cc.assetManager.cacheManager&&cc.assetManager.cacheManager.removeMarkedResources();}).catch(function(t){console.log(t);});},e.prototype.initUI=function(){if(this.PanelNd.active=!1,this.isJumpType())g.default.I.startGame();else if(u.default.I.isOpenSDK())s.EventClient.I.emit(v.AppEvent.SDKLogin);else{if(cc.sys.isBrowser){var t=d.UtilUrl.getQueryString('notch_height'),e=d.UtilUrl.getQueryString('bottom_height');C.LayerMgr.I.notchHeight=+t,C.LayerMgr.I.bottomHeight=+e;}c.default.I.open(b.AppViewConst.AccountLoginView);}},e.prototype.onLoginSucc=function(){if(_.default.I.newerSkipSwitch&&!_.default.I.isHaveRole()){var t=_.default.I.getNewLoginInfo();_.default.I.selServerId=t.area_id,this.SGPanel.getComponent(l.default).startGame();}else{var e=_.default.I;this.PanelNd.active=!0;var i=e.getLastSerName(),o=e.getNewSerName();this.SGPanel.getComponent(l.default).setData(i,o);}},e.prototype.onLoadStartGame=function(){this.PanelNd.active=!1;},e.prototype.preLoadUI=function(){var t=this;console.warn('onInitConfigSuccess-------preLoadUI');var e=[b.APP_UI_PATH.Base_SceneMap,b.APP_UI_PATH.Module_Lobby_LobbyUI];s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.SubpackStartLoad),I.default.I.loadAsync(y.EBundleType.subpack).then(function(i){S.UtilPaltform.isWeChatGame?i.load(b.APP_UI_PATH.FZSHENGSKSJW,cc.TTFFont,function(){s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.SubpackTTFLoadSuc),t.preloadList(i,e);}):i.preload(b.APP_UI_PATH.FZSHENGSKSJW,cc.TTFFont,void 0,function(o,n){s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.SubpackTTFLoadSuc),cc.FZSHENGSKSJWNAME=n&&n[1]&&n[1].file,t.preloadList(i,e);}),p.ResMgr.I.preload(b.APP_UI_PATH.player,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.WinTab,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.WinTabBtn,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.ActorNickBox,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.ComPageStyleB,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.GuochangAnim,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.GameLevelNewChapterView,cc.Prefab,!0,y.EBundleType.subpack),p.ResMgr.I.preload(b.APP_UI_PATH.BattlePanel,cc.Prefab,!0,y.EBundleType.subpack);}).catch(function(t){s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.SubpackLoadFail),console.error(t);});},e.prototype.preloadList=function(t,e){t.preload(e,cc.Prefab,void 0,function(){s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.SubpackLoadSuc),s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadSubPackEnd),S.UtilPaltform.isWeChatGame||(w.default.I.endTask(w.DB_KEY_ENUM.WXSubLoaded,w.DB_ID_ENUM.LoadSubScript),w.default.I.endTask(w.DB_KEY_ENUM.LodgingEnd,w.DB_ID_ENUM.LoadSubScript)),w.default.I.endTask(w.DB_KEY_ENUM.WXSubLoaded,w.DB_ID_ENUM.LoadSubPackEnd),p.ResMgr.I.showPrefabAsync(b.APP_UI_PATH.Base_SceneMap).then(function(t){C.LayerMgr.I.addToLayer(R.GameLayerEnum.MAP_LAYER,t),w.default.I.endTask(w.DB_KEY_ENUM.LodgingEnd,w.DB_ID_ENUM.MapLodEnd),s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.MapLodEnd);}).catch(function(t){console.error(t);}),M.SdkMgr.I.isCreateRole?(p.ResMgr.I.loadRemote(b.APP_UI_PATH.StartGameBattleBg,y.AssetType.SpriteFrame_jpg,function(){s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadStartGameBtttleBg),s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.LoadStartGameBtttleBg);}),p.ResMgr.I.loadRemote(b.APP_UI_PATH.StartGamePlot,y.AssetType.Json,function(){s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadStartGameBtttleFile),s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.LoadStartGameBtttleFile);})):(s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadStartGameBtttleBg),s.EventClient.I.emit(v.AppEvent.UpdateLoadingProgress,w.DB_ID_ENUM.LoadStartGameBtttleFile));var t=p.ResMgr.I.showPrefabAsync(e[1]);Promise.all([t]).then(function(t){for(var e=0;e<t.length;e++)C.LayerMgr.I.addToLayer(R.GameLayerEnum.MAIN_LAYER,t[e]);s.EventClient.I.emit(v.AppEvent.DataReport,f.EDataReportId.MAIN_LAYER);}).catch(function(t){console.log(t);});});},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},r([A(cc.Node)],e.prototype,'PanelNd',void 0),r([A(cc.Sprite)],e.prototype,'SprBg',void 0),r([A(cc.RichText)],e.prototype,'RichText',void 0),r([A(cc.RichText)],e.prototype,'Copyright',void 0),r([E],e);}(a.default);i.default=P,cc._RF.pop();},{}],LoginVoCfg:[function(t,e,i){'use strict';cc._RF.push(e,'d75f1TsjpJBO6k16jL/zWz3','LoginVoCfg'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('WinConst'),n=t('WinMgr'),r=t('AppViewConst'),s=t('ResConst');n.default.I.addConfig({id:r.AppViewConst.LoginView,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.LoginView,mid:r.APP_CTR_IDS.LoginController,blackBg:!1,isNotHide:!0,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('LoginView');}}),n.default.I.addConfig({id:r.AppViewConst.CreateRoleView,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.CreateRoleView,mid:r.APP_CTR_IDS.LoginController,blackBg:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('CreateRoleView');}}),n.default.I.addConfig({id:r.AppViewConst.SelServerView,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.SelServerView,mid:r.APP_CTR_IDS.LoginController,bundleName:s.EBundleType.resources,blackBg:!0,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('SelServerView');}}),n.default.I.addConfig({id:r.AppViewConst.AccountRegView,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.AccountRegView,isShowAll:!1,mid:r.APP_CTR_IDS.LoginController,blackBg:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('AccRegBox');}}),n.default.I.addConfig({id:r.AppViewConst.AccountLoginView,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.AccountLoginView,isShowAll:!1,mid:r.APP_CTR_IDS.LoginController,blackBg:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('AccLoginBox');}}),n.default.I.addConfig({id:r.AppViewConst.ResLoading,layerType:o.GameLayerEnum.DEFAULT_LAYER,prefabPath:r.APP_UI_PATH.ResLoading,isShowAll:!1,mid:r.APP_CTR_IDS.LoginController,blackBg:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('ResLoading');}}),n.default.I.addConfig({id:r.AppViewConst.ReqLoginWarnWin,layerType:o.GameLayerEnum.WARN_LAYER,prefabPath:r.APP_UI_PATH.NetConfirmBox,mid:r.APP_CTR_IDS.LoginController,isShowAll:!1,isShowTips:!1,blackBg:!0,blackBgClickClose:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('NetConfirmBox');}}),n.default.I.addConfig({id:r.AppViewConst.IdentitykBox,layerType:o.GameLayerEnum.WARN_LAYER,prefabPath:r.APP_UI_PATH.IdentitykBox,mid:r.APP_CTR_IDS.LoginController,size:'675|600',isShowAll:!1,isPopup:0,blackBg:!0,blackBgClickClose:!1,bundleName:s.EBundleType.resources,openWinEff:!0,closeWinEff:!0,resClass:function(t){return t.getComponent('IdentitykBox');}}),n.default.I.addConfig({id:r.AppViewConst.RealNameWin,layerType:o.GameLayerEnum.TIPS_LAYER,prefabPath:r.APP_UI_PATH.RealNameWin,mid:r.APP_CTR_IDS.LoginController,isShowAll:!1,isShowTips:!1,blackBg:!0,blackBgClickClose:!1,bundleName:s.EBundleType.resources,openWinEff:!0,closeWinEff:!0,resClass:function(t){return t.getComponent('RealNameWin');}}),n.default.I.addConfig({id:r.AppViewConst.GameWelcomeWin,layerType:o.GameLayerEnum.WARN_LAYER,prefabPath:r.APP_UI_PATH.GameWelcomeWin,mid:r.APP_CTR_IDS.LoginController,isShowAll:!1,blackBg:!1,bundleName:s.EBundleType.resources,openWinEff:!1,closeWinEff:!1,resClass:function(t){return t.getComponent('GameWelcomeWin');}}),n.default.I.addConfig({id:r.AppViewConst.NoticeView,layerType:o.GameLayerEnum.TIPS_LAYER,prefabPath:r.APP_UI_PATH.NoticeView,mid:r.APP_CTR_IDS.LoginController,isShowAll:!1,isShowTips:!1,blackBg:!0,blackBgClickClose:!0,bundleName:s.EBundleType.resources,openWinEff:!0,closeWinEff:!0,resClass:function(t){return t.getComponent('NoticeView');}}),n.default.I.addConfig({id:r.AppViewConst.UserProWin,layerType:o.GameLayerEnum.TIPS_LAYER,prefabPath:r.APP_UI_PATH.UserProWin,mid:r.APP_CTR_IDS.LoginController,isShowAll:!1,isShowTips:!1,blackBg:!0,blackBgClickClose:!0,bundleName:s.EBundleType.resources,openWinEff:!0,closeWinEff:!0,resClass:function(t){return t.getComponent('UserProWin');}}),cc._RF.pop();},{}],MapMode:[function(t,e,i){'use strict';var o;cc._RF.push(e,'c052aoT1X1Dh6gJDDKb68gZ','MapMode'),Object.defineProperty(i,'__esModule',{value:!0}),i.MapInfo=i.MapMode=void 0,function(t){t[t.angle90=0]='angle90',t[t.angle45=1]='angle45',t[t.honeycomb=2]='honeycomb',t[t.honeycomb2=3]='honeycomb2';}(o=i.MapMode||(i.MapMode={}));i.MapInfo=function(t){this.name='未命名',this.bgName='map_bg',this.type=o.angle45,this.mapWidth=0,this.mapHeight=0,this.cellWidth=0,this.cellHeight=0,this.roadDataArr=[],t&&(this.type=t.type,this.mapWidth=t.cellWidth*t.col,this.mapHeight=t.cellHeight*t.row,this.cellWidth=t.cellWidth,this.cellHeight=t.cellHeight);},cc._RF.pop();},{}],MapRoadUtils:[function(t,e,i){'use strict';cc._RF.push(e,'0b62cq3IABLqYlGPu89pyYn','MapRoadUtils'),Object.defineProperty(i,'__esModule',{value:!0}),i.ENUM_ROAD=i.MAX_ENUM_ROAD=void 0;var o=t('Point'),n=t('RoadNode'),r=t('MapMode');i.MAX_ENUM_ROAD=16,function(t){t[t.Block=0]='Block',t[t.Run=1]='Run',t[t.Half=2]='Half',t[t.Trans=3]='Trans',t[t.Custom4=4]='Custom4',t[t.Custom5=5]='Custom5',t[t.Custom6=6]='Custom6',t[t.Custom7=7]='Custom7',t[t.Custom8=8]='Custom8',t[t.Custom9=9]='Custom9',t[t.Custom10=10]='Custom10',t[t.Custom11=11]='Custom11',t[t.Custom12=12]='Custom12',t[t.Custom13=13]='Custom13',t[t.Custom14=14]='Custom14',t[t.Custom15=15]='Custom15';}(i.ENUM_ROAD||(i.ENUM_ROAD={}));var s=function(){function t(){this._seekStep=2;}return Object.defineProperty(t,'I',{get:function(){return null==this._instance&&(this._instance=new t()),this._instance;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'seekStep',{get:function(){return this._seekStep;},set:function(t){this._seekStep=t;},enumerable:!1,configurable:!0}),t.prototype.updateMapInfo=function(t,e,i,o,n){switch(this._mapWidth=t,this._mapHeight=e,this._cellWidth=i,this._cellHeight=o,this._halfCellWidth=Math.floor(this._cellWidth>>1),this._halfCellHeight=Math.floor(this._cellHeight>>1),this._mapType=n,this._mapType){case r.MapMode.angle45:this._col=Math.ceil(t/this._cellWidth),this._row=2*Math.ceil(e/this._cellHeight),this._mapRoad=new a(this._row,this._col,this._cellWidth,this._cellHeight,this._halfCellWidth,this._halfCellHeight);break;case r.MapMode.angle90:this._col=Math.ceil(t/this._cellWidth),this._row=Math.ceil(e/this._cellHeight),this._mapRoad=new c(this._row,this._col,this._cellWidth,this._cellHeight,this._halfCellWidth,this._halfCellHeight);break;case r.MapMode.honeycomb:this._col=2*Math.ceil((this._mapWidth-this._cellWidth/4)/(this._cellWidth/4*6)),this._row=Math.ceil((this._mapHeight-this._cellHeight/2)/this._cellHeight),this._mapRoad=new l(this._row,this._col,this._cellWidth,this._cellHeight,this._halfCellWidth,this._halfCellHeight);break;case r.MapMode.honeycomb2:this._col=Math.ceil((this._mapWidth-this._cellHeight/2)/this._cellHeight),this._row=2*Math.ceil((this._mapHeight-this._cellWidth/4)/(this._cellWidth/4*6)),this._mapRoad=new p(this._row,this._col,this._cellWidth,this._cellHeight,this._halfCellWidth,this._halfCellHeight);}},t.prototype.getNodeByPixel=function(t,e){return this._mapRoad?this._mapRoad.getNodeByPixel(t,e):new n.default();},t.prototype.getNodeByDerect=function(t,e){return this._mapRoad?this._mapRoad.getNodeByDerect(t,e):new n.default();},t.prototype.getNodeByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getNodeByWorldPoint(t,e):new n.default();},t.prototype.getWorldPointByPixel=function(t,e){return this._mapRoad?this._mapRoad.getWorldPointByPixel(t,e):new o.default();},t.prototype.getPixelByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getPixelByWorldPoint(t,e):new o.default();},t.prototype.getDerectByPixel=function(t,e){return this._mapRoad?this._mapRoad.getDerectByPixel(t,e):new o.default();},t.prototype.getDerectByWorldPoint=function(t,e){return this._mapRoad?this._mapRoad.getDerectByWorldPoint(t,e):new o.default();},t.prototype.getPixelByDerect=function(t,e){return this._mapRoad?this._mapRoad.getPixelByDerect(t,e):new o.default();},Object.defineProperty(t.prototype,'mapWidth',{get:function(){return this._mapWidth;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'mapHeight',{get:function(){return this._mapHeight;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'cellWidth',{get:function(){return this._cellWidth;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'cellHeight',{get:function(){return this._cellHeight;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'row',{get:function(){return this._row;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'col',{get:function(){return this._col;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'halfCellWidth',{get:function(){return this._halfCellWidth;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'halfCellHeight',{get:function(){return this._halfCellHeight;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'mapType',{get:function(){return this._mapType;},enumerable:!1,configurable:!0}),t;}();i.default=s;var a=function(){function t(t,e,i,o,n,r){this._row=t,this._col=e,this._cellWidth=i,this._cellHeight=o,this._halfCellWidth=n,this._halfCellHeight=r;}return t.prototype.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),o=this.getPixelByWorldPoint(i.x,i.y),r=this.getDerectByPixel(t,e),s=new n.default();return s.cx=i.x,s.cy=i.y,s.px=o.x,s.py=o.y,s.dx=r.x,s.dy=r.y,s;},t.prototype.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),o=this.getWorldPointByPixel(i.x,i.y),r=new n.default();return r.cx=o.x,r.cy=o.y,r.px=i.x,r.py=i.y,r.dx=t,r.dy=e,r;},t.prototype.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y);},t.prototype.getWorldPointByPixel=function(t,e){var i=Math.ceil(t/this._cellWidth-0.5+e/this._cellHeight)-1,n=this._col-1-Math.ceil(t/this._cellWidth-0.5-e/this._cellHeight);return new o.default(i,n);},t.prototype.getPixelByWorldPoint=function(t,e){var i=Math.floor((t+1-(e-(this._col-1)))*this._halfCellWidth),n=Math.floor((t+1+(e-(this._col-1)))*this._halfCellHeight);return new o.default(i,n);},t.prototype.getDerectByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),n=this.getPixelByWorldPoint(i.x,i.y),r=Math.floor(n.x/this._cellWidth)-(n.x%this._cellWidth==0?1:0),s=Math.floor(n.y/this._halfCellHeight)-1;return new o.default(r,s);},t.prototype.getDerectByWorldPoint=function(t,e){var i=Math.floor((t-(e-(this._col-1)))/2),n=t+(e-(this._col-1));return new o.default(i,n);},t.prototype.getPixelByDerect=function(t,e){var i=Math.floor((t+e%2)*this._cellWidth+(1-e%2)*this._halfCellWidth),n=Math.floor((e+1)*this._halfCellHeight);return new o.default(i,n);},t;}(),c=function(){function t(t,e,i,o,n,r){this._row=t,this._col=e,this._cellWidth=i,this._cellHeight=o,this._halfCellWidth=n,this._halfCellHeight=r;}return t.prototype.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),o=this.getPixelByWorldPoint(i.x,i.y),r=this.getDerectByPixel(t,e),s=new n.default();return s.cx=i.x,s.cy=i.y,s.px=o.x,s.py=o.y,s.dx=r.x,s.dy=r.y,s;},t.prototype.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),o=this.getWorldPointByPixel(i.x,i.y),r=new n.default();return r.cx=o.x,r.cy=o.y,r.px=i.x,r.py=i.y,r.dx=t,r.dy=e,r;},t.prototype.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y);},t.prototype.getWorldPointByPixel=function(t,e){var i=Math.floor(t/this._cellWidth),n=Math.floor(e/this._cellHeight);return new o.default(i,n);},t.prototype.getPixelByWorldPoint=function(t,e){var i=Math.floor((t+1)*this._cellWidth-this._halfCellWidth),n=Math.floor((e+1)*this._cellHeight-this._halfCellHeight);return new o.default(i,n);},t.prototype.getDerectByPixel=function(t,e){var i=Math.floor(t/this._cellWidth),n=Math.floor(e/this._cellHeight);return new o.default(i,n);},t.prototype.getDerectByWorldPoint=function(t,e){return new o.default(t,e);},t.prototype.getPixelByDerect=function(t,e){var i=Math.floor((t+1)*this._cellWidth-this._halfCellWidth),n=Math.floor((e+1)*this._cellHeight-this._halfCellHeight);return new o.default(i,n);},t;}(),l=function(){function t(t,e,i,o,n,r){this._proportion=1.732,this._row=t,this._col=e,this._cellWidth=i,this._cellHeight=o,this._halfCellWidth=n,this._halfCellHeight=r,this._nwDiv4=this._cellWidth/4,this._radius=4*this._nwDiv4,this._proportion=2*this._cellHeight/this._cellWidth;}return t.prototype.getNodeByPixel=function(t,e){var i=this.getWorldPointByPixel(t,e),o=this.getPixelByWorldPoint(i.x,i.y),r=new n.default();return r.cx=i.x,r.cy=i.y,r.px=o.x,r.py=o.y,r.dx=i.x,r.dy=i.y,r;},t.prototype.getNodeByDerect=function(t,e){var i=this.getPixelByDerect(t,e),o=new n.default();return o.cx=t,o.cy=e,o.px=i.x,o.py=i.y,o.dx=t,o.dy=e,o;},t.prototype.getNodeByWorldPoint=function(t,e){var i=this.getPixelByWorldPoint(t,e);return this.getNodeByPixel(i.x,i.y);},t.prototype.getWorldPointByPixel=function(t,e){var i,n,r,s=Math.floor(t/this._nwDiv4),a=Math.floor(s/3);return(s-1)%6==0||(s-2)%6==0?(n=a,r=i=Math.floor(e/this._cellHeight)):(s-4)%6==0||(s-5)%6==0?(n=a,r=i=e<this._cellHeight/2?-1:Math.floor((e-this._cellHeight/2)/this._cellHeight)):a%2==0?(i=Math.floor(e/this._cellHeight),this.testPointInHoneycomb(a,i,t,e)?(n=a,r=i):this.testPointInHoneycomb(a-1,i-1,t,e)?(n=a-1,r=i-1):(n=a-1,r=i)):(i=e<this._cellHeight/2?-1:Math.floor((e-this._cellHeight/2)/this._cellHeight),this.testPointInHoneycomb(a,i,t,e)?(n=a,r=i):this.testPointInHoneycomb(a-1,i,t,e)?(n=a-1,r=i):(n=a-1,r=i+1)),new o.default(n,r);},t.prototype.testPointInHoneycomb=function(t,e,i,o){var n=2*this._nwDiv4,r=this.getPixelByWorldPoint(t,e);return n-Math.abs(i-r.x)>=Math.abs(o-r.y)/this._proportion;},t.prototype.getPixelByWorldPoint=function(t,e){var i=Math.floor((2+3*t)/4*this._cellWidth),n=Math.floor((e+0.5*(1+t%2))*this._cellHeight);return new o.default(i,n);},t.prototype.getDerectByPixel=function(t,e){return this.getWorldPointByPixel(t,e);},t.prototype.getDerectByWorldPoint=function(t,e){return new o.default(t,e);},t.prototype.getPixelByDerect=function(t,e){var i=(2+3*t)/4*this._cellWidth,n=(e+0.5*(1+t%2))*this._cellHeight;return new o.default(i,n);},t;}(),p=function(){function t(t,e,i,o,n,r){this.mapRoadHoneycomb=new l(t,e,i,o,n,r);}return t.prototype.transposedNode=function(t){var e=t.cx,i=t.dx,o=t.px;return t.cx=t.cy,t.cy=e,t.dx=t.dy,t.dy=i,t.px=t.py,t.py=o,t;},t.prototype.transposedPoint=function(t){var e=t.x;return t.x=t.y,t.y=e,t;},t.prototype.getNodeByPixel=function(t,e){return this.transposedNode(this.mapRoadHoneycomb.getNodeByPixel(e,t));},t.prototype.getNodeByDerect=function(t,e){return this.transposedNode(this.mapRoadHoneycomb.getNodeByDerect(e,t));},t.prototype.getNodeByWorldPoint=function(t,e){return this.transposedNode(this.mapRoadHoneycomb.getNodeByWorldPoint(e,t));},t.prototype.getWorldPointByPixel=function(t,e){return this.transposedPoint(this.mapRoadHoneycomb.getWorldPointByPixel(e,t));},t.prototype.getPixelByWorldPoint=function(t,e){return this.transposedPoint(this.mapRoadHoneycomb.getPixelByWorldPoint(e,t));},t.prototype.getDerectByPixel=function(t,e){return this.transposedPoint(this.mapRoadHoneycomb.getDerectByPixel(e,t));},t.prototype.getDerectByWorldPoint=function(t,e){return this.transposedPoint(this.mapRoadHoneycomb.getDerectByWorldPoint(e,t));},t.prototype.getPixelByDerect=function(t,e){return this.transposedPoint(this.mapRoadHoneycomb.getPixelByDerect(e,t));},t;}();cc._RF.pop();},{}],MaskClickEff:[function(t,e,i){'use strict';cc._RF.push(e,'9faeb79r1hJOpuVbOThe41W','MaskClickEff');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('AudioMgr'),a=t('AudioModel'),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.start=function(){console.log(this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndAudio,this);},e.prototype._touchEndAudio=function(){s.AudioMgr.I.playEffect(a.MusicKey.btnNormal);},r([l],e);}(cc.Component));i.default=p,cc._RF.pop();},{}],MaxRects:[function(t,e,i){'use strict';cc._RF.push(e,'bc47fVJUHJALJvkc7wnLAq3','MaxRects'),Object.defineProperty(i,'__esModule',{value:!0}),i.MaxRects=void 0;var o=function(){function t(t,e,i,o){this.width=0,this.height=0,this.padding=0,this.border=0,this.freeRects=[],this.rects=[],this.width=t,this.height=e,this.padding=i,this.border=o,this.freeRects.push(new cc.Rect(this.border,this.border,this.width+this.padding-2*this.border,this.height+this.padding-2*this.border)),this.rects=[];}return t.prototype.reset=function(){this.freeRects=[],this.rects=[];},t.prototype.add=function(t,e){var i=new cc.Rect(0,0,t,e),o=this.placeRect(i);return o&&this.rects.push(o),o;},t.prototype.placeRect=function(t){var e=this.findNode(t.width+this.padding,t.height+this.padding);if(e){for(var i=this.freeRects.length,o=0;o<i;)this.splitNode(this.freeRects[o],e)&&(this.freeRects.splice(o,1),i--,o--),o++;return this.pruneFreeList(),t.x=e.x,t.y=e.y,t;}},t.prototype.findNode=function(t,e){var i=Number.MAX_VALUE,o=0,n=null;for(var r in this.freeRects){var s=this.freeRects[r];s.width>=t&&s.height>=e&&(o=s.width*s.height-t*e)<i&&(n=new cc.Rect(s.x,s.y,t,e),i=o);}return n;},t.prototype.splitNode=function(t,e){if(!t.intersects(e))return!1;if(e.x<t.x+t.width&&e.x+e.width>t.x){if(e.y>t.y&&e.y<t.y+t.height){var i=new cc.Rect(t.x,t.y,t.width,e.y-t.y);this.freeRects.push(i);}e.y+e.height<t.y+t.height&&(i=new cc.Rect(t.x,e.y+e.height,t.width,t.y+t.height-(e.y+e.height)),this.freeRects.push(i));}return e.y<t.y+t.height&&e.y+e.height>t.y&&(e.x>t.x&&e.x<t.x+t.width&&(i=new cc.Rect(t.x,t.y,e.x-t.x,t.height),this.freeRects.push(i)),e.x+e.width<t.x+t.width&&(i=new cc.Rect(e.x+e.width,t.y,t.x+t.width-(e.x+e.width),t.height),this.freeRects.push(i))),!0;},t.prototype.pruneFreeList=function(){for(var t=0,e=0,i=this.freeRects.length;t<i;){e=t+1;for(var o=this.freeRects[t];e<i;){var n=this.freeRects[e];if(n.containsRect(o)){this.freeRects.splice(t,1),t--,i--;break;}o.containsRect(n)&&(this.freeRects.splice(e,1),e--,i--),e++;}t++;}},t;}();i.MaxRects=o,cc._RF.pop();},{}],MirroTiledAssemblers:[function(t,e,i){'use strict';cc._RF.push(e,'3ac63wzs25Ka6B075KN9t+9','MirroTiledAssemblers');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0});var r=t('CCBaseSprite'),s=cc._decorator;s.ccclass,s.property,s.disallowMultiple,s.menu,s.executionOrder,s.requireComponent,cc.game.once(cc.game.EVENT_ENGINE_INITED,function(){var t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.initData=function(){this.verticesCount=0,this.contentWidth=0,this.contentHeight=0,this.rectWidth=0,this.rectHeight=0,this.hRepeat=0,this.vRepeat=0,this.row=0,this.col=0,this._renderData.createFlexData(0,4,6,this.getVfmt()),this._updateIndices();},e.prototype.initLocal=function(){this._local={x:[],y:[]};},e.prototype._updateIndices=function(){for(var t=this._renderData.iDatas[0],e=0,i=0,o=t.length;e<o;e+=6,i+=4)t[e]=i,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+1,t[e+4]=i+3,t[e+5]=i+2;},e.prototype.updateRenderData=function(t){var e=t._spriteFrame;this.packToDynamicAtlas(t,e);var i=t.node,o=this.contentWidth=Math.abs(i.width),n=this.contentHeight=Math.abs(i.height),r=e._rect,s=e.insetLeft,a=e.insetRight,c=r.width-s-a,l=e.insetTop,p=e.insetBottom,u=r.height-l-p;this.sizableWidth=o-s-a,this.sizableHeight=n-l-p,this.sizableWidth=this.sizableWidth>0?this.sizableWidth:0,this.sizableHeight=this.sizableHeight>0?this.sizableHeight:0;var h=this.hRepeat=0===c?this.sizableWidth:this.sizableWidth/c,d=this.vRepeat=0===u?this.sizableHeight:this.sizableHeight/u,f=(this.row=Math.ceil(d))*(this.col=Math.ceil(h));this.verticesCount=4*f,this.indicesCount=6*f;var y=this._renderData._flexBuffer;y.reserve(this.verticesCount,this.indicesCount)&&(this._updateIndices(),this.updateColor(t)),y.used(this.verticesCount,this.indicesCount),t._vertsDirty&&(this.updateUVs(t),this.updateVerts(t),t._vertsDirty=!1);},e.prototype.updateVerts=function(t){var e=t._spriteFrame,i=e._rect,o=t.node,n=o.anchorX*o.width,r=o.anchorY*o.height,s=this.row,a=this.col,c=this.contentWidth,l=this.contentHeight,p=this._local,u=p.x,h=p.y;u.length=h.length=0;var d,f,y=e.insetLeft,_=e.insetRight,g=i.width-y-_,m=e.insetTop,v=e.insetBottom,b=i.height-m-v,C=o.width/(y+_)>1?1:o.width/(y+_),S=o.height/(m+v)>1?1:o.height/(m+v);d=g>0?Math.floor(1000*this.sizableWidth)/1000%g==0?g:this.sizableWidth%g:this.sizableWidth,f=b>0?Math.floor(1000*this.sizableHeight)/1000%b==0?b:this.sizableHeight%b:this.sizableHeight;for(var w=0;w<=a;w++)0===w?u[w]=-n:w>0&&w<a?u[w]=1===w?y*C+Math.min(g,this.sizableWidth)-n:g>0?w===a-1?y+d+g*(w-2)-n:y+Math.min(g,this.sizableWidth)+g*(w-2)-n:y+this.sizableWidth-n:w===a&&(u[w]=Math.min(y+this.sizableWidth+_,c)-n);for(w=0;w<=s;w++)0===w?h[w]=-r:w>0&&w<s?h[w]=1===w?v*S+Math.min(b,this.sizableHeight)-r:b>0?w===s-1?v+f+(w-2)*b-r:v+Math.min(b,this.sizableHeight)+(w-2)*b-r:v+this.sizableHeight-r:w===s&&(h[w]=Math.min(v+this.sizableHeight+m,l)-r);this.updateWorldVerts(t);},e.prototype.updateWorldVerts=function(t){for(var e,i,o,n,r=this._renderData,s=this._local,a=s.x,c=s.y,l=r.vDatas[0],p=this.row,u=this.col,h=t.node._worldMatrix.m,d=h[0],f=h[1],y=h[4],_=h[5],g=h[12],m=h[13],v=this.floatsPerVert,b=0,C=0,S=p;C<S;++C){o=c[C],n=c[C+1];for(var w=0,R=u;w<R;++w)e=a[w],i=a[w+1],l[b]=e*d+o*y+g,l[b+1]=e*f+o*_+m,l[b+=v]=i*d+o*y+g,l[b+1]=i*f+o*_+m,l[b+=v]=e*d+n*y+g,l[b+1]=e*f+n*_+m,l[b+=v]=i*d+n*y+g,l[b+1]=i*f+n*_+m,b+=v;}if(40===l.length){var I=l[20],M=l[25],T=l[30],E=l[35];l[20]=M,l[25]=I,l[30]=E,l[35]=T;}else if(80===l.length){I=l[20],M=l[25],T=l[30],E=l[35],l[20]=M,l[25]=I,l[30]=E,l[35]=T;var A=l[21],P=l[26],x=l[31],L=l[36];l[21]=x,l[31]=A,l[26]=L,l[36]=P;var k=l[1],O=l[6],N=l[11],D=l[16];l[1]=N,l[6]=D,l[11]=k,l[16]=O;var B=l[60],U=l[65],F=l[70],j=l[75];l[60]=U,l[65]=B,l[70]=j,l[75]=F;}},e.prototype.updateUVs=function(t){var e=this._renderData.vDatas[0];if(e){for(var i=t._spriteFrame,o=i._rect,n=i.insetLeft,r=i.insetRight,s=o.width-n-r,a=i.insetTop,c=i.insetBottom,l=o.height-a-c,p=this.row,u=this.col,h=this.hRepeat,d=this.vRepeat,f=0,y=0,_=t.spriteFrame.uv,g=t.spriteFrame.uvSliced,m=t.spriteFrame._rotated,v=this.floatsPerVert,b=this.uvOffset,C=[],S=[],w=0,R=p;w<R;++w){y=this.sizableHeight>l?this.sizableHeight>=w*l?1:d%1:d;for(var I=0,M=u;I<M;++I)f=this.sizableWidth>s?this.sizableWidth>=I*s?1:h%1:h,m?(0===w?(C[0]=g[0].u,C[1]=g[0].u,C[2]=g[4].u+(g[8].u-g[4].u)*y):w<p-1?(C[0]=g[4].u,C[1]=g[4].u,C[2]=g[4].u+(g[8].u-g[4].u)*y):w===p-1&&(C[0]=g[8].u,C[1]=g[8].u,C[2]=g[12].u),0===I?(S[0]=g[0].v,S[1]=g[1].v+(g[2].v-g[1].v)*f,S[2]=g[0].v):I<u-1?(S[0]=g[1].v,S[1]=g[1].v+(g[2].v-g[1].v)*f,S[2]=g[1].v):I===u-1&&(S[0]=g[2].v,S[1]=g[3].v,S[2]=g[2].v),C[3]=C[2],S[3]=S[1]):(0===I?(C[0]=g[0].u,C[1]=g[1].u+(g[2].u-g[1].u)*f,C[2]=_[0]):I<u-1?(C[0]=g[1].u,C[1]=g[1].u+(g[2].u-g[1].u)*f,C[2]=g[1].u):I===u-1&&(C[0]=g[2].u,C[1]=g[3].u,C[2]=g[2].u),0===w?(S[0]=g[0].v,S[1]=g[0].v,S[2]=g[4].v+(g[8].v-g[4].v)*y):w<p-1?(S[0]=g[4].v,S[1]=g[4].v,S[2]=g[4].v+(g[8].v-g[4].v)*y):w===p-1&&(S[0]=g[8].v,S[1]=g[8].v,S[2]=g[12].v),C[3]=C[1],S[3]=S[2]),e[b]=C[0],e[b+1]=S[0],e[b+=v]=C[1],e[b+1]=S[1],e[b+=v]=C[2],e[b+1]=S[2],e[b+=v]=C[3],e[b+1]=S[3],b+=v;}if(40===e.length){var T=e[2],E=e[3],A=e[7],P=e[8],x=e[12],L=e[13],k=e[17],O=e[18];e[22]=T,e[23]=E,e[27]=A,e[28]=P,e[32]=x,e[33]=L,e[37]=k,e[38]=O;}else 80===e.length&&(T=e[2],E=e[3],A=e[7],P=e[8],x=e[12],L=e[13],k=e[17],O=e[18],e[22]=T,e[23]=E,e[27]=A,e[28]=P,e[32]=x,e[33]=L,e[37]=k,e[38]=O,e[42]=T,e[43]=E,e[47]=A,e[48]=P,e[52]=x,e[53]=L,e[57]=k,e[58]=O,e[62]=T,e[63]=E,e[67]=A,e[68]=P,e[72]=x,e[73]=L,e[77]=k,e[78]=O);}},e;}(cc.Assembler2D);cc.Assembler.register(r.default,t);}),cc._RF.pop();},{}],MonsterAI:[function(t,e,i){'use strict';cc._RF.push(e,'51256t64U1EzKWge+vtUlFn','MonsterAI');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0}),i.MonsterAI=void 0;var r,s=t('RVOMath'),a=t('Simulator'),c=t('Vector2'),l=t('RoleMgr'),p=t('RvoAgent');(function(t){t[t.Idle=0]='Idle',t[t.Patrol=1]='Patrol',t[t.Move=2]='Move',t[t.Attack=3]='Attack';}(r||(r={})));var u=function(t){function e(){var e=t.call(this)||this;return e.status=r.Idle,e.lastPos=new c.Vector2(0,0),e.idleTime=0,e.speedFactor=1,e.patrolRange=100,e.backDis=100,e.attckDis=10,e.bornPos=new c.Vector2(0,0),e.isBack=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'monster',{get:function(){return this.node;},enumerable:!1,configurable:!0}),e.prototype.setBornPos=function(t,e){this.bornPos=new c.Vector2(t,e);},e.prototype.onLoad=function(){var t=a.Simulator.I.getAgentPosition(this.sid);this.node.setPosition(t.x,t.y);},e.prototype.update=function(t){if(this.agent){if(this.checkStatus(t),this.sid>-1){var e=a.Simulator.I.getAgentPosition(this.sid);Number.isNaN(e.x)||Number.isNaN(e.y)?console.log('sid='+this.sid+'的对象PosX='+e.x+',PosY='+e.y):this.node.setPosition(e.x,e.y);}this.updatePrefVelocity();}},e.prototype.updatePrefVelocity=function(){null!=this.targetPos?this.startChase():this.patrolPos&&this.startPatrol();},e.prototype.updateStatus=function(t){this.status=t;},e.prototype.checkStatus=function(t){switch(this.status){case r.Idle:this.idle(t);break;case r.Patrol:this.patrol(t);break;case r.Move:this.move(t);break;case r.Attack:}},e.prototype.idle=function(t){if(this.idleTime+=t,this.idleTime>0&&!this.isBack){this.idleTime=0;var e=this.agent.position,i=l.default.I.getRole(0),o=new c.Vector2(i.position.x,i.position.y);s.RVOMath.abs(o.minus(e))<this.patrolRange&&(this.targetPos=o);}},e.prototype.move=function(){},e.prototype.startChase1=function(){if(this.agent){var t=this.agent.position,e=l.default.I.getRole(0),i=cc.v2(e.x,e.y).sub(cc.v2(t.x,t.y));i.magSqr()>1&&(i=i.normalize().mulSelf(this.agent.maxSpeed)),i.magSqr()<s.RVOMath.RVO_EPSILON?a.Simulator.I.setAgentPrefVelocity(this.sid,new c.Vector2(0,0)):a.Simulator.I.setAgentPrefVelocity(this.sid,new c.Vector2(i.x,i.y));}},e.prototype.startChase=function(){if(this.agent){var t=this.speedFactor,e=this.agent.position;if(!this.isBack){if(this.backDis>0&&this.bornPos.x!==this.bornPos.y&&0!==this.bornPos.x&&s.RVOMath.abs(e.minus(this.bornPos))>this.backDis)return this.targetPos=this.bornPos,void(this.isBack=!0);if(this.agent.obstaclNeighbors.length>0)return this.targetPos=this.bornPos,void(this.isBack=!0);this.targetPos=new c.Vector2(l.default.I.getRole(0).position.x,l.default.I.getRole(0).position.y);}var i=this.targetPos.minus(e),o=s.RVOMath.abs(i);this.isBack&&o<50&&(this.isBack=!1,this.targetPos=null,t=0,this.updateStatus(r.Idle)),o<this.attckDis&&(t=0);var n=s.RVOMath.absSq(i);if(n>1&&(i=s.RVOMath.normalize(i).scale(this.agent.maxSpeed)),n<s.RVOMath.RVO_EPSILON)a.Simulator.I.setAgentPrefVelocity(this.sid,new c.Vector2(0,0));else if(1!==t)this.monster.stand(),a.Simulator.I.setAgentPrefVelocity(this.sid,i.scale(t));else{this.monster.run();var p=180*Math.atan2(i.y,i.x)/Math.PI;p>=90&&p<=180||p>=-180&&p<=-90?this.monster.updateDir(2):p>=-90&&p<=90&&this.monster.updateDir(-2),a.Simulator.I.setAgentPrefVelocity(this.sid,i);}}},e.prototype.startPatrol=function(){var t=this.speedFactor,e=this.agent.position,i=this.patrolPos.minus(e);s.RVOMath.absSq(i)>1&&(i=s.RVOMath.normalize(i)),1!==t?a.Simulator.I.setAgentPrefVelocity(this.sid,i.scale(t)):a.Simulator.I.setAgentPrefVelocity(this.sid,i),s.RVOMath.abs(e.minus(this.lastPos))<0.1&&(this.patrolPos=null,this.updateStatus(r.Idle)),this.lastPos=e;},e.prototype.patrol=function(){},e;}(p.default);i.MonsterAI=u,cc._RF.pop();},{}],MonsterAction:[function(t,e,i){'use strict';cc._RF.push(e,'4490ed/dzVMbqW101qVIcKO','MonsterAction');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0});var r,s=t('SATCircleCld'),a=t('EntityMgr'),c=t('RoleMgr');(function(t){t[t.Idle=0]='Idle',t[t.Patrol=1]='Patrol',t[t.Move=2]='Move',t[t.Attack=3]='Attack';}(r||(r={})));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.status=r.Idle,e.idleTime=0,e.speed=1,e.patrolRange=100,e.listenAtkRange=300,e.backDis=500,e.attckDis=10,e.isBack=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'monster',{get:function(){return this.node;},enumerable:!1,configurable:!0}),e.prototype.setBornPos=function(t){this.data.pos.x=t.x,this.data.pos.y=t.y,this.bornPos=t,this.targetNode=c.default.I.getRole(0);},e.prototype.update=function(t){this.checkStatus(t);},e.prototype.updateStatus=function(t){this.status=t;},e.prototype.checkStatus=function(t){switch(this.moveHandle(t),this.status){case r.Idle:this.idle(t);break;case r.Patrol:this.patrol(t);break;case r.Move:break;case r.Attack:this.attack(t);}},e.prototype.idle=function(t){this.idleTime+=t,this.idleTime>0&&!this.isBack&&(this.idleTime=0);},e.prototype.patrol=function(){},e.prototype.moveHandle=function(t){if(this.targetNode){var e=cc.v2(this.node.x,this.node.y);if(this.targetPos){this.monster.run(),this.node.zIndex=-(this.node.y+10000);for(var i=this.monster.getWorldVec2(),o=a.default.I.monsterPixMap[this.monster.id],n=0;n<o.length;n++)if(o[n].MonsterNode===this.monster){o[n].WolrdPos=i;break;}if(!this.isBack){var r=cc.v2(this.targetNode.position.x,this.targetNode.position.y);if(this.backDis>0&&this.bornPos&&r.sub(this.bornPos).magSqr()>this.backDis*this.backDis)return this.targetPos=this.bornPos,void(this.isBack=!0);this.targetPos=r;}var s=this.targetPos.sub(e),l=180*Math.atan2(s.y,s.x)/Math.PI;l>=90&&l<=180||l>=-180&&l<=-90?this.monster.updateDir(2):l>=-90&&l<=90&&this.monster.updateDir(-2);var p=s.normalize().mulSelf(this.speed);this.data.pos.x+=p.x,this.data.pos.y+=p.y,this.isBack?this.neighborsPos(this.targetPos.x,this.targetPos.y,this.data.pos.x,this.data.pos.y,2)&&(this.targetPos=null):this.neighborsPlayerPos(this.targetPos.x,this.targetPos.y,this.data.pos.x,this.data.pos.y)&&(this.targetPos=null),this.isBack&&this.neighborsPos(this.bornPos.x,this.bornPos.y,this.data.pos.x,this.data.pos.y,2)&&(this.isBack=null);}else if(!this.isBack){var u=cc.v2(this.targetNode.position.x,this.targetNode.position.y);if(this.neighborsPlayerPos(u.x,u.y,this.data.pos.x,this.data.pos.y))return void this.attack(t);this.monster.stand(),(s=u.sub(e)).magSqr()<this.listenAtkRange*this.listenAtkRange&&(u=cc.v2(c.default.I.getRandomRole().position.x,c.default.I.getRandomRole().position.y),this.targetPos=u);}}else this.targetNode=c.default.I.getRole(0);},e.prototype.neighborsPlayerPos=function(t,e,i,o){return this.neighborsPos(t,e,i,o,3*c.default.I.radius);},e.prototype.neighborsPos=function(t,e,i,o,n){return t<0&&(t=-t),i<0&&(i=-i),e<0&&(e=-e),o<0&&(o=-o),i<t+n&&i>t-n&&o<e+n&&o>e-n;},e.prototype.attack=function(){this.monster.attack();},e;}(s.default);i.default=l,cc._RF.pop();},{}],Monster:[function(t,e,i){'use strict';cc._RF.push(e,'d8d319xTmtFrIN6uLk+OcMQ','Monster');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0}),i.Monster=void 0;var r=t('SATConst'),s=t('EffectMgr'),a=t('Entity'),c=t('EntityConst'),l=t('MonsterAction'),p=function(t){function e(e){var i=t.call(this,e)||this;return i.status='',i.radius=25,i._ActionCom=null,i;}return n(e,t),Object.defineProperty(e.prototype,'ActionCom',{get:function(){return this._ActionCom?this._ActionCom:(this._ActionCom=this.getCom(l.default)||this.addComponent(l.default),this._ActionCom);},enumerable:!1,configurable:!0}),e.prototype.initCom=function(t){this.ActionCom.init(cc.SATVec2(t.x,t.y),this.radius,{massLev:3,type:r.SATColliderType.Monster}),this.setBornPos(t);},e.prototype.setBornPos=function(t){this.x=t.x,this.y=t.y,this.ActionCom.setBornPos(t);},e.prototype.run=function(){var t,e,i;'Move'!==this.status&&((null===(e=null===(t=this._anim)||void 0===t?void 0:t.getAnimationState('Move'))||void 0===e?void 0:e.isPlaying)||null===(i=this._anim)||void 0===i||i.play('Move'),this.status='Move');},e.prototype.stand=function(){var t;'Idle'!==this.status&&(null===(t=this._anim)||void 0===t||t.play('Idle'),this.status='Idle');},e.prototype.attack=function(){var t;'Attack'!==this.status&&(null===(t=this._anim)||void 0===t||t.play('Attack'),this.status='Attack');},e.prototype.isAtk=function(){return'Attack'==this.status;},e.prototype.Skill01=function(){var t;'Skill01'!==this.status&&(null===(t=this._anim)||void 0===t||t.play('Skill01'),this.status='Skill01');},e.prototype.addAnim=function(){var t=this,e=0;switch(this.id){case c.MonsterType.monster3:e=8001101;break;case c.MonsterType.monster4:e=8001102;break;case c.MonsterType.monster5:e=8001103;break;case c.MonsterType.monster6:e=8002101;break;case c.MonsterType.monster7:e=8002102;break;case c.MonsterType.monster8:e=8002104;break;case c.MonsterType.monster9:e=8002105;break;case c.MonsterType.monster11:e=8002106;break;case c.MonsterType.monster12:e=8002107;break;case c.MonsterType.monster16:e=8002108;break;case c.MonsterType.monster17:e=8002109;break;case c.MonsterType.monster22:e=8002110;break;case c.MonsterType.monster23:e=8002111;break;case c.MonsterType.monster24:e=8002301;break;case c.MonsterType.monster25:e=8002302;break;case c.MonsterType.monster26:e=8002303;break;case c.MonsterType.monster28:e=8002304;break;case c.MonsterType.monster29:e=8003101;break;case c.MonsterType.monster30:e=8003102;break;case c.MonsterType.monster31:e=8003104;break;case c.MonsterType.monster32:e=8003107;break;case c.MonsterType.monster33:e=8003108;break;case c.MonsterType.monster34:e=8003109;break;case c.MonsterType.monster35:e=8003110;break;case c.MonsterType.monster37:e=8003112;break;case c.MonsterType.monster38:e=8003113;break;case c.MonsterType.monster40:e=8003114;break;case c.MonsterType.monster41:e=8003115;break;case c.MonsterType.monster51:e=8003116;break;case c.MonsterType.monster52:e=8003117;break;case c.MonsterType.monster53:e=8003118;break;case c.MonsterType.monster54:e=8003202;break;case c.MonsterType.monster55:e=8003301;break;case c.MonsterType.monster56:e=8003302;break;case c.MonsterType.monster57:e=8003303;break;case c.MonsterType.monster58:e=8004101;break;case c.MonsterType.monster59:e=8004102;break;case c.MonsterType.monster60:e=8004103;break;case c.MonsterType.monster61:e=8004104;break;case c.MonsterType.monster62:e=8004105;break;case c.MonsterType.monster63:e=8004106;break;case c.MonsterType.monster64:e=8004107;break;case c.MonsterType.monster65:e=8004108;break;case c.MonsterType.monster66:e=8004109;break;case c.MonsterType.monster67:e=8004110;break;case c.MonsterType.monster68:e=8004111;break;case c.MonsterType.monster69:e=8004112;break;case c.MonsterType.monster70:e=8004113;break;case c.MonsterType.monster71:e=8004114;break;case c.MonsterType.monster72:e=8004115;break;case c.MonsterType.monster73:e=8004116;break;case c.MonsterType.monster74:e=8004117;break;case c.MonsterType.monster75:e=8004301;break;case c.MonsterType.monster76:e=8004302;break;case c.MonsterType.monster77:e=8004303;break;case c.MonsterType.monster78:e=8005101;break;case c.MonsterType.monster79:e=8005102;break;case c.MonsterType.monster80:e=8005103;break;case c.MonsterType.monster81:e=8005104;break;case c.MonsterType.monster82:e=8005105;break;case c.MonsterType.monster83:e=8005106;break;case c.MonsterType.monster84:e=8005107;break;case c.MonsterType.monster85:e=8005108;break;case c.MonsterType.monster86:e=8005109;break;case c.MonsterType.monster87:e=8005110;break;case c.MonsterType.monster95:e=8005111;break;case c.MonsterType.monster96:e=8005112;break;case c.MonsterType.monster97:e=8005113;break;case c.MonsterType.monster98:e=8005114;break;case c.MonsterType.monster99:e=8005115;break;case c.MonsterType.monster105:e=8005301;break;case c.MonsterType.monster113:e=8005302;break;case c.MonsterType.monster117:e=8005303;break;case c.MonsterType.monster122:e=8005304;break;case c.MonsterType.monster181:e=8005305;break;case c.MonsterType.monster182:e=8006101;break;case c.MonsterType.monster183:e=8006102;break;case c.MonsterType.monster184:e=8006103;break;case c.MonsterType.monster185:e=8006104;break;case c.MonsterType.monster187:e=8006105;break;case c.MonsterType.monster188:e=8006106;break;case c.MonsterType.monster189:e=8006107;break;case c.MonsterType.monster190:e=8006108;break;case c.MonsterType.monster191:e=8006109;break;case c.MonsterType.monster192:e=8006110;break;case c.MonsterType.monster193:e=8006111;break;case c.MonsterType.monster194:e=8006114;break;case c.MonsterType.monster195:e=8006115;break;case c.MonsterType.monster196:e=8006116;break;case c.MonsterType.monster197:e=8006117;break;case c.MonsterType.monster198:e=8006118;break;case c.MonsterType.monster199:e=8006119;break;case c.MonsterType.monster200:e=8006201;break;case c.MonsterType.monster201:e=8006301;break;case c.MonsterType.monster202:e=8006302;break;case c.MonsterType.monster203:e=8006303;break;case c.MonsterType.monster204:e=8007101;break;case c.MonsterType.monster205:e=8007102;break;case c.MonsterType.monster206:e=8007103;break;case c.MonsterType.monster207:e=8007104;break;case c.MonsterType.monster208:e=8007105;break;default:e=8007106;}s.EffectMgr.I.showEffectLocal('action/Monster'+e,this,cc.WrapMode.Loop,function(e){t._anim=e.getComponent(cc.Animation);});},e.prototype.updateDir=function(t){2===t?this._anim&&(this._anim.node.scaleX=1):this._anim&&(this._anim.node.scaleX=-1);},e;}(a.default);i.Monster=p,cc._RF.pop();},{}],MsgToastMgr:[function(t,e,i){'use strict';cc._RF.push(e,'d97bcatc+ZJfqfptxdEL5jX','MsgToastMgr');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.Speed=void 0;var r,s=t('UtilColor'),a=t('AppViewConst'),c=t('WinConst'),l=t('ResMgr'),p=t('Config'),u=t('LayerMgr'),h=t('UtilsMain'),d=t('ResConst'),f=t('i18n'),y=t('ConfigMgr');(function(t){t[t.slow=3000]='slow',t[t.normal=450]='normal',t[t.fast=300]='fast';}(i.Speed||(i.Speed={})),function(t){t[t.SYS_Maintain=3]='SYS_Maintain',t[t.SYS_RemoteLogin=4]='SYS_RemoteLogin',t[t.SYS_ParamErr=9]='SYS_ParamErr',t[t.SYS_TOKEN=20]='SYS_TOKEN',t[t.SYS_Timeout=23]='SYS_Timeout',t[t.SYS_Kicked=32]='SYS_Kicked',t[t.SYS_Actor=40]='SYS_Actor',t[t.SYS_Charge_Fail1=701]='SYS_Charge_Fail1',t[t.SYS_Charge_Fail2=702]='SYS_Charge_Fail2',t[t.SYS_Charge_Fail3=703]='SYS_Charge_Fail3',t[t.SYS_Charge_Fail4=704]='SYS_Charge_Fail4',t[t.SYS_Charge_Fail5=705]='SYS_Charge_Fail5';}(r||(r={})));var _=function(){function t(){this.msgList=[],this.curFlyP=null,this._stop=!1;}return Object.defineProperty(t.prototype,'stop',{set:function(t){this._stop=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'I',{get:function(){return this.instance||(this.instance=new this(),this.instance.init()),this.instance;},enumerable:!1,configurable:!0}),t.prototype.init=function(){var t=this;setInterval(function(){t.doit();},60);},t.Show=function(t,e){void 0===e&&(e=s.UtilColor.D.White),t.length<=0||null==t||this.I.cacheFlyInfo(t,e);},t.ShowErrTips=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(this.FilterErrCode.indexOf(e)<0){var r=t.GetErrTipsStr.apply(t,n([e],i));r?this.Show(r):this.Show('错误码\uFF1A'+e);}else console.log('错误码',e);},t.GetErrTipsStr=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o='';return(o=y.ConfigMgr.I.inited?this.cfgErr.getValueByKey(t,'MSG'):this.GetClientErrTipsStr(t))?e.length>0?h.UtilsMainStr.FormatArray(o,e):o:'';},t.GetClientErrTipsStr=function(t){switch(t){case r.SYS_Maintain:return f.i18n.tt(f.Lang.err_sys_maintain);case r.SYS_RemoteLogin:return f.i18n.tt(f.Lang.err_sys_remote_login);case r.SYS_ParamErr:return f.i18n.tt(f.Lang.err_sys_param_err);case r.SYS_TOKEN:return f.i18n.tt(f.Lang.err_sys_token);case r.SYS_Timeout:return f.i18n.tt(f.Lang.err_sys_timeout);case r.SYS_Kicked:return f.i18n.tt(f.Lang.err_sys_kicked);case r.SYS_Actor:return f.i18n.tt(f.Lang.err_sys_actor);case r.SYS_Charge_Fail1:return f.i18n.tt(f.Lang.err_sys_charge_fail1);case r.SYS_Charge_Fail2:return f.i18n.tt(f.Lang.err_sys_charge_fail2);case r.SYS_Charge_Fail3:return f.i18n.tt(f.Lang.err_sys_charge_fail3);case r.SYS_Charge_Fail4:return f.i18n.tt(f.Lang.err_sys_charge_fail4);case r.SYS_Charge_Fail5:return f.i18n.tt(f.Lang.err_sys_charge_fail5);default:return'';}},t.prototype.cacheFlyInfo=function(t,e){e&&''!==e&&(t='<color='+e+'><b>'+t+'</b></c>');var i={content:t};this.msgList.length>20&&this.msgList.shift(),this.msgList.push(i);},t.prototype.doit=function(){this.stop||(this.curFlyP||(this.curFlyP=new cc.Node(),u.LayerMgr.I.addToLayer(c.GameLayerEnum.POP_LAYER,this.curFlyP)),this.msgList.length>0&&this.addShow());},t.prototype.addShow=function(){var t=this,e=this.msgList.shift();l.ResMgr.I.showPrefab(a.APP_UI_PATH.MsgToast,this.curFlyP,function(i,o){if(!i){var n=o.getComponent('MsgToast');n&&n.setInfo(e.content),t.correctPos();}},{bundle:d.EBundleType.resources});},t.prototype.correctPos=function(){for(var t=0;t<this.curFlyP.children.length;t++){var e=this.curFlyP.children[t],i=null==e?void 0:e.getComponent('MsgToast');i&&i.setAimY(50*(this.curFlyP.children.length-t+1));}},t.LinkShowMsg=function(e,i){1===e?t.Show(this.GetMsgC(i),s.UtilColor.D.White):t.Show(this.GetErrTipsStr(i),s.UtilColor.D.White);},t.ShowItems=function(e){e.split('|').forEach(function(e){var i='道具吐司-------x'+e.split(':')[1];t.Show(i,s.UtilColor.D.White);});},Object.defineProperty(t,'cfgMsgC',{get:function(){return this._cfgMsgC||(this._cfgMsgC=p.Config.Get(p.Config.Type.Cfg_ItemSource)),this._cfgMsgC;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'cfgErr',{get:function(){return this._cfgErr||(this._cfgErr=p.Config.Get(p.Config.Type.Cfg_Err)),this._cfgErr;},enumerable:!1,configurable:!0}),t.GetMsgC=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.cfgMsgC.getValueByKey(t,{Desc2:'',FuncId:0});return o?(o.Desc2,h.UtilsMainStr.FormatArray(o.Desc2,e)):'';},t.showAnim=function(t,e,i){void 0===i&&(i=null);for(var o=u.LayerMgr.I.PopLayer.convertToNodeSpaceAR(e),n=function(e){var i=t[e],n=i.convertToWorldSpaceAR(cc.v2()),r=u.LayerMgr.I.PopLayer.convertToNodeSpaceAR(n);i.setPosition(r),i.removeFromParent(),i.parent=u.LayerMgr.I.PopLayer,cc.tween(i).to(1,{x:o.x,y:o.y},{easing:'cubicInOut'}).call(function(){i.destroy();}).start();},r=0;r<t.length;r++)n(r);i&&i();},t.instance=null,t.FilterErrCode=[9,58,68,1002,6104],t;}();i.default=_,cc._RF.pop();},{}],MsgToast:[function(t,e,i){'use strict';cc._RF.push(e,'af4cedT/oFL9aWRlkJJU541','MsgToast');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.MsgToast=void 0;var s=t('FrameBlockConst'),a=cc._decorator,c=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rich=null,e.aimY=0,e.endtime=0,e.upTime=600,e.disappearTime=1500,e.startY=0,e;}return n(e,t),e.prototype.setInfo=function(t){t=(t=(t=(t=t.replace(/<b>/g,'')).replace(/<\/b>/g,'')).replace(/<u>/g,'')).replace(/<\/u>/g,''),this.rich.string=''+t,this.rich.node.children.forEach(function(t){t.active=!0;}),this.rich.node.active=!0,this.node.setPosition(0,-500),this.aimY=50,this.node.opacity=255,this.endtime=Date.now()+this.upTime+this.disappearTime,this.node.active=!0;},e.prototype.setAimY=function(t){this.aimY=t;var e=this.startY+this.aimY;this.node.setPosition(this.node.position.x,e);},e.prototype.update=function(){var t=this.endtime-Date.now();if(t<0)this.node.active=!1,this.node.destroy();else if(t<this.disappearTime)this.node.opacity=255*t/this.disappearTime;else{var e=this.startY+this.aimY-this.aimY*(t-this.disappearTime)/this.upTime;this.node.setPosition(this.node.position.x,e);}},e.prototype.onDisable=function(){if(this.rich){this.rich.string='';var t=this.rich.node.getChildByName(s.RenderImgConst.labelLayout);t&&t.destroy();}},r([l(cc.RichText)],e.prototype,'rich',void 0),r([c],e);}(cc.Component);i.MsgToast=p,cc._RF.pop();},{}],NetConfirmBox:[function(t,e,i){'use strict';cc._RF.push(e,'ebd9fMsviFDl5fcEuRW2I52','NetConfirmBox');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.NetConfirmBox=i.NetConfirmBtnType=void 0;var s,a=t('EventClient'),c=t('UtilColor'),l=t('BaseUiView'),p=t('AppEventConst'),u=t('UtilClk'),h=cc._decorator,d=h.ccclass,f=h.property;(function(t){t[t.btnType1=1]='btnType1',t[t.btnType2=2]='btnType2',t[t.btnType3=3]='btnType3',t[t.btnType4=4]='btnType4';}(s=i.NetConfirmBtnType||(i.NetConfirmBtnType={})));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.richText=null,e.cancelBtn=null,e.confirmBtn=null,e.NdScroll=null,e._type=1,e.maxHeight=900,e.miniHeight=200,e;}return n(e,t),e.prototype.init=function(t){var e=t[0];this._type=t[1],this._type||(this._type=s.btnType1),null==e||e.length<=0?console.log('提示信息不能为空'):(this.initTxt(e),this.setClick(),this.initUI(),this.layoutContent());},e.prototype.initTxt=function(t){var e,i,o=t;if(o.length>22?this.richText.horizontalAlign=cc.macro.TextAlignment.LEFT:this.richText.horizontalAlign=cc.macro.TextAlignment.CENTER,this.richText.string='<color='+c.UtilColor.B.NorText+'>'+o+'</c>',this.richText.node.height<=this.miniHeight){var n=''+o;this.richText.string='<color='+c.UtilColor.B.NorText+'>'+n+'</c>';var r=(null===(e=this.NdScroll.getComponent(cc.Layout))||void 0===e?void 0:e.paddingTop)||0,s=(null===(i=this.NdScroll.getComponent(cc.Layout))||void 0===i?void 0:i.paddingBottom)||0,a=this.richText.node.getContentSize().height,l=Math.ceil((this.miniHeight-a-r-s)/2);this.NdScroll.getComponent(cc.Layout).paddingTop+=l,this.NdScroll.getComponent(cc.Layout).paddingBottom+=l;}else if(this.richText.node.height>this.maxHeight){this.NdScroll.getComponent(cc.Layout).enabled=!1,this.NdScroll.getComponent(cc.ScrollView).enabled=!0,this.richText.getComponent(cc.Layout).enabled=!0;var p=this.NdScroll.getChildByName('View');p.getComponent(cc.Layout).enabled=!1,this.NdScroll.getContentSize().height=this.maxHeight-100,p.getContentSize().height=this.maxHeight-100;}},e.prototype.initUI=function(){var t=this._type;this.cancelBtn.active=!0,this.confirmBtn.active=!0,t===s.btnType1?this.confirmBtn.active=!1:t===s.btnType2?this.cancelBtn.active=!1:t===s.btnType3||t===s.btnType4&&(this.cancelBtn.active=!1);},e.prototype.onReConnectFunc=function(){a.EventClient.I.emit(p.AppEvent.ReConnect),this.close();},e.prototype.onBacktoLoginFunc=function(){a.EventClient.I.emit(p.AppEvent.BacktoLogin),this.close();},e.prototype.layoutContent=function(){},e.prototype.setClick=function(){var t=this;this.cancelBtn.targetOff(this),u.UtilClk.Click(this.cancelBtn,function(){t.onReConnectFunc(),t.close();},this),this.confirmBtn.targetOff(this),u.UtilClk.Click(this.confirmBtn,function(){t._type===s.btnType4?t.close():t.onBacktoLoginFunc();},this);},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this);},r([f(cc.RichText)],e.prototype,'richText',void 0),r([f(cc.Node)],e.prototype,'cancelBtn',void 0),r([f(cc.Node)],e.prototype,'confirmBtn',void 0),r([f(cc.Node)],e.prototype,'NdScroll',void 0),r([d],e);}(l.default);i.NetConfirmBox=y,cc._RF.pop();},{}],NetMgr:[function(t,e,i){'use strict';cc._RF.push(e,'1dc0dGLS/tOmaV3TnD9OoEU','NetMgr'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('ProtoManager'),n=t('EventClient'),r=t('EventProto'),s=t('GameSocket'),a=t('NetParse'),c=t('AppEventConst'),l=t('MsgToastMgr'),p=t('UtilPaltform'),u=t('TimerMgr'),h=t('DataReportConst'),d=t('GameApp'),f=function(){function t(){this._webSocketType='ws',this._webSocketTypeS='wss',this._gameSocket=null,this.Debug=!0,this._handleIndex=-1,this._lastReconnectTime=0,this._reconnectFail=!1,this._inGameHideMark=!1,this._isS2CKill=!1,this.openTestNet=!1,this.c2sTime=0,this.s2cTime=0,this.checkNetTimerId1=void 0,this.checkNetTimerId2=void 0,this._s2cQueue=[],this._c2sQueue=[],this.excludeLogPack={3:!0,2:!0},this._taskReConnect=null,this._timer=null;}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t(),this.Instance.connectNet(d.default.I.GateUrl),this.Instance._init()),this.Instance;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'gameSocket',{get:function(){return this._gameSocket||(this._gameSocket=new s.default()),this._gameSocket;},enumerable:!1,configurable:!0}),t.prototype._init=function(){n.EventClient.I.on(c.AppEvent.SocketConnect,this.onOpen,this),n.EventClient.I.on(c.AppEvent.SocketClose,this.onClose,this),n.EventClient.I.on(c.AppEvent.SocketMessage,this._onMessage,this),n.EventClient.I.on(c.AppEvent.SocketReconnectFail,this.onReconnectFail,this),n.EventClient.I.on(c.AppEvent.SocketStartReconnect,this.onSocketStartReconnect,this),n.EventClient.I.on(c.AppEvent.Game_Hide,this.onGameHide,this);},t.prototype.connectNet=function(t){if(t&&(this._url=t),this._url){var e=this._url;this.gameSocket.connect(e);}},t.prototype.reconnectNet=function(){var t=this;if(console.log('reconnectNet-----000----'),!0!==this._reconnectFail)if(this._gameSocket.isConnecting())console.log('reconnectNet-----222----');else if(this._gameSocket.needReconnect)if(this._isS2CKill)console.log('reconnectNet-----444----');else{var e=new Date().getTime();if(this._lastReconnectTime&&e-this._lastReconnectTime<3000){if(this._taskReConnect)return;this._taskReConnect=u.default.I.setTimeout(function(){u.default.I.clearTimeout(t._taskReConnect),t._taskReConnect=null,t.reconnectNet();},1000);}else this._timer||(console.log('===========reconnectNet================',e-this._lastReconnectTime),this._lastReconnectTime=e,this._taskReConnect&&clearTimeout(this._taskReConnect),this._taskReConnect=null,this.gameSocket.reconnect(),this._timer=u.default.I.setTimeout(function(){t._timer&&(u.default.I.clearTimeout(t._timer),t._timer=null),t._gameSocket.isConnecting()||t.reconnectNet();},3000));}else console.log('reconnectNet-----333----');else console.log('reconnectNet-----111----');},t.prototype.closeNet=function(t){void 0===t&&(t=!0),console.log('closeNet---------',t),this._gameSocket.needReconnect=t,this._gameSocket.close(),t&&(this._reconnectFail=!1,this.reconnectNet());},t.prototype.getWSType=function(){if(this.isSmallGame()){var t=window.IndexGlobal;return t&&t.config?t.config.protocol:'wss';}return'https:'===window.location.protocol?this._webSocketTypeS:this._webSocketType;},t.prototype.getState=function(){return this.gameSocket?this.gameSocket.getState():null;},t.prototype.onOpen=function(){n.EventClient.I.emit(c.AppEvent.DataReport,h.EDataReportId.SocketSuc);},t.prototype.onClose=function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._taskReConnect&&(clearTimeout(this._taskReConnect),this._taskReConnect=null),n.EventClient.I.emit(c.AppEvent.DataReport,h.EDataReportId.SocketClose);},t.prototype._onMessage=function(t){if(t.data instanceof ArrayBuffer){var e=a.default.parseProtoBufId(t);a.default.Idx>this._handleIndex||0===a.default.Idx?(this._handleIndex=a.default.Idx,this.openTestNet?this._s2cQueue.push(e):this.onMessage(e)):console.error('数据包索引异常\uFF1A',a.default.Idx,this._handleIndex,e.id);}},t.prototype.onMessage=function(t){var e,i=t.id,s=t.data,a=t.mid;if(this.isSmallGame()||d.default.I.GameCfgGlobal.Wx_Proto){if(!(e=window.PCK.getPCK(i,null)))return;e.decode(o.default.readerCreate(s));}else{var p=o.default.I.getMsgClass(i);if(!p)return;e=p.decode(s);}!0!==this.Debug||this.excludeLogPack[i]||console.log('收包',i,e),n.EventClient.I.emit(c.AppEvent.ControllerCheck,a),e&&e.Tag&&l.default.ShowErrTips(e.Tag),r.EventProto.I.emit(i,e);},t.prototype.onReconnectFail=function(){n.EventClient.I.emit(c.AppEvent.DataReport,h.EDataReportId.SocketFail),this._reconnectFail=!0;},t.prototype.onSocketStartReconnect=function(){n.EventClient.I.emit(c.AppEvent.DataReport,h.EDataReportId.SocketReConnect),this.reconnectNet();},t.prototype.onGameHide=function(t){t?(this._gameSocket.needReconnect=!1,this._inGameHideMark=!0):(this._gameSocket.needReconnect=!0,this._inGameHideMark&&!this._gameSocket.isConnecting()&&this._url&&this.reconnectNet(),this._inGameHideMark=!1);},t.prototype.sendMessage=function(t,e){void 0===e&&(e=null),this.openTestNet?this._c2sQueue.push({id:t,data:e}):this.sendProtoPacket(t,e);},t.prototype.sendProtoPacket=function(t,e){void 0===e&&(e=null),!0===this.Debug&&this.excludeLogPack&&!this.excludeLogPack[t]&&console.log('发包',t,e);var i=new Uint8Array(0);if(e)if(this.isSmallGame()||d.default.I.GameCfgGlobal.Wx_Proto)i=(e=window.PCK.getPCK(t,e)).encode(o.default.writerCreate()).finish();else{var n=o.default.I.getMsgClass(t);if(!n)return;e=n.create(e),i=n.encode(e).finish();}var r=a.default.protoBufAddtag(t,i),s=r[0].slice(r[1],r[1]+i.length+a.default.HeadLen);this.gameSocket.send(s.buffer);},t.prototype.ifHasWebsocket=function(){return!!t.I;},t.prototype.isSmallGame=function(){return p.UtilPaltform.isWeChatGame;},t.prototype.setkillState=function(t){this._isS2CKill=t;},t.prototype.doOpenNetTest=function(t){if(t){var e=t.isOpen,i=t.t1,o=t.t2;if(this.s2cTime=o,this.c2sTime=i,e)this.openTestNet=!0,this.startTimer(i,o);else{for(this.openTestNet=!1,this.stopTimer();this._c2sQueue.length;)this.doSendMessageQueue();for(;this._s2cQueue.length;)this.doRecMessageQueue();}}},t.prototype.startTimer=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),void 0!==this.checkNetTimerId1&&null!==this.checkNetTimerId1||(this.checkNetTimerId1=u.default.I.setInterval(this.updata1,t,this)),void 0!==this.checkNetTimerId2&&null!==this.checkNetTimerId2||(this.checkNetTimerId2=u.default.I.setInterval(this.updata2,e,this));},t.prototype.stopTimer=function(){void 0!==this.checkNetTimerId1&&null!==this.checkNetTimerId1&&(u.default.I.clearInterval(this.checkNetTimerId1),this.checkNetTimerId1=void 0),void 0!==this.checkNetTimerId2&&null!==this.checkNetTimerId2&&(u.default.I.clearInterval(this.checkNetTimerId2),this.checkNetTimerId2=void 0);},t.prototype.doSendMessageQueue=function(){if(0!==this._c2sQueue.length){var t=this._c2sQueue.shift();this.sendProtoPacket(t.id,t.data);}},t.prototype.doRecMessageQueue=function(){if(0!==this._s2cQueue.length){var t=this._s2cQueue.shift();this.onMessage(t);}},t.prototype.updata1=function(){this.doSendMessageQueue();},t.prototype.updata2=function(){this.doRecMessageQueue();},t;}();i.default=f,cc._RF.pop();},{}],NetParse:[function(t,e,i){'use strict';cc._RF.push(e,'072e4j5TTBFN5uOoJfCB0SC','NetParse'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){}return t.IntToUint8Array=function(t){var e=new Uint8Array(2);return e[0]=t>>8&255,e[1]=255&t,e;},t.IntToUint32Array=function(t){var e=new Uint8Array(4);return e[0]=t>>24&255,e[1]=t>>16&255,e[2]=t>>8&255,e[3]=255&t,e;},t.protoBufAddtag=function(e,i){if(i.length+t.HeadLen>t.MaxSize)return console.error('proto字符超限',e),null;t.Offset+i.length+t.HeadLen>t.MaxSize&&(t.Offset=0),t.AddProtoIdBuffer[t.Offset+0]=this.Idx>>24&255,t.AddProtoIdBuffer[t.Offset+1]=this.Idx>>16&255,t.AddProtoIdBuffer[t.Offset+2]=this.Idx>>8&255,t.AddProtoIdBuffer[t.Offset+3]=255&this.Idx,t.AddProtoIdBuffer[t.Offset+4]=e>>8&255,t.AddProtoIdBuffer[t.Offset+5]=255&e,t.AddProtoIdBuffer.set(i.subarray(0,i.length),t.Offset+t.HeadLen);var o=t.Offset;return t.Offset+=i.length+t.HeadLen,[t.AddProtoIdBuffer,o];},t.Uint8ArrayToInt=function(t){for(var e=0,i=0;i<t.length;i++)e|=t[i]<<8*(t.length-i-1);return e;},t.parseProtoBufId=function(e){var i=e.data,o=new Uint8Array(i);this.Idx=t.Uint8ArrayToInt(o.slice(0,4)),this.Idx;var n=t.Uint8ArrayToInt(o.slice(4,6));return{id:t.Uint8ArrayToInt(o.slice(6,8)),data:o=o.slice(t.HeadParLen),mid:n};},t.MaxSize=20480,t.AddProtoIdBuffer=new Uint8Array(t.MaxSize),t.Offset=0,t.Idx=0,t.HeadLen=6,t.HeadParLen=8,t;}();i.default=o,cc._RF.pop();},{}],NotchAdapter:[function(t,e,i){'use strict';cc._RF.push(e,'c87f5eoHxpFfb9cEtmPRWJv','NotchAdapter');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('AppEventConst'),c=t('LayerMgr'),l=cc._decorator,p=l.ccclass,u=l.property,h=l.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isTop=!1,e.isBottom=!1,e.originalWidgetTop=0,e.originalWidgetBottom=0,e.originalY=0,e;}return n(e,t),e.prototype.onLoad=function(){s.EventClient.I.on(a.AppEvent.NotchHeightChange,this.onNotchHeightChange,this);},e.prototype.onDestroy=function(){s.EventClient.I.off(a.AppEvent.NotchHeightChange,this.onNotchHeightChange,this);},e.prototype.start=function(){this.widget=this.getComponent(cc.Widget),this.widget&&this.widget.enabled?(this.widget.isAlignTop&&(this.originalWidgetTop=this.widget.top),this.widget.isAlignBottom&&(this.originalWidgetBottom=this.widget.bottom)):this.originalY=this.node.y,this.onNotchHeightChange();},e.prototype.onNotchHeightChange=function(){var t=c.LayerMgr.I.notchHeight,e=c.LayerMgr.I.bottomHeight;cc.view.getDesignResolutionSize().height<1280+t+e?console.log('物理分辨率小于游戏设计分辨率\uFF0C忽略异形屏高度适配'):(this.isTop&&t>0&&(this.widget&&this.widget.enabled&&this.widget.isAlignTop?(this.widget.top=this.originalWidgetTop+t,this.widget.updateAlignment()):this.node.y=this.originalY-t),this.isBottom&&e>0&&(this.widget&&this.widget.enabled&&this.widget.isAlignBottom?(this.widget.bottom=this.originalWidgetBottom+e,this.widget.updateAlignment()):this.node.y=this.originalY+e));},r([u({visible:function(){return!this.isBottom;}})],e.prototype,'isTop',void 0),r([u({visible:function(){return!this.isTop;}})],e.prototype,'isBottom',void 0),r([p,h('适配/NotchAdapter')],e);}(cc.Component);i.default=d,cc._RF.pop();},{}],NoticeItem:[function(t,e,i){'use strict';cc._RF.push(e,'609ea2sGK1MjbJ0DmuOeRxw','NoticeItem');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('UtilClk'),c=t('UtilColor'),l=t('AppEventConst'),p=t('ResMgr'),u=t('DynamicImage'),h=t('GameApp'),d=t('LoginConst'),f=cc._decorator,y=f.ccclass,_=f.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.LabDesc=null,e.NdArrow1=null,e.NdArrow2=null,e.NdBg=null,e.SprBg1=null,e.SprBg2=null,e.SprIcon1=null,e.SprIcon2=null,e.Btnbanner=null,e.RichContent=null,e.NdDetail=null,e.RtTitle=null,e.NdKey=[],e.NdMask=null,e._idx=-1,e.beSelect=!1,e._isHalf=!1,e;}return n(e,t),e.prototype.start=function(){var t=this;a.UtilClk.Click(this.NdBg,function(){return t.handlerClick();},this,{scale:1}),a.UtilClk.Click(this.NdDetail,function(){return t.detailClick();},this,{scale:1}),this.RichContent.node.on(cc.Node.EventType.SIZE_CHANGED,this._changeHeight,this);},e.prototype.setData=function(t,e){var i=this;this._idx=e,this.Btnbanner.node.active=!!t.BannerValue,this._keyColor(t.Color,t),this.Btnbanner.node.active&&p.ResMgr.I._loadRemoteExt(h.default.I.ResAdDirUrl()+'/notice/'+t.BannerValue+'.png',{noWebp:1,ext:'.png'},function(e,o){var n;if(!e&&(null===(n=i.Btnbanner)||void 0===n?void 0:n.isValid)){var r=new cc.SpriteFrame(o);r._uuid=h.default.I.ResAdDirUrl()+'/notice/'+t.BannerValue+'.png',i.Btnbanner.node.$Sprite.spriteFrame=r,window.closeSplashFunc&&window.closeSplashFunc();}},this),this.LabDesc.string=t.Desc,this.RichContent.string=t.Content,this.RtTitle.string=t.Title;},e.prototype.showDetail=function(t){this._isHalf=t,this.beSelect=!0,this.setItemState(),this.NdMask.enabled=t;},e.prototype.handlerClick=function(){this._isHalf?(this.beSelect=this._isHalf,this.NdMask.node.height=this.RichContent.node.height,this.NdDetail.active=this._isHalf):this.NdMask.node.height=this.RichContent.node.height,this.beSelect=!this.beSelect,this.setItemState(),this._isHalf=!1,s.EventClient.I.emit(l.AppEvent.CloseNoticeItem,this._idx),this.scrollToItem();},e.prototype.detailClick=function(){this._isHalf&&(this.beSelect=this._isHalf,this.NdMask.node.height=this.RichContent.node.height,this._isHalf=!1),this.setItemState();},e.prototype._changeHeight=function(){this._isHalf||(this.NdMask.node.height=this.RichContent.node.height);},e.prototype.closeDetail=function(){this.beSelect=!1,this.setItemState(),this._isHalf=!1;},e.prototype.scrollToItem=function(){s.EventClient.I.emit(l.AppEvent.ClickNoticeItem,this.node.position.y,this.beSelect,this._idx);},e.prototype._keyColor=function(t,e){var i=0;switch(t){case d.JUMP_NOTICE_WINDOW_KEY.Red:i=0;break;case d.JUMP_NOTICE_WINDOW_KEY.Orange:i=1;break;case d.JUMP_NOTICE_WINDOW_KEY.Green:i=2;}this.NdKey.forEach(function(t,o){t.active=i===o,i===o&&(t.getComponentInChildren(cc.Label).string=e.TagKey);});},e.prototype.setItemState=function(){this.NdDetail.active=this.beSelect,this.SprIcon1.active=this.SprBg1.active=this.beSelect,this.SprIcon2.active=this.SprBg2.active=!this.beSelect,this.NdArrow1.active=this.beSelect,this.NdArrow2.active=!this.beSelect,this.LabDesc.node.color=this.beSelect?c.UtilColor.Hex2Rgba(c.UtilColor.BtnYellow2):c.UtilColor.Hex2Rgba(c.UtilColor.BtnBlue2);},r([_(cc.Label)],e.prototype,'LabDesc',void 0),r([_(cc.Node)],e.prototype,'NdArrow1',void 0),r([_(cc.Node)],e.prototype,'NdArrow2',void 0),r([_(cc.Node)],e.prototype,'NdBg',void 0),r([_(cc.Node)],e.prototype,'SprBg1',void 0),r([_(cc.Node)],e.prototype,'SprBg2',void 0),r([_(cc.Node)],e.prototype,'SprIcon1',void 0),r([_(cc.Node)],e.prototype,'SprIcon2',void 0),r([_(u.DynamicImage)],e.prototype,'Btnbanner',void 0),r([_(cc.RichText)],e.prototype,'RichContent',void 0),r([_(cc.Node)],e.prototype,'NdDetail',void 0),r([_(cc.RichText)],e.prototype,'RtTitle',void 0),r([_(cc.Node)],e.prototype,'NdKey',void 0),r([_(cc.Mask)],e.prototype,'NdMask',void 0),r([y],e);}(cc.Component);i.default=g,cc._RF.pop();},{}],NoticeView:[function(t,e,i){'use strict';cc._RF.push(e,'ab773PL605K/LMkbzmOnDY1','NoticeView');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('UtilClk'),c=t('AppEventConst'),l=t('BaseUiView'),p=t('NoticeItem'),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnClose=null,e.listView=null,e.LabNull=null,e.content=null,e.noticeItem=null,e._data=[],e._curIdx=0,e._itemList=[],e;}return n(e,t),e.prototype.start=function(){t.prototype.start.call(this),s.EventClient.I.on(c.AppEvent.ClickNoticeItem,this._scrollToItem,this),s.EventClient.I.on(c.AppEvent.CloseNoticeItem,this._closeItem,this),a.UtilClk.Click(this.BtnClose,this.close,this);},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),s.EventClient.I.off(c.AppEvent.ClickNoticeItem,this._scrollToItem,this),s.EventClient.I.off(c.AppEvent.CloseNoticeItem,this._closeItem,this);},e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._data=t[0][0],void 0===this._data||0===this._data.length?this.LabNull.active=!0:(this.LabNull.active=!1,this.initItem());},e.prototype.initItem=function(){this._itemList=[];for(var t=0;t<this._data.length;t++){var e=this.content.children[t]||cc.instantiate(this.noticeItem);e.getComponent(p.default).setData(this._data[t],t),e.parent||(e.parent=this.content),this._itemList.push(e);}this._itemList[0].getComponent(p.default).showDetail(this._itemList.length>1);},e.prototype._closeItem=function(t){t!==this._curIdx&&this._itemList[this._curIdx].getComponent(p.default).closeDetail(),this._curIdx=t;},e.prototype._scrollToItem=function(t,e,i){var o=this;e&&(this.listView.enabled=!1,this.content.y=-this._itemList[i].y,this.content.height<740&&0!==this._curIdx&&(this.content.height=740),this.scheduleOnce(function(){o.listView.enabled=!0;},0.1));},r([d(cc.Node)],e.prototype,'BtnClose',void 0),r([d(cc.ScrollView)],e.prototype,'listView',void 0),r([d(cc.Node)],e.prototype,'LabNull',void 0),r([d(cc.Node)],e.prototype,'content',void 0),r([d(cc.Prefab)],e.prototype,'noticeItem',void 0),r([h],e);}(l.default);i.default=f,cc._RF.pop();},{}],PathFindingAgent:[function(t,e,i){'use strict';cc._RF.push(e,'10552hNFZRNa6fYGlXWd9Ps','PathFindingAgent'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('AstarHoneycombRoadSeeker'),n=t('AStarRoadSeeker'),r=t('MapRoadUtils'),s=t('MapMode'),a=t('EventClient'),c=t('EventName'),l=t('UtilMap'),p=function(){function t(){this._roadDic={},this._mapData=new s.MapInfo(),this._mapType=s.MapMode.angle90,this._finishInit=!1;}return Object.defineProperty(t,'I',{get:function(){return null==this._instance&&(this._instance=new t()),this._instance;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'roadSeeker',{get:function(){return this._roadSeeker;},enumerable:!1,configurable:!0}),t.prototype.valToHex=function(t){return(t<0||t>=r.MAX_ENUM_ROAD)&&(t=0),t>=0&&t<10?''+t:['a','b','c','d','e','f'][t-10];},t.prototype.hexToVal=function(t){return'a'===t?10:'b'===t?11:'c'===t?12:'d'===t?13:'e'===t?14:'f'===t?15:Number(t);},t.prototype.eCode=function(t){if(!t||0===t.length||0===t[0].length)return'';for(var e='',i=t.length,o=t[0].length,n=null,r=0,s=0;s<i;s++){for(var a=0;a<o;a++){var c=t[s][a];null==n&&(n=c),c===n?r++:(e+=''+this.valToHex(n)+r+',',n=c,r=1);}e+=s===i-1?''+this.valToHex(n)+r:''+this.valToHex(n)+r+'|',n=null,r=0;}return t=null,e;},t.prototype.dCode=function(t){var e=this,i=t.split('|'),o=[];return i.forEach(function(t){var i=t.split(','),n=[];i.forEach(function(t){n=n.concat(e.getStr(t));}),o.push(n);}),t=null,o;},t.prototype.getStr=function(t){if(1===t.length)return[Number(t)];for(var e=t.substring(0,1),i=this.hexToVal(e),o=Number(t.substring(1,t.length)),n=[],r=0;r<o;r++)n.push(i);return n;},Object.defineProperty(t.prototype,'mapData',{get:function(){return this._mapData;},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this._mapData||(this._mapData=new s.MapInfo(t)),this._mapType=t.type,this._mapData.mapWidth=t.cellWidth*t.col,this._mapData.mapHeight=t.cellHeight*t.row,this._mapData.cellWidth=t.cellWidth,this._mapData.cellHeight=t.cellHeight,this._mapData.type=t.type,r.default.I.updateMapInfo(this._mapData.mapWidth,this._mapData.mapHeight,this._mapData.cellWidth,this._mapData.cellHeight,this._mapData.type);for(var e=t.row,i=t.col,o=cc.js.createMap(!0),n=0;n<e;n++)for(var a=0;a<i;a++){var c=n*i+a,p=t.roadDataArr[c]>0?0:1,u=l.default.tileToCell(cc.v2(a,n));o[u.x+'_'+u.y]=p;}this._mapData.roadDataArr=[],e=r.default.I.row,i=r.default.I.col;var h=Math.floor(e/2),d=Math.floor(i/2);for(n=-h;n<h;n++){var f=[];for(a=-d;a<d;a++)1===o[a+'_'+n]?f.push(1):f.push(0);this._mapData.roadDataArr.push(f);}this._finishInit=!1,this.initRoadDicPer();},Object.defineProperty(t.prototype,'finishInit',{get:function(){return this._finishInit;},enumerable:!1,configurable:!0}),t.prototype.initRoadDicPer=function(){var t=0,e=0,i=0,l=this._mapData.roadDataArr.length,p=0;this._mapData.roadDataArr[0]&&(p=this._mapData.roadDataArr[0].length);var u=Math.floor(l/2),h=Math.floor(p/2);if(this._mapType===s.MapMode.honeycomb2);else for(var d=0;d<l;d++)for(var f=0;f<p;f++){t=this._mapData.roadDataArr[d][f],e=f-h,i=d-u;var y=r.default.I.getNodeByDerect(e,i);y.value=t,this._roadDic[y.cx+'_'+y.cy]=y;}this._mapType===s.MapMode.honeycomb||this._mapType===s.MapMode.honeycomb2?this._roadSeeker=new o.default(this._roadDic):this._roadSeeker=new n.default(this._roadDic),this._finishInit=!0,a.EventClient.I.emit(c.E.Map.InitPathFinding);},t.prototype.releaseRoadData=function(){for(var t in this._roadDic)delete this._roadDic[t];this._roadDic=cc.js.createMap(!0);},t.prototype.findPath=function(t,e){var i=this.getRoadNodeByPixel(t.x,t.y),o=this.getRoadNodeByPixel(e.x,e.y);return this._roadSeeker.findPath(i,o);},t.prototype.seekPath=function(t,e,i,o){var n=this.getRoadNodeByPixel(t,e),r=this.getRoadNodeByPixel(i,o);return this._roadSeeker.seekPath(n,r);},t.prototype.seekPath2=function(t,e,i,o){var n=this.getRoadNodeByPixel(t,e),r=this.getRoadNodeByPixel(i,o);return this._roadSeeker.seekPath2(n,r);},t.prototype.testSeekRoad=function(t,e,i,o,n,r,s){var a=this.getRoadNodeByPixel(t,e),c=this.getRoadNodeByPixel(i,o);this._roadSeeker.testSeekPathStep(a,c,n,r,s);},t.prototype.getRoadNodeByPixel=function(t,e){var i=r.default.I.getWorldPointByPixel(t,e);return this._mapType===s.MapMode.honeycomb2?this.getRoadNode(i.y,i.x):this.getRoadNode(i.x,i.y);},t.prototype.getRoadNode=function(t,e){return this._roadSeeker?this._roadSeeker.getRoadNode(t,e):null;},t.prototype.isPassNode=function(t,e){if(this._roadSeeker){var i=this._roadSeeker.getRoadNode(t,e);return this._roadSeeker.isPassNode(i);}return!1;},t.prototype.isTransferNode=function(t,e){if(this._roadSeeker){var i=this._roadSeeker.getRoadNode(t,e);return this.isTransfer(null==i?void 0:i.value);}return!1;},t.prototype.isTransfer=function(t){return t===r.ENUM_ROAD.Trans||t>=r.ENUM_ROAD.Custom4&&t<=r.ENUM_ROAD.Custom15;},t.prototype.canRun=function(t){return t!==r.ENUM_ROAD.Block;},t;}();i.default=p,cc._RF.pop();},{}],Point:[function(t,e,i){'use strict';cc._RF.push(e,'ae2adb3XbdEPbbvS7udfoO2','Point'),Object.defineProperty(i,'__esModule',{value:!0});i.default=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e;},cc._RF.pop();},{}],ProtoManager:[function(t,e,i){'use strict';cc._RF.push(e,'5cef1le38xOlYcVcYBby9A/','ProtoManager'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('protobufjs'),n=t('AppEventConst'),r=t('EventClient'),s=t('UtilPaltform'),a=t('DataReportConst'),c=t('GameApp'),l=t('TaskCollector'),p=t('TimerMgr'),u=function(){function t(){this.ProtoIds={},this.msgIds={};}return Object.defineProperty(t,'I',{get:function(){return this._i||(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.initProto=function(e){e=e||t.ProtoJSON,this.root=o.Root.fromJSON(e);var i=e.nested.msg.nested,n=i.PCK.values;for(var r in n){var s=r.replace('_ID',''),a=n[r];this.ProtoIds[r]=a,this.msgIds[a]=s,cc.js.setClassName(s,function(e){return t.I.root.lookupType(cc.js.getClassName(this)).create(e);}),window[s]=cc.js.getClassByName(s);}for(var s in i)null==window[s]&&'PCK'!==s&&(cc.js.setClassName('Dyna'+s,function(e){var i=cc.js.getClassName(this);return i=i.replace('Dyna',''),t.I.root.lookupType(i).create(e);}),window[s]=cc.js.getClassByName('Dyna'+s));e=null;},Object.defineProperty(t.prototype,'Root',{get:function(){return this.root;},enumerable:!1,configurable:!0}),t.readerCreate=function(t){return o.Reader.create(t);},t.writerCreate=function(){return o.Writer.create();},t.prototype.getMsgClass=function(t){var e=this.msgIds[t];return e?this.root.lookupType(e):null;},t.onotProt2o=function(t){var e,i,o=t.json,n=window.test222;cc.testMap=o.nested.msg.nested,window.ProtoId={},window.__esModule=!0;var r=cc.testMap.PCK.values,s={};for(var a in r){window.ProtoId[window.ProtoId[a]=r[a]]=a;var c=a.replace('_ID','');s[r[a]]=c;}var p=function(){function t(){}return t.getPCK=function(t,e){var i=window[s[t]];if(i)return new i(e);return{encode:function(){},decode:function(){}};},t;}();window.PCK=p;var u=function(t){if(window[t]=n[t],!(null===(e=cc.testMap[t])||void 0===e?void 0:e.fields))return'continue';window[t].prototype._LD=null===(i=cc.testMap[t])||void 0===i?void 0:i.fields,window[t].prototype.encode=function(e){var i=window[t].prototype._LD;for(var o in i){var n=i[o].type,r=i[o].id,s=i[o].rule,a=0;if((s||'bytes'==n)&&this[o]&&this[o].length)switch(a=8*r+2,n){case'string':this[o].forEach(function(t){e.uint32(a).string(t);});break;case'bytes':e.uint32(a).bytes(this[o]);break;case'float':case'int32':case'uint32':case'uint64':case'bool':e.uint32(a).fork(),this[o].forEach(function(t){e.int32(t);}),e.ldelim();break;case'int64':e.uint32(a).fork(),this[o].forEach(function(t){e.int64(t);}),e.ldelim();break;default:window[n]&&this[o].forEach(function(t){t.encode(e.uint32(a).fork()).ldelim();});}else if(!s&&this[o])switch(n){case'string':a=8*r+2,e.uint32(a).string(this[o]);break;case'float':case'int32':case'uint32':case'uint64':case'bool':a=8*r,e.uint32(a).int32(this[o]);break;case'int64':a=8*r,e.uint32(a).int64(this[o]);break;default:window[n]&&(a=8*r+2,this[o].encode(e.uint32(a).fork()).ldelim());}}return e;},window[t].prototype.decode=function(e,i){var o=void 0===i?e.len:e.pos+i,n=window[t].prototype._LD,r=window[t].prototype.localDMap||{};if(!window[t].prototype.localDMap){for(var s in n)r[n[s].id]={name:s,rule:n[s].rule,type:n[s].type,id:n[s].id};window[t].prototype.localDMap=r;}for(;e.pos<o;){var a=e.uint32(),c=r[a>>>3];if(c){var l=c.type;switch(c.type){case'string':c.rule?this[c.name].push(e.string()):this[c.name]=e.string();break;case'bytes':this[c.name]=e.bytes();break;case'float':case'int32':case'uint32':case'uint64':case'bool':if(c.rule)if(2==(7&a))for(var p=e.uint32()+e.pos;e.pos<p;)this[c.name].push(e.int32());else this[c.name].push(e.int32());else this[c.name]=e.int32();break;case'int64':if(c.rule)if(2==(7&a))for(p=e.uint32()+e.pos;e.pos<p;)this[c.name].push(e.int64());else this[c.name].push(e.int64());else this[c.name]=e.int64();break;default:if(window[l])if(c.rule){var u=new window[l]();u.decode(e,e.uint32()),this[c.name].push(u);}else this[c.name].decode(e,e.uint32());}}else e.skipType(7&a);}};};for(var h in n)u(h);l.default.I.endTask(l.DB_KEY_ENUM.ShowLoginUI,l.DB_ID_ENUM.LodgingProto);},t.onotProto=function(e){console.timeEnd('loadProto');var i=e.json;this.ProtoJSON=i;var o=i.nested.msg.nested.PCK.values;for(var n in(window.ProtoId={},o)){window.ProtoId[n]=o[n];var r=n.replace('_ID','');window[r]=new function(){}();}e='',i=null,console.time('initProto'),s.UtilPaltform.isWeChatGame||t.I.initProto(),console.timeEnd('initProto'),l.default.I.endTask(l.DB_KEY_ENUM.ShowLoginUI,l.DB_ID_ENUM.LodgingProto);},t.prototype.loadMsgJson=function(){console.time('loadProto');var e=c.default.I.ProtoMsgUrl;c.default.I.GameCfgGlobal.Wx_Proto?cc.assetManager.loadScript('https://dev-hl3-client.kaixinxiyou.com/res_dev/gm/proto.min.js?'+Date.now(),function(){window.test222?cc.assetManager.loadRemote(e+'/msg.json',function(e,i){if(e)var o=p.default.I.setTimeout(function(){o&&(p.default.I.clearTimeout(o),o=null),t.I.init();},100);else t.onotProt2o(i),r.EventClient.I.emit(n.AppEvent.DataReport,a.EDataReportId.NeedDownloadRes);}):console.error('模拟环境下的protojs还没加载完成');}):cc.assetManager.loadRemote(e+'/msg.json',function(e,i){if(e)var o=p.default.I.setTimeout(function(){o&&(p.default.I.clearTimeout(o),o=null),t.I.init();},100);else t.onotProto(i),r.EventClient.I.emit(n.AppEvent.DataReport,a.EDataReportId.NeedDownloadRes);});},t.prototype.init=function(){s.UtilPaltform.isWeChatGame?l.default.I.endTask(l.DB_KEY_ENUM.ShowLoginUI,l.DB_ID_ENUM.LodgingProto):this.loadMsgJson();},t.ProtoJSON=void 0,t.ProtoId=void 0,t._i=null,t;}();i.default=u,cc._RF.pop();},{protobufjs:11}],QuadtreeMgr:[function(t,e,i){'use strict';cc._RF.push(e,'cf12bYDMgBLfYhmb2Phap66','QuadtreeMgr'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('TZSAT'),n=cc.v2(),r=function(){function t(){}return Object.defineProperty(t,'I',{get:function(){return null==this._I&&(this._I=new t()),this._I;},enumerable:!1,configurable:!0}),t.prototype.initTree=function(t){this.ndTree=new o.Quadtree(t);},t.prototype.insert=function(t){var e,i,o={x:t.aabb.x,y:t.aabb.y,height:t.aabb.height,width:t.aabb.width,key:t.key,points:t.points,wx:(null===(e=t.worldPos)||void 0===e?void 0:e.x)||0,wy:(null===(i=t.worldPos)||void 0===i?void 0:i.y)||0};this.ndTree.insert(o);},t.prototype.resetMaxObjects=function(t){this.ndTree.max_objects=t;},t.prototype.retrieve=function(t,e){return this.ndTree.retrieve(t,e);},t.prototype.updateCollider=function(t){var e=t.aabb,i=t.matrix;if(1===t.type){cc.Vec2.transformMat4(n,cc.v2(0,0),i),t.position.x=n.x,t.position.y=n.y;var o=i.m12,r=i.m13;i.m12=i.m13=0,n.x=t.radius2,n.y=0,cc.Vec2.transformMat4(n,n,i);var s=Math.sqrt(n.x*n.x+n.y*n.y);t.radius=s,e.x=t.position.x-s,e.y=t.position.y-s,e.width=2*s,e.height=2*s,i.m12=o,i.m13=r;}else if(2===t.type){for(var a=t.points,c=1000000,l=1000000,p=-1000000,u=-1000000,h=0,d=a.length;h<d;h++){n.x=a[h].x,n.y=a[h].y,cc.Vec2.transformMat4(n,n,i);var f=n.x,y=n.y;f>p&&(p=f),f<c&&(c=f),y>u&&(u=y),y<l&&(l=y);}e.x=c,e.y=l,e.width=p-c,e.height=u-l;}},t._I=null,t;}();i.default=r,cc._RF.pop();},{}],RVOMath:[function(t,e,i){'use strict';cc._RF.push(e,'23474FGvqFPI74dHuC3XvgE','RVOMath'),Object.defineProperty(i,'__esModule',{value:!0}),i.RVOMath=void 0;var o=function(){function t(){}return t.absSq=function(t){return t.multiply(t);},t.normalize=function(e){return e.scale(1/t.abs(e));},t.distSqPointLineSegment=function(e,i,o){var n=o.minus(e),r=i.minus(e),s=n.multiply(r)/t.absSq(r);return s<0?t.absSq(n):s>1?t.absSq(o.minus(i)):t.absSq(o.minus(e.plus(r.scale(s))));},t.sqr=function(t){return t*t;},t.det=function(t,e){return t.x*e.y-t.y*e.x;},t.abs=function(e){return Math.sqrt(t.absSq(e));},t.leftOf=function(e,i,o){return t.det(e.minus(o),i.minus(e));},t.RVO_EPSILON=0.00001,t;}();i.RVOMath=o,cc._RF.pop();},{}],RVOObstacle:[function(t,e,i){'use strict';cc._RF.push(e,'8dec0lo5TVJgohPTHpQCjxL','RVOObstacle');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('Simulator'),a=t('Vector2'),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.onLoad=function(){for(var t=this.node.children,e=0,i=t.length;e<i;e++){var o=t[e],n=this.node.convertToWorldSpaceAR(o.position);n=this.node.parent.convertToNodeSpaceAR(n);var r=o.width>>1,c=o.height>>1,l=n.x-r,p=n.x+r,u=n.y-c,h=n.y+c,d=[];d[d.length]=new a.Vector2(p,h),d[d.length]=new a.Vector2(l,h),d[d.length]=new a.Vector2(l,u),d[d.length]=new a.Vector2(p,u),s.Simulator.I.addObstacle(d);}},r([l],e);}(cc.Component));i.default=p,cc._RF.pop();},{}],RealNameWin:[function(t,e,i){'use strict';cc._RF.push(e,'ea4d5hfOUVPk7omZmk0Zsfs','RealNameWin');var ac=window.extend_func(this,'__extends__decorate__awaiter__generator');var n=ac.__extends;var r=ac.__decorate;var s=ac.__awaiter;var a=ac.__generator;Object.defineProperty(i,'__esModule',{value:!0}),i.RealNameWin=void 0;var c=t('AppEventConst'),l=t('EventClient'),p=t('BaseUiView'),u=t('WinMgr'),h=t('HttpReq'),d=t('GameApp'),f=t('MsgToastMgr'),y=t('LoginConst'),_=t('LoginController'),g=t('AppViewConst'),m=t('UtilClk'),v=t('UtilsMain'),b=t('SdkMgr'),C=cc._decorator,S=C.ccclass,w=C.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NdclickBtn=null,e.NdBlack=null,e.EdName=null,e.EdNum=null,e;}return n(e,t),e.prototype.start=function(){},e.prototype.open=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];t.prototype.open.call(this,e),console.log('开启实名面板',e);var o=e[0];this._name=o[0],this._pass=o[1],this._sdktype=o[2],this._channelId=o[3],this._nameExt=o[4],m.UtilClk.Click(this.NdclickBtn,this.clickReqName,this),m.UtilClk.Click(this.NdBlack,this.onNdBlack,this),'release'===d.default.I.GameCfgGlobal.Branch||d.default.I.isBanshu()||(this.EdName.string='任兵',this.EdNum.string='142724197804131211');},e.prototype.checkBack=function(){var t=this.EdName.string,e=this.EdNum.string;0!==t.length?0!==e.length?v.UtilsMainStr.IsChinese(t)?this.checkUseId(e)&&this.reqRealName(t,e).then(function(){},function(t){console.log(t);}):f.default.Show('请填写正确的名字'):f.default.Show('请输入身份证号'):f.default.Show('请输入名字');},e.prototype.clickReqName=function(){var t=this,e=!1,i=!1,o={role_id:0,content:this.EdName.string,scene:1,server_id:0,server_name:0,role_nick:''},n={role_id:0,content:this.EdNum.string,scene:1,server_id:0,server_name:0,role_nick:''};b.SdkMgr.I.sdkMsgCheck(o,function(){e=!0,i&&t.checkBack();}),b.SdkMgr.I.sdkMsgCheck(n,function(){i=!0,e&&t.checkBack();});},e.prototype.onNdBlack=function(){d.default.I.isOpenSDK()?l.EventClient.I.emit(c.AppEvent.SDKExitGame):(u.default.I.open(g.AppViewConst.AccountLoginView),this.close());},e.prototype.reqRealName=function(t,e){return s(this,void 0,void 0,function(){var i,o,n,r,s;return a(this,function(a){switch(a.label){case 0:return i=d.default.I.LoginHttpUri,o=i+y.RealName.ReqRealName,console.log(this._name,this._sdktype),n={userName:this._name,sdktype:this._sdktype,channel_id:this._channelId,idCard:e,realName:t},0===d.default.I.JumpType&&this._nameExt&&(n.userName=this._nameExt),console.log('请求实名认证',o,n),this.NdclickBtn.active=!1,[4,h.default.I.postAsync(o,n)];case 1:r=a.sent(),this.NdclickBtn.active=!0,r.errInfo&&f.default.Show(r.errInfo),s=null;try{s=JSON.parse(r.resultInfo),console.log('实名认证信息返回log',s);}catch(c){return console.error('实名认证信息, result:',r.resultInfo),f.default.Show(s.msg),[2];}return s.RealNameType,0===s.tag?(_.default.I.onReqLogin(this._name,this._pass),this.close()):f.default.Show(s.msg),[2];}});});},e.prototype.checkUseId=function(t){if(!/^(([1][1-5])|([2][1-3])|([3][1-7])|([4][1-6])|([5][0-4])|([6][1-5])|([7][1])|([8][1-2]))\d{4}(([1][9]\d{2})|([2]\d{3}))(([0][1-9])|([1][0-2]))(([0][1-9])|([1-2][0-9])|([3][0-1]))\d{3}[0-9xX]$/.test(t))return f.default.Show('请填写正确的\u201C身份证号\u201D'),!1;var e=t.substring(6,10),i=t.substring(10,12),o=t.substring(12,14),n=Date.parse(i+'-'+o+'-'+e),r=Date.parse(new Date().toString()),s=new Date(parseInt(e),parseInt(i),0).getDate();if(n>r||parseInt(o)>s)return f.default.Show('请填写正确的\u201C身份证号\u201D'),!1;var a=t.split('');return['1','0','X','9','8','7','6','5','4','3','2'].includes(a[17]);},r([w(cc.Node)],e.prototype,'NdclickBtn',void 0),r([w(cc.Node)],e.prototype,'NdBlack',void 0),r([w(cc.EditBox)],e.prototype,'EdName',void 0),r([w(cc.EditBox)],e.prototype,'EdNum',void 0),r([S],e);}(p.default);i.RealNameWin=R,cc._RF.pop();},{}],RenderImg:[function(t,e,i){'use strict';cc._RF.push(e,'2d925ZCiP9Otq16p9HThG0I','RenderImg'),Object.defineProperty(i,'__esModule',{value:!0}),i.RenderImg=void 0;var o=t('GameApp'),n=t('UtilColorFull'),r=t('UtilChar'),s=t('UtilColor'),a=t('UtilHtmlTextParser'),c=t('ResMgr'),l=t('CompUtil'),p=t('FrameBlockConst'),u=t('FBUtil'),h=t('UtilClk'),d=t('UtilsMain'),f=t('CCDynamicAtlasMgr'),y=t('UtilPaltform'),_=t('GradientColorIpad'),g=t('ColorFull'),m=new a.HtmlTextParser(),v=function(){function t(){this.labelPool=new cc.NodePool(),this.canvas=document.createElement('canvas'),this.ctx2d=null;}return Object.defineProperty(t,'I',{get:function(){return null==this._i&&(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype._measureText=function(t){return function(e){return cc.textUtils.safeMeasureText(t,e);};},t.prototype.richText2Img=function(t,e,i){var n,a,h,d,f,_,g,v,b,C,S,w,R,I,M,T,E;void 0===e&&(e=0),void 0===i&&(i=s.ColorType.COLORFUL);var A=t.string;y.UtilPaltform.isIOSWeChatGameTS&&(A=(A=(A=(A=(A=A.replace(/\u5145\u503c/g,'兑换')).replace(/\u8d2d\u4e70/g,'兑换')).replace(/\u5546\u57ce/g,'游戏')).replace(/\u5546\u5e97/g,'游戏')).replace(/SVIP/g,'VIP'));var P=m.parse(A),x=P.length;if(x){for(var L=0;L<x;L++)if(-1!==(null===(h=null===(a=null===(n=P[L])||void 0===n?void 0:n.style)||void 0===a?void 0:a.color)||void 0===h?void 0:h.indexOf(p.MultiColor.mulStr))){var k=null===(f=null===(d=P[L])||void 0===d?void 0:d.style)||void 0===f?void 0:f.color;k&&(P[L].style[p.MultiColor.multiColor]=k===p.MultiColor.light?1:2,delete P[L].style.color);}var O=p.RenderImgConst.defaultFont,N=t.fontSize;O=(null===(_=t._N$font)||void 0===_?void 0:_._fontFamily)?t._N$font._fontFamily:p.RenderImgConst.defaultFont;var D=t.lineHeight;D-N<4&&(D=N+4);var B='#rrggbbaa';o.default.I.isWechatIosIpad&&(B='#rrggbb');var U='#'+t.node.color.toHEX(B),F=t.maxWidth,j=u.FBUtil.getAddOffset(O);u.FBUtil.processIOS_RT(P,t),this.canvas||(this.canvas=document.createElement('canvas'));var V=this.canvas;null==this.ctx2d&&(this.ctx2d=V.getContext('2d')),this.ctx2d.clearRect(0,0,V.width,V.height);var G=N+'px '+O;this.ctx2d.font=G;var H,W=0,z=[],K=[],q=0;for(L=0;L<P.length;++L){var Y=P[L],J=Y.text;if(''===J){if(Y.style&&Y.style.newline){z.push(K),K=[];continue;}if(null===(g=null==Y?void 0:Y.style)||void 0===g?void 0:g.isImage){var X=t.node.getComponent('CustomRichText');if(X){var Z=Y.style.src,Q=X.addRichtextImage(Z),$=Q.size,tt=$.width,et=$.height;if(F>0){for(var it=0,ot=0;ot<K.length;ot++)it+=K[ot].width;it+tt>F&&(z.push(K),K=[]);}q+=tt,K.push({type:u.ElementType.image,text:Z,width:tt,height:et,node:Q.node});}continue;}}for(var nt=J.split('\n'),rt=0;rt<nt.length;++rt){rt>0&&(q=0);var st=nt[rt];if(''===st);else if(F>0){var at='',ct=s.UtilColor.B.White;ct=Y.style&&Y.style.color?Y.style.color:U;for(var lt=0,pt=0;q<=F&&lt<st.length;){var ut=this._getFirstWordLen(st,lt,st.length),ht=st.substr(lt,ut);G=(null===(v=null==Y?void 0:Y.style)||void 0===v?void 0:v.size)?Y.style.size+'px "'+O+'"':N+'px '+O,this.ctx2d.font=G;var dt=this.ctx2d.measureText(ht),ft=null==dt?void 0:dt.width;q+ft>F?(K.push({type:1,text:at,color:ct,style:Y.style,width:pt}),z.push(K),K=[],at=ht,q=ft,pt=ft,lt+=ut):(at+=ht,q+=ft,pt+=ft,lt+=ut);}at&&K.push({type:1,text:at,color:ct,style:Y.style,width:pt});}else{var yt=r.UtilChar.isEmojiCharacter(st),_t=this.ctx2d.measureText(yt);if(null==_t)return;ct=s.UtilColor.B.White,ct=Y.style?Y.style.color:U,K.push({type:1,text:st,color:ct,style:Y.style,width:_t.width});}rt!==nt.length-1&&(z.push(K),K=[]);}}K.length&&z.push(K);var gt=0;for(L=0;L<z.length;L++){for(tt=0,rt=0;rt<z[L].length;rt++)tt+=(jt=z[L][rt]).width,(null===(b=jt.style)||void 0===b?void 0:b.outline)&&(gt=1);W=tt>W?tt:W;}var mt=W<F?F:W;gt&&(mt+=2);var vt=H=D*z.length,bt=e||this._cvsScale(O),Ct=l.CompUtil.createRichTextUuid(t),St=mt*bt;if(c.ResMgr.I.getRendeerImgSpriteFrameCache(Ct+'_sf')){!e&&(vt*bt>2048||mt*bt>2048)&&(bt=1),t.node._lineWidth=W;var wt=c.ResMgr.I.getRendeerImgSpriteFrameCache(Ct+'_sf');this.setLabelSpriteFrame(t,wt,mt,vt,1,bt);var Rt=this._addLabelLayout2RT(t);Rt.destroyAllChildren(),Rt.removeAllChildren(),this._addRTclick(z,D,Rt,j,O,t);for(var It=[],Mt=(L=0,z.length);L<Mt;L++){var Tt=u.FBUtil.getHorizOffset(t,z[L],St);for(rt=0;rt<z[L].length;rt++)if((jt=z[L][rt]).type===u.ElementType.text){if(null===(C=jt.style)||void 0===C?void 0:C.multiColor){var Et=jt.style.multiColor!==p.MultiColorType.light;o.default.I.isWechatIosIpad&&this.addGradientLab(jt.text,Rt,{offsetX:Tt,offsetY:D*(L+j)*bt,w:jt.width,h:D,fontSize:N,fontFamily:O,lineHeight:D,underline:null===(S=jt.style)||void 0===S?void 0:S.underline,isDarkBg:Et,colorType:i});}Tt+=jt.width;}else jt.type===u.ElementType.image&&(jt.node&&It.push({node:jt.node,x:(Tt+jt.width/2)*bt,y:-D*L*bt}),Tt+=jt.width);}this._addImageNode(Rt,It,D);}else{if(V.width=St,V.height=vt*bt,!e&&(V.height>2048||V.width>2048))return this.ctx2d.clearRect(0,0,V.width,V.height),cc.sys.isBrowser&&this.canvas.remove(),this.ctx2d=null,this.canvas=null,void this.richText2Img(t,1);this.ctx2d.scale(bt,bt);var At=[],Pt=[];for(L=0,Mt=z.length;L<Mt;L++)for(Tt=u.FBUtil.getHorizOffset(t,z[L],V.width),rt=0;rt<z[L].length;rt++)if((jt=z[L][rt]).type===u.ElementType.text){if(null==jt?void 0:jt.color){var xt=jt.color;if(-1!==jt.color.indexOf('#'))(xt=s.UtilColor.Hex2Rgba(jt.color)).r,xt.g,xt.b;else{var Lt=xt.split(',');Number(Lt[0].split('rgba(')[1]),Number(Lt[1]),Number(Lt[2]);}}this.ctx2d.fillStyle=jt.color,G=(null===(w=null==jt?void 0:jt.style)||void 0===w?void 0:w.size)?jt.style.size+'px "'+O+'"':N+'px '+O,this.ctx2d.font=G,this.ctx2d.textBaseline='middle',this.ctx2d.textAlign='center',this.ctx2d.lineJoin='round';var kt=jt.text;if(kt||(kt=' '),null===(R=jt.style)||void 0===R?void 0:R.outline){var Ot=jt.style.outline.color;'string'==typeof Ot&&'#'==Ot[0]&&(Ot=s.UtilColor.Hex2Rgba(Ot)),this.ctx2d.strokeStyle='rgba('+Ot.r+','+Ot.g+','+Ot.b+','+Ot.a/255+')',this.ctx2d.fillStyle=jt.style.color||U,this.ctx2d.lineWidth=jt.style.outline.width*bt,this.ctx2d.strokeText(kt,Tt+jt.width/2,D*(L+j));}(null===(I=jt.style)||void 0===I?void 0:I.multiColor)&&(Et=jt.style.multiColor!==p.MultiColorType.light,o.default.I.isWechatIosIpad?(Pt.push({text:kt,offsetX:Tt,offsetY:D*(L+j)*bt,w:jt.width,h:D,fontSize:N,fontFamily:O,lineHeight:D,underline:null===(M=jt.style)||void 0===M?void 0:M.underline,isDarkBg:Et,colorType:i}),kt=' '):this.ctx2d.fillStyle=u.FBUtil.creatGradient({ctx2d:this.ctx2d,x0:0,y0:0,x1:0,y1:vt,isDarkBg:Et,colorType:i})),this.ctx2d.fillText(kt,Tt+jt.width/2,D*(L+j)),(null===(T=jt.style)||void 0===T?void 0:T.underline)&&' '!==kt&&(this.ctx2d.lineWidth=2,(null===(E=jt.style)||void 0===E?void 0:E.multiColor)?this.ctx2d.strokeStyle=u.FBUtil.creatGradient({ctx2d:this.ctx2d,x0:0,y0:0,x1:0,y1:vt,isDarkBg:!1,colorType:i}):this.ctx2d.strokeStyle=jt.color,this.ctx2d.beginPath(),this.ctx2d.moveTo(Tt,D*(L+j)+N/2),this.ctx2d.lineTo(Tt+jt.width,D*(L+j)+N/2),this.ctx2d.stroke()),Tt+=jt.width;}else jt.type===u.ElementType.image&&(jt.node&&At.push({node:jt.node,x:(Tt+jt.width/2)*bt,y:-D*L*bt}),Tt+=jt.width);var Nt=new cc.RenderTexture();cc.Texture2D.curPixel&&(Nt._format=cc.Texture2D.curPixel),Nt.initWithSize(V.width,V.height),Nt.getImpl().updateSubImage({x:0,y:0,image:V,width:V.width,height:V.height,level:0,flipY:!1,premultiplyAlpha:!0}),this._clearRichText(t);var Dt=this._addLabelLayout2RT(t),Bt=Dt.getComponent(cc.Sprite);Bt||((Bt=Dt.addComponent(cc.Sprite)).srcBlendFactor=cc.macro.ONE,Bt.dstBlendFactor=cc.macro.ONE_MINUS_SRC_ALPHA);var Ut=Ct;Nt._origin_uuid=Ct,Nt._uuid=Ut;var Ft=new cc.SpriteFrame(Nt);for(Ft._uuid=Ut+'_sf',Nt._framebuffer&&(Nt._framebuffer.destroy(),Nt._framebuffer=null),Ft.name='RTImg',Bt.spriteFrame=Ft,Dt.anchorX=t.node.anchorX,Dt.anchorY=t.node.anchorY,Dt.scale=1/bt,t.node._lineWidth=W,t.node.width=mt,t.node.height=H,t.handleTouchEvent=!1,Dt.destroyAllChildren(),this._addRTclick(z,D,Dt,j,O,t),this._addImageNode(Dt,At,D),L=0;L<Pt.length;L++){var jt=Pt[L];this.addGradientLab(jt.text,Dt,jt);}Ft._texture.packable=!0,V.width=V.height=0,this.ctx2d.clearRect(0,0,V.width,V.height),cc.sys.isBrowser&&this.canvas.remove(),this.ctx2d=null,this.canvas=null,c.ResMgr.I.addRendeerImgSpriteFrameCache(Ft);}}else t.node.destroyAllChildren();},t.prototype._cvsScale=function(){return o.default.I.canvasScale;},t.prototype._addLabelLayout2RT=function(t){var e=t.node.getChildByName(p.RenderImgConst.labelLayout);return e||(e=d.UtilsMainNode.newNameParentNode(p.RenderImgConst.labelLayout,t.node)),e;},t.prototype._addRTclick=function(t,e,i,o,n,r){for(var s,a=this._cvsScale(n),c=0-i.anchorX*i.width,l=i.height*(1-i.anchorY),u=0,f=t.length;u<f;u++)for(var y=0,_=t[u].length,g=function(f){var _=t[u][f],g=null===(s=null==_?void 0:_.style)||void 0===s?void 0:s.event;if(null==g?void 0:g.click){var v=c+y+_.width*a/2,b=l-e*(u+o)*a,C=p.RTconst.rtclick,S=d.UtilsMainNode.newNameParentNode(C,i);S.scale=a,S.width=_.width,S.height=e,S.x=v,S.y=b,g.param?(S[p.RTconst._clickHandler]=g.click,S[p.RTconst._clickParam]=g.param):(S[p.RTconst._clickHandler]=p.RTconst._clickHandler,S[p.RTconst._clickParam]=g.click.substring(1,g.click.length-1)),h.UtilClk.Click(S,function(t){r.node.getComponents(cc.Component).forEach(function(e){var i=e[S[p.RTconst._clickHandler]];e.enabledInHierarchy&&i&&i.call(e,t,S[p.RTconst._clickParam]);});},S,{closeSound:!0});}y+=_.width*m._cvsScale(n);},m=this,v=0;v<_;v++)g(v);},t.prototype._clearRichText=function(t){for(var e=t.node.children.length-1;e>=0;e--){var i=t.node.children[e];'RICHTEXT_CHILD'!==i.name&&'RICHTEXT_Image_CHILD'!==i.name||i.destroy();}},t.prototype.getTextMetricsWidth=function(t,e){if(void 0===e&&(e=!1),t){if(e){var i=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight;return o>0&&i>0?o+i:o;}return t.width;}return 0;},t.prototype.getTextMetricsWidthOffsetX=function(t,e){return void 0===e&&(e=!1),t&&e?this.getTextMetricsWidth(t,e)-t.width:0;},t.prototype.label2Img=function(t,e){var i,a,h,d,m;if(void 0===e&&(e=s.ColorType.COLORFUL),'--'!==(null===(i=t.getComponent('CCDAN'))||void 0===i?void 0:i.key)){var v=p.RenderImgConst.defaultFont;t.font instanceof cc.TTFFont&&((null===(a=t._N$file)||void 0===a?void 0:a._fontFamily)||'FZSHENGSKSJW'===(null===(h=t._N$file)||void 0===h?void 0:h.name))&&(v=t._N$file._fontFamily||cc.FZSHENGSKSJWNAME,y.UtilPaltform.isWeChatGame&&(v=cc.FZSHENGSKSJWNAME));var b=t.fontSize,C=s.UtilColor.Rgb2Hex(t.node.color);t.getMaterial(0)&&-1!==(null===(d=t.getMaterial(0))||void 0===d?void 0:d.name.indexOf('2d-gray-sprite'))&&(C=s.UtilColor.GrayColor);var S=t.lineHeight&&t.lineHeight>t.fontSize?t.lineHeight:t.fontSize,w=!!t.enableUnderline,R=t.overflow===cc.Label.Overflow.RESIZE_HEIGHT?t.node.width:-1,I=u.FBUtil.getContextAlign(t),M=t.getComponent(cc.LabelOutline),T=!!M,E=t.string?t.string:' ';y.UtilPaltform.isIOSWeChatGameTS&&(E=(E=(E=(E=(E=E.replace(/\u5145\u503c/g,'兑换')).replace(/\u8d2d\u4e70/g,'兑换')).replace(/\u5546\u57ce/g,'游戏')).replace(/\u5546\u5e97/g,'游戏')).replace(/SVIP/g,'VIP')),R>0&&R<b&&(R=b),this.canvas||(this.canvas=document.createElement('canvas'));var A=this.canvas;this.ctx2d=this.ctx2d?this.ctx2d:A.getContext('2d');var P=b+'px "'+v+'"';t.enableItalic&&(P='italic '+P),t.enableBold&&(P='bold '+P),this.ctx2d.clearRect(0,0,A.width,A.height),this.ctx2d.font=P;var x=0,L=0,k=[],O=[],N=[],D=E.split('\n');if(1===D.length&&R<=0){var B=r.UtilChar.isEmojiCharacter(E),U=this.ctx2d.measureText(B);if(null==U)return!1;O.push(E),L=S,x=this.getTextMetricsWidth(U,t.enableItalic),N.push(this.getTextMetricsWidthOffsetX(U,t.enableItalic)),k.push(x);}else{for(var F=0;F<D.length;F++){var j=D[F];if(R>0){var V=this.getTextMetricsWidth(this.ctx2d.measureText(j)),G=cc.textUtils.fragmentText(j,V,R,this._measureText(this.ctx2d));O=O.concat(G);for(var H=0;H<G.length;H++)k.push(this.getTextMetricsWidth(this.ctx2d.measureText(G[H])));L=O.length*S;}else{for(var W=j.split(''),z='',K=0,q=void 0,Y=0,J=(H=0,W.length);H<J;H++){var X=r.UtilChar.isEmojiCharacter(z+W[H]);q=this.ctx2d.measureText(X),K=this.getTextMetricsWidth(q,t.enableItalic),Y=this.getTextMetricsWidthOffsetX(q,t.enableItalic),N.push(Y),R>0&&K>R?(O.push(z),z='',k.push(K)):K>x&&(x=K),z+=W[H];}O.push(z),k.push(K),L=O.length*S,W=null,z='';}}R>0&&(x=R);}var Z=0;T&&(Z=2*M.width,L+=M.width*k.length+4),w&&(o.default.I.isWechatIosIpad?L+=2:L+=4);var Q=L+2,$=x+Z,tt=this._cvsScale(v),et=l.CompUtil.createLabelUuid(t);if(!c.ResMgr.I.getRendeerImgSpriteFrameCache(et+'_sf')){A.width=$*tt,A.height=Q*tt,this.ctx2d.fillStyle='rgba('+t.node.color.r+', '+t.node.color.g+', '+t.node.color.b+', 0.003)',this.ctx2d.fillRect(0,0,A.width,A.height),this.ctx2d.fillStyle=C,this.ctx2d.lineJoin='round',this.ctx2d.font=P,this.ctx2d.textBaseline='middle',this.ctx2d.textAlign=I,this.ctx2d.scale(this._cvsScale(v),this._cvsScale(v));var it=0.63;for(v!==p.RenderImgConst.defaultFont&&(it='FZSHENGSKSJW_LABEL'===v?0.45:0.5),cc.sys.isNative&&cc.sys.os===cc.sys.OS_IOS&&(it=0.35),H=0,J=O.length;H<J;H++){var ot=O[H],nt=u.FBUtil.getAnchrX(I,$,Z/2);N[H]&&(nt-=N[H]);var rt=S*(H+it);if(T&&(rt=S*(H+it)+M.width*this._cvsScale(v)),T){var st=t.getComponent(cc.LabelOutline),at=st.color;this.ctx2d.strokeStyle='rgba('+at.r+','+at.g+','+at.b+','+at.a/255+')',this.ctx2d.lineWidth=2*st.width;var ct=b+'px "'+v+'"';this.ctx2d.font=ct,this.ctx2d.strokeText(ot,nt,rt);}var lt=t[''+n.UtilColorFull.ISCOLORFULL],pt=null,ut=t.node.getCom(g.default),ht=void 0;lt||(pt=null==ut?void 0:ut.isColorFull,ht=null==ut?void 0:ut.colorsHex);var dt=pt||lt;if(dt){var ft,yt=!1;if(pt&&(yt=ut.isDarkBg),lt&&(yt=t[''+n.UtilColorFull.ISDARKBG]),ft=Q,o.default.I.isWechatIosIpad){t.node.color=new cc.Color().fromHEX(s.UtilColor.B.White),(It=t.node.getCom(_.default))||(It=t.node.addComponent(_.default));var _t=(ht=(null==ht?void 0:ht.length)>0?ht:s.UtilColor.GetColor_S(s.ColorType.COLORFUL,yt)).map(function(t){return cc.color().fromHEX(t);});It.colors=_t,It.type=(null==ut?void 0:ut.type)||It.type;}else this.ctx2d.fillStyle=u.FBUtil.creatGradient({ctx2d:this.ctx2d,x0:0,y0:0,x1:0,y1:ft,isDarkBg:yt,colorType:e,clist:null==ut?void 0:ut.colorsHex});}else{var gt=t.node.getCom(_.default);gt&&(gt.flagDestroy=!0,gt.destroy(),t.node._removeComponent(gt));}this.ctx2d.fillText(ot,nt,rt);var mt=k[H];if(w){var vt=nt-=u.FBUtil.getAnchrX(I,mt,0),bt=vt+mt,Ct=S*(H+1)-(o.default.I.isWechatIosIpad?-2:-4);this.ctx2d.lineWidth=(t.underlineHeight||1)*this._cvsScale(v),this.ctx2d.strokeStyle=dt?u.FBUtil.creatGradient({ctx2d:this.ctx2d,x0:0,y0:0,x1:$,y1:0,isDarkBg:!1,colorType:e,clist:null==ut?void 0:ut.colorsHex}):C,this.ctx2d.beginPath(),this.ctx2d.moveTo(vt,Ct),this.ctx2d.lineTo(bt,Ct),this.ctx2d.stroke();}}var St=new cc.RenderTexture();cc.Texture2D.curPixel&&(St._format=cc.Texture2D.curPixel),St.initWithSize(A.width,A.height),A&&St.getImpl().updateSubImage({x:0,y:0,image:A,width:A.width,height:A.height,level:0,flipY:!1,premultiplyAlpha:!1}),A.width=A.height=0,this.ctx2d.clearRect(0,0,A.width*this._cvsScale(v),A.height*this._cvsScale(v));var wt=et,Rt=new cc.SpriteFrame(St);return Rt._uuid=wt+'_sf',St._uuid=wt,St._origin_uuid=et,Rt.name='LabImg',Rt&&this.setLabelSpriteFrame(t,Rt,$,Q,0,tt),t._N$file&&(null==t?void 0:t.font)instanceof cc.TTFFont&&f.CCDynamicAtlasMgr.I.packToDynamicAtlas(t,Rt),!1;}var It,Mt=c.ResMgr.I.getRendeerImgSpriteFrameCache(et+'_sf');!1!==t[''+n.UtilColorFull.ISCOLORFULL]&&Mt._GradientColorIpad?(t.node.color=new cc.Color().fromHEX(s.UtilColor.B.White),(It=t.node.getCom(_.default))||(It=t.node.addComponent(_.default)),It.colors=Mt._GradientColorIpad,It.type=(null===(m=t.node.getCom(g.default))||void 0===m?void 0:m.type)||It.type):(It=t.node.getCom(_.default))&&(It.destroy(),It.flagDestroy=!0,t.node._removeComponent(It)),this.setLabelSpriteFrame(t,Mt,$,Q,0,tt);}},t.prototype.setLabelSpriteFrame=function(t,e,i,r,a,l){if((null==t?void 0:t.node)&&cc.isValid(t.node)){var h=t.node.getChildByName(p.RenderImgConst.labelLayout);h||(null==(h=this.labelPool.get())&&(h=u.FBUtil.createSpriteNode()),h.parent=t.node);var d=h.getComponent(cc.Sprite);if(d.trim=!1,d.sizeMode=cc.Sprite.SizeMode.RAW,d.spriteFrame=e,h.anchorX=t.node.anchorX,h.anchorY=t.node.anchorY,h.width=e.getRect().width,h.height=e.getRect().height,h.color=new cc.Color().fromHEX(s.UtilColor.B.White),h.scale=1/l,t.node.width=i,t.node.height=r,d.sizeMode=cc.Sprite.SizeMode.RAW,d.srcBlendFactor=a?cc.macro.ONE:cc.macro.SRC_ALPHA,e._texture.packable=!0,o.default.I.isWechatIosIpad){var f=t.node.getCom(_.default);!1!==t[''+n.UtilColorFull.ISCOLORFULL]&&f?(d._GradientColorIpad=!!f,e._GradientColorIpad=f&&f.colors):(d._GradientColorIpad=!1,e._GradientColorIpad=null);}c.ResMgr.I.addRendeerImgSpriteFrameCache(e);}return!1;},t.prototype._richTextWithImg=function(t,e){if(null==t?void 0:t.length){for(var i=e.getImpl()._device._gl,o=i.getParameter(i.FRAMEBUFFER_BINDING),n=i.createFramebuffer(),r=0,s=t.length;r<s;r++){var a=t[r],c=a.img.getTexture()._texture;if(c){var l=a.img.getRect();i.bindFramebuffer(i.FRAMEBUFFER,n),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,c._glID,0),i.bindTexture(i.TEXTURE_2D,e.getImpl()._glID),i.copyTexSubImage2D(i.TEXTURE_2D,0,a.dstrt.x,a.dstrt.y,l.x,l.y,a.dstrt.width,a.dstrt.height),i.bindTexture(i.TEXTURE_2D,null);}}i.bindFramebuffer(i.FRAMEBUFFER,o),i.deleteFramebuffer(n);}},t.prototype._getFirstWordLen=function(t,e,i){return cc.textUtils._getFirstWordLen(t,e,i);},t.prototype._addImageNode=function(t,e,i){if(e.length)for(var o=this._cvsScale(),n=-0.5*t.width,r=(t.height-i*o)/2,s=0;s<e.length;s++)e[s].node.scale=o,e[s].node.x=n+e[s].x,e[s].node.y=r+e[s].y,t.addChild(e[s].node);},t.prototype.addGradientLab=function(t,e,i){var o=this._cvsScale(),r=new cc.Node();r.parent=e,r.name='GradientLab',r.scale=o;var a=r.addComponent(cc.Label);a.string=t,a.fontFamily=i.fontFamily,a.fontSize=i.fontSize,a.lineHeight=i.lineHeight,a.node.width=i.w,a.node.height=i.h;var c=0-e.anchorX*e.width+i.offsetX*o;c+=i.w*o/2,a.node.x=c;var l=e.height*(1-e.anchorY)-i.offsetY+2*o;i.underline&&(l-=2),a.node.y=l,a.enableUnderline=!!i.underline,a.node.color=new cc.Color(255,255,255,255);var p=a.node.addComponent(_.default),u=s.UtilColor.GetColor_S(i.colorType,i.isDarkBg).map(function(t){return cc.color().fromHEX(t);});p.colors=u,p.type=_.GradientType.VERTICAL,a[''+n.UtilColorFull.ISDARKBG]=i.isDarkBg,a[''+n.UtilColorFull.ISCOLORFULL]=!0;},t._i=null,t;}();i.RenderImg=v,cc._RF.pop();},{}],ResConst:[function(t,e,i){'use strict';cc._RF.push(e,'8a27axacyZKYbmup7uBbEE6','ResConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.ESpriteAtlasSuffix=i.EAssetTypeSuffix=i.ESuffix=i.AssetType=i.BigAssetType=i.EBundleType=void 0,function(t){t.resources='resources',t.extend='extend',t.subpack='subpack',t.poco='poco',t.simulator='simulator';}(i.EBundleType||(i.EBundleType={})),function(t){t[t.SpriteFrame=10]='SpriteFrame',t[t.Texture2D=20]='Texture2D',t[t.Json=30]='Json',t[t.Text=40]='Text',t[t.Font=50]='Font',t[t.Prefab=60]='Prefab',t[t.AudioClip=70]='AudioClip',t[t.Material=80]='Material',t[t.Plist=90]='Plist',t[t.SpriteAtlas=100]='SpriteAtlas',t[t.Spine=120]='Spine',t[t.TiledMap=130]='TiledMap';}(i.BigAssetType||(i.BigAssetType={})),function(t){t[t.SpriteFrame=10]='SpriteFrame',t[t.SpriteFrame_astc=11]='SpriteFrame_astc',t[t.SpriteFrame_jpg=12]='SpriteFrame_jpg',t[t.Texture2D=20]='Texture2D',t[t.Texture2D_jpg=21]='Texture2D_jpg',t[t.Json=30]='Json',t[t.Text=40]='Text',t[t.Text_bin=41]='Text_bin',t[t.Font=50]='Font',t[t.Prefab=60]='Prefab',t[t.AudioClip=70]='AudioClip',t[t.AudioClip_wav=71]='AudioClip_wav',t[t.AudioClip_wma=72]='AudioClip_wma',t[t.AudioClip_ogg=73]='AudioClip_ogg',t[t.AudioClip_flac=74]='AudioClip_flac',t[t.Material=80]='Material',t[t.Plist=90]='Plist',t[t.Plist_frame=91]='Plist_frame',t[t.SpriteAtlas=100]='SpriteAtlas',t[t.SpriteAtlas_pd=101]='SpriteAtlas_pd',t[t.SpriteAtlas_json=102]='SpriteAtlas_json',t[t.SpriteAtlas_mergeJson=103]='SpriteAtlas_mergeJson',t[t.SpriteAtlas_astc=104]='SpriteAtlas_astc',t[t.SpriteAtlas_mergeJson_astc=105]='SpriteAtlas_mergeJson_astc',t[t.Gif=110]='Gif',t[t.Spine=120]='Spine',t[t.Spine_astc=121]='Spine_astc',t[t.TiledMap=130]='TiledMap';}(i.AssetType||(i.AssetType={})),function(t){t.Png='png',t.Jpg='jpg',t.Json='json',t.Txt='txt',t.Bin='bin',t.Fnt='fnt',t.Prefab='prefab',t.Mp3='mp3',t.Wav='wmv',t.Wma='Wma',t.Ogg='ogg',t.Flac='flac',t.Material='material',t.Plist='plist',t.Frame='frame',t.Pd='pd',t.Astc='astc',t.Gif='gif',t.Atlas='atlas',t.TiledMap='tmx';}(i.ESuffix||(i.ESuffix={})),function(t){t.SpriteFrame='png',t.SpriteFrame_jpg='jpg',t.Texture2D='png',t.Texture2D_jpg='jpg',t.Json='json',t.Text='txt',t.Text_bin='bin',t.Font='fnt',t.Prefab='prefab',t.AudioClip='mp3',t.AudioClip_wav='wmv',t.AudioClip_wma='Wma',t.AudioClip_ogg='ogg',t.AudioClip_flac='flac',t.Material='material',t.Plist='plist',t.Plist_frame='frame',t.SpriteAtlas='png',t.SpriteAtlas_pd='pd',t.SpriteAtlas_json='png',t.SpriteAtlas_mergeJson='png',t.SpriteAtlas_astc='astc',t.SpriteAtlas_mergeJson_astc='astc',t.Gif='gif',t.Spine='png',t.Spine_astc='astc',t.SpriteFrame_astc='astc',t.TiledMap='tmx';}(i.EAssetTypeSuffix||(i.EAssetTypeSuffix={})),function(t){t.SpriteAtlas='plist',t.SpriteAtlas_json='json',t.SpriteAtlas_mergeJson='json',t.SpriteAtlas_pd='frame',t.SpriteAtlas_astc='json',t.SpriteAtlas_mergeJson_astc='json',t.Spine='atlas',t.Spine_astc='atlas';}(i.ESpriteAtlasSuffix||(i.ESpriteAtlasSuffix={})),cc._RF.pop();},{}],ResLoadAudioClip:[function(t,e,i){'use strict';cc._RF.push(e,'32205IDLp1HiK4LaJwOnh5g','ResLoadAudioClip');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadAudioClip=void 0;var a=function(t){function e(){return t.call(this,'AudioClip')||this;}return n(e,t),e.prototype.loadRemote=function(t,e,i,o){for(var n=this,r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];this.resMgr._loadRemote(t,function(a,c){if(!a){var l=n.getCache(t);l?(c.decRef(),c=l):n.addCache(t,c);}n.doCallback.apply(n,s([a,c,e,i,o],r));});},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadAudioClip=a,cc._RF.pop();},{}],ResLoadBase:[function(t,e,i){'use strict';cc._RF.push(e,'daa56IX6QBMlqGL8+Zx+2pu','ResLoadBase');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadBase=void 0;var r=t('ResMgr'),s=function(){function t(t){this._resMgr=null,this.caches=cc.js.createMap(!0),this.cacheCount=0,this.name='ResLoadBase',this.name=t||this.name;}return Object.defineProperty(t.prototype,'resMgr',{get:function(){return this._resMgr?this._resMgr:(this._resMgr=r.ResMgr.I,this._resMgr);},enumerable:!1,configurable:!0}),t.prototype.loadRemote=function(t,e,i,o){for(var r,s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];(r=this.resMgr)._loadRemote.apply(r,n([t,this.loadResult,this,t,e,i,o],s));},t.prototype.load=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];var a=this.getCache(t);a?this.complete.apply(this,n([void 0,a,i,o,e],r)):this.loadRemote.apply(this,n([t,i,o,e],r));},t.prototype.complete=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];this.doCallback.apply(this,n([t,e,i,o],r));},t.prototype.loadResult=function(t,e,i,o,r,s){for(var a=[],c=6;c<arguments.length;c++)a[c-6]=arguments[c];if(!t){var l=this.getCache(i);l?(e!==l&&(console.log(this.name,'缓存中有\uFF0C把当前这个释放掉=',e._uuid,'计数=',e.refCount),this.resMgr.decRef(e),e=null),e=l):this.addCache(i,e);}this.complete.apply(this,n([t,e,o,r,s],a));},t.prototype.addCache=function(t,e){this.caches[t]||(e.addRef&&(this.log(this.name,'添加缓存=',e._uuid,'计数=',e.refCount),e.addRef()),this.caches[t]=e,this.cacheCount++);},t.prototype.delCache=function(t){for(var e in this.caches)if(this.caches[e]._uuid===t)return this.log(this.name,'删除缓存\uFF0C在这里不减计数=',this.caches[e]._uuid,'计数=',this.caches[e].refCount),delete this.caches[e],this.cacheCount--,!0;return!1;},t.prototype.getCache=function(t){var e=this.caches[t];if(e&&(!e.addRef||e.isValid)){if(e.addRef){if(this.log(this.name,'获取缓存=',e._uuid,'计数=',e.refCount),'SpriteFrame'===this.name){var i=e.getTexture();if(!i||!i.isValid)return;i.addRef();}e.addRef();}return e;}e&&e.addRef&&console.warn('texture cache not found asset path: ',this.name,t);},t.prototype.doCallback=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];i&&(o?i.call.apply(i,n([o,t,e],r)):i.apply(void 0,n([t,e],r)));},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];},t;}();i.ResLoadBase=s,cc._RF.pop();},{}],ResLoadInfo:[function(t,e,i){'use strict';cc._RF.push(e,'290a8bqIq5Fs4FE6iwwPJxS','ResLoadInfo'),Object.defineProperty(i,'__esModule',{value:!0}),i.LoadInfo=void 0;var o=t('UtilsMain'),n=t('ResConst'),r=function(){function t(t,e){if(void 0===e&&(e=n.ESuffix.Png),this._pathNoSuffix=[],this._mergeJsonPathNoSuffix=[],this._pathNum=0,this._name='',this._suffix='',this._plistSuffix='',this.isCopy=!1,this.retry=0,this.priority=0,this._pathWithSuffix='',this._plistWithSuffix='',t){if('string'==typeof t)this._name=o.UtilsMainStr.GetFileName(t),this._pathNoSuffix=[t],t.indexOf('action')>=0&&(this._mergeJsonPathNoSuffix=[o.UtilsMainStr.ReplaceFileNameForAnim(t,'_cfg')]);else{this._name=o.UtilsMainStr.GetFileName(t[0]),this._pathNoSuffix=t,this._mergeJsonPathNoSuffix=[];for(var i=0;i<t.length;i++)t[i].indexOf('action')>=0&&this._mergeJsonPathNoSuffix.push(o.UtilsMainStr.ReplaceFileNameForAnim(t[i],'_cfg'));}this._suffix=e;}}return Object.defineProperty(t.prototype,'pathNum',{get:function(){return this._pathNum||(this._pathNum=this._pathNoSuffix.length),this._pathNum;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'name',{get:function(){return this._name;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'plistSuffix',{get:function(){if(!this._plistSuffix){var t=n.AssetType[this.type];this._plistSuffix=n.ESpriteAtlasSuffix[t];}return this._plistSuffix;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'path',{get:function(){return this._pathWithSuffix||(this._pathWithSuffix=this.getPathByIndex()),this._pathWithSuffix;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'pathWithNoSuffix',{get:function(){return''+(this._pathNoSuffix[0]||'');},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'plist',{get:function(){return this._plistWithSuffix||(this._plistWithSuffix=this.getPlistByIndex()),this._plistWithSuffix;},enumerable:!1,configurable:!0}),t.prototype.getPathByIndex=function(t){return void 0===t&&(t=0),(this._pathNoSuffix[t]||'')+'.'+this._suffix;},t.prototype.getPathNoSuffixByIndex=function(t){return void 0===t&&(t=0),this._pathNoSuffix[t]||'';},t.prototype.getPlistByIndex=function(t){return void 0===t&&(t=0),(this._pathNoSuffix[t]||'')+'.'+this.plistSuffix;},t.prototype.getMergeJsonPath=function(t){return void 0===t&&(t=0),(this._mergeJsonPathNoSuffix[t]||'')+'.'+this.plistSuffix;},t.GetSuffixByType=function(t){var e=n.AssetType[t];return n.EAssetTypeSuffix[e];},t;}();i.LoadInfo=r,cc._RF.pop();},{}],ResLoadLocal:[function(t,e,i){'use strict';cc._RF.push(e,'ad39aqIsNNE4peicedUUQAA','ResLoadLocal');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadLocal=void 0;var r=t('UtilLog'),s=t('BundleMgr'),a=t('ResConst'),c=function(){function t(t){this.caches=cc.js.createMap(!0),this.name=a.EBundleType.resources,this.preloadPaths=[],this.name=t;}return t.prototype.load=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];Array.isArray(t)?this.loads.apply(this,n([t,e,i,o],r)):this._load.apply(this,n([t,e,i,o],r));},t.prototype._editorLoad=function(t,e,i,o){for(var r=this,s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];Editor.assetdb.queryUuidByUrl('db://assets/subpack/'+t+'.'+e.name.toLowerCase().substr(3),function(e,a){!e&&a&&cc.AssetLibrary.loadAsset(a,function(e,a){r.loadResult.apply(r,n([void 0,a,t,i,o],s));});});},t.prototype._load=function(t,e,i,o){for(var r=this,c=[],l=4;l<arguments.length;l++)c[l-4]=arguments[l];var p=this.getCache(t);p?this.loadResult.apply(this,n([void 0,p,t,i,o],c)):this.name===a.EBundleType.resources?cc.resources.load(t,e,function(e,s){r.loadResult.apply(r,n([e,s,t,i,o],c));}):s.default.I.load(this.name,function(s,a){a?r.loadBundleResult.apply(r,n([a,t,e,i,o],c)):(console.warn('not found bundler err:'+r.name),r.doCallback.apply(r,n([s,void 0,i,o],c)));});},t.prototype.loads=function(t,e,i,o){for(var r=this,s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];var c=[],l=0;t.forEach(function(a,p){r._load(a,e[p],function(e,a){e?r.loadResult.apply(r,n([e,c,t,i,o],s)):(l++,c[p]=a,l>=t.length&&r.loadResult.apply(r,n([e,c,t,i,o],s)));},r);});},t.prototype.doCallback=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];i&&(o?i.call.apply(i,n([o,t,e],r)):i.apply(void 0,n([t,e],r)));},t.prototype.preload=function(t,e,i){void 0===i&&(i=!1),this.getCache(t)||(cc.resources.preload(t,e),this.preloadPaths.push(t)),i&&this.load(t,e,void 0);},t.prototype.delPreLoad=function(t){var e=this.preloadPaths.indexOf(t);e>=0&&this.preloadPaths.splice(e,1),this.delCache(t);},t.prototype.loadResult=function(t,e,i,o,s){for(var a=this,c=[],l=5;l<arguments.length;l++)c[l-5]=arguments[l];var p=e;t&&(console.warn('resources.load Error:',t),r.UtilLog.I.collectErr('本地资源加载错误','',0,0,t));var u=[],h=[];p&&(Array.isArray(p)?(u=p,h=i):(u.push(p),h.push(i))),u.forEach(function(t,e){var i=a.preloadPaths.indexOf(h[e]);i>=0&&(a.addCache(h[e],t),a.preloadPaths.splice(i,1));}),this.doCallback.apply(this,n([void 0,p,o,s],c)),u.forEach(function(t){0===t.refCount&&t.decRef();});},t.prototype.loadBundleResult=function(t,e,i,o,r){for(var s=this,a=[],c=5;c<arguments.length;c++)a[c-5]=arguments[c];t.load(e,i,function(t,i){t&&console.warn('load prefab err:',t),s.loadResult.apply(s,n([t,i,e,o,r],a));});},t.prototype.addCache=function(t,e){this.caches[t]||(e.addRef&&e.addRef(),this.caches[t]=e);},t.prototype.delCache=function(t){for(var e in this.caches)if(this.caches[e]._uuid===t)return this.caches[e].decRef(),delete this.caches[e],!0;return!1;},t.prototype.getCache=function(t){var e=this.caches[t];return e&&e.isValid?(e.addRef(),e):void(e&&console.warn('texture cache not found asset path: ',t));},t.prototype.isPreload=function(t){return this.preloadPaths.indexOf(t)>=0;},t;}();i.ResLoadLocal=c,cc._RF.pop();},{}],ResLoadPlist:[function(t,e,i){'use strict';cc._RF.push(e,'83e112UNfJIO51cBAVeXn1P','ResLoadPlist');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadPlist=void 0;var a=t('UtilsMain'),c=function(t){function e(){return t.call(this,'IPlistAsset')||this;}return n(e,t),e.prototype.isPlistJson=function(t){var e=!1;for(var i in t)if('string'==typeof t[i]){e=!0;break;}return e;},e.prototype.complete=function(t,e,i,o,n,r){for(var a,c=[],l=6;l<arguments.length;l++)c[l-6]=arguments[l];if(!t){var p='';if(a=r?e[p=r+'.json']:e,this.isPlistJson(a)){var u=this.jsonToPlist(a);u&&(p&&(e[p]=u),a=u);}}this.doCallback.apply(this,s([t,a,i,o,n],c));},e.prototype.loadResult=function(t,e,i,o,n,r){for(var a,c=[],l=6;l<arguments.length;l++)c[l-6]=arguments[l];t?this.complete.apply(this,s([t,a,o,n,r],c)):(a=this.getCache(i),(null==e?void 0:e.json)?(a||(a=e.json,this.addCache(i,a)),this.complete.apply(this,s([t,a,o,n,r],c))):(a||((a=this.getPlistByObject(e))?this.addCache(i,a):t=new Error('plist is null')),this.doCallback.apply(this,s([t,a,o,n,r],c))),e&&e.decRef());},e.prototype.jsonToPlist=function(t){var e;for(var i in t){e=e||cc.js.createMap(!0);var o=t[i],n=this.transPlist(o);e[i]=n;}return e;},e.prototype.transPlist=function(t){var e=cc.js.createMap(!0),i=t.split(',');return e.Rotated=1==+i[0],e.Frame=[[+i[1],+i[2]],[+i[3],+i[4]]],e.Offset=[+i[5],+i[6]],e.SourceSize=[+i[7],+i[8]],e;},e.prototype.getPlistByObject=function(t){if(t&&t._nativeAsset){var e=cc.js.createMap(!0),i=t._nativeAsset.frames;for(var o in i){var n=i[o],r={};n.frame=n.frame.replace(/{/g,'[').replace(/}/g,']'),r.Frame=JSON.parse(n.frame),n.offset=n.offset.replace('{','[').replace('}',']'),r.Offset=JSON.parse(n.offset),r.Rotated=n.rotated,n.sourceSize=n.sourceSize.replace('{','[').replace('}',']'),r.SourceSize=JSON.parse(n.sourceSize),n=null,e[o.split('.')[0]]=r;}return e;}if(t&&t.json){for(var o in(e={},i=t.json)){var s=i[o];e[o]=this.transPlist(s),s=null;}return e;}},e.prototype.getEditorSkillFrame=function(t,e){var i=a.UtilsMainStr.ReplaceFileNameForAnim(t,'_cfg')+'.json',o=(a.UtilsMainStr.ReplaceFileNameForAnim(t,'_action')+'.json').split('/'),n=''+o[o.length-1],r=this.getCache(i);return r&&r[n]?r[n][e]:[];},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadPlist=c,cc._RF.pop();},{}],ResLoadSpine:[function(t,e,i){'use strict';cc._RF.push(e,'f8486GT5xxMcqBwNLLZIJJD','ResLoadSpine');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadSpine=void 0;var a=function(t){function e(){return t.call(this,'sp.SkeletonData')||this;}return n(e,t),e.prototype.loadRemote=function(t,e,i,o){for(var n=this,r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];for(var c=function(t){var a=o.getPathNoSuffixByIndex(t),c=a+'.atlas',p=a+'.json',u=o.getPathByIndex(t),h=cc.js.createMap(!0),d=!1;l.resMgr._loadRemote(c,function(t,l){if(d)n.clearAsset(h,l);else{if(t)return d=!0,n.clearAsset(h),void n.loadResult.apply(n,s([t,void 0,c,e,i,o],r));h.atlas=l,d=n.loadSpinResult.apply(n,s([a,h,e,i,o],r));}},l),l.resMgr._loadRemote(p,function(t,c){if(d)n.clearAsset(h,c);else{if(t)return d=!0,n.clearAsset(h),void n.loadResult.apply(n,s([t,void 0,p,e,i,o],r));h.json=c,d=n.loadSpinResult.apply(n,s([a,h,e,i,o],r));}},l),l.resMgr._loadRemoteExt(u,{noWebp:1},function(t,c){if(d)n.clearAsset(h,c);else{if(t)return d=!0,n.clearAsset(h),void n.loadResult.apply(n,s([t,void 0,u,e,i,o],r));c.addRef(),h.texture=c,d=n.loadSpinResult.apply(n,s([a,h,e,i,o],r));}},l);},l=this,p=0;p<o.pathNum;p++)c(p);},e.prototype.clearAsset=function(t,e){var i,o;t&&(null===(i=t.atlas)||void 0===i||i.decRef(),null===(o=t.json)||void 0===o||o.decRef(),t.texture&&t.texture.decRef(),t.atlas=null,t.json=null,t.texture=null,t=cc.js.createMap(!0)),null==e||e.decRef();},e.prototype.loadSpinResult=function(t,e,i,o,n){for(var r=[],a=5;a<arguments.length;a++)r[a-5]=arguments[a];var c=!1,l=this.getCache(t);return l?(c=!0,this.doCallback.apply(this,s([void 0,l,i,o,n],r)),this.clearAsset(e)):e.atlas&&e.json&&e.texture&&((l=new sp.SkeletonData()).skeletonJson=e.json.json,l.atlasText=e.atlas.text,l.textures=[e.texture],l._uuid=e.texture._uuid,e.texture.addRef(),this.clearAsset(e),this.loadResult.apply(this,s([void 0,l,t,i,o,n],r))),c;},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadSpine=a,cc._RF.pop();},{}],ResLoadSpriteAtlas:[function(t,e,i){'use strict';cc._RF.push(e,'74a32mn3MhNzpAIVejzPp4x','ResLoadSpriteAtlas');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadSpriteAtlas=void 0;var a=t('ResConst'),c=function(t){function e(){return t.call(this,'SpriteAtlas')||this;}return n(e,t),e.prototype.loadRemote=function(t,e,i,o){for(var n=this,r=[],c=4;c<arguments.length;c++)r[c-4]=arguments[c];var l=cc.js.createMap(!0);l.plists=[],l.textures=[],l.num=o.pathNum;for(var p=!1,u=function(c){var u=o.getPathByIndex(c);if(h.resMgr.loadTexture(u,o,function(a,h){if(p)n.clearAsset(l,h);else{if(a)return p=!0,n.clearAsset(l),void n.loadResult.apply(n,s([a,void 0,u,e,i,o],r));l.textures[c]=h,p=n.loadSpriteAtlasResult.apply(n,s([t,o,l,e,i],r));}}),o.type===a.AssetType.SpriteAtlas_mergeJson||o.type===a.AssetType.SpriteAtlas_mergeJson_astc){var d=o.getMergeJsonPath(c);h.resMgr.loadPlist(d,o,function(a,u){if(p)n.clearAsset(l);else{if(a)return p=!0,n.clearAsset(l),void n.loadResult.apply(n,s([a,void 0,d,e,i,o],r));l.plists[c]=u,p=n.loadSpriteAtlasResult.apply(n,s([t,o,l,e,i],r));}},void 0,o.name);}else{var f=o.getPlistByIndex(c);h.resMgr.loadPlist(f,o,function(a,u){if(p)n.clearAsset(l);else{if(a)return p=!0,n.clearAsset(l),void n.loadResult.apply(n,s([a,void 0,f,e,i,o],r));l.plists[c]=u,p=n.loadSpriteAtlasResult.apply(n,s([t,o,l,e,i],r));}});}},h=this,d=0,f=o.pathNum;d<f;d++)u(d,f);},e.prototype.isLoadComplete=function(t){var e=0;for(var i in t.textures)e+=1;if(t.num!==e)return!1;var o=0;for(var i in t.plists)o+=1;return t.num===o;},e.prototype.loadSpriteAtlasResult=function(t,e,i,o,n){for(var r,a=[],c=5;c<arguments.length;c++)a[c-5]=arguments[c];var l=!1,p=this.getCache(t);if(p)l=!0,this.complete.apply(this,s([void 0,p,o,n,e],a)),this.clearAsset(i);else if(this.isLoadComplete(i)){for(var u in((p=this.getSpriteAtlasByPlists(i.textures,i.plists)).name=e.name,i.textures))null===(r=i.textures[+u])||void 0===r||r.addRef();this.clearAsset(i),this.loadResult.apply(this,s([void 0,p,t,o,n,e],a));}return l;},e.prototype.getSpriteAtlasByPlists=function(t,e){var i=this,o=new cc.SpriteAtlas();return Array.isArray(t)&&Array.isArray(e)?e.forEach(function(e,n){i.assembleSpriteAtlas(o,t[n],e);}):Array.isArray(t)||Array.isArray(e)||this.assembleSpriteAtlas(o,t,e),o;},e.prototype.assembleSpriteAtlas=function(t,e,i){for(var o in i){var n=i[o],r=n.Frame,s=n.Offset,a=n.SourceSize,c=cc.rect(r[0][0],r[0][1],r[1][0],r[1][1]),l=cc.v2(s[0],s[1]),p=cc.size(a[0],a[1]),u=new cc.SpriteFrame(e,c,n.Rotated,l,p);u.addRef(),u.name=o,t._spriteFrames[o]=u,n=null,r=null,s=null,a=null;}return t._uuid=t._uuid||e._uuid,t;},e.prototype.clearAsset=function(t,e){if(t){for(var i in t.textures){var o=t.textures[+i];o&&o.decRef();}t.textures=[],t.plists=[];}null==e||e.decRef();},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadSpriteAtlas=c,cc._RF.pop();},{}],ResLoadSpriteFrame:[function(t,e,i){'use strict';cc._RF.push(e,'e1ac9Os9z1CgZoPId8OOhIy','ResLoadSpriteFrame');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadSpriteFrame=void 0;var a=function(t){function e(){return t.call(this,'SpriteFrame')||this;}return n(e,t),e.prototype.loadRemote=function(t,e,i,o){for(var n,r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];(n=this.resMgr).loadTexture.apply(n,s([t,o,this.loadTextureResult,this,t,e,i],r));},e.prototype.loadTextureResult=function(t,e,i,o,n,r){for(var a,c=[],l=6;l<arguments.length;l++)c[l-6]=arguments[l];t||((a=this.getCache(o))?this.resMgr.decRef(e):((a=new cc.SpriteFrame()).setTexture(e),e.setWrapMode(cc.Texture2D.WrapMode.CLAMP_TO_EDGE,cc.Texture2D.WrapMode.CLAMP_TO_EDGE),a._uuid=e._uuid,this.addCache(o,a))),this.doCallback.apply(this,s([t,a,n,r,i],c));},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadSpriteFrame=a,cc._RF.pop();},{}],ResLoadTiledMap:[function(t,e,i){'use strict';cc._RF.push(e,'b7b924vuwVP4om/Hw9WcQaH','ResLoadTiledMap');var ac=window.extend_func(this,'__extends__read__spread');var n=ac.__extends;var r=ac.__read;var s=ac.__spread;Object.defineProperty(i,'__esModule',{value:!0}),i.ResLoadTiledMap=void 0;var a=function(t){function e(){return t.call(this,'TiledMapAsset')||this;}return n(e,t),e.prototype.loadRemote=function(t,e,i,o){for(var n=this,r=[],a=4;a<arguments.length;a++)r[a-4]=arguments[a];this.resMgr._loadRemote(t,function(a,c){var l=t.split('/'),p=l[l.length-1],u=t.split(p)[0],h=new cc.TiledMapAsset();h.tmxXmlStr=c.text,h.name=p;var d=n.getTiledMapTilesets(c.text),f=d.length,y=0;h._uuid=t,d.forEach(function(a,c){h.textureNames.push(a),n.resMgr.loadTexture(u+a,o,function(a,l){y+=1,h.textures[c]=l,y===f&&n.loadResult.apply(n,s([void 0,h,t,e,i,o],r)),l.addRef();});});});},e.prototype.getTiledMapTilesets=function(t){var e=[],i=t.match(/<image [^>]*source=['"]([^'"]+)[^>]*>/g);if(i)for(var o=0,n=i.length;o<n;o++){var r=i[o],s=/<image [^>]*source=['"]([^'"]+)[^>]*>/g.exec(r);s&&e.push(s[1]);}return e;},e;}(t('ResLoadBase').ResLoadBase);i.ResLoadTiledMap=a,cc._RF.pop();},{}],ResLoading:[function(t,e,i){'use strict';cc._RF.push(e,'41113ThywZIiIAkpdHY6QQb','ResLoading');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('BaseUiView'),c=t('ResConst'),l=t('ResMgr'),p=t('GameApp'),u=t('TaskCollector'),h=t('LoginModel'),d=t('AppEventConst'),f=t('DataReportConst'),y=t('SdkMgr'),_=cc._decorator,g=_.ccclass,m=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BarResLoad=null,e.SprBg=null,e.DBIDS=[u.DB_ID_ENUM.LoginBack,u.DB_ID_ENUM.MapInit,u.DB_ID_ENUM.MapBlurBg],e._progressEx=e.DBIDS.length,e._progressAdd=0,e._maxCute=e.DBIDS.length,e._cuteNums=1/(e._maxCute+e._progressEx),e._progState=0,e.norSpeedRate=2,e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),h.default.I.subpackScriptLoad&&this.onUpdateLoadingProgress(u.DB_ID_ENUM.LoadSubScript),this.addEvent(),this.onGameSwitch();},e.prototype.onGameSwitch=function(){var t=this,e=h.default.I.gameSwitch,i=null==e?void 0:e.loading_pic_name;i?(s.EventClient.I.emit(d.AppEvent.DataReport,f.EDataReportId.LoadingBg),l.ResMgr.I._loadRemoteExt(''+p.default.I.ResAdBg+i+'.jpg',{noWebp:1,ext:'.jpg'},function(e,o){if(e)t.initbgSpr();else{var n=new cc.SpriteFrame(o);n._uuid=''+p.default.I.ResAdBg+i+'.jpg',t.SprBg.spriteFrame=n;}})):(s.EventClient.I.emit(d.AppEvent.DataReport,f.EDataReportId.LoadingBg1),this.initbgSpr());},e.prototype.initbgSpr=function(){var t=this;l.ResMgr.I.loadLocal(d.RES_MAIN_ENUM.Login_bg,cc.SpriteFrame,function(e,i){e||(t.SprBg.spriteFrame=i);},{bundle:c.EBundleType.resources});},e.prototype.addEvent=function(){s.EventClient.I.on(d.AppEvent.GameSwitch,this.onGameSwitch,this),s.EventClient.I.on(d.AppEvent.UpdateLoadingProgress,this.onUpdateLoadingProgress,this),s.EventClient.I.on(d.AppEvent.creatRoleHandle,this.creatRoleHandle,this);},e.prototype.delEvent=function(){s.EventClient.I.off(d.AppEvent.GameSwitch,this.onGameSwitch,this),s.EventClient.I.off(d.AppEvent.UpdateLoadingProgress,this.onUpdateLoadingProgress,this),s.EventClient.I.off(d.AppEvent.creatRoleHandle,this.creatRoleHandle,this);},e.prototype.onUpdateLoadingProgress=function(t){var e=this.DBIDS.indexOf(t);e>=0&&(this.DBIDS.splice(e,1),this._progState++,console.log('加载界面\uFF0C进度=',t,u.DB_ID_ENUM[t],'   this._progState=',this._progState));},e.prototype.lateUpdate=function(t){if(this._progState&&this.BarResLoad.progress<1){var e=this._cuteNums*(this._progState+this._progressEx);this._progressAdd=t*this.norSpeedRate,this.BarResLoad.progress+this._progressAdd>e?this.BarResLoad.progress=e:this.BarResLoad.progress+=this._progressAdd,console.log('加载界面\uFF0CcurNum, progress=',e,this.BarResLoad.progress.toFixed(2)),this.BarResLoad.progress>=1&&(u.default.I.endTask(u.DB_KEY_ENUM.GameStart,u.DB_ID_ENUM.LoadingProgressFull),u.default.I.endTask(u.DB_KEY_ENUM.GameWelcomeShow,u.DB_ID_ENUM.LoadingProgressFull));var i=this.BarResLoad.barSprite.node.children[0];i.active=e>0.1,i.getComponent(cc.Widget).updateAlignment();}},e.prototype.creatRoleHandle=function(){y.SdkMgr.I.isCreateRole&&s.EventClient.I.emit(d.AppEvent.CloseWelcomeWin);},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent(),u.default.I.endTask(u.DB_KEY_ENUM.GameStart,u.DB_ID_ENUM.LoadingProgressFull),u.default.I.endTask(u.DB_KEY_ENUM.GameWelcomeShow,u.DB_ID_ENUM.LoadingProgressFull);},r([m(cc.ProgressBar)],e.prototype,'BarResLoad',void 0),r([m(cc.Sprite)],e.prototype,'SprBg',void 0),r([g],e);}(a.default);i.default=v,cc._RF.pop();},{}],ResMgr:[function(t,e,i){'use strict';cc._RF.push(e,'9fae0xt0wNPSZG/3+qoMvUC','ResMgr');var o=this&&this.__decorate||function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if('object'==typeof Reflect&&'function'==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s;},n=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{c(o.next(t));}catch(e){r(e);}}function a(t){try{c(o.throw(t));}catch(e){r(e);}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e);})).then(s,a);}c((o=o.apply(t,e||[])).next());});},r=this&&this.__generator||function(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1];},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},'function'==typeof Symbol&&(r[Symbol.iterator]=function(){return this;}),r;function a(t){return function(e){return c([t,e]);};}function c(r){if(i)throw new TypeError('Generator is already executing.');for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){s=0;continue;}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break;}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break;}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break;}n[2]&&s.ops.pop(),s.trys.pop();continue;}r=e.call(t,s);}catch(a){r=[6,a],o=0;}finally{i=n=0;}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0};}},s=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.ResMgr=i.RemoveSpine=void 0;var c=t('TimerMgr'),l=t('EventClient'),p=t('Executor'),u=t('UtilLog'),h=t('AppEventConst'),d=t('CCResMgr'),f=t('BundleMgr'),y=t('CreateAnimaForSheet'),_=t('ResConst'),g=t('ResLoadBase'),m=t('ResLoadInfo'),v=t('ResLoadLocal'),b=t('ResLoadPlist'),C=t('ResLoadSpine'),S=t('ResLoadSpriteAtlas'),w=t('ResLoadSpriteFrame'),R=t('ResLoadTiledMap'),I=t('UtilsMain'),M=t('LoginModel'),T=t('ResLoadAudioClip'),E=t('GameApp'),A=['action','spine','effect','e'],P={action:'6x6',effect:'6x6',map:'6x6',spine:'6x6'};i.RemoveSpine=function(t){return!!t&&(t.refCount>0&&L.I.decRef(t),!1);};var x=cc._decorator.ccclass,L=function(){function t(){this._ResUrl='',this.waitDeleteTime=600,this.waitDelete=cc.js.createMap(!0),this.SingleFrameLoadCount=0,this.resLoadTexture=null,this.resLoadSpriteFrame=null,this.resLoadPlist=null,this.resloadSpriteAtlas=null,this.resloadSpine=null,this.resloadAudioClip=null,this.resLoadLocal=cc.js.createMap(!0),this.resLoadTiledMap=null,this.maxMemory=400,this.MAX_RETRY=5,this.loadOnceCount=100,this.downSpacingTime=60,this.resLevel=[],this._isShowLog=!1,this.ACTION_RES_MARK='action/',this.COMMON_BG_RES=['com/bg/com_bg_tybj1'],this._rendeeImgSpriteFrameCaches={},this._gmAstc=!0,this._checkCount=0,this.timerId=null,this._debugNode=null,this.resLoadLocal.resources=new v.ResLoadLocal('resources'),this.resLoadLocal.subpack=new v.ResLoadLocal('subpack'),this.resLoadTexture=new g.ResLoadBase('Texture2D'),this.resLoadSpriteFrame=new w.ResLoadSpriteFrame(),this.resLoadPlist=new b.ResLoadPlist(),this.resloadSpriteAtlas=new S.ResLoadSpriteAtlas(),this.resloadSpine=new C.ResLoadSpine(),this.resLoadTiledMap=new R.ResLoadTiledMap(),this.resloadAudioClip=new T.ResLoadAudioClip();}var e;return e=t,Object.defineProperty(t,'I',{get:function(){return null==this._I&&(this._I=new e(),d.CCResMgr.SetRemoveSpriteFrameCallback(this._I.removeSpriteFrame,this._I),d.CCResMgr.SetRemoveTextureCallback(this._I.removeTexture,this._I),d.CCResMgr.SetDecRefCallback(this._I.decRef,this._I),cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.OS_OSX||(this._I.maxMemory=100)),this._I;},enumerable:!1,configurable:!0}),t.prototype.preload=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=_.EBundleType.resources),this.resLoadLocal[o].preload(t,e,i);},t.prototype.delPreLoad=function(t){this.resLoadLocal[_.EBundleType.resources].delPreLoad(t);},t.prototype.loadLocal=function(t,e,i,o){if(E.default.I.isDEV())if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.indexOf('//')>=0&&console.error('ResMgr: 请检查资源路径是否合规',r);}else t.indexOf('//')>=0&&console.error('ResMgr: 请检查资源路径是否合规',t);var s=(null==o?void 0:o.bundle)||_.EBundleType.subpack;this.resLoadLocal[s].load(t,e,i,null==o?void 0:o.target,null==o?void 0:o.customData);},t.prototype.getBigTypePathWithSuffix=function(t,e){var i='string'==typeof e?e:m.LoadInfo.GetSuffixByType(e);return'string'==typeof t?t+'.'+i:t[0]+'.'+i;},t.prototype.loadRemote=function(t,e,i,o){if(E.default.I.isDEV())if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];r.indexOf('//')>=0&&console.error('ResMgr: 请检查资源路径是否合规',r);}else t.indexOf('//')>=0&&console.error('ResMgr: 请检查资源路径是否合规',t);var s=10*Math.floor(e/10),a=new p.Executor(i,null==o?void 0:o.target,null==o?void 0:o.customData),c=null;if(s===_.BigAssetType.SpriteAtlas)this.isCanUseAstc()&&(c=this.replaceAstcPaths(t))&&(t=c,e=e===_.AssetType.SpriteAtlas_mergeJson?_.AssetType.SpriteAtlas_mergeJson_astc:_.AssetType.SpriteAtlas_astc),this.makeLoadInfoStartDown(t,e,a);else if(s===_.BigAssetType.Spine)this.isCanUseAstc()&&(c=this.replaceAstcPaths(t))&&(t=c,e=_.AssetType.Spine_astc),this.makeLoadInfoStartDown(t,e,a);else if(s===_.BigAssetType.SpriteFrame)this.isCanUseAstc()&&(c=this.replaceAstcPaths(t))&&(t=c,e=_.AssetType.SpriteFrame_astc),this.makeLoadInfoStartDown(t,e,a);else if('string'==typeof t){var l=I.UtilsMainStr.GetFilePathNoSuffix(t);this.makeLoadInfoStartDown(l,e,a);}},Object.defineProperty(t.prototype,'gmAstc',{get:function(){var t;return!!(null===(t=M.default.I.gameSwitch)||void 0===t?void 0:t.astc_switch);},set:function(t){console.log('gmAstc=',t),M.default.I.gameSwitch.astc_switch=t?1:0;},enumerable:!1,configurable:!0}),t.prototype.isCanUseAstc=function(){return this.gmAstc&&cc.sys.os===cc.sys.OS_IOS&&!!cc.renderer.device.ext('WEBGL_compressed_texture_astc');},t.prototype.replaceAstcPath=function(t,e){void 0===e&&(e=A);var i='';for(var o in P)if(Object.prototype.hasOwnProperty.call(P,o)&&(i=o,0===t.indexOf(i+'/')))return t;return null;},t.prototype.replaceAstcPaths=function(t){if('string'==typeof t)return this.replaceAstcPath(t,A);for(var e=[],i=0;i<t.length;i++){var o=t[i];if(!this.replaceAstcPath(o,A)){e=null;break;}e.push(o);}return e;},t.prototype.makeLoadInfoStartDown=function(t,e,i){var o=10*Math.floor(e/10),n=m.LoadInfo.GetSuffixByType(e),r=new m.LoadInfo(t,n);r.isCopy=!1,r.complete=i,r.type=e,r.bigType=o,this.resLevel.push(r),this.SingleFrameLoadCount<this.loadOnceCount&&this.startDown();},t.prototype.loadAsync=function(t,e,i){return n(this,void 0,void 0,function(){var o,n,s;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),i?[4,this.loadFromBundleAsync(i,t,e)]:[3,2];case 1:return n=r.sent(),o=n,[3,4];case 2:return[4,this._loadAsync(t,e)];case 3:n=r.sent(),o=n,r.label=4;case 4:return[3,6];case 5:return s=r.sent(),console.error(s),[3,6];case 6:return[2,o];}});});},t.prototype.showPrefabAsync=function(t,e,i){return n(this,void 0,void 0,function(){var o,n,s,a,c,p;return r(this,function(r){switch(r.label){case 0:return'string'!=typeof t?[3,2]:[4,this.loadAsync(t,cc.Prefab,i)];case 1:return(o=r.sent())?(n=new Date().getTime(),s=cc.instantiate(o),e&&(cc.isValid(e)?(e.addChild(s),a=new Date().getTime()-n,'BagItemIcon'!==s.name&&(console.log('\u3010'+s.name+'\u3011instanite+addChild时间:'+a+'毫秒'),l.EventClient.I.emit(h.AppEvent.PannelOpenTime,s.name,a))):(s.destroy(),s=void 0)),[2,s]):[2,void 0];case 2:return[4,this.loadAsync(t,cc.Prefab,i)];case 3:return c=r.sent(),p=[],c.forEach(function(t){var i=cc.instantiate(t);e&&e.addChild(i),p.push(i);}),[2,p];case 4:return[2];}});});},t.prototype._loadAsync=function(t,e){return n(this,void 0,void 0,function(){var i=this;return r(this,function(){return[2,new Promise(function(o){i.loadLocal(t,e,function(t,e){t?(o(void 0),console.error('loadAsync error:'+t)):o(e);});})];});});},t.prototype.loadFromBundleAsync=function(t,e,i){return n(this,void 0,Promise,function(){var o,n,s,a;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,f.default.I.loadAsync(t)];case 1:return(n=r.sent())?[4,this._bundleLoadAsync(n,e,i)]:[2,void 0];case 2:return s=r.sent(),o=s,[3,4];case 3:return a=r.sent(),console.error(a),[3,4];case 4:return[2,o];}});});},t.prototype._bundleLoadAsync=function(t,e,i){return n(this,void 0,Promise,function(){var o=this;return r(this,function(){return[2,new Promise(function(n){o._bundleLoad(t,e,i,function(t,e){n(t?void 0:e);});})];});});},t.prototype._bundleLoad=function(t,e,i,o,n,r){t.load(e,i,function(e,i){e&&console.warn('bundle: '+t.name+' load prefab err:',e),o&&o.call(n,e,i,r);});},t.prototype.startDown=function(){var t=this;this.runDown(),this.DownTimeJS||(this.DownTimeJS=setInterval(function(){t.clearDownTaskFlag(),t.runDown();},this.downSpacingTime));},t.prototype.clearDownTaskFlag=function(){this.SingleFrameLoadCount=0;},t.prototype.runDown=function(){var t=null;if(this.resLevel.length>0){(t=this.resLevel).length>this.loadOnceCount&&console.log(t.length+'\uFF1A一次性加载长度大于'+this.loadOnceCount+':'+t[0].path+','+t[t.length-1].path);for(var e=0,i=Math.min(this.loadOnceCount,t.length);e<i;e++)this.loadRemoteDispatcher(t.shift()),this.SingleFrameLoadCount++;}else this.DownTimeJS&&(clearInterval(this.DownTimeJS),delete this.DownTimeJS);},t.prototype.loadRemoteDispatcher=function(t){switch(t.bigType){case _.BigAssetType.SpriteFrame:this.loadSpriteFrame(t);break;case _.BigAssetType.Spine:this.loadSpine(t,this.loadResultRemote,this);break;case _.BigAssetType.SpriteAtlas:this.loadSpriteAtlas(t.getPathByIndex(0),t,this.loadResultRemote,this);break;case _.BigAssetType.Texture2D:this.loadTexture(t.path,t,this.loadResultRemote,this);break;case _.BigAssetType.Plist:this.loadPlist(t.path,t,this.loadResultRemote,this);break;case _.BigAssetType.TiledMap:this.loadTiledMap(t.path,t,this.loadResultRemote,this);break;case _.BigAssetType.AudioClip:this.loadAudioClip(t.path,t,this.loadResultRemote,this);break;default:this.loadOther(t);}},t.prototype.loadSpriteAtlas=function(t,e,i,o){for(var n,r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];(n=this.resloadSpriteAtlas).load.apply(n,a([t,e,i,o],r));},t.prototype.loadResultRemote=function(t,e,o){if(t)e=null,o.type===_.AssetType.SpriteFrame||o.type===_.AssetType.SpriteAtlas||o.type===_.AssetType.SpriteAtlas_json||o.type===_.AssetType.SpriteAtlas_mergeJson||o.retry>this.MAX_RETRY?(o.complete&&o.complete.invokeWithArgs(t,e,o.complete.getArgs()[0]),u.UtilLog.I.collectErr('远程资源加载错误','',0,0,t),console.log('加载错误\uFF1A'+o.path)):(o.retry++,this.loadRemoteDispatcher(o));else if(e)if(!1===e.loaded||o.type===_.AssetType.SpriteFrame&&e instanceof cc.SpriteFrame&&!e.getTexture())this.loadRemoteDispatcher(o);else{if((!o.loadedData||!o.loadedData.isValid||o.loadedData.refCount<=0)&&(o.loadedData=e),o.complete&&o.complete.invokeWithArgs(t,e,o.complete.getArgs()[0]),void 0!==e.refCount&&null!==e.refCount&&(o.bigType===_.BigAssetType.SpriteFrame||o.bigType===_.BigAssetType.Texture2D||o.bigType===_.BigAssetType.SpriteAtlas||o.bigType===_.BigAssetType.Spine||o.bigType===_.BigAssetType.TiledMap||o.bigType===_.BigAssetType.AudioClip)){if(e.refCount<=0){var n=new Error().stack;console.warn('加载回调完\uFF0C计数就是0\uFF0C=',e,n);}if(e instanceof cc.SpriteFrame){this.decRef(e);var r=e.getTexture();r&&this.decRef(r);}else e instanceof cc.Texture2D?this.decRef(e):e instanceof cc.SpriteAtlas?y.RemoveSpriteAtlas(e):e instanceof sp.SkeletonData?i.RemoveSpine(e):e instanceof cc.TiledMapAsset||e instanceof cc.AudioClip&&this.decRef(e);}o=null;}},t.prototype.getEditorSkillFrame=function(t,e){var i=t;return this.isCanUseAstc()&&(i=this.replaceAstcPaths(t)),this.resLoadPlist.getEditorSkillFrame(i,e);},t.prototype.loadGif=function(){},t.prototype.loadOther=function(t){var e=this;this._loadRemote(t.path,function(i,o){e.loadResultRemote(i,o,t);});},t.prototype.loadSpine=function(t,e,i){for(var o,n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];(o=this.resloadSpine).load.apply(o,a([void 0,t,e,i],n));},t.prototype.loadSpriteFrame=function(t){this.resLoadSpriteFrame.load(t.path,t,this.loadResultRemote,this);},t.prototype.loadTexture=function(t,e,i,o){for(var n,r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];(n=this.resLoadTexture).load.apply(n,a([t,e,i,o],r));},t.prototype.loadPlist=function(t,e,i,o,n){for(var r,s=[],c=5;c<arguments.length;c++)s[c-5]=arguments[c];(r=this.resLoadPlist).load.apply(r,a([t,e,i,o,n],s));},t.prototype.loadTiledMap=function(t,e,i,o){for(var n,r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];(n=this.resLoadTiledMap).load.apply(n,a([t,e,i,o],r));},t.prototype.loadAudioClip=function(t,e,i,o){for(var n,r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];(n=this.resloadAudioClip).load.apply(n,a([t,e,i,o],r));},t.prototype.showPrefab=function(t,e,i,o){this.loadLocal(t,cc.Prefab,this.showPrefabResult,{target:this,customData:{parent:e,func:i,target:null==o?void 0:o.target,customData:null==o?void 0:o.customData},bundle:null==o?void 0:o.bundle});},t.prototype.showPrefabOnce=function(t,e,i,o){this.loadLocal(t,cc.Prefab,this.showPrefabResult,{target:this,customData:{parent:e,func:i,isOnce:!0,target:null==o?void 0:o.target,customData:null==o?void 0:o.customData}});},t.prototype.showPrefabResult=function(t,e,i){var o=i.func,n=i.target,r=i.parent,s=i.isOnce,a=i.customData;if(t)o&&o.call(n,t,void 0,a);else{var c=new Date().getTime(),p=cc.instantiate(e);if(!r||r.isValid)if(!0===s&&null!=r&&r.getChildByName(p.name))p.destroy();else if(a&&(a.pos&&p.setPosition(a.pos.x,a.pos.y),p.attr({_args:a})),r)if(cc.isValid(r)){r.addChild(p);var u=p.name;if(null==o||o.call(n,t,p,a),'RedDot'!==u){var d=new Date().getTime()-c;'BagItemIcon'!==u&&'MsgToast'!==u&&(console.log('\u3010'+u+'\u3011instanite+addChild时间:'+d+'毫秒'),l.EventClient.I.emit(h.AppEvent.PannelOpenTime,u,d));}}else p.destroy();else o&&o.call(n,t,p,a);else p.destroy();}},t.prototype.removeTexture=function(t){this.resLoadTexture.delCache(t);},t.prototype.removeSpriteFrame=function(t){this.resLoadSpriteFrame.delCache(t);},t.prototype.removeSpriteAtlas=function(t){this.resloadSpriteAtlas.delCache(t);},t.prototype.removeSpine=function(t){this.resloadSpine.delCache(t);},t.prototype.removeTiledAsset=function(t){this.resLoadTiledMap.delCache(t);},t.prototype.removeAudioClip=function(t){this.resloadAudioClip.delCache(t);},t.prototype.decRef=function(t,e){!t.addRef||t.isValid;var i=(e=e||!1)?0:this.waitDeleteTime;if(t.decRef(e),this.startTimer(),0===t.refCount){var o=this.getAssetDeleteKey(t);if(this.waitDelete[o]&&this.waitDelete[o].asset!==t&&this.removeAsset(this.waitDelete[o].asset,o),0===i)this.removeAsset(t,o);else{for(var n=0;n<this.COMMON_BG_RES.length;n++){var r=this.COMMON_BG_RES[n];o.indexOf(r)>-1&&(i=3600);}this.waitDelete[o]={asset:t,time:i};}}},t.prototype.getAssetDeleteKey=function(t){var e=t._uuid||t._name;return t instanceof cc.SpriteFrame?e+='@cc.SpriteFrame':t instanceof sp.SkeletonData?e+='@sp.SkeletonData':t instanceof cc.Texture2D?e+='@cc.Texture2D':t instanceof cc.SpriteAtlas?e+='@cc.SpriteAtlas':t instanceof cc.TiledMapAsset?e+='@cc.TiledMapAsset':t instanceof cc.AudioClip&&(e+='@cc.AudioClip'),e;},t.prototype.addAssetCaches=function(t){var e=this.getAssetDeleteKey(t);this.waitDelete[e]={asset:t,time:this.waitDeleteTime};},t.prototype.startTimer=function(){void 0!==this.checkResTimerId&&null!==this.checkResTimerId||(this.checkResTimerId=c.default.I.setInterval(this.checkAssetCaches,200,this));},t.prototype.stopTimer=function(){void 0!==this.checkResTimerId&&null!==this.checkResTimerId&&(c.default.I.clearInterval(this.checkResTimerId),this.checkResTimerId=void 0);},t.prototype.removeAsset=function(t,e){var i=this;if(t instanceof cc.SpriteFrame){var o=t;o&&o.isValid&&(o._uuid&&o._name?o.decRef(!0):o.destroy(),''!==o._uuid&&this.removeSpriteFrame(o._uuid));}else if(t instanceof cc.Texture2D)(a=t).decRef(!0),this.removeTexture(a._uuid);else if(t instanceof cc.SpriteAtlas){var n=t;''!==n._uuid&&this.removeSpriteAtlas(n._uuid);var r=cc.js.createMap(!0);for(var s in(n.getSpriteFrames().forEach(function(t){if(t.decRef(!0),i.removeAsset(t),t.refCount<=0){var e=t.getTexture(),o=e._uuid;r[o]=e;}t=null;}),r)){var a;(a=r[s]).decRef(!0),this.removeAsset(a);}n.destroy();}else t instanceof sp.SkeletonData?(''!==t._uuid&&this.removeSpine(t._uuid),t.textures.forEach(function(t){t.decRef(!0),i.removeAsset(t);}),t.destroy()):t instanceof cc.TiledMapAsset?(''!==t._uuid&&this.removeTiledAsset(t._uuid),t.textures.forEach(function(t){t.decRef(!0),i.removeAsset(t);}),t.destroy()):t instanceof cc.AudioClip?(s=t._uuid,t.decRef(!0),''!==s&&this.removeAudioClip(s)):t.decRef(!0);e&&this.waitDelete[e]&&delete this.waitDelete[e];},t.prototype.removeAllWaitAsset=function(){var t;for(var e in this.waitDelete)!(t=this.waitDelete[e])||t.asset.refCount>0?delete this.waitDelete[e]:t&&cc.isValid(t.asset)?this.removeAsset(t.asset,e):delete this.waitDelete[e];},t.prototype.checkAssetCaches=function(){var t;if(this._checkCount++,this._checkCount>=5){for(var e in this.waitDelete)!(t=this.waitDelete[e])||t.asset.refCount>0?delete this.waitDelete[e]:t.time<=0?this.removeAsset(t.asset,e):t.time-=1;this._checkCount=0;}if(window&&window.getTextureMemory){var i=window.getTextureMemory();i>=this.maxMemory&&(console.log('内存超过阈值 '+i+'mb/'+this.maxMemory+'mb'),this._isShowLog&&console.log('this.waitDelete ',this.waitDelete),this.removeAllWaitAsset());}},t.prototype.doGarbageCollect=function(){var t=this;this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.timerId=setTimeout(function(){if(clearTimeout(t.timerId),t.timerId=null,t._isShowLog){var e=0;window&&window.getTextureMemory&&(e+=window.getTextureMemory()),console.log('释放缓存后内存大小 '+e+'mb/'+t.maxMemory+'mb');}cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.OS_OSX||(console.log('ios 手动调用 GC'),cc.sys.garbageCollect()),t._checkLowFrame();},33);},t.prototype._checkLowFrame=function(){var t=this;this._timerCheck=setTimeout(function(){clearTimeout(t._timerCheck),t._timerCheck=null,t._memExcceed()&&l.EventClient.I.emit(h.AppEvent.DeviceFrameLow);},1000);},t.prototype._memExcceed=function(){return!(!window||!window.getTextureMemory)&&window.getTextureMemory()>=1.5*this.maxMemory;},t.prototype.__loadRemote=function(t,e,i,o){for(var n=[],r=4;r<arguments.length;r++)n[r-4]=arguments[r];t=this.getRealFilePath(t);var s={maxRetryCount:25};'function'==typeof e?cc.assetManager.loadRemote(t,s,function(t,r){e.call.apply(e,a([i,t,r,o],n));}):'function'==typeof i&&(e&&(s=Object.assign(s,e)),cc.assetManager.loadRemote(t,s,function(t,e){i.call.apply(i,a([o,t,e],n));}));},t.prototype._loadRemote=function(t,e,i){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];this.__loadRemote.apply(this,a([t,e,i],o));},t.prototype._loadRemoteExt=function(t,e,i,o){for(var n=[],r=4;r<arguments.length;r++)n[r-4]=arguments[r];this.__loadRemote.apply(this,a([t,e,i,o],n));},t.prototype.getRealFilePath=function(t){return 0===t.indexOf('http://')||0===t.indexOf('https://')?t:this.getResUrl()+'/'+t;},t.prototype.setResUrl=function(t){this._ResUrl=t;},t.prototype.getResUrl=function(){return this._ResUrl;},t.prototype.fini=function(){this.stopTimer();},t.prototype.addRendeerImgSpriteFrameCache=function(t){var e=t._uuid;this._rendeeImgSpriteFrameCaches[e]||(this._rendeeImgSpriteFrameCaches[e]={sf:t});},t.prototype.getRendeerImgSpriteFrameCache=function(t){var e=this._rendeeImgSpriteFrameCaches[t];return e&&e.sf?cc.isValid(e.sf)&&e.sf._texture?e.sf:(this.removeRendeerImgSpriteFrameCache(t),null):null;},t.prototype.removeRendeerImgSpriteFrameCache=function(t){this._rendeeImgSpriteFrameCaches[t]&&delete this._rendeeImgSpriteFrameCaches[t];},t.prototype.showDebug=function(){if(null==this._debugNode){if(!this._debugNode||!this._debugNode.isValid){var t=Math.floor(cc.visibleRect.width),e=Math.floor(cc.visibleRect.height);this._debugNode=new cc.Node('DYNAMIC_ATLAS_DEBUG_NODE'),this._debugNode.width=t,this._debugNode.height=e,this._debugNode.x=t/2,this._debugNode.y=e/2,this._debugNode.zIndex=cc.macro.MAX_ZINDEX,this._debugNode.parent=cc.director.getScene(),cc.Camera._setupDebugCamera();var i=this._debugNode.addComponent(cc.ScrollView),o=new cc.Node('CONTENT'),n=o.addComponent(cc.Layout);n.type=cc.Layout.Type.VERTICAL,n.resizeMode=cc.Layout.ResizeMode.CONTAINER,n.spacingY=10,o.width=t,o.height=10*e,o.scaleX=1,o.scaleY=1,o.anchorY=0.5,o.parent=this._debugNode,i.content=o;var r=0,s=Object.keys(this.waitDelete).length;for(var a in this.waitDelete){var c=this.waitDelete[a];if(c.asset instanceof cc.Texture2D&&c.asset._texture){r++;var l=new cc.Node('图集名称'+r);l.x=0,l.y=0;var p=l.addComponent(cc.Label);p.string='\u2014\u2014\u2014\u2014\u2014\u2014\u2014['+a+'] ('+r+'/'+s+')\u2014\u2014\u2014\u2014\u2014\u2014\u2014',p.node.color=cc.Color.BLUE,l.parent=o;var u=new cc.Node('atlas');u.anchorX=0,u.x=-t/2,u.anchorY=0.5,u.width=c.asset.width,u.height=c.asset.height;var h=c.asset,d=new cc.SpriteFrame();d.setTexture(h),u.addComponent(cc.Sprite),u.getComponent(cc.Sprite).spriteFrame=d,d._calculateUV(),u.parent=o,u.scale=1;}}}}else this._debugNode&&(this._debugNode.parent=null,this._debugNode=null);},t.prototype.resetMemory=function(t){if(t&&-1!==t.indexOf('-')){var e=t.split('-');cc.sys.os===cc.sys.OS_IOS?this.maxMemory=+e[1]:this.maxMemory=+e[0];}},t._I=null,e=o([x('ResMgr')],t);}();i.ResMgr=L;var k=cc.Asset.prototype.decRef;cc.Asset.prototype.decRef=function(t){var e=!1;return(this instanceof cc.SpriteFrame||this instanceof cc.Texture2D||this instanceof cc.SpriteAtlas||this instanceof cc.Prefab)&&(e=!0),e&&!0!==t?(t=!1,k.call(this,t),0===this.refCount&&L.I.addAssetCaches(this)):(k.call(this,t),this instanceof cc.SpriteFrame&&L.I.removeRendeerImgSpriteFrameCache(this._uuid)),this;},cc._RF.pop();},{}],RoadNode:[function(t,e,i){'use strict';cc._RF.push(e,'26a07zY2fNJQ5nGvgSQIhL3','RoadNode'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){this._value=0,this._f=0,this._g=0,this._h=0,this._parent=null,this._treeParent=null,this._left=null,this._right=null,this._openTag=0,this._closeTag=0;}return t.prototype.resetTree=function(){this._treeParent=null,this._left=null,this._right=null;},t.prototype.toString=function(){return'路点像素坐标\uFF1A\uFF08'+this._px+','+this._py+'),  路点世界坐标\uFF1A\uFF08'+this._cx+','+this._cy+'),  路点平面直角坐标\uFF1A\uFF08'+this._dx+','+this._dy+')';},Object.defineProperty(t.prototype,'px',{get:function(){return this._px;},set:function(t){this._px=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'py',{get:function(){return this._py;},set:function(t){this._py=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'cx',{get:function(){return this._cx;},set:function(t){this._cx=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'cy',{get:function(){return this._cy;},set:function(t){this._cy=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'dx',{get:function(){return this._dx;},set:function(t){this._dx=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'dy',{get:function(){return this._dy;},set:function(t){this._dy=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'value',{get:function(){return this._value;},set:function(t){this._value=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'f',{get:function(){return this._f;},set:function(t){this._f=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'g',{get:function(){return this._g;},set:function(t){this._g=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'h',{get:function(){return this._h;},set:function(t){this._h=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'parent',{get:function(){return this._parent;},set:function(t){this._parent=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'treeParent',{get:function(){return this._treeParent;},set:function(t){this._treeParent=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'left',{get:function(){return this._left;},set:function(t){this._left=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'right',{get:function(){return this._right;},set:function(t){this._right=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'openTag',{get:function(){return this._openTag;},set:function(t){this._openTag=t;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'closeTag',{get:function(){return this._closeTag;},set:function(t){this._closeTag=t;},enumerable:!1,configurable:!0}),t;}();i.default=o,cc._RF.pop();},{}],RoadPointLayer:[function(t,e,i){'use strict';cc._RF.push(e,'f6980iyhwFMS4nJehcLEaf/','RoadPointLayer');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('MapMode'),a=t('MapRoadUtils'),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=t.call(this)||this;return e._roadPointDic=cc.js.createMap(!0),e._roadNodeDic=cc.js.createMap(!0),e._graphicDic=cc.js.createMap(!0),e._gsize=16,e._blockScale=0.95,e._isShow=!1,e;}return n(e,t),e.prototype.initRoadPointInfo=function(t){if(this._isShow&&(this.clear(),t.roadDataArr&&0!==t.roadDataArr.length)){var e=t.roadDataArr.length,i=0;t.roadDataArr[0]&&(i=t.roadDataArr[0].length);for(var o=Math.floor(e/2),n=Math.floor(i/2),r=a.ENUM_ROAD.Run,s=0,c=0,l=0;l<e;l++)for(var p=0;p<i;p++){r=t.roadDataArr[l][p],s=p-n,c=l-o;var u=a.default.I.getNodeByDerect(s,c);u.value=r,u.value!==a.ENUM_ROAD.Block&&(this._roadNodeDic[u.dx+'_'+u.dy]=u);}this.drawRointPoint();}},e.prototype.drawRointPoint=function(){var t=a.default.I.row,e=a.default.I.col,i=a.default.I.mapType,o=t/this._gsize;i===s.MapMode.angle45&&(o=2*t/this._gsize);for(var n=e/this._gsize,r=0;r<o;r++)for(var c=0;c<n;c++){var l=c,p=r;this.drawGraphic(l,p);}},e.prototype.getColor=function(t){var e='00ff0050';switch(t){case a.ENUM_ROAD.Run:e='#00ff0050';break;case a.ENUM_ROAD.Block:e='#d4d4d450';break;case a.ENUM_ROAD.Half:e='#0000ff50';break;case a.ENUM_ROAD.Trans:e='#ffff0050';break;case a.ENUM_ROAD.Custom4:e='#400000FF';break;case a.ENUM_ROAD.Custom5:e='#804000FF';break;case a.ENUM_ROAD.Custom6:e='#004000FF';break;case a.ENUM_ROAD.Custom7:e='#004040FF';break;case a.ENUM_ROAD.Custom8:e='#000080FF';break;case a.ENUM_ROAD.Custom9:e='#000040FF';break;case a.ENUM_ROAD.Custom10:e='#400040FF';break;case a.ENUM_ROAD.Custom11:e='#400080FF';break;case a.ENUM_ROAD.Custom12:e='#808000FF';break;case a.ENUM_ROAD.Custom13:e='#808040FF';break;case a.ENUM_ROAD.Custom14:e='#808080FF';break;case a.ENUM_ROAD.Custom15:e='#408080FF';}return e;},e.prototype.drawGraphic=function(t,e,i){void 0===i&&(i=!0);var o=t+'_'+e,n=this.getGraphic(o);i&&n.clear();for(var r=a.default.I.halfCellWidth,c=a.default.I.halfCellHeight,l=a.default.I.mapType,p=a.default.I.row,u=a.default.I.col,h=Math.floor(p/2),d=Math.floor(u/2),f='00ff0050',y=t*this._gsize,_=y+this._gsize,g=e*this._gsize,m=g+this._gsize,v=0,b=0,C=g;C<m;C++)for(var S=y;S<_;S++){v=S-d,b=C-h;var w=this._roadNodeDic[v+'_'+b];w?(f=this.getColor(w.value),l===s.MapMode.angle45?this.draw45AngleMapRoadPoint(n,w,f,r,c):l===s.MapMode.angle90?this.draw90AngleMapRoadPoint(n,w,f,r,c):l===s.MapMode.honeycomb?this.drawHoneycombMapRoadPoint(n,w,f,r,c):l===s.MapMode.honeycomb2&&this.drawHoneycombMapRoadPoint2(n,w,f,r,c)):console.log('没有该节点\uFF0Ci=',C,'j=',S,'dx_dy=',v+'_'+b);}},e.prototype.getGraphic=function(t){if(!this._graphicDic[t]){var e=new cc.Node();this.node.addChild(e),e.setPosition(0,0);var i=e.addComponent(cc.Graphics);this._graphicDic[t]=i;}return this._graphicDic[t];},e.prototype.draw45AngleMapRoadPoint=function(t,e,i,o,n){t.fillColor.fromHEX(i),t.moveTo(-o*this._blockScale+e.px,0+e.py),t.lineTo(0+e.px,-n*this._blockScale+e.py),t.lineTo(o*this._blockScale+e.px,0+e.py),t.lineTo(0+e.px,n*this._blockScale+e.py),t.fill();},e.prototype.draw90AngleMapRoadPoint=function(t,e,i,o,n){t.fillColor.fromHEX(i),t.rect(-o*this._blockScale+e.px,-n*this._blockScale+e.py,o*this._blockScale*2,n*this._blockScale*2),t.fill();},e.prototype.drawHoneycombMapRoadPoint=function(t,e,i){t.fillColor.fromHEX(i);var o=a.default.I.cellWidth*this._blockScale,n=a.default.I.cellHeight*this._blockScale,r=o/4,s=3*r,c=n/2,l=-2*r,p=-c;t.moveTo(l+r+e.px,p+e.py),t.lineTo(l+s+e.px,p+e.py),t.lineTo(l+o+e.px,c+p+e.py),t.lineTo(l+s+e.px,n+p+e.py),t.lineTo(l+r+e.px,n+p+e.py),t.lineTo(l+0+e.px,c+p+e.py),t.lineTo(l+r+e.px,p+e.py),t.fill();},e.prototype.drawHoneycombMapRoadPoint2=function(t,e,i){t.fillColor.fromHEX(i);var o=a.default.I.cellWidth*this._blockScale,n=a.default.I.cellHeight*this._blockScale,r=o/4,s=3*r,c=n/2,l=-2*r,p=-c;t.moveTo(p+e.px,l+r+e.py),t.lineTo(p+e.px,l+s+e.py),t.lineTo(c+p+e.px,l+o+e.py),t.lineTo(n+p+e.px,l+s+e.py),t.lineTo(n+p+e.px,l+r+e.py),t.lineTo(c+p+e.px,l+0+e.py),t.lineTo(p+e.px,l+r+e.py),t.fill();},e.prototype.clear=function(){for(var t in this._roadPointDic)this._roadPointDic[t].destroy(),this._roadPointDic[t]=null,delete this._roadPointDic[t];for(var t in this._graphicDic)this._graphicDic[t]&&(this._graphicDic[t].clear(),this._graphicDic[t].destroy(),this._graphicDic[t]=null,delete this._roadNodeDic[t]);this._roadNodeDic={};},r([l],e);}(cc.Component));i.default=p,function(t){function e(e,i){void 0===i&&(i=1);var o=t.call(this)||this;return o._color0='#00ff0090',o._color1='#d4d4d490',o._color2='#0000ff90',o._color3='#ffff0090',o._node=e,o._type=i,o.draw(e,i),o;}n(e,t),e.prototype.reset=function(t,e){void 0===e&&(e=1),this._node=t,this._type=e,this.draw(t,e);},e.prototype.draw=function(t,i){if(void 0===i&&(i=1),this.clear(),!e.hiddenUnWalkAble||t.value!==a.ENUM_ROAD.Block){var o;t.value===a.ENUM_ROAD.Run?o=this._color0:t.value===a.ENUM_ROAD.Block?o=this._color1:t.value===a.ENUM_ROAD.Half?o=this._color2:t.value===a.ENUM_ROAD.Trans&&(o=this._color3);var n=a.default.I.halfCellWidth,r=a.default.I.halfCellHeight,c=a.default.I.mapType;c===s.MapMode.angle45?this.draw45AngleMapRoadPoint(i,o,n,r):c===s.MapMode.angle90?this.draw90AngleMapRoadPoint(i,o,n,r):c===s.MapMode.honeycomb?this.drawHoneycombMapRoadPoint(i,o,n,r):c===s.MapMode.honeycomb2&&this.drawHoneycombMapRoadPoint2(i,o,n,r);}},e.prototype.draw45AngleMapRoadPoint=function(t,e,i,o){this.graphics.fillColor.fromHEX(e),1===t?(this.graphics.moveTo(-(i-1),0),this.graphics.lineTo(0,-(o-1)),this.graphics.lineTo(i-1,0),this.graphics.lineTo(0,o-1)):2===t?this.graphics.rect(-o/2,-o/2,o,o):this.graphics.circle(0,0,i/3),this.graphics.fill();},e.prototype.draw90AngleMapRoadPoint=function(t,e,i,o){this.graphics.fillColor.fromHEX(e),1===t?this.graphics.rect(-(i-1),-(o-1),2*(i-1),2*(o-1)):2===t?this.graphics.rect(-i/2,-o/2,i,o):this.graphics.circle(0,0,i/2),this.graphics.fill();},e.prototype.drawHoneycombMapRoadPoint=function(t,e,i,o){if(this.graphics.fillColor.fromHEX(e),1===t){var n=0.95*a.default.I.cellWidth,r=0.95*a.default.I.cellHeight,s=n/4,c=3*s,l=r/2,p=-2*s,u=-l;this.graphics.moveTo(p+s,u),this.graphics.lineTo(p+c,u),this.graphics.lineTo(p+n,l+u),this.graphics.lineTo(p+c,r+u),this.graphics.lineTo(p+s,r+u),this.graphics.lineTo(p+0,l+u),this.graphics.lineTo(p+s,u);}else 2===t?this.graphics.rect(-i/2,-o/2,i,o):this.graphics.circle(0,0,i/2);this.graphics.fill();},e.prototype.drawHoneycombMapRoadPoint2=function(t,e,i,o){if(this.graphics.fillColor.fromHEX(e),1===t){var n=0.95*a.default.I.cellWidth,r=0.95*a.default.I.cellHeight,s=n/4,c=3*s,l=r/2,p=-2*s,u=-l;this.graphics.moveTo(u,p+s),this.graphics.lineTo(u,p+c),this.graphics.lineTo(l+u,p+n),this.graphics.lineTo(r+u,p+c),this.graphics.lineTo(r+u,p+s),this.graphics.lineTo(l+u,p+0),this.graphics.lineTo(u,p+s);}else 2===t?this.graphics.rect(-i/2,-o/2,i,o):this.graphics.circle(0,0,i/2);this.graphics.fill();},e.prototype.clear=function(){this.graphics.clear();},Object.defineProperty(e.prototype,'node',{get:function(){return this._node;},set:function(t){this._node=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'type',{get:function(){return this._type;},set:function(t){this._type=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'graphics',{get:function(){return this._graphics||(this._graphics=this.addComponent(cc.Graphics)),this._graphics;},enumerable:!1,configurable:!0});}(cc.Node),cc._RF.pop();},{}],RoleAI:[function(t,e,i){'use strict';cc._RF.push(e,'f9e72Y7yTJJaL+aAStGJHnl','RoleAI');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('PathFindingAgent'),a=t('EntityConst'),c=t('RoleMgr'),l=cc._decorator,p=l.ccclass,u=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._status=a.RoleStatus.Idle,e;}return n(e,t),Object.defineProperty(e.prototype,'EntityRole',{get:function(){return this.node;},enumerable:!1,configurable:!0}),e.prototype.setStatus=function(t){if(this._status!==t)switch(this._status=t,t){case a.RoleStatus.Idle:this.node.stopAllActions();break;case a.RoleStatus.Move:case a.RoleStatus.Attack:case a.RoleStatus.FindTarget:case a.RoleStatus.Back:break;case a.RoleStatus.Lost:this.backToCenterPoint();}},Object.defineProperty(e.prototype,'Status',{get:function(){return this._status;},enumerable:!1,configurable:!0}),e.prototype.backToCenterPoint=function(){var t=this,e=c.default.I.centerPos;this.movePlayer(e,function(){t.setStatus(a.RoleStatus.Idle);});},e.prototype.movePlayer=function(t,e,i,o){void 0===o&&(o=null);var n=this.EntityRole,r=cc.v2(n.x,n.y),a=t,c=s.default.I.findPath(r,a);n.walkByRoad(c,e,o),i&&i.call(o,c);},e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.update=function(){},r([p],e);}(cc.Component));i.default=u,cc._RF.pop();},{}],RoleMgr:[function(t,e,i){'use strict';cc._RF.push(e,'51d3balBLVLorZ5LAR2ZupK','RoleMgr'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('EventClient'),n=t('SATConst'),r=t('JoyStickArrow'),s=t('CenterPoint'),a=t('EntityConst'),c=t('EntityRole'),l=function(){function t(){this._count=0,this._centerPoint=null,this._role=cc.js.createMap(!0),this._joystickAngle=0,this._JoystickArrow=null,this._parent=null,this._movePoints=[],this.radius=32,this._graphicDic=null;}return Object.defineProperty(t,'I',{get:function(){return null==this._i&&(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.createRole=function(t){this._count=8,this._parent=t;var e=new s.default({id:9999,entityType:a.EntityType.CenterPoint,colliderType:n.SATColliderType.CenterPoint,initX:0,initY:-300,name:'CenterPoint'});t.addChild(e),this._centerPoint=e;var i=this.createArrow(0,0);this._centerPoint.addChild(i);for(var o=0;o<this._count;o++){var r=this.randomTarget(o),l=new c.default({id:o,entityType:a.EntityType.Role,colliderType:n.SATColliderType.Role,initX:r.x,initY:r.y-300,name:'Role'+o});this._role[o]=l,t.addChild(l);}},t.prototype.createArrow=function(t,e){var i=new cc.Node();i.name='NdArrow',i.setPosition(t,e),i.active=!0;var o=i.addComponent(cc.Sprite);return o.sizeMode=cc.Sprite.SizeMode.RAW,o.type=cc.Sprite.Type.SIMPLE,cc.resources.load('i/hero_bubble_1_arrow',cc.SpriteFrame,function(t,e){o.spriteFrame=e;}),this._JoystickArrow=i.addComponent(r.default),i;},t.prototype.eventOnOff=function(t){void 0===t&&(t=!0),t?o.EventClient.I.on:o.EventClient.I.off;},t.prototype.randomTarget=function(t){var e=20+Math.floor(20*Math.random()),i=(360/this._count*t+60*Math.random())*Math.PI/180;return{x:0+e*Math.cos(i),y:0+e*Math.sin(i)};},t.prototype.hasRoleLost=function(){for(var t in this._role)if(this._role[t].isLost)return!0;return!1;},Object.defineProperty(t.prototype,'joystickAngle',{get:function(){return this._joystickAngle;},enumerable:!1,configurable:!0}),t.prototype.onJoystickMove=function(t){this._joystickAngle=t,this._JoystickArrow.onJoystickMove(t),this._centerPoint.onJoystickMove(t);for(var e=0;e<this._count;e++){var i=this._role[e];i&&i.onJoystickMove(this._joystickAngle);}},t.prototype.onJoystickStop=function(){this._JoystickArrow.onJoystickStop(),this._centerPoint.onJoystickStop();for(var t=0;t<this._count;t++){var e=this._role[t];e&&e.onJoystickStop();}},t.prototype.getMovePoints=function(){return this._movePoints;},t.prototype.getRole=function(t){return this._role[t];},t.prototype.getRandomRole=function(){var t=Math.floor(Math.random()*this._count);return this._role[t];},t.prototype.getMainRole=function(){return this._role[0];},t.prototype.getCenterPoint=function(){return this._centerPoint;},t.prototype.toPos=function(){return this._centerPoint.toPos();},Object.defineProperty(t.prototype,'centerPos',{get:function(){return cc.v2(this._centerPoint.x,this._centerPoint.y);},enumerable:!1,configurable:!0}),t.prototype.mainUpdate=function(t){for(var e in(this._centerPoint.mainUpdate(t),this._role))this._role[e].mainUpdate(t);},t.prototype.drawPoints=function(){for(var t=0;t<this._movePoints.length;t++)this.drawRoadPoint(cc.v2(0^this._movePoints[t].x,0^this._movePoints[t].y),'0xff0000',5,5);},t.prototype.getGraphic=function(){if(!this._graphicDic){var t=new cc.Node();this._parent.addChild(t),t.setPosition(0,0);var e=t.addComponent(cc.Graphics);this._graphicDic=e;}return this._graphicDic;},t.prototype.drawRoadPoint=function(t,e,i,o){var n=this.getGraphic();n.fillColor.fromHEX(e),n.rect(-i+t.x,-o+t.y,2*i,2*o),n.fill();},t._i=null,t;}();i.default=l,cc._RF.pop();},{}],Root:[function(t,e,i){'use strict';cc._RF.push(e,'2c5168XBDNMlbB2PQCzCV8F','Root');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.Root=void 0;var s=t('LayerMgr'),a=cc._decorator,c=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.MapLayer=null,e.BattleLayer=null,e.MainCityLayer=null,e.MainLayer=null,e.DefaultLayer=null,e.TipsLayer=null,e.PopLayer=null,e.GameManagerLayer=null,e.WarnLayer=null,e.MiniGameLayer=null,e.NdClickLayer=null,e;}return n(e,t),e.prototype.onLoad=function(){s.LayerMgr.I.setRoot(this.node),s.LayerMgr.I.MapLayer=this.MapLayer,s.LayerMgr.I.BattleLayer=this.BattleLayer,s.LayerMgr.I.MainCityLayer=this.MainCityLayer,s.LayerMgr.I.MainLayer=this.MainLayer,s.LayerMgr.I.DefaultLayer=this.DefaultLayer,s.LayerMgr.I.TipsLayer=this.TipsLayer,s.LayerMgr.I.PopLayer=this.PopLayer,s.LayerMgr.I.GameManagerLayer=this.GameManagerLayer,s.LayerMgr.I.WarnLayer=this.WarnLayer,s.LayerMgr.I.MiniGameLayer=this.MiniGameLayer,s.LayerMgr.I._NdClickLayer=this.NdClickLayer,s.LayerMgr.I.initClickAnima();},r([l(cc.Node)],e.prototype,'MapLayer',void 0),r([l(cc.Node)],e.prototype,'BattleLayer',void 0),r([l(cc.Node)],e.prototype,'MainCityLayer',void 0),r([l(cc.Node)],e.prototype,'MainLayer',void 0),r([l(cc.Node)],e.prototype,'DefaultLayer',void 0),r([l(cc.Node)],e.prototype,'TipsLayer',void 0),r([l(cc.Node)],e.prototype,'PopLayer',void 0),r([l(cc.Node)],e.prototype,'GameManagerLayer',void 0),r([l(cc.Node)],e.prototype,'WarnLayer',void 0),r([l(cc.Node)],e.prototype,'MiniGameLayer',void 0),r([l(cc.Node)],e.prototype,'NdClickLayer',void 0),r([c],e);}(cc.Component);i.Root=p,cc._RF.pop();},{}],RvoAgent:[function(t,e,i){'use strict';cc._RF.push(e,'5e2a2zETMVK9LizmY9zj80R','RvoAgent');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('RVOMath'),a=t('Simulator'),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._sid=-1,e.targetSid=-1,e._stop=!1,e;}return n(e,t),Object.defineProperty(e.prototype,'sid',{get:function(){return this._sid;},set:function(t){this._sid=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'agent',{get:function(){return!this._agent&&this.sid>0&&(this._agent=a.Simulator.I.getAgent(this.sid)),this._agent;},set:function(t){this._agent=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'targetPos',{get:function(){return this._targetPos;},set:function(t){this._targetPos=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'stop',{get:function(){return this._stop;},set:function(t){this._stop=t;},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._sid>-1){var t=a.Simulator.I.getAgentPosition(this._sid);Number.isNaN(t.x)||Number.isNaN(t.y)?console.log('sid='+this._sid+'的对象PosX='+t.x+',PosY='+t.y):this.node.setPosition(t.x,t.y);}this.updatePrefVelocity();},e.prototype.updatePrefVelocity=function(){if(this.agent&&null!=this.targetPos){var t=a.Simulator.I.getAgentPosition(this._sid),e=this.targetPos.minus(t);s.RVOMath.absSq(e)>1&&(e=s.RVOMath.normalize(e).scale(this.agent.maxSpeed)),a.Simulator.I.setAgentPrefVelocity(this._sid,e);}},r([l],e);}(cc.Component));i.default=p,cc._RF.pop();},{}],RvoConfig:[function(t,e,i){'use strict';cc._RF.push(e,'76992Kih7BLpJfDq641/gzc','RvoConfig'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('Vector2'),n=function(){function t(){}return t.neighborDist=50,t.radius=25,t.maxSpeed=200,t.velocity=new o.Vector2(0,0),t.maxNeighbors=10,t.timeHorizon=25,t.timeHorizonObst=5,t.gameTimeStep=1,t;}();i.default=n,cc._RF.pop();},{}],SATCircleCld:[function(t,e,i){'use strict';cc._RF.push(e,'203e1ImzTVCBoy3wpvUqYP9','SATCircleCld');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('SATCollider'),a=t('TZSAT'),c=cc._decorator,l=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.init=function(t,e,i){this.data=new a.SATCircle(t,e),this.massLev=i&&i.massLev||0,this.isCollider=i&&i.isCollider||0,this.type=i&&i.type||0;},e.prototype.resetRadius=function(t){this.data instanceof a.SATCircle&&(this.data.r=t);},e.prototype.setPostion=function(t){this.data&&(this.data.pos.x=t.x,this.data.pos.y=t.y);},r([l],e);}(s.default));i.default=p,cc._RF.pop();},{}],SATCollider:[function(t,e,i){'use strict';cc._RF.push(e,'117cbN/JNJPcL4wLftoQY90','SATCollider');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('SATConst'),a=t('SATMgr'),c=cc._decorator,l=c.ccclass,p=c.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.massLev=0,e.isCollider=0,e.data=null,e;}return n(e,t),e.prototype.onEnable=function(){this.type||(this.type=s.SATColliderType.Static),a.default.I.entities.push(this),this.CldIsValid=!0;},e.prototype.onDisable=function(){for(var t=a.default.I.entities.length,e=0;e<t;e++)if(a.default.I.entities[e]===this){a.default.I.entities.splice(e,1);break;}this.CldIsValid=!1;},e.prototype.onColliderEvent=function(){cc.log('碰撞');},e.prototype.respondToCollision=function(t,e){this.isCollider||t.isCollider?this.onColliderEvent(t):this.canColider(this.type,t.type)&&this.massLev&&t.massLev&&(this.massLev>t.massLev?t.data.pos.add(e.overlapV):t.massLev>this.massLev?this.data.pos.sub(e.overlapV.scale(2,2)):(e.overlapV.scale(0.5),this.data.pos.sub(e.overlapV),t.data.pos.add(e.overlapV)));},e.prototype.lateUpdate=function(){this.data&&(this.node.x=this.data.pos.x,this.node.y=this.data.pos.y);},e.prototype.canColider=function(t,e){var i=!1;switch(t){case s.SATColliderType.Static:i=e===s.SATColliderType.Role||e===s.SATColliderType.CenterPoint||e===s.SATColliderType.Monster;break;case s.SATColliderType.CenterPoint:i=e===s.SATColliderType.Static||e===s.SATColliderType.Monster;break;case s.SATColliderType.Role:i=e===s.SATColliderType.Static||e===s.SATColliderType.Role;break;case s.SATColliderType.Monster:i=e===s.SATColliderType.Static||e===s.SATColliderType.CenterPoint||e===s.SATColliderType.Monster;}return i;},r([l,p('碰撞组件/SATCollider')],e);}(cc.Component);i.default=u,cc._RF.pop();},{}],SATConst:[function(t,e,i){'use strict';cc._RF.push(e,'ce1fefMxbZGJZfQHi8O9JV8','SATConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.SATTreeWorldPos=i.SATColliderType=void 0,function(t){t[t.Static=0]='Static',t[t.CenterPoint=1]='CenterPoint',t[t.Role=2]='Role',t[t.Monster=3]='Monster',t[t.RoleSkill=4]='RoleSkill',t[t.MonsterSkill=5]='MonsterSkill';}(i.SATColliderType||(i.SATColliderType={}));i.SATTreeWorldPos=function(t,e,i,o,n){this.aabb=t||cc.rect(),this.matrix=e||cc.mat4(),this.radius=o||0,this.radius2=o||0,this.points=i,this.position=n||cc.v2();},cc._RF.pop();},{}],SATMgr:[function(t,e,i){'use strict';cc._RF.push(e,'e64e132lZRNuIz+FjstEJf9','SATMgr'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('TZSAT'),n=function(){function t(){this.response=null,this.entities=[];}return Object.defineProperty(t,'I',{get:function(){return null==this._I&&(this._I=new t(),this._I.response=new o.SATResponse()),this._I;},enumerable:!1,configurable:!0}),t.prototype.lateUpdate=function(){for(var t=this.entities,e=this.entities.length,i=0;i<e;i++)for(var n=t[i],r=i+1;r<e;r++){var s=t[r];this.response.clear();var a=n.data,c=s.data;a&&c&&(a instanceof o.SATCircle?c instanceof o.SATCircle?o.default.testCircleCircle(a,c,this.response):o.default.testCirclePolygon(a,c,this.response):c instanceof o.SATCircle?o.default.testPolygonCircle(a,c,this.response):o.default.testPolygonPolygon(a,c,this.response))&&n.respondToCollision(s,this.response);}},t._I=null,t;}();i.default=n,cc._RF.pop();},{}],SATPolygonCld:[function(t,e,i){'use strict';cc._RF.push(e,'58decaqbQ5LDLfsx5Zt9FIy','SATPolygonCld');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('SATCollider'),a=t('SATConst'),c=t('TZSAT'),l=cc._decorator,p=l.ccclass,u=l.property,h=l.menu,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.points=[],e.useLocal=!1,e.massLev=0,e.type=a.SATColliderType.Static,e.showDebug=1,e;}return n(e,t),e.prototype.onLoad=function(){if(this.useLocal&&this.massLev){var t=this.points.map(function(t){return cc.SATVec2(t.x,t.y);});this.data=new c.SATPolygon(cc.SATVec2(this.node.x,this.node.y),t),this.massLev=this.massLev||0,this.isCollider=0,this.type=0,this.showDebug&&this.drawPoints(t);}},e.prototype.init=function(t,e,i){this.data=new c.SATPolygon(t,e),this.massLev=i&&i.massLev||0,this.isCollider=i&&i.isCollider||0,this.type=i&&i.type||0,this.showDebug&&this.drawPoints(e);},e.prototype.resetDataPos=function(t,e){this.data&&(this.data.pos.x=t,this.data.pos.y=e);},e.prototype.setPostion=function(t){this.data&&(this.data.pos.x=t.x,this.data.pos.y=t.y);},e.prototype.getGraphic=function(){if(!this._graphicDic){var t=new cc.Node('graphicNode');this.node.addChild(t),t.x=t.y=0;var e=t.addComponent(cc.Graphics);this._graphicDic=e;}return this._graphicDic;},e.prototype.drawPoints=function(t){var e=this.getGraphic();e.fillColor.fromHEX('#00ff0050'),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),t[2]&&e.lineTo(t[2].x,t[2].y),t[3]&&e.lineTo(t[3].x,t[3].y),e.fill();},r([u([cc.Vec2])],e.prototype,'points',void 0),r([u],e.prototype,'useLocal',void 0),r([u],e.prototype,'massLev',void 0),r([u],e.prototype,'type',void 0),r([p,h('碰撞组件/SATPolygonCld')],e);}(s.default);i.default=d,cc._RF.pop();},{}],ScrollInner:[function(t,e,i){'use strict';cc._RF.push(e,'8925fIRc2BAjZ74SccsobsI','ScrollInner');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=s.menu,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollCom=null,e.m_OuterScrollView=null,e;}return n(e,t),e.prototype.onLoad=function(){this.scrollCom._extendCom=this,this.scrollCom._onTouchMoved=this._onTouchMoved.bind(this),this.scrollCom.content._innerState=1,this.scrollCom.node._innerState=1,this.scrollCom.touchMoveEvent=null,this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onNodeTouchMove,this);},e.prototype.onNodeTouchMove=function(t){this.scrollCom.touchMoveEvent=t.touch;},e.prototype._onTouchMoved=function(t,e){if(this.m_OuterScrollView&&this.scrollCom&&this.scrollCom.enabledInHierarchy&&!this.scrollCom.hasNestedViewGroup(t,e)){var i=t.touch,o=i.getLocation().sub(i.getStartLocation());if(this.scrollCom.content&&(this.m_OuterScrollView.isDifferentBetweenSettingAndPlan(this.scrollCom)||this.scrollCom._handleMoveLogic(i)),this.scrollCom.cancelInnerEvents){if(o.mag()>7&&!this.scrollCom._touchMoved&&t.target!==this.node){var n=new cc.Event.EventTouch(t.getTouches(),t.bubbles);n.type=cc.Node.EventType.TOUCH_CANCEL,n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this.scrollCom._touchMoved=!0;}this.scrollCom._stopPropagationIfTargetIsMe(t),this.scrollCom.touchMoveEvent=t.touch;}}},Object.defineProperty(e.prototype,'eventManager',{get:function(){return this.m_OuterScrollView?this.m_OuterScrollView._eventManager?this.m_OuterScrollView._eventManager:(this.m_OuterScrollView._eventManager=cc.eventManager,this.m_OuterScrollView._eventManager):cc.eventManager;},enumerable:!1,configurable:!0}),e.prototype.onDisable=function(){var t,e;if(this.scrollCom.touchMoveEvent&&this.m_OuterScrollView)for(var i=null===(t=this.eventManager._getListeners(cc.EventListener.ListenerID.TOUCH_ONE_BY_ONE))||void 0===t?void 0:t._sceneGraphListeners,o=0,n=i.length;o<n;o++){var r=i[o];if((null==r?void 0:r.owner)===(null===(e=this.m_OuterScrollView)||void 0===e?void 0:e.node)){r._claimedTouches=r._claimedTouches||[],r._claimedTouches.length=0,r._claimedTouches.push(this.scrollCom.touchMoveEvent),this.scrollCom.touchMoveEvent=null;break;}}},r([l(cc.ScrollView)],e.prototype,'scrollCom',void 0),r([a,c('滚动列表组件/ScrollInner')],e);}(cc.Component);i.default=p,cc._RF.pop();},{}],ScrollOutter:[function(t,e,i){'use strict';cc._RF.push(e,'069c7XlUI9D2Ksbn8XuwILm','ScrollOutter');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('ListView'),a=cc._decorator,c=a.ccclass,l=(a.property,a.menu),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.m_PlanDir=null,e.m_InerInit=null,e;}return n(e,t),e.prototype.onLoad=function(){this.scrollCom=this.node.getComponent(cc.ScrollView),this.scrollCom&&(this.ListCom=this.node.getComponent(s.default),this.scrollCom._extendCom=this,this.scrollCom._onTouchBegan=this._onTouchBegan,this.scrollCom._onTouchMoved=this._onTouchMoved,this.scrollCom.hasNestedViewGroup=this._hasNestedViewGroup);},e.prototype._hasNestedViewGroup=function(t){if(t.eventPhase===cc.Event.CAPTURING_PHASE)return!1;},e.prototype._onTouchBegan=function(t,e){if(this.enabledInHierarchy){var i=this._extendCom;if(!i._hasNestedViewGroup(t,e)){i.m_PlanDir=null;var o=t.touch;this.content&&this._handlePressLogic(o),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t);}}},e.prototype._onTouchMoved=function(t,e){if(this.enabledInHierarchy){var i=this._extendCom;if(!i._hasNestedViewGroup(t,e)){var o=t.touch,n=o.getLocation().sub(o.getStartLocation());if(null==i.m_PlanDir&&n.mag()>7&&(i.m_PlanDir=Math.abs(n.x)>Math.abs(n.y)?1:-1),this.content&&(i.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(o)),this.cancelInnerEvents){if(n.mag()>7&&!this._touchMoved&&t.target!==this.node&&t.target.parent&&!t.target.parent._innerState&&!t.target._innerState){var r=new cc.Event.EventTouch(t.getTouches(),t.bubbles);r.type=cc.Node.EventType.TOUCH_CANCEL,r.touch=t.touch,r.simulate=!0,t.target.dispatchEvent(r),this._touchMoved=!0;}this._stopPropagationIfTargetIsMe(t);}}}},e.prototype.isDifferentBetweenSettingAndPlan=function(t){return!(0==this.m_PlanDir||1==this.m_PlanDir&&t.horizontal||-1==this.m_PlanDir&&t.vertical);},r([c,l('滚动列表组件/ScrollOutter')],e);}(cc.Component);i.default=p,cc._RF.pop();},{}],ScrollResumeTouch:[function(t,e,i){'use strict';cc._RF.push(e,'83de94TZFxL4J3FSUndA3Hc','ScrollResumeTouch');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.onLoad=function(){var t,e,i,o;this._resumeScollView=this._resumeScollView||(null===(o=null===(i=null===(e=null===(t=this.node)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.parent)||void 0===i?void 0:i.parent)||void 0===o?void 0:o.getComponent(cc.ScrollView)),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onNodeTouchMove,this);},e.prototype.setResumeScrollView=function(t){this._resumeScollView=t;},e.prototype._onNodeTouchMove=function(t){this._resumeScollView&&(this._resumeScollView._touchMoveEvent=t.touch);},Object.defineProperty(e.prototype,'eventManager',{get:function(){return this._resumeScollView?this._resumeScollView._eventManager?this._resumeScollView._eventManager:(this._resumeScollView._eventManager=cc.eventManager,this._resumeScollView._eventManager):cc.eventManager;},enumerable:!1,configurable:!0}),e.prototype.onDisable=function(){var t,e;if(this._resumeScollView&&this._resumeScollView._touchMoveEvent)for(var i=null===(t=this.eventManager._getListeners(cc.EventListener.ListenerID.TOUCH_ONE_BY_ONE))||void 0===t?void 0:t._sceneGraphListeners,o=0,n=i.length;o<n;o++){var r=i[o];if((null==r?void 0:r.owner)===(null===(e=this._resumeScollView)||void 0===e?void 0:e.node)){r._claimedTouches=r._claimedTouches||[],r._claimedTouches.length=0,r._claimedTouches.push(this._resumeScollView._touchMoveEvent),this._resumeScollView._touchMoveEvent=null;break;}}},r([s],e);}(cc.Component);i.default=a,cc._RF.pop();},{}],SdkMgr:[function(t,e,i){'use strict';cc._RF.push(e,'265557dVnJB4LXrhVlOrDEz','SdkMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.SdkMgr=void 0;var o=t('AppEventConst'),n=t('EventClient'),r=t('UtilLog'),s=t('UtilUrl'),a=t('GameApp'),c=t('LayerMgr'),l=t('MsgToastMgr'),p=t('i18n'),u=t('LoginModel'),h=t('DataReportConst'),d=t('BundleMgr'),f=t('ResConst'),y=t('UtilPaltform'),_=function(){function t(){this.isCreateRole=0,this._shiLingStatus=0,this._user_id=0,this._token='',this.deviceLv=2,this.deviceLvTj=!1,this.serVstr='';}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t(),this.Instance._init()),this.Instance;},enumerable:!1,configurable:!0}),t.prototype._init=function(){this.addEvent();},t.prototype.addEvent=function(){n.EventClient.I.on(o.AppEvent.SDKLogin,this.onSDkLogin,this),n.EventClient.I.on(o.AppEvent.SDKExitGame,this.onSDKExitGame,this),n.EventClient.I.on(o.AppEvent.SDKPay,this.onSDKPay,this),n.EventClient.I.on(o.AppEvent.SDKShowAgeTip,this.onSDKShowAgeTip,this),n.EventClient.I.on(o.AppEvent.SetSdkLoginParam,this.onSetSdkLoginParam,this);},t.prototype.delEvent=function(){n.EventClient.I.off(o.AppEvent.SDKLogin,this.onSDkLogin,this),n.EventClient.I.off(o.AppEvent.SDKExitGame,this.onSDKExitGame,this),n.EventClient.I.off(o.AppEvent.SDKPay,this.onSDKPay,this),n.EventClient.I.off(o.AppEvent.SDKShowAgeTip,this.onSDKShowAgeTip,this),n.EventClient.I.off(o.AppEvent.SetSdkLoginParam,this.onSetSdkLoginParam,this);},t.prototype.init=function(){},t.prototype.onSDkLogin=function(){t.I.login();},t.prototype.onSDKExitGame=function(){t.I.exitLogin();},t.prototype.onSDKPay=function(e){var i=e.info,o=e.gid;t.I.pay(i,o);},t.prototype.onSDKShowAgeTip=function(){t.I.showAgeTips();},t.prototype.login=function(){var t=this;y.UtilPaltform.isWeChatGame?(this.onSetSdkLoginParam(window.IndexGlobal.commonParams),n.EventClient.I.emit(o.AppEvent.ReqLogin,this._user_id,this._token)):window&&window.TZSDK&&(console.log('========sdk 登录========= window[TZSDK].login ===='),window.SDK.login(function(e){e||(e=window.GameSDKGlobal.login_param),t.onSetSdkLoginParam(e),n.EventClient.I.emit(o.AppEvent.ReqLogin,t._user_id,t._token);}));},t.prototype.onSetSdkLoginParam=function(t){t.app_id;var e=t.channel_id,i=t.uuid||'',r=t.login_data,s=r.user_id,l=r.token;if(r.is_new,y.UtilPaltform.isWeChatGame)a.default.I.RealNameState=4;else{var p=t.user_info.real_auth;a.default.I.RealNameState=p;}var d,f=null,_=0,g=0;if(y.UtilPaltform.isWeChatGame)d=(f=t.systemInfo).model;else{d=(f=t.system_info).phone_model,_=f.notch_height,g=f.bottom_height;var m=t.shi_ling_status;this._shiLingStatus=m;}this._user_id=s,this._token=l;var v=u.default.I;v.channel_id=e,(null==i?void 0:i.length)||console.log('sdk登录返回数据出错'),v.pf_uuid=i,v.game_uuid=i,n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.AppRun),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.GameAppVersion),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.GameResVersion),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.SDKInit),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.ShowLoadingUI),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.NeedDownloadRes),n.EventClient.I.emit(o.AppEvent.DataReport,h.EDataReportId.ResDownloadFinish);var b=0,C=0;if(this.serVstr+='['+d+']',cc.sys.os===cc.sys.OS_IOS&&cc.sys.isNative){this.serVstr+='IOS';var S=window.Channel_SDK;S&&(b=S.notch_height,C=S.bottom_height),d&&-1!==d.indexOf('iPhone')?(this.serVstr+='有ihpone设备信息',this._setIphoneDeLv(d,'iPhone')):(this.deviceLv=2,this.serVstr+='ihpone设备信息为空',console.warn('iphone设备信息为空,或者是ipad',d));}else if(cc.sys.platform===cc.sys.WECHAT_GAME){this.serVstr+='WECHAT_GAME';var w=wx.getSystemInfoSync();if(w){var R=w.system||'',I=wx.getMenuButtonBoundingClientRect(),M=I.top;M<=20&&Number(w.safeArea.height)+Number(w.safeArea.top)!==w.screenHeight&&(M=Number(w.statusBarHeight)+Number(I.height)),M&&R.indexOf(cc.sys.OS_WINDOWS)>-1&&(M=0);var T=M;cc.sys.os===cc.sys.OS_IOS&&M>0&&(M+=10),w.model.indexOf('iPhone 15')>-1&&M>0&&(M+=10),T>10&&cc.sys.os===cc.sys.OS_ANDROID&&(T=10),b=M,C=T,this.deviceLv=2;}else this.deviceLv=2;}else cc.sys.os===cc.sys.OS_IOS?(this.serVstr+='IOS_WEB',this.deviceLv=2):(this.serVstr+='ANDROID',this.deviceLv=2),b=_,C=g;c.LayerMgr.I.notchHeight=+b,c.LayerMgr.I.bottomHeight=+C;},t.prototype._setIphoneDeLv=function(t,e){var i=t.split(e);if(i.length>=2){var o=i[1].split(','),n=Number(o[0]),r=Number(o[1]);n>=10&&r>=6?(this.deviceLv=2,this.serVstr+='大于10.6',n>=15&&r>=3&&(this.serVstr+='大于15.3',this.deviceLvTj=!0)):(this.serVstr+='小于10.6',this.deviceLv=2);}else this.serVstr+='数组空',this.deviceLv=2;},t.prototype.pay=function(t,e){if(window&&window.SDK){var i={price:t.price,order_id:t.order_id,goods_name:t.goods_name,goods_desc:t.goods_desc,goods_id:t.goods_id,server_id:t.server_id,server_name:t.server_name,buy_num:t.buy_num,role_id:t.role_id,role_name:t.role_name,notify_url:t.notify_url,extra:t.extra,sign:t.sign,fv:t.fv||0,onlineSecond:t.onlineSecond||0,level:t.level||0};window.SDK.pay(i,function(t){0===t.tag&&(n.EventClient.I.emit(o.AppEvent.BuyShopSuccess,e),l.default.Show(p.i18n.tt(p.Lang.recharge_success)));});}else console.error(' sdk 支付调用失败');},t.prototype.reportData=function(t){window&&window.SDK?window.SDK.reportData(t):console.error(' sdk 埋点上报调用失败');},t.prototype.reportRoleInfo=function(t){window&&window.SDK&&window.SDK.reportRoleInfo?window.SDK.reportRoleInfo(t):console.log(' sdk 角色信息上报调用失败');},t.prototype.roleUpgrade=function(t){window&&window.SDK&&window.SDK.roleUpgrade?window.SDK.roleUpgrade(t):console.log(' sdk 角色等级上报调用失败');},t.prototype.showAgeTips=function(){console.log(' sdk 显示适龄提示'),window&&window.SDK?window.SDK.openHealthTip():console.log(' sdk 打开健康游戏公告调用失败');},t.prototype.switchAccount=function(){window&&window.SDK&&window.SDK.switchAccount&&window.SDK.switchAccount();},t.prototype.exitLogin=function(){window&&window.SDK&&window.SDK.switchAccount?window.SDK.switchAccount():window.location.reload();},t.prototype.openUserCenter=function(){window&&window.SDK&&window.SDK.openUserCenter&&window.SDK.openUserCenter();},t.prototype.openCustomer=function(){window&&window.SDK&&window.SDK.openCustomer&&window.SDK.openCustomer();},t.prototype.initPocoSDK=function(){s.UtilUrl.getQueryString('pocoOpen')&&(a.default.I.isDEV()||a.default.I.isDevOrWD())&&(d.default.I.loadAsync(f.EBundleType.subpack).then(function(){d.default.I.loadAsync(f.EBundleType.poco).then(function(){n.EventClient.I.emit(o.AppEvent.PocoSDKInit);});}),r.UtilLog.I.Init());},t.prototype.openPerformance=function(){s.UtilUrl.getQueryString('performanceOpen')&&(window.performanceOpen=!0);},t.prototype.sdkMsgCheck=function(t,e){void 0===e&&(e=null),window&&window.SDK&&window.SDK.msgSecCheck?window.SDK.msgSecCheck(t,function(t){0!=t.errcode?console.log(t.errMsg||'检测不通过'):e&&e();}):e&&e();},t.prototype.copyRoleInfo2Clipboard=function(t){window&&window.SDK&&window.SDK.setRoleInfo2Clipboard&&y.UtilPaltform.isWeChatGame&&window.SDK.setRoleInfo2Clipboard({role_id:t.userID,role_nick:t.d.Nick,server_id:t.d.ShowAreaId,server_name:t.d.AreaName,game_account_id:t.userID});},t.prototype.setClipboardData=function(t){window&&window.SDK&&window.SDK.setClipboardData&&window.SDK.setClipboardData(t);},t;}();i.SdkMgr=_,cc._RF.pop();},{}],SelServerView:[function(t,e,i){'use strict';cc._RF.push(e,'92bbf7eOTROoJFlcaYtFrjY','SelServerView');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('WinMgr'),c=t('ListView'),l=t('UtilColor'),p=t('i18n'),u=t('AppEventConst'),h=t('DataReportConst'),d=t('TaskCollector'),f=t('StorageMgr'),y=t('LoginModel'),_=t('BaseUiView'),g=t('AppViewConst'),m=t('UtilClk'),v=t('UtilsMain'),b=t('ResConst'),C=cc._decorator,S=C.ccclass,w=C.property,R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BtnClose=null,e.content1=null,e.content2=null,e._selPageSerList=[],e._curIndex=0,e;}return n(e,t),e.prototype.onLoad=function(){},e.prototype.addEvent=function(){},e.prototype.delEvent=function(){},e.prototype.init=function(){this.addEvent(),this.initUI();},e.prototype.initUI=function(){m.UtilClk.Click(this.BtnClose,this.onClose,this);var t=y.default.I,e=t.getPageTitles();this.content1.setNumItems(e.length);var i=-1;0===t.getPageInfo(-1).length&&(i=0),this.reServerList(i);},e.prototype.reServerList=function(t){var e=y.default.I.getPageInfo(t);this._selPageSerList=e,this.content2.setNumItems(e.length);},e.prototype.setLeftList=function(t,e,i){var o=t.getChildByName('Button');o.getChildByName('Label').color=e?l.UtilColor.Hex2Rgba(l.UtilColor.BtnYellow2):l.UtilColor.Hex2Rgba(l.UtilColor.BtnBlue2);var n=e?u.RES_MAIN_ENUM.Login_Btn_E01:u.RES_MAIN_ENUM.Login_Btn_E02;v.UtilsMainNode.LoadSpriteFrame(o.getComponent(cc.Sprite),n,null,b.EBundleType.resources),t.getComponentInChildren(cc.Label).string=i;},e.prototype.onRederList1=function(t,e){var i=this,o=y.default.I.getPageTitles(),n=o[e];this.setLeftList(t,e===this._curIndex,n.labelText),m.UtilClk.Click(t.getChildByName('Button'),function(){if(s.EventClient.I.emit(u.AppEvent.DataReport,h.EDataReportId.ClickSelectLeft),null!=i._curIndex){var t=i.content1.getItemByListId(i._curIndex);t&&i.setLeftList(t,!1,o[i._curIndex].labelText);}i._curIndex=e,i.setLeftList(i.content1.getItemByListId(e),!0,n.labelText);var r=n.page;i.reServerList(r);},this,{swallow:!0,scale:1});},e.prototype.onRederList2=function(t,e){var i=this,o=this._selPageSerList[e],n=t.getChildByName('Button').getChildByName('State'),r=(null==o?void 0:o.level)?'<color='+l.UtilColor.B.Green+'>\uFF08'+o.level+p.i18n.lv+'\uFF09</c>':'',c=1===o.state||2===o.state;v.UtilsMainNode.LoadSpriteFrame(n,''+u.RES_MAIN_ENUM.Login_Img_Dl_Bs+(c?o.state:4),null,b.EBundleType.resources),t.getComponentInChildren(cc.RichText).string=''+o.area_name+r,m.UtilClk.Click(t.getChildByName('Button'),function(){if(s.EventClient.I.emit(u.AppEvent.DataReport,h.EDataReportId.ClickSelectRight),y.default.I.isCheckUserProto){var t=y.default.I;t.selServerId=o.area_id,2!==o.state||o.user_id?(4===o.state?y.default.I.msgBoxShow(p.i18n.tt(p.Lang.server_maintenance_tips)):o.user_id?(t.selUserId=o.user_id,s.EventClient.I.emit(u.AppEvent.ReqGetgateaddr),d.default.I.endTask(d.DB_KEY_ENUM.LodgingEnd,d.DB_ID_ENUM.EnterGame),d.default.I.endTask(d.DB_KEY_ENUM.GameStart,d.DB_ID_ENUM.GameWelcomeSuccess),d.default.I.endTask(d.DB_KEY_ENUM.GameWelcomeShow,d.DB_ID_ENUM.GameWelcomeSuccess)):a.default.I.open(g.AppViewConst.CreateRoleView),f.StorageMgr.I.setValue('userProto_'+t.UserAcc,!0),s.EventClient.I.emit(u.AppEvent.ClickServerItem,o),i.close()):y.default.I.msgBoxShow(p.i18n.tt(p.Lang.server_full_tips));}else y.default.I.msgBoxShow('<color='+l.UtilColor.B.NorText+'>'+p.i18n.tt(p.Lang.acclog_toggle_tips)+'</c>');},this,{swallow:!0,scale:1});},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},e.prototype.onClose=function(){this.close();},r([w(cc.Node)],e.prototype,'BtnClose',void 0),r([w(c.default)],e.prototype,'content1',void 0),r([w(c.default)],e.prototype,'content2',void 0),r([S],e);}(_.default);i.default=R,cc._RF.pop();},{}],Simulator:[function(t,e,i){'use strict';cc._RF.push(e,'bf2cf8CSWVDVo5rhWKB8PCS','Simulator'),Object.defineProperty(i,'__esModule',{value:!0}),i.Simulator=void 0;var o=t('Agent'),n=t('KdTree'),r=t('RVOMath'),s=t('commonDefine'),a=function(){function t(){this.agentId=0,this.agentIdLst=[],this.aid2agent=Object.create(null),this.obstacles=[],this.kdTree=new n.default(),this.globalTime=0,this.timeStep=0.1;}return Object.defineProperty(t,'I',{get:function(){return t._i||(t._i=new t()),t._i;},enumerable:!1,configurable:!0}),t.prototype.getAgent=function(t){return this.aid2agent[this.agentIdLst[t]];},t.prototype.getAgentByAid=function(t){return this.aid2agent[t];},t.prototype.getGlobalTime=function(){return this.globalTime;},t.prototype.getNumAgents=function(){return this.agentIdLst.length;},t.prototype.setAgentPrefVelocity=function(t,e){this.aid2agent[t].prefVelocity.copy(e);},t.prototype.getAgentPosition=function(t){return this.aid2agent[t].position;},t.prototype.getAgentPrefVelocity=function(t){return this.aid2agent[t].prefVelocity;},t.prototype.getAgentVelocity=function(t){return this.aid2agent[t].velocity;},t.prototype.getAgentRadius=function(t){return this.aid2agent[t].radius;},t.prototype.getAgentOrcaLines=function(t){return this.aid2agent[t].orcaLines;},t.prototype.addAgent=function(t,e,i,n,r){if(!this.defaultAgent)throw new Error('no default agent');var s=new o.Agent();return s.position.copy(t),s.maxNeighbors=this.defaultAgent.maxNeighbors,s.maxSpeed=i||this.defaultAgent.maxSpeed,s.neighborDist=this.defaultAgent.neighborDist,s.radius=e||this.defaultAgent.radius,s.timeHorizon=this.defaultAgent.timeHorizon,s.timeHorizonObst=this.defaultAgent.timeHorizonObst,s.velocity.copy(n||this.defaultAgent.velocity),s.mass=r||1,s.id=this.agentId++,this.aid2agent[s.id]=s,this.agentIdLst.push(s.id),s.id;},t.prototype.removeAgent=function(t){if(this.hasAgent(t)){delete this.aid2agent[t];var e=this.agentIdLst.indexOf(t);this.agentIdLst[e]=this.agentIdLst[this.agentIdLst.length-1],this.agentIdLst.length--;}},t.prototype.hasAgent=function(t){return!!this.aid2agent[t];},t.prototype.setAgentMass=function(t,e){this.aid2agent[t].mass=e;},t.prototype.getAgentMass=function(t){return this.aid2agent[t].mass;},t.prototype.setAgentRadius=function(t,e){this.aid2agent[t].radius=e;},t.prototype.setTimeStep=function(t){this.timeStep=t;},t.prototype.getTimeStep=function(){return this.timeStep;},t.prototype.setAgentDefaults=function(t,e,i,n,r,s,a){this.defaultAgent||(this.defaultAgent=new o.Agent()),this.defaultAgent.maxNeighbors=e,this.defaultAgent.maxSpeed=s,this.defaultAgent.neighborDist=t,this.defaultAgent.radius=r,this.defaultAgent.timeHorizon=i,this.defaultAgent.timeHorizonObst=n,this.defaultAgent.velocity=a;},t.prototype.run=function(t){t=this.getTimeStep()||t,this.kdTree.buildAgentTree(this.getNumAgents());for(var e=this.agentIdLst.length,i=0;i<e;i++)this.aid2agent[this.agentIdLst[i]].computeNeighbors(this),this.aid2agent[this.agentIdLst[i]].computeNewVelocity(t);for(i=0;i<e;i++)this.aid2agent[this.agentIdLst[i]].update(t);this.globalTime+=t;},t.prototype.addObstacle=function(t){if(t.length<2)return-1;for(var e=this.obstacles.length,i=0;i<t.length;++i){var o=new s.Obstacle();o.point=t[i],0!==i&&(o.previous=this.obstacles[this.obstacles.length-1],o.previous.next=o),i===t.length-1&&(o.next=this.obstacles[e],o.next.previous=o),o.direction=r.RVOMath.normalize(t[i===t.length-1?0:i+1].minus(t[i])),2===t.length?o.convex=!0:o.convex=r.RVOMath.leftOf(t[0===i?t.length-1:i-1],t[i],t[i===t.length-1?0:i+1])>=0,o.id=this.obstacles.length,this.obstacles.push(o);}return e;},t.prototype.processObstacles=function(){this.kdTree.buildObstacleTree();},t.prototype.queryVisibility=function(t,e,i){return this.kdTree.queryVisibility(t,e,i);},t.prototype.getObstacles=function(){return this.obstacles;},t.prototype.clear=function(){this.agentIdLst.length=0,this.agentId=0,this.aid2agent=Object.create(null),this.defaultAgent=null,this.kdTree=new n.default(),this.obstacles.length=0,this.timeStep=0.1;},t;}();i.Simulator=a,cc._RF.pop();},{}],SpineCmp:[function(t,e,i){'use strict';cc._RF.push(e,'7efa91pwUpFt5Yzx6mwp/cl','SpineCmp');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.SpineCmp=void 0;var s=t('ResMgr'),a=cc._decorator.ccclass,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skeletonData=cc.js.createMap(!0),e;}return n(e,t),e.prototype.addRef=function(t){var e=t._uuid;this.skeletonData[e]||(this.skeletonData[e]=t),t.addRef();},e.prototype.decRef=function(){for(var t in this.skeletonData){var e=this.skeletonData[t];e.refCount>0&&s.RemoveSpine(e);}this.skeletonData=cc.js.createMap(!0);},e.prototype.onEnable=function(){cc.isValid(this.node)&&this.node.replay();},e.prototype.onDestroy=function(){this.decRef();var t=this.node;t&&t.release(),this.unscheduleAllCallbacks();},r([a],e);}(cc.Component);i.SpineCmp=c,cc._RF.pop();},{}],SpineMain:[function(t,e,i){'use strict';cc._RF.push(e,'1e8baIivghDc4jBVxCgEei3','SpineMain');var ac=window.extend_func(this,'__extends');var n=ac.__extends;Object.defineProperty(i,'__esModule',{value:!0});var r=t('ResConst'),s=t('ResMgr'),a=t('SpineCmp'),c=function(t){function e(e){var i=t.call(this)||this;if(i._skeleton=null,i._replay=!1,i.name=e.nodeName||'SpineBase',i.addComponent(a.SpineCmp),!e||!e.path)return console.warn('data.path缺失'),i;var o=e.path.lastIndexOf('/');if(o<0)return console.warn('path参数不对'),i;i._curAnimation=e.actionName,i._replay=e.replay;var n=e.path.substring(o+1);return s.ResMgr.I.loadRemote(e.path,r.AssetType.Spine,function(t,o){if(!t&&i&&cc.isValid(i)){var r=i.getComponent(sp.Skeleton);r||(r=i.addComponent(sp.Skeleton)),i._skeleton=r,o.textureNames=[n+'.png'],i._skeleton.skeletonData=o,e.callback&&e.callback.call(e.context,i._skeleton),i.playAction(i._curAnimation,e.loop,e.endCallback,e.context,e.trackIndex),i.getComponent(a.SpineCmp).addRef(o);}}),i;}return n(e,t),e.create=function(t){return new e({path:t.path,actionName:t.actionName,loop:t.loop});},e.prototype.playAction=function(t,e,i,o,n,r){var s=this;if(void 0===e&&(e=!0),void 0===i&&(i=null),void 0===o&&(o=null),void 0===n&&(n=0),void 0===r&&(r=!1),this._skeleton){if(t){if(!r&&this._skeleton.animation===t)return;this._skeleton.setAnimation(n,t,e);}i&&this._skeleton.setCompleteListener(function(){i.call(o,s._skeleton);});}else this._curAnimation=t;},e.prototype.replay=function(){this._skeleton&&this._replay&&this._skeleton.setAnimation(0,this._curAnimation,!0);},e.prototype.release=function(){this._skeleton&&(this._skeleton.destroy(),this._skeleton=null);},e.prototype.destroy=function(){return this.release(),t.prototype.destroy.call(this);},e;}(cc.Node);i.default=c,cc._RF.pop();},{}],StartGamePanel:[function(t,e,i){'use strict';cc._RF.push(e,'35158IIoOBNQ72qjzmEet5d','StartGamePanel');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('EventClient'),a=t('BaseCmp'),c=t('WinMgr'),l=t('LoginConst'),p=t('i18n'),u=t('UtilColor'),h=t('ResMgr'),d=t('ResConst'),f=t('StorageMgr'),y=t('DataReportConst'),_=t('CCResMD5'),g=t('LoginModel'),m=t('LoginController'),v=t('AudioModel'),b=t('AppEventConst'),C=t('AppViewConst'),S=t('UtilClk'),w=t('UtilsMain'),R=t('GameApp'),I=t('UtilPaltform'),M=t('HttpReq'),T=cc._decorator,E=T.ccclass,A=T.property,P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NdBase=null,e.BtnNotice=null,e.BtnStartGame=null,e.BtnSelServer=null,e.LabNewSerName=null,e.LabNowSerName=null,e.Tog=null,e.LabUserProto=null,e.LabUserPrivacy=null,e.web=null,e.NdState=null,e.NdUser=null,e.NdPrivacy=null,e.BtnAge16=null,e.userProtoClosePngPath='',e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.addEvent(),this.initUI(),this.web.node.on('loaded',this.onLoadWebButton,this),this.onGameSwitch(),this.userProtoClosePngPath=b.RES_MAIN_ENUM.Login_btn_htgn,I.UtilPaltform.isWeChatGame&&this.openNoticeView(!1);},e.prototype.addEvent=function(){s.EventClient.I.on(b.AppEvent.ClickServerItem,this.onUpServerItem,this),s.EventClient.I.on(b.AppEvent.GameSwitch,this.onGameSwitch,this),s.EventClient.I.on(b.AppEvent.AgreePro,this.onAgreePro,this);},e.prototype.delEvent=function(){s.EventClient.I.off(b.AppEvent.ClickServerItem,this.onUpServerItem,this),s.EventClient.I.off(b.AppEvent.GameSwitch,this.onGameSwitch,this),s.EventClient.I.off(b.AppEvent.AgreePro,this.onAgreePro,this);},e.prototype.onGameSwitch=function(){var t,e,i=g.default.I,o=i.getLastLoginInfo()||i.getNewLoginInfo();this.BtnNotice.active=I.UtilPaltform.isWeChatGame;var n=null===(e=null===(t=window.IndexGlobal)||void 0===t?void 0:t.commonParams)||void 0===e?void 0:e.channel_info,r=null==n?void 0:n.game_show_agreement_left;this.NdUser.active=!!r,this.NdPrivacy.active=!!r;var s=null==n?void 0:n.game_show_agreement_bottom;if(R.default.I.isDEV()?this.Tog.node.active=!0:this.Tog.node.active=s,this.Tog.node.active?(3===(null==n?void 0:n.game_agreement_status)?this.Tog.isChecked=f.StorageMgr.I.getValue('userProto_'+i.UserAcc):this.Tog.isChecked=!(null==n?void 0:n.game_agreement_status),i.isCheckUserProto=this.Tog.isChecked):i.isCheckUserProto=!0,!this.severState&&o){this.severState=o.state;var a=1===o.state||2===o.state;w.UtilsMainNode.LoadSpriteFrame(this.NdState,''+b.RES_MAIN_ENUM.Login_Img_Dl_Bs+(a?o.state:4),null,d.EBundleType.resources);}},e.prototype.initUI=function(){var t=this;S.UtilClk.Click(this.BtnNotice,function(){t.openNoticeView(!0);},this),S.UtilClk.Click(this.BtnSelServer,this.openSelServerView,this),S.UtilClk.Click(this.BtnStartGame,this.onStartGame,this,{soundPath:v.MusicKey.btnStart,unRepeat:!0,time:1000}),S.UtilClk.Click(this.LabUserProto.node,this.onUserProto,this,{scale:1}),S.UtilClk.Click(this.LabUserPrivacy.node,this.onUserPrivacy,this,{scale:1}),S.UtilClk.Click(this.NdUser,this.onUserProto,this),S.UtilClk.Click(this.NdPrivacy,this.onUserPrivacy,this),S.UtilClk.Click(this.BtnAge16,this.openAgeTips,this),S.UtilClk.Click(this.Tog.node,this.onTog,this);},e.prototype.openAgeTips=function(){var t,e;c.default.I.open(C.AppViewConst.UserProWin,{title:'texture/login/dl_font_slts@ML',type:1,des:(null===(e=null===(t=window.IndexGlobal)||void 0===t?void 0:t.commonParams)||void 0===e?void 0:e.channel_info.shi_ling_msg)||''});},e.prototype.onBtnHide=function(){this.web.node.active=!1;},e.prototype.onTog=function(){s.EventClient.I.emit(b.AppEvent.DataReport,this.Tog.isChecked?y.EDataReportId.ShowRegisterArgumentSure:y.EDataReportId.ShowRegisterArgumentCancel),g.default.I.isCheckUserProto=this.Tog.isChecked;},e.prototype.onUserProto=function(){var t,e;s.EventClient.I.emit(b.AppEvent.DataReport,y.EDataReportId.ClickRegisterArgument),c.default.I.open(C.AppViewConst.UserProWin,{title:'texture/login/dl_font_yhxy@ML',type:2,url:null===(e=null===(t=window.IndexGlobal)||void 0===t?void 0:t.commonParams)||void 0===e?void 0:e.channel_info.game_register_agreement_url});},e.prototype.onUserPrivacy=function(){var t,e;s.EventClient.I.emit(b.AppEvent.DataReport,y.EDataReportId.ShowRegisterArgumentUI),c.default.I.open(C.AppViewConst.UserProWin,{title:'texture/login/dl_font_yszc@ML',type:2,url:null===(e=null===(t=window.IndexGlobal)||void 0===t?void 0:t.commonParams)||void 0===e?void 0:e.channel_info.game_privacy_agreement_url});},e.prototype.onLoadWebButton=function(t){var e=this;I.UtilPaltform.isWeChatGame||h.ResMgr.I.loadRemote(this.userProtoClosePngPath,d.AssetType.Texture2D,function(i,o){if(!i){var n=document.createElement('div'),r=document.createElement('img'),s=_.CCResMD5.GetHashUrl(o.nativeUrl);r.src=''+(s||o.nativeUrl),r.style.left=0.5*cc.visibleRect.width-e.web.node.width*e.web.node.scaleX*0.5+o.width+'px',r.style.top=0.5*cc.visibleRect.height-e.web.node.height*e.web.node.scaleY*0.5+o.width+'px',r.style.width=o.width+'px',r.style.height=o.height+'px',r.style.backgroundColor='transparent',r.style.borderColor='transparent',r.style.position='absolute',r.style.zIndex=''+cc.macro.MAX_ZINDEX;var a=document.createElement('button');a.style.left=0.5*cc.visibleRect.width-e.web.node.width*e.web.node.scaleX*0.5+'px',a.style.top=0.5*cc.visibleRect.height-e.web.node.height*e.web.node.scaleY*0.5+'px',a.style.width='100px',a.style.height='100px',a.style.backgroundColor='transparent',a.style.borderColor='transparent',a.style.position='absolute',a.style.zIndex=''+cc.macro.MAX_ZINDEX,a.onclick=function(){n.remove(),e.onBtnHide();},n.appendChild(r),n.appendChild(a),t&&t._impl&&t._impl._div&&t._impl._div.parentNode.appendChild(n);}});},e.prototype.onAgreePro=function(){this.Tog.isChecked=!0;var t=g.default.I;f.StorageMgr.I.setValue('userProto_'+t.UserAcc,!0),t.isCheckUserProto=this.Tog.isChecked;},e.prototype.openSelServerView=function(){g.default.I.isCheckUserProto?(s.EventClient.I.emit(b.AppEvent.DataReport,y.EDataReportId.ClickSelectServer),c.default.I.open(C.AppViewConst.SelServerView)):g.default.I.msgBoxShow('<color='+u.UtilColor.B.NorText+'>'+p.i18n.tt(p.Lang.acclog_toggle_tips)+'</c>',!0);},e.prototype.onStartGame=function(){var t=g.default.I,e=t.selUserId,i=2===this.severState&&!e||4===this.severState;t.isCheckUserProto?i?t.msgBoxShow(p.i18n.tt(2===this.severState?p.Lang.server_full_tips:p.Lang.server_maintenance_tips)):this.startGame():t.msgBoxShow('<color='+u.UtilColor.B.NorText+'>'+p.i18n.tt(p.Lang.acclog_toggle_tips)+'</c>',!0);},e.prototype.startGame=function(){var t=g.default.I;m.default.I.startGame(),this.Tog.node.active&&this.Tog.isChecked&&f.StorageMgr.I.setValue('userProto_'+t.UserAcc,!0);},e.prototype.setData=function(t,e){this.LabNowSerName.string=t,this.LabNewSerName.string=e,this.onGameSwitch();},e.prototype.onUpServerItem=function(t){if(t){this.LabNowSerName.string=t.area_name,this.severState=t.state;var e=1===t.state||2===t.state;w.UtilsMainNode.LoadSpriteFrame(this.NdState,''+b.RES_MAIN_ENUM.Login_Img_Dl_Bs+(e?t.state:4),null,d.EBundleType.resources);}},e.prototype.setHideBaseNode=function(t){this.NdBase.active=t;},e.prototype.openNoticeView=function(t){var e,i,o=(null===(i=null===(e=window.IndexGlobal)||void 0===e?void 0:e.commonParams)||void 0===i?void 0:i.channel_id)||3900002,n=R.default.I.GameCfgGlobal.Login_Http_Uri+'/api/login_notice?channel_id='+o;console.log('-------url=',n),M.default.I.get(n,function(e){var i=JSON.parse(e).login_notice;if(console.log('-------获取公告返回',i),i){for(var o=0;o<i.length;o++)i[o].AppletContent&&(i[o].Content=i[o].AppletContent),i[o].Tag&&!i[o].TagKey&&(i[o].TagKey=i[o].Tag);if(g.default.I.noticeInfo=i,t){var n=g.default.I.sortNotice();c.default.I.open(C.AppViewConst.NoticeView,n);}else I.UtilPaltform.isWeChatGame&&(n=g.default.I.sortNotice())[0]&&n[0].EjectType===l.JUMP_NOTICE_WINDOW.One&&0===n[0].Sort&&(f.StorageMgr.I.getValue('Notice_IsEject_'+n[0].Id)||(f.StorageMgr.I.setValue('Notice_IsEject_'+n[0].Id,!0),c.default.I.open(C.AppViewConst.NoticeView,n)));}});},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.delEvent();},r([A(cc.Node)],e.prototype,'NdBase',void 0),r([A(cc.Node)],e.prototype,'BtnNotice',void 0),r([A(cc.Node)],e.prototype,'BtnStartGame',void 0),r([A(cc.Node)],e.prototype,'BtnSelServer',void 0),r([A(cc.Label)],e.prototype,'LabNewSerName',void 0),r([A(cc.Label)],e.prototype,'LabNowSerName',void 0),r([A(cc.Toggle)],e.prototype,'Tog',void 0),r([A(cc.Label)],e.prototype,'LabUserProto',void 0),r([A(cc.Label)],e.prototype,'LabUserPrivacy',void 0),r([A(cc.WebView)],e.prototype,'web',void 0),r([A(cc.Node)],e.prototype,'NdState',void 0),r([A(cc.Node)],e.prototype,'NdUser',void 0),r([A(cc.Node)],e.prototype,'NdPrivacy',void 0),r([A(cc.Node)],e.prototype,'BtnAge16',void 0),r([E],e);}(a.default);i.default=P,cc._RF.pop();},{}],StorageConst:[function(t,e,i){'use strict';cc._RF.push(e,'a99faOZP0hBO79YFglX4dsI','StorageConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.EStorageKey=void 0,function(t){t.Account='h3_acc',t.Password='h3_pwd',t.DebugItemMode='DebugItemMode',t.DebugItemModeCount='DebugItemModeCount',t.ActPreview='ActPreview',t.skipAnim='skip_anim',t.autoDice='auto_dice',t.EscortTog='EscortTog',t.EditorPosInfo='SkEditorPosInfo',t.EditorSkillInfo='EditorSkillInfo',t.FirstChargeTalkOpen='FirstChargeTalkOpen_';}(i.EStorageKey||(i.EStorageKey={})),cc._RF.pop();},{}],StorageMgr:[function(t,e,i){'use strict';cc._RF.push(e,'cf180DaPYZNlLiZjBa15wxi','StorageMgr'),Object.defineProperty(i,'__esModule',{value:!0}),i.StorageMgr=void 0;var o=function(){function t(){this._storage=cc.sys.localStorage;}return Object.defineProperty(t,'I',{get:function(){return this._Instance||(this._Instance=new t()),this._Instance;},enumerable:!1,configurable:!0}),t.prototype.setValue=function(t,e){if(null!=e)try{this._storage.setItem(t,JSON.stringify(e));}catch(i){cc.error(i);}else this.removeValue(t);},t.prototype.getValue=function(t,e){var i=this._storage.getItem(t);if(!i)return e;try{return JSON.parse(i);}catch(o){cc.error(o);}return e;},t.prototype.removeValue=function(t){this._storage.removeItem(t);},t.prototype.clear=function(){this._storage.clear();},t;}();i.StorageMgr=o,cc._RF.pop();},{}],StructFrame:[function(t,e,i){'use strict';cc._RF.push(e,'66cdflgNLZLaLLZkwtNbftb','StructFrame'),Object.defineProperty(i,'__esModule',{value:!0}),cc._RF.pop();},{}],TSMap:[function(t,e,i){'use strict';cc._RF.push(e,'06f28wD3u9FebZoX9WT6rNF','TSMap');var o=this&&this.__values||function(t){var e='function'==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&'number'==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t};}};throw new TypeError(e?'Object is not iterable.':'Symbol.iterator is not defined.');};Object.defineProperty(i,'__esModule',{value:!0});var n=function(){function t(t){var e,i;if(this.keyStore=[],this.valueStore=[],this.size=0,t)try{for(var n=o(t),r=n.next();!r.done;r=n.next()){var s=r.value;this.keyStore.push(s[0]),this.valueStore.push(s[1]),this.size++;}}catch(a){e={error:a};}finally{try{r&&!r.done&&(i=n.return)&&i.call(n);}finally{if(e)throw e.error;}}}return t.prototype.set=function(t,e){for(var i=!1,o=this.keyStore,n=this.valueStore,r=o.length;r>-1;r--)o[r]===t&&(n[r]=e,i=!0);return i||(this.keyStore.push(t),this.valueStore.push(e),this.size++),this;},t.prototype.get=function(t){for(var e=this.keyStore,i=e.length;i>-1;i--)if(e[i]===t)return this.valueStore[i];},t.prototype.has=function(t){for(var e=this.keyStore,i=e.length;i>-1;i--)if(e[i]===t)return!0;return!1;},t.prototype.delete=function(t){for(var e=this.keyStore,i=this.valueStore,o=e.length,n=!1;o--;)e[o]===t&&(e.splice(o,1),i.splice(o,1),this.size--,n=!0);return n;},t.prototype.clear=function(){this.keyStore.splice(0,this.size),this.valueStore.splice(0,this.size),this.size=0;},t.prototype.keys=function(){return this.keyStore;},t.prototype.values=function(){return this.valueStore;},t.prototype.entries=function(){for(var t=[],e=this.keyStore,i=this.valueStore,o=0;o<this.size;o++)t.push([e[o],i[o]]);return t;},t.prototype.forEach=function(t,e){for(var i=this.size,o=this.keyStore,n=this.valueStore,r=0;r<i;r++)t.bind(e||this)(n[r],o[r],this);},t;}();i.default=n,cc._RF.pop();},{}],TZSAT:[function(t,e,i){'use strict';cc._RF.push(e,'b5c8cGIH1dFUpM/xGObO8pC','TZSAT'),Object.defineProperty(i,'__esModule',{value:!0}),i.Quadtree=i.SATResponse=i.SATPolygon=i.SATCircle=i.SATVector=void 0;var o={},n=function(t,e){this.x=t||0,this.y=e||0;};i.SATVector=n,cc.SATVec2=function(t,e){return new n(t,e);},n.prototype.copy=n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this;},n.prototype.clone=n.prototype.clone=function(){return new n(this.x,this.y);},n.prototype.perp=n.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this;},n.prototype.rotate=n.prototype.rotate=function(t){var e=this.x,i=this.y;return this.x=e*Math.cos(t)-i*Math.sin(t),this.y=e*Math.sin(t)+i*Math.cos(t),this;},n.prototype.reverse=n.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this;},n.prototype.normalize=n.prototype.normalize=function(){var t=this.len();return t>0&&(this.x/=t,this.y/=t),this;},n.prototype.add=n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this;},n.prototype.sub=n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this;},n.prototype.scale=n.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0!==e?e:t,this;},n.prototype.project=n.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this;},n.prototype.projectN=n.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this;},n.prototype.reflect=n.prototype.reflect=function(t){var e=this.x,i=this.y;return this.project(t).scale(2),this.x-=e,this.y-=i,this;},n.prototype.reflectN=n.prototype.reflectN=function(t){var e=this.x,i=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=i,this;},n.prototype.dot=n.prototype.dot=function(t){return this.x*t.x+this.y*t.y;},n.prototype.len2=n.prototype.len2=function(){return this.dot(this);},n.prototype.len=n.prototype.len=function(){return Math.sqrt(this.len2());};var r=function(t,e){this.pos=t||new n(),this.r=e||0,this.offset=new n();};i.SATCircle=r,r.prototype.getAABBAsBox=r.prototype.getAABBAsBox=function(){var t=this.r;return new a(this.pos.clone().add(this.offset).sub(new n(t,t)),2*t,2*t);},r.prototype.getAABB=r.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon();},r.prototype.setOffset=r.prototype.setOffset=function(t){return this.offset=t,this;};var s=function(){function t(t,e){this.pos=t||new n(),this.angle=0,this.offset=new n(),this.setPoints(e||[]);}return t.prototype.setPoints=function(){throw new Error('Method not implemented.');},t;}();function a(t,e,i){this.pos=t||new n(),this.w=e||0,this.h=i||0;}i.SATPolygon=s,s.prototype.setPoints=function(t){if(!this.points||this.points.length!==t.length){var e=void 0,i=this.calcPoints=[],o=this.edges=[],r=this.normals=[];for(e=0;e<t.length;e++){var s=t[e],a=e<t.length-1?t[e+1]:t[0];s===a||s.x!==a.x||s.y!==a.y?(i.push(new n()),o.push(new n()),r.push(new n())):(t.splice(e,1),e-=1);}}return this.points=t,this._recalc(),this;},s.prototype.setAngle=s.prototype.setAngle=function(t){return this.angle=t,this._recalc(),this;},s.prototype.setOffset=s.prototype.setOffset=function(t){return this.offset=t,this._recalc(),this;},s.prototype.rotate=s.prototype.rotate=function(t){for(var e=this.points,i=e.length,o=0;o<i;o++)e[o].rotate(t);return this._recalc(),this;},s.prototype.translate=s.prototype.translate=function(t,e){for(var i=this.points,o=i.length,n=0;n<o;n++)i[n].x+=t,i[n].y+=e;return this._recalc(),this;},s.prototype._recalc=function(){var t,e=this.calcPoints,i=this.edges,o=this.normals,n=this.points,r=this.offset,s=this.angle,a=n.length;for(t=0;t<a;t++){var c=e[t].copy(n[t]);c.x+=r.x,c.y+=r.y,0!==s&&c.rotate(s);}for(t=0;t<a;t++){var l=e[t],p=t<a-1?e[t+1]:e[0],u=i[t].copy(p).sub(l);o[t].copy(u).perp().normalize();}return this;},s.prototype.getAABBAsBox=s.prototype.getAABBAsBox=function(){for(var t=this.calcPoints,e=t.length,i=t[0].x,o=t[0].y,r=t[0].x,s=t[0].y,c=1;c<e;c++){var l=t[c];l.x<i?i=l.x:l.x>r&&(r=l.x),l.y<o?o=l.y:l.y>s&&(s=l.y);}return new a(this.pos.clone().add(new n(i,o)),r-i,s-o);},s.prototype.getAABB=s.prototype.getAABB=function(){return this.getAABBAsBox().toPolygon();},s.prototype.getCentroid=s.prototype.getCentroid=function(){for(var t=this.calcPoints,e=t.length,i=0,o=0,r=0,s=0;s<e;s++){var a=t[s],c=s===e-1?t[0]:t[s+1],l=a.x*c.y-c.x*a.y;i+=(a.x+c.x)*l,o+=(a.y+c.y)*l,r+=l;}return new n(i/=r*=3,o/=r);},a.prototype.toPolygon=a.prototype.toPolygon=function(){var t=this.pos,e=this.w,i=this.h;return new s(new n(t.x,t.y),[new n(),new n(e,0),new n(e,i),new n(0,i)]);};var c=function(){function t(){this.a=null,this.b=null,this.overlapN=new n(),this.overlapV=new n(),this.clear();}return t.prototype.clear=function(){},t;}();i.SATResponse=c,c.prototype.clear=c.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this;};for(var l=[],p=0;p<10;p++)l.push(new n());var u=[];for(p=0;p<5;p++)u.push([]);var h=new c(),d=new a(new n(),0.000001,0.000001).toPolygon();function f(t,e,i){for(var o=Number.MAX_VALUE,n=-Number.MAX_VALUE,r=t.length,s=0;s<r;s++){var a=t[s].dot(e);a<o&&(o=a),a>n&&(n=a);}i[0]=o,i[1]=n;}function y(t,e,i,o,n,r){var s=u.pop(),a=u.pop(),c=l.pop().copy(e).sub(t),p=c.dot(n);if(f(i,n,s),f(o,n,a),a[0]+=p,a[1]+=p,s[0]>a[1]||a[0]>s[1])return l.push(c),u.push(s),u.push(a),!0;if(r){var h,d,y=0;s[0]<a[0]?(r.aInB=!1,s[1]<a[1]?(y=s[1]-a[0],r.bInA=!1):y=(h=s[1]-a[0])<(d=a[1]-s[0])?h:-d):(r.bInA=!1,s[1]>a[1]?(y=s[0]-a[1],r.aInB=!1):y=(h=s[1]-a[0])<(d=a[1]-s[0])?h:-d);var _=Math.abs(y);_<r.overlap&&(r.overlap=_,r.overlapN.copy(n),y<0&&r.overlapN.reverse());}return l.push(c),u.push(s),u.push(a),!1;}function _(t,e){var i=t.len2(),o=e.dot(t);return o<0?g:o>i?v:m;}o.isSeparatingAxis=y;var g=-1,m=0,v=1;function b(t,e,i){for(var o=l.pop().copy(e.pos).add(e.offset).sub(t.pos),n=e.r,r=n*n,s=t.calcPoints,a=s.length,c=l.pop(),p=l.pop(),u=0;u<a;u++){var h=u===a-1?0:u+1,d=0===u?a-1:u-1,f=0,y=null;c.copy(t.edges[u]),p.copy(o).sub(s[u]),i&&p.len2()>r&&(i.aInB=!1);var m=_(c,p);if(m===g){c.copy(t.edges[d]);var b=l.pop().copy(o).sub(s[d]);if((m=_(c,b))===v){if((S=p.len())>n)return l.push(o),l.push(c),l.push(p),l.push(b),!1;i&&(i.bInA=!1,y=p.normalize(),f=n-S);}l.push(b);}else if(m===v){if(c.copy(t.edges[h]),p.copy(o).sub(s[h]),(m=_(c,p))===g){if((S=p.len())>n)return l.push(o),l.push(c),l.push(p),!1;i&&(i.bInA=!1,y=p.normalize(),f=n-S);}}else{var C=c.perp().normalize(),S=p.dot(C),w=Math.abs(S);if(S>0&&w>n)return l.push(o),l.push(C),l.push(p),!1;i&&(y=C,f=n-S,(S>=0||f<2*n)&&(i.bInA=!1));}y&&i&&Math.abs(f)<Math.abs(i.overlap)&&(i.overlap=f,i.overlapN.copy(y));}return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),l.push(o),l.push(c),l.push(p),!0;}function C(t,e,i){for(var o=t.calcPoints,n=o.length,r=e.calcPoints,s=r.length,a=0;a<n;a++)if(y(t.pos,e.pos,o,r,t.normals[a],i))return!1;for(a=0;a<s;a++)if(y(t.pos,e.pos,o,r,e.normals[a],i))return!1;return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0;}o.pointInCircle=function(t,e){var i=l.pop().copy(t).sub(e.pos).sub(e.offset),o=e.r*e.r,n=i.len2();return l.push(i),n<=o;},o.pointInPolygon=function(t,e){d.pos.copy(t),h.clear();var i=C(d,e,h);return i&&(i=h.aInB),i;},o.testCircleCircle=function(t,e,i){var o=l.pop().copy(e.pos).add(e.offset).sub(t.pos).sub(t.offset),n=t.r+e.r,r=n*n,s=o.len2();if(s>r)return l.push(o),!1;if(i){var a=Math.sqrt(s);i.a=t,i.b=e,i.overlap=n-a,i.overlapN.copy(o.normalize()),i.overlapV.copy(o).scale(i.overlap),i.aInB=t.r<=e.r&&a<=e.r-t.r,i.bInA=e.r<=t.r&&a<=t.r-e.r;}return l.push(o),!0;},o.testPolygonCircle=b,o.testCirclePolygon=function(t,e,i){var o=b(e,t,i);if(o&&i){var n=i.a,r=i.aInB;i.overlapN.reverse(),i.overlapV.reverse(),i.a=i.b,i.b=n,i.aInB=i.bInA,i.bInA=r;}return o;},o.testPolygonPolygon=C,i.default=o;var S=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.max_objects=e||10,this.max_levels=i||10,this.level=o||0,this.bounds=t,this.objects=[],this.nodes=[];};i.Quadtree=S,S.prototype.split=function(){var t=this.level+1,e=this.bounds.width/2,i=this.bounds.height/2,o=this.bounds.x,n=this.bounds.y;this.nodes[0]=new S({x:o+e,y:n,width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[1]=new S({x:o,y:n,width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[2]=new S({x:o,y:n+i,width:e,height:i},this.max_objects,this.max_levels,t),this.nodes[3]=new S({x:o+e,y:n+i,width:e,height:i},this.max_objects,this.max_levels,t);},S.prototype.getIndex=function(t){var e=[],i=this.bounds.x+this.bounds.width/2,o=this.bounds.y+this.bounds.height/2,n=t.y-t.height<o,r=t.x-t.width<i,s=+t.x+ +t.width>i,a=+t.y+ +t.height>o;return n&&s&&e.push(0),r&&n&&e.push(1),r&&a&&e.push(2),s&&a&&e.push(3),e;},S.prototype.insert=function(t){var e,i=0;if(this.nodes.length)for(e=this.getIndex(t),i=0;i<e.length;i++)this.nodes[e[i]].insert(t);else if(this.objects.push(t),this.objects.length>this.max_objects&&this.level<this.max_levels){for(this.nodes.length||this.split(),i=0;i<this.objects.length;i++){e=this.getIndex(this.objects[i]);for(var o=0;o<e.length;o++)this.nodes[e[o]].insert(this.objects[i]);}this.objects=[];}},S.prototype.retrieve=function(t,e){var i=this.getIndex(t),o=this.objects;if(this.nodes.length)for(var n=0;n<i.length;n++)o=o.concat(this.nodes[i[n]].retrieve(t));return o=o.filter(function(t,i){var n=o.indexOf(t)>=i;if(n&&e){var r={x:t.wx,y:t.wy};if(!(n=e(r))&&t.points)for(var s=0;s<t.points.length;s++){var a={x:+t.points[s].x+ +r.x,y:+t.points[s].y-+r.y};if(n=e(a))break;}}return n;});},S.prototype.clear=function(){this.objects=[];for(var t=0;t<this.nodes.length;t++)this.nodes.length&&this.nodes[t].clear();this.nodes=[];},cc._RF.pop();},{}],TaskCollector:[function(t,e,i){'use strict';cc._RF.push(e,'4b23f/KfAVEq7hnqEtwazqt','TaskCollector'),Object.defineProperty(i,'__esModule',{value:!0}),i.DB_ID_ENUM=i.DB_KEY_ENUM=void 0;var o=function(){function t(){this._taskStateDict={},this._taskFunc={};}return Object.defineProperty(t,'I',{get:function(){return this._i||(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.addTaskList=function(t,e,i,o){this._taskStateDict[t]={};var n={taskFunc:i,target:o};this._taskFunc[t]=n;for(var r=0;r<e.length;r++)this._taskStateDict[t][e[r]]=!1;console.log('addTaskList ========= key=',t,'taskIdList=',e,'this._taskStateDict=',this._taskStateDict);},t.prototype.endTask=function(t,e){Object.prototype.hasOwnProperty.call(this._taskStateDict,t)&&(console.log('endTask ========= key=',t,'taskId=',e),void 0!==this._taskStateDict[t][e]&&(this._taskStateDict[t][e]=!0,console.log('----------  add one ---  '+t+' -----',e)),this.callDragon(t));},t.prototype.checkTask=function(t,e){return!Object.prototype.hasOwnProperty.call(this._taskStateDict,t)||void 0===this._taskStateDict[t][e]||this._taskStateDict[t][e];},t.prototype.checkName=function(t){if(void 0===this._taskStateDict[t])return!1;var e=this._taskStateDict[t];for(var i in e)if(!e[i])return!1;return!0;},t.prototype.clear=function(){this._taskStateDict={},this._taskFunc={};},t.prototype.clearByKey=function(t){Object.prototype.hasOwnProperty.call(this._taskStateDict,t)&&delete this._taskStateDict[t],Object.prototype.hasOwnProperty.call(this._taskFunc,t)&&delete this._taskFunc[t];},t.prototype.callDragon=function(t){if(Object.prototype.hasOwnProperty.call(this._taskStateDict,t)&&this.checkName(t)){if(this._taskFunc[t]){var e=this._taskFunc[t];e.taskFunc.call(e.target);}this.clearByKey(t);}},t._i=null,t;}();i.default=o,function(t){t[t.LodgingEnd=1]='LodgingEnd',t[t.ShowLoginUI=2]='ShowLoginUI',t[t.GameStart=3]='GameStart',t[t.WXSubLoaded=4]='WXSubLoaded',t[t.GameWelcomeShow=5]='GameWelcomeShow';}(i.DB_KEY_ENUM||(i.DB_KEY_ENUM={})),function(t){t[t.LoginBack=0]='LoginBack',t[t.GateUrl=1]='GateUrl',t[t.ConfigLodEnd=2]='ConfigLodEnd',t[t.LoadSubPackEnd=3]='LoadSubPackEnd',t[t.MapLodEnd=4]='MapLodEnd',t[t.LodgingProto=5]='LodgingProto',t[t.InitRoot=6]='InitRoot',t[t.MainUIInit=7]='MainUIInit',t[t.EnterGame=8]='EnterGame',t[t.MapInit=9]='MapInit',t[t.MapBlurBg=10]='MapBlurBg',t[t.GameWelcomeSuccess=11]='GameWelcomeSuccess',t[t.LoadingProgressFull=12]='LoadingProgressFull',t[t.LoadSubScript=13]='LoadSubScript',t[t.LoadStartGameBtttleFile=14]='LoadStartGameBtttleFile',t[t.LoadStartGameBtttleBg=15]='LoadStartGameBtttleBg';}(i.DB_ID_ENUM||(i.DB_ID_ENUM={})),cc._RF.pop();},{}],TaskQueue:[function(t,e,i){'use strict';cc._RF.push(e,'c2b2fFFDdNAFJ/BvuopnCnd','TaskQueue'),Object.defineProperty(i,'__esModule',{value:!0});var o=function(){function t(){this._taskQueue=[];}return Object.defineProperty(t,'I',{get:function(){return null==this._i&&(this._i=new t()),this._i;},enumerable:!1,configurable:!0}),t.prototype.addTask=function(t,e,i){return void 0===i&&(i=null),this._taskQueue.push({callback:t,ctx:e,param:i});},t.prototype.addTasks=function(t){if(t&&t.length>0)for(var e=0;e<t.length;e++)this._taskQueue.push(t[e]);},t.prototype.mainUpdate=function(){var t=this._taskQueue.shift();t&&t.callback.call(t.ctx,t.param);},t._i=null,t;}();i.default=o,cc._RF.pop();},{}],TestMonst:[function(t,e,i){'use strict';cc._RF.push(e,'9572evb4lJARLDp9ViazYJc','TestMonst');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=cc._decorator,a=s.ccclass,c=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this;}return n(e,t),e.prototype.start=function(){},e.prototype.update=function(){this.node.testrun();},r([a],e);}(cc.Component));i.default=c,cc._RF.pop();},{}],TextUtil:[function(t,e,i){'use strict';cc._RF.push(e,'cfe36SUxGdMyoLYNk2ToR8A','TextUtil'),Object.defineProperty(i,'__esModule',{value:!0}),i.TextUtil=void 0;var o=/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430-\u044f\u0410-\u042f\u0401\u0451]+|\S)/,n=/^[!,.:;'}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/,r=/([a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451\xe1\xe0\u1ea3\u1ea1\xe3\u0103\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\xe2\u1ea5\u1ea7\u1ea9\u1eab\u1ead\xe9\xe8\u1ebb\u1ebd\u1eb9\xea\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7i\xed\xec\u1ec9\u0129\u1ecb\xf3\xf2\u1ecf\xf5\u1ecd\xf4\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\xfa\xf9\u1ee7\u0169\u1ee5\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1\xfd\u1ef3\u1ef7\u1ef9\u1ef5\u0111\xc1\xc0\u1ea2\u1ea0\xc3\u0102\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\xc2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\xc9\xc8\u1eba\u1ebc\u1eb8\xca\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6I\xcd\xcc\u1ec8\u0128\u1eca\xd3\xd2\u1ece\xd5\u1ecc\xd4\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u01a0\u1eda\u1edc\u1ede\u1ee0\u1ee2\xda\xd9\u1ee6\u0168\u1ee4\u01af\u1ee8\u1eea\u1eec\u1eee\u1ef0\xdd\u1ef2\u1ef6\u1ef8\u1ef4\u0110]+|\S)$/,s=/[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451\xe1\xe0\u1ea3\u1ea1\xe3\u0103\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\xe2\u1ea5\u1ea7\u1ea9\u1eab\u1ead\xe9\xe8\u1ebb\u1ebd\u1eb9\xea\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7i\xed\xec\u1ec9\u0129\u1ecb\xf3\xf2\u1ecf\xf5\u1ecd\xf4\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\xfa\xf9\u1ee7\u0169\u1ee5\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1\xfd\u1ef3\u1ef7\u1ef9\u1ef5\u0111\xc1\xc0\u1ea2\u1ea0\xc3\u0102\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\xc2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\xc9\xc8\u1eba\u1ebc\u1eb8\xca\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6I\xcd\xcc\u1ec8\u0128\u1eca\xd3\xd2\u1ece\xd5\u1ecc\xd4\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u01a0\u1eda\u1edc\u1ede\u1ee0\u1ee2\xda\xd9\u1ee6\u0168\u1ee4\u01af\u1ee8\u1eea\u1eec\u1eee\u1ef0\xdd\u1ef2\u1ef6\u1ef8\u1ef4\u0110]+$/,a=/^[a-zA-Z0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451\xe1\xe0\u1ea3\u1ea1\xe3\u0103\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\xe2\u1ea5\u1ea7\u1ea9\u1eab\u1ead\xe9\xe8\u1ebb\u1ebd\u1eb9\xea\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7i\xed\xec\u1ec9\u0129\u1ecb\xf3\xf2\u1ecf\xf5\u1ecd\xf4\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\xfa\xf9\u1ee7\u0169\u1ee5\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1\xfd\u1ef3\u1ef7\u1ef9\u1ef5\u0111\xc1\xc0\u1ea2\u1ea0\xc3\u0102\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\xc2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\xc9\xc8\u1eba\u1ebc\u1eb8\xca\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6I\xcd\xcc\u1ec8\u0128\u1eca\xd3\xd2\u1ece\xd5\u1ecc\xd4\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u01a0\u1eda\u1edc\u1ede\u1ee0\u1ee2\xda\xd9\u1ee6\u0168\u1ee4\u01af\u1ee8\u1eea\u1eec\u1eee\u1ef0\xdd\u1ef2\u1ef6\u1ef8\u1ef4\u0110]/,c=function(){function t(){}return t._safeSubstring=function(t,e,i){var o=e,n=i,r=t[e];if(r>='\uDC00'&&r<='\uDFFF'&&o--,void 0!==i)if(i-1!==e){var s=t[i-1];s>='\uD800'&&s<='\uDBFF'&&n--;}else r>='\uD800'&&r<='\uDBFF'&&n++;return t.substring(o,n);},t.fragmentText=function(t,e,i,c){var l=[];if(0===t.length||i<0)return l.push(''),l;for(var p=t;e>i&&p.length>1;){for(var u=p.length*(i/e)|0,h=this._safeSubstring(p,u),d=e-this._iDefmesureText(h,c),f=h,y=0,_=0;d>i&&_++<100;)u*=i/d,u|=0,h=this._safeSubstring(p,u),d=e-this._iDefmesureText(h,c);for(_=0;h&&d<=i&&_++<100;){var g=o.exec(h);f=h,u+=y=g?g[0].length:1,h=this._safeSubstring(p,u),d=e-this._iDefmesureText(h,c);}0==(u-=y)?(u=1,f=this._safeSubstring(p,1)):1===u&&p[0]>='\uD800'&&p[0]<='\uDBFF'&&(u=2,f=this._safeSubstring(p,2));var m=this._safeSubstring(p,0,u),v=void 0;n.test(f||h)&&(0==(u-=(v=r.exec(m))?v[0].length:0)&&(u=1),f=this._safeSubstring(p,u),m=this._safeSubstring(p,0,u)),a.test(f)&&(v=s.exec(m))&&m!==v[0]&&(u-=v[0].length,f=this._safeSubstring(p,u),m=this._safeSubstring(p,0,u)),0===l.length?l.push(m):(m=m.trim()).length>0&&l.push(m),p=f||h,e=this._iDefmesureText(p,c);}return 0===l.length?l.push(p):(p=p.trim()).length>0&&l.push(p),l;},t._iDefmesureText=function(t,e){return e.measureText(t).width;},t;}();i.TextUtil=c,cc._RF.pop();},{}],TickTimer:[function(t,e,i){'use strict';cc._RF.push(e,'e708aVu/1VIQroQN0hXQo0B','TickTimer');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0}),i.TickTimer=void 0;var s=t('BaseCmp'),a=t('CCDAN'),c=t('UtilsMain'),l=cc._decorator,p=l.ccclass,u=l.property,h=l.requireComponent,d=l.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.beginSeconds=0,e.endSeconds=0,e.offsetSeconds=0,e.format='%HH:%mm:%ss',e.fillZero=!1,e.isFixed=!1,e.tickEventHandler=[],e.endEventHandler=[],e._label=null,e._ticking=!1,e._pause=!1,e._beginTime=0,e._endTime=0,e._currentTime=0,e._duration=0,e._interval=1,e._clockwise=!0,e._isFast=!1,e._hideTime=0,e._opts={},e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=this.getComponent(a.default);if(e||(e=this.addComponent(a.default)),e.key='--',cc.game.on(cc.game.EVENT_SHOW,this.onShow,this),cc.game.on(cc.game.EVENT_HIDE,this.onHide,this),this.beginSeconds>0||this.endSeconds>0&&!this._ticking){var i=c.UtilsMainTime.NowSec(),o=i+this.beginSeconds,n=i+this.endSeconds;this.tick(o,n);}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),cc.game.off(cc.game.EVENT_SHOW,this.onShow,this),cc.game.off(cc.game.EVENT_HIDE,this.onHide,this);},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this._hideTime=new Date().getTime();},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.recoverTime();},e.prototype.onShow=function(){this.recoverTime();},e.prototype.onHide=function(){this._hideTime=new Date().getTime();},e.prototype.modifyHideTime=function(){this._hideTime&&this.onHide();},e.prototype.recoverTime=function(){if(this._hideTime>0){var t=new Date().getTime()-this._hideTime;this._hideTime=0,this.updateCurrentTime(t),this.refreshLabel(),this.checkTicking();}},e.prototype.initOptions=function(){var t,e,i,o;(null===(t=this._opts)||void 0===t?void 0:t.format)||(this._opts.format=this.format),void 0!==(null===(e=this._opts)||void 0===e?void 0:e.fillZero)&&(this._opts.fillZero=this.fillZero),void 0!==(null===(i=this._opts)||void 0===i?void 0:i.isFixed)&&(this._opts.isFixed=this.isFixed),(null===(o=this._opts)||void 0===o?void 0:o.offsetSeconds)||(this._opts.offsetSeconds=this.offsetSeconds);},e.prototype.setOptions=function(t){(null==t?void 0:t.format)&&(null==t?void 0:t.format)!==this._opts.format&&(this._opts.format=t.format),void 0!==(null==t?void 0:t.fillZero)&&(this._opts.fillZero=t.fillZero),void 0!==(null==t?void 0:t.isFixed)&&(this._opts.isFixed=t.isFixed),(null==t?void 0:t.offsetSeconds)>0&&this._currentTime>0&&(this._opts.offsetSeconds=t.offsetSeconds,this._clockwise?this._currentTime=this._beginTime+1000*this._opts.offsetSeconds+(this._currentTime-this._beginTime):this._currentTime=this._beginTime-1000*this._opts.offsetSeconds+(this._currentTime-this._beginTime)),this._isFast=this._opts.format.indexOf('%ms')>=0,this._interval=this._isFast?0.1:1;},e.prototype.tick=function(t,e,i){this._beginTime=1000*t,this._endTime=1000*e,this._clockwise=this._beginTime<=this._endTime,this._currentTime=this._beginTime,this._duration=0,this.initOptions(),this.setOptions(i),this.refreshLabel(),this._ticking=!0,this.modifyHideTime();},e.prototype.checkTicking=function(){if(this._ticking=this._clockwise?this._currentTime<this._endTime:this._currentTime>this._endTime,this._ticking){var t=this.getTickMillisecond()/1000;this.onTickHandler&&this.onTickHandler(t),this.tickEventHandler.forEach(function(e){e.emit([t]);});}else this.onTickEndHandler&&this.onTickEndHandler(),this.endEventHandler.forEach(function(t){t.emit([]);});},e.prototype.updateCurrentTime=function(t){void 0===t&&(t=0),this._clockwise?(this._currentTime+=t,this._currentTime>this._endTime&&(this._currentTime=this._endTime)):(this._currentTime-=t,this._currentTime<this._endTime&&(this._currentTime=this._endTime));},e.prototype.getTickMillisecond=function(){return this._clockwise?this._currentTime-this._beginTime:this._currentTime-this._endTime;},e.prototype.update=function(t){if(this._ticking&&!this._pause&&(this._duration+=t,this._duration>=this._interval)){this._duration-=this._interval;var e=1000*this._interval;this.updateCurrentTime(e),this.refreshLabel(),this.checkTicking();}},e.prototype.refreshLabel=function(){this._label||(this._label=this.getComponent(cc.Label));var t=this.getTickMillisecond();this._label.string=c.UtilsMainTime.FormatMs(t,this._opts.format,this._opts.fillZero,this._opts.isFixed);},e.prototype.pause=function(){this._pause=!0;},e.prototype.resume=function(){this._pause=!1;},e.prototype.isPause=function(){return this._pause;},e.prototype.isTicking=function(){return this._ticking;},r([u({displayName:'开始秒数',min:0})],e.prototype,'beginSeconds',void 0),r([u({displayName:'结束秒数',min:0})],e.prototype,'endSeconds',void 0),r([u({displayName:'偏移秒数',min:0})],e.prototype,'offsetSeconds',void 0),r([u({displayName:'计时格式',tooltip:'默认\uFF1A%HH:%mm:%ss\uFF0C编辑器不要设置中文格式\uFF0C防止多语言不转化'})],e.prototype,'format',void 0),r([u({displayName:'填充零'})],e.prototype,'fillZero',void 0),r([u({displayName:'格式固定'})],e.prototype,'isFixed',void 0),r([u({type:cc.Component.EventHandler,displayName:'滴答事件'})],e.prototype,'tickEventHandler',void 0),r([u({type:cc.Component.EventHandler,displayName:'结束事件'})],e.prototype,'endEventHandler',void 0),r([p,h(cc.Label),d('常用组件/TickTimer')],e);}(s.default);i.TickTimer=f,cc._RF.pop();},{}],TimerMgr:[function(t,e,i){'use strict';cc._RF.push(e,'c1536aUKgtNUa4CbalNHFk3','TimerMgr');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.TimerKeys=void 0,(i.TimerKeys||(i.TimerKeys={})).TEST_KEY='TEST_KEY';var r=function(){function t(){this.timerObj=new Map(),this.timerCount=33,this._timer=null;}return t.GetInstance=function(){return null===this._instance&&(this._instance=new this()),this._instance;},Object.defineProperty(t,'I',{get:function(){return this.GetInstance();},enumerable:!1,configurable:!0}),t.prototype.update=function(t){var e=this;t*=1000,this.timerObj.forEach(function(i){var o=i.dt+t;if(i.target&&cc.isValid(i.target))if(o>=i.interval)try{i.handler(),i.dt=0;}catch(n){console.error(i.key+'执行出错:'+n.stack),e.clearScheduled(i.key);}else i.dt=o;else console.warn(i.key+'执行对象已销毁'),e.clearScheduled(i.key);});},t.prototype.addScheduled=function(t,e,i,o){for(var r=[],s=4;s<arguments.length;s++)r[s-4]=arguments[s];var a=i||this.timerCount,c=0;return this.timerObj.has(t)?console.log('重复添加定时器'):this.timerObj.set(t,{handler:e.bind.apply(e,n([o],r)),interval:a,arg:r,dt:c,key:t,target:o}),this.timerObj.get(t);},t.prototype.clearScheduled=function(t){this.timerObj.has(t)&&this.timerObj.delete(t);},t.prototype.clearAllScheduled=function(){this.timerObj.clear();},t.prototype.hasTimer=function(t){return this.timerObj.has(t);},t.prototype.getScheduleds=function(){return this.timerObj;},t.prototype.setTimeout=function(t,e,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return setTimeout(t.bind.apply(t,n([i],o)),e);},t.prototype.clearTimeout=function(t){t&&(clearTimeout(t),t=null);},t.prototype.setInterval=function(t,e,i){for(var o=[],r=3;r<arguments.length;r++)o[r-3]=arguments[r];return setInterval(t.bind.apply(t,n([i],o)),e);},t.prototype.clearInterval=function(t){t&&(clearInterval(t),t=null);},t._instance=null,t;}();i.default=r,cc._RF.pop();},{}],UserProItem:[function(t,e,i){'use strict';cc._RF.push(e,'e9e87z93fpPg6Nzs0ifhbXM','UserProItem');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('ResMgr'),a=cc._decorator,c=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprBg=null,e;}return n(e,t),e.prototype.setData=function(t){var e=this;this.SprBg.spriteFrame&&this.SprBg.spriteFrame._uuid===t||s.ResMgr.I._loadRemoteExt(t,{noWebp:1,ext:'.png'},function(t,i){if(!t&&cc.isValid(e.node)){var o=new cc.SpriteFrame(i);o._uuid=i._nativeUrl,e.SprBg.spriteFrame=o;}});},r([l(cc.Sprite)],e.prototype,'SprBg',void 0),r([c],e);}(cc.Component);i.default=p,cc._RF.pop();},{}],UserProWin:[function(t,e,i){'use strict';cc._RF.push(e,'bf04aWYrb1L7L0ByXvntfeG','UserProWin');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('UtilClk'),a=t('UtilsMain'),c=t('BaseUiView'),l=t('ResConst'),p=t('ListView'),u=t('UserProItem'),h=cc._decorator,d=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprTitle=null,e.BtnClose=null,e.ListView=null,e.ScrollView=null,e.RichText=null,e._urlArr=[],e;}return n(e,t),e.prototype.start=function(){t.prototype.start.call(this),s.UtilClk.Click(this.BtnClose,this.close,this);},e.prototype.init=function(t){var e=t[0];a.UtilsMainNode.LoadSpriteFrame(this.SprTitle,e.title,null,l.EBundleType.resources),1===e.type?this.uptDes(e.des):this.uptUrl(e.url);},e.prototype.uptDes=function(t){this.ListView.node.active=!1,this.ScrollView.node.active=!0;var e=this.ScrollView.content;e.destroyAllChildren(),e.removeAllChildren();var i=cc.instantiate(this.RichText.node),o=i.getComponent(cc.RichText);i.active=!0,i.setPosition(0,0),o.string=t||'',e.addChild(i);},e.prototype.uptUrl=function(t){var e=[];if(t){e=[];for(var i=t.split('|'),o=0;o<i.length;o++)e.push({url:i[o],siblingIndex:o});}else console.log('------没有配置------');this._urlArr=e,this.ListView.node.active=!0,this.ScrollView.node.active=!1,this.ListView.setNumItems(e.length);},e.prototype.onRenderList=function(t,e){var i=t.getComponent(u.default);i&&i.setData(this._urlArr[e].url);},r([f(cc.Sprite)],e.prototype,'SprTitle',void 0),r([f(cc.Node)],e.prototype,'BtnClose',void 0),r([f(p.default)],e.prototype,'ListView',void 0),r([f(cc.ScrollView)],e.prototype,'ScrollView',void 0),r([f(cc.RichText)],e.prototype,'RichText',void 0),r([d],e);}(c.default);i.default=y,cc._RF.pop();},{}],UtilBinarySearcher:[function(t,e,i){'use strict';cc._RF.push(e,'1dbafgmVM5BN5Pbgjr+AhRl','UtilBinarySearcher'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilBinarySearcher=void 0;var o=function(){function t(){}return t.LoopCondition=function(){return this.Low<=this.High;},t.ConvergenceLB=function(){this.Cmp<0?this.Low=this.Mid+1:this.High=this.Mid-1;},t.ConvergenceBS=function(){if(this.Cmp<0)this.Low=this.Mid+1;else{if(!(this.Cmp>0))return this.Mid;this.High=this.Mid-1;}},t.BinarySearch=function(t,e){for(void 0===this.Low?this.Low=0:(this.Low|=0,(this.Low<0||this.Low>=t.length)&&(this.Low=0)),void 0===this.High?this.High=t.length-1:(this.High|=0,(this.High<0||this.High>=t.length)&&(this.High=t.length-1)),this.Broken=!1;this.LoopCondition();)if(this.Mid=this.Low+(this.High-this.Low>>1),this.Cmp=+this.Comparator(t[this.Mid],e,this.Mid,t),void 0!==this.Convergence())return this.Broken=!0,this.Mid;return this.Low;},t.AscComparator=function(t,e){return t-e;},t.DescComparator=function(t,e){return e-t;},t.StringAscComparator=function(t,e){return t>e?1:t<e?-1:0;},t.StringDescComparator=function(t,e){return t>e?-1:t<e?1:0;},t.AscFunctorComparator=function(t,e){var i=this.Getter,o=i(t),n=i(e);return o>n?1:o<n?-1:0;},t.DescFunctorComparator=function(t,e){var i=this.Getter,o=i(t),n=i(e);return o>n?-1:o<n?1:0;},t.Comparator=null,t.Convergence=null,t.Mid=0,t.Cmp=0,t.Low=0,t.High=0,t.Getter=null,t.Broken=!1,t;}();i.UtilBinarySearcher=o,cc._RF.pop();},{}],UtilBool:[function(t,e,i){'use strict';cc._RF.push(e,'a31eedJAKdMnK2RglAq2F41','UtilBool'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilBool=void 0;var o=function(){function t(){}return t.isNullOrUndefined=function(t){return null==t;},t;}();i.UtilBool=o,cc._RF.pop();},{}],UtilChar:[function(t,e,i){'use strict';cc._RF.push(e,'0f153nCkepMa5ndpi991edX','UtilChar'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilChar=void 0;var o=function(){function t(){}return t.isEmojiCharacter=function(t){if(t)for(var e=!1,i=0;i<t.length;i++){var o=t.charCodeAt(i);if(o>=55296&&o<=56319){if(t.length>1){var n=1024*(o-55296)+(t.charCodeAt(i+1)-56320)+65536;isNaN(n)&&(e=!0),n>=118784&&n<=128895&&(e=!0);}}else t.length>1?8419===t.charCodeAt(i+1)&&(e=!0):o>=8448&&o<=10239?e=!0:o>=11013&&o<=11015?e=!0:o>=10548&&o<=10549?e=!0:o>=12951&&o<=12953?e=!0:169!==o&&174!==o&&12349!==o&&12336!==o&&11093!==o&&11036!==o&&11035!==o&&11088!==o||(e=!0);if(e)return t.replace(t.substring(i),'$');}return t;},t;}();i.UtilChar=o,cc._RF.pop();},{}],UtilClk:[function(t,e,i){'use strict';cc._RF.push(e,'00ff4kXULlHkYTttWFEhM4X','UtilClk'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilClk=void 0;var o=t('GameApp'),n=t('AppEventConst'),r=t('MaskClickEff'),s=t('AudioMgr'),a=t('AudioModel'),c=t('EventClient'),l=t('UtilsMain'),p=function(){function t(){}return t.Click=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var p=l.UtilsMainNode.FindNode(t,e[0]);if(p&&p.isValid){var u='string'==typeof e[0],h=u?e[1]:e[0],d=u?e[2]:e[1],f=u?e[3]:e[2],y=f?f.customData:void 0,_=f&&f.unRepeat,g=f&&f.scale;1===g&&t.attr({_clkscalestate:g});var m=500;f&&(m=f.time);var v=f&&f.scaleTarget?f.scaleTarget:p;p.targetOff(d);var b=p.getComponent(cc.Button)||p.getComponent(cc.Toggle);if(b){p.on(cc.Node.EventType.TOUCH_START,function(t){b.interactable&&b.enabledInHierarchy&&(p.getComponent(r.default)||((null==f?void 0:f.soundPath)?s.AudioMgr.I.playEffect(f.soundPath):(null==f?void 0:f.closeSound)||s.AudioMgr.I.playEffect(a.MusicKey.btnNormal)),c.EventClient.I.emit(n.AppEvent.UIClick,t));},d);var C=b instanceof cc.Toggle?'toggle':'click';p.on(C,function(t,e){var i=y;if(null==i&&(i=e),_){var o=l.UtilsMainTime.NowMSec();if(p.ClickTime&&o-p.ClickTime<=m)return;p.ClickTime=o;}h.call(d,p,i);},d);}else{var S=l.UtilsMainNode.GetAttr(v,'rawScale');S?v.setScale(S):(S=cc.v3(v.scaleX,v.scaleY,v.scaleZ),l.UtilsMainNode.SetAttr(v,{rawScale:S}));var w=!1;f&&'boolean'==typeof f.swallow&&(w=f.swallow);var R=null;p.on(cc.Node.EventType.TOUCH_START,function(t){if(R=t.getLocation(),!p.getComponent(r.default))if(null==f?void 0:f.soundPath)s.AudioMgr.I.playEffect(f.soundPath,{isRemote:!0});else if(null==f?void 0:f.gSFunc){var e=f.gSFunc.call(d);e&&s.AudioMgr.I.playEffect(e,{isRemote:!0});}else(null==f?void 0:f.closeSound)||s.AudioMgr.I.playEffect(a.MusicKey.btnNormal,{isRemote:!0});S=l.UtilsMainNode.GetAttr(v,'rawScale');var i=f&&f.scale||o.default.I.BTN_CLICK_SCALE,u=S.x*i,h=S.y*i,y=S.z*i;v.setScale(u,h,y),w||t.stopPropagation(),c.EventClient.I.emit(n.AppEvent.UIClick,t);},d);var I=!1;p.on(cc.Node.EventType.TOUCH_END,function(t){var e=t.getLocation();if(R&&e){var i=e.subtract(R);I=i.mag()>15,R=null;}if(v.setScale(S),_){var o=new Date().getTime();if(p.ClickTime&&o-p.ClickTime<=m)return;p.ClickTime=o;}!(null==f||!f.unMove)&&I||h.call(d,p,y),I=!1,w||t.stopPropagation();},d),p.on(cc.Node.EventType.TOUCH_CANCEL,function(t){S=l.UtilsMainNode.GetAttr(v,'rawScale'),v.setScale(S),w||t.stopPropagation();},d),v.on('active-in-hierarchy-changed',function(t){!t.active||t.scaleX===S.x&&t.scaleY===S.y||t.setScale(S);},d);}}},t.setRawScale=function(t,e){e||(e=cc.v3(t.scaleX,t.scaleY,t.scaleZ)),l.UtilsMainNode.SetAttr(t,{rawScale:e});},t;}();i.UtilClk=p,cc._RF.pop();},{}],UtilColorFull:[function(t,e,i){'use strict';cc._RF.push(e,'4dfb9C6ZA9F6YUxEiCs9/3m','UtilColorFull'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilColorFull=void 0;var o=t('UtilColor'),n=t('FrameBlockConst'),r=t('RenderImg'),s=function(){function t(){}return t.setColorFull=function(e,i,s,a,c){void 0===s&&(s=!1),void 0===a&&(a=''),void 0===c&&(c=o.ColorType.COLORFUL);var l=null==e?void 0:e.node.getChildByName(n.RenderImgConst.labelLayout);null==l||l.destroy(),l&&e.node.removeChild(l),a&&(e.node.color=o.UtilColor.Hex2Rgba(a)),e[''+t.ISCOLORFULL]=i,e[''+t.ISDARKBG]=s,r.RenderImg.I.label2Img(e,c);},t.ISCOLORFULL='isColorFull',t.ISDARKBG='isDarkBg',t;}();i.UtilColorFull=s,cc._RF.pop();},{}],UtilColor:[function(t,e,i){'use strict';cc._RF.push(e,'cdb5eFS8DZJN7PZJJ/9gDx6','UtilColor'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilColor=i.ColorType=void 0;var o,n=t('ResConst'),r=t('ResMgr');(function(t){t.White='White',t.NorTitle='NorTitle',t.NorTitle2='NorTitle2',t.NorText='NorText',t.NorTextGrey='NorTextGrey',t.Green='Green',t.Red='Red',t.Orange='Orange',t.GREEN='GREEN',t.BLUE='BLUE',t.PURPLE='PURPLE',t.ORANGE='ORANGE',t.RED='RED',t.GOLD='GOLD',t.COLORFUL='COLORFUL',t.PINK='PINK',t.BgList='BgList',t.QGrey='QGrey';}(o=i.ColorType||(i.ColorType={})));var s=function(){function t(){}return t.GetColor=function(t,e){return void 0===e&&(e=!1),(e?this.D[t]:this.B[t])||this.B.White;},t.GetColor_S=function(t,e){return void 0===e&&(e=!1),(e?this.D_S[t]:this.B_S[t])||[];},t.GetColorImg_S=function(t,e){return void 0===e&&(e=!1),(e?this.Img_D_S[t]:this.Img_B_S[t])||'';},t.GetComBtnByType=function(t,e){if(void 0===e&&(e=0),e>this.BtnFont[t].length-1)return this.BtnFont[t][0];var i=this.BtnFont[t][e];return this.Hex2Rgba(i);},Object.defineProperty(t,'GrayColorV',{get:function(){return this.Hex2Rgba(this.GrayColor);},enumerable:!1,configurable:!0}),t.Hex2Rgba=function(t){return 9===t.length?new cc.Color(Number('0x'+t.slice(1,3)),Number('0x'+t.slice(3,5)),Number('0x'+t.slice(5,7)),Number('0x'+t.slice(7,9))):new cc.Color(Number('0x'+t.slice(1,3)),Number('0x'+t.slice(3,5)),Number('0x'+t.slice(5,7)),255);},t.Rgb2Hex=function(t){return t?'#'+t.toHEX('#rrggbb'):'#FFFFFF';},t.Color2Rgba=function(t){return t.toString();},t.CostColor=function(e,i,o){void 0===o&&(o=!0);var n=t.CostColorStr(e,i,o);return t.Hex2Rgba(n);},t.CostColorStr=function(e,i,n){return void 0===n&&(n=!0),t.GetColor(e>=i?o.Green:o.Red,n);},t.PassColor=function(e,i){void 0===i&&(i=!0);var o=t.PassColorStr(e,i);return t.Hex2Rgba(o);},t.PassColorStr=function(e,i){return void 0===i&&(i=!0),t.GetColor(e?o.Green:o.Red,i);},t.setGray=function(e,i,o,n){var r;if(e){var s=e.getComponent(cc.RenderComponent);if(s&&!(s instanceof cc.Mask)){var a,c=null===(r=null==s?void 0:s.node)||void 0===r?void 0:r.name;if(a=n instanceof Array?n.indexOf(c)>-1:c===n,!(c&&n&&a)){var l=e.getComponent(cc.Sprite);if(l){var p=i?'2d-gray-sprite':'2d-sprite',u=cc.MaterialVariant.createWithBuiltin(p,l);u&&l.setMaterial(0,u);}e.getComponent(cc.Label)&&(i&&!e.sourceColor&&e.attr({sourceColor:t.Rgb2Hex(e.color)}),e.sourceColor&&(e.color=t.Hex2Rgba(i?t.GrayColor:e.sourceColor)));}}o&&e.children.length&&e.children.forEach(function(e){return t.setGray(e,i,o,n);});}},t.setGrayByMode=function(e,i){2===i?(t.setGray(e,!1),e.color=cc.color(150,150,150,e.opacity)):1===i?(t.setGray(e,!0),e.color=cc.color(255,255,255,e.opacity)):(t.setGray(e,!1),e.color=cc.color(255,255,255,e.opacity));},t.SetMaskActive=function(t,e,i,o){if(null==t?void 0:t.isValid){t.getComponent(cc.Layout)&&(t=t.parent);var s=t.getChildByName('NdSpMask');if(e){s||((s=new cc.Node()).addComponent(cc.Sprite),s.name='NdSpMask',t.addChild(s));var a=s.getComponent(cc.Sprite);if('string'==typeof i)r.ResMgr.I.loadRemote(i,o||n.AssetType.SpriteFrame,function(t,e){a.node.isValid&&(a.spriteFrame=e);});else{var c=i.getComponent(cc.Sprite);a.spriteFrame=c.spriteFrame,a.sizeMode=c.sizeMode,a.type=c.type,a.trim=c.trim;}s.setContentSize(t.getContentSize()),s.color=cc.color(0,0,0),s.opacity=100,s.setPosition(0,0);}else s&&(s.destroy(),t.removeChild(s));}},t.GetEquipProgressColor=function(e){return[t.D.Green,t.D.BLUE,t.D.PURPLE,'#f27d3e','#e76a6a'][e];},t.setRichTextOutline=function(t,e,i){return void 0===i&&(i=2),'<outline color='+e+' width='+i+' >'+t+'</outline>';},t.ColorFormat='#rrggbb',t.ColorFormatAlpha='#rrggbbaa',t.B={White:'#ffffff',NorTitle:'#4a3775',NorTitle2:'#574b90',NorText:'#564568',NorTextGrey:'#9a92a3',Green:'#2e9529',Red:'#da4a4a',Orange:'#db7f1c',GREEN:'#2e9529',BLUE:'#1c7ac2',PURPLE:'#ba35ac',ORANGE:'#ff7e00',RED:'#ff1c2c',GOLD:'#c67f00',QGrey:'#606060',COLORFUL:'#multiColorDark',WarnColor:'#cd7171'},t.Img_D_S={COLORFUL:'#1bd1ff',PINK:'#ff53b4',BgList:'#6ce1fc'},t.Img_B_S={COLORFUL:'#36a0dc',PINK:'#e40c6c',BgList:'#0295e9'},t.B_S={COLORFUL:['#e35a80','#5569d6','#36a0dc'],PINK:['#e54447','#ff0090','#e40c6c'],BgList:['#12a710','#0295e9','#ed2df2','#ff4242','#f16e31','#0295e9']},t.D={White:'#ffffff',NorTitle:'#d0c3e5',NorTitle2:'#c5b9ff',NorText:'#e5e5e5',NorTextGrey:'#6d6a73',Green:'#8cec8c',Red:'#ed7373',Orange:'#fffcae',GREEN:'#8cec8c',BLUE:'#7aacff',PURPLE:'#fd7aff',ORANGE:'#ffa45b',RED:'#ff7a7a',GOLD:'#f5d46e',QGrey:'#606060',COLORFUL:'#multiColorLight',WarnColor:'#cd7171'},t.D_S={COLORFUL:['#ff54f9','#8facff','#1bd1ff'],PINK:['#fcd8ff','#f79cff','#ff53b4'],BgList:['#46ff69','#6ce1fc','#fa72f8','#f3f049','#ff4242','#6ce1fc']},t.ActNorText='#61483b',t.ActNorTitle='#85584f',t.FamilyPower='#3a6a8c',t.NewSevenLoginBlue='#29475e',t.NewSevenLoginGreen='#325344',t.AttrAddColor='#40ea58',t.BtnBlue='#425772',t.BtnYellow='#a94d31',t.BtnBlue2='#626498',t.BtnYellow2='#a7604a',t.BtnBlue3='#656394',t.BtnYellow3='#8f5135',t.NorName='#FFF5E4',t.WhiteGoldD='#b4a989',t.SkillUnActiveColor='#bcab9b',t.TabSelect='#812c1e',t.TabUnSelect='#fad5c6',t.BlueText='#554367',t.Green_Online='#2a841b',t.Red_Online='#ff341c',t.Yellow_Online='#812900',t.Orange_Online='#e84700',t.OutLineColor='#00000066',t.OutlineColor1='#00000033',t.OutlineColor2='#000000C7',t.RankingBuyColor='#A33B5064',t.FamilyPosC1='#e9753c',t.FamilyPosC2='#cb48dc',t.FamilyPosC3='#496dcc',t.FamilyPosC4='#36b966',t.BanquetColor='#d64444',t.LimitTimeBossHead='#72503d',t.ComMaskA='#ede8f6',t.ComMaskB='#f0ebf7',t.ActListMask='#f6f2e9',t.GreyListMask='#e6e1ed',t.BattleChibiBtnGo='#396a2a',t.GradientColors=['#ffba00','#fd9e17'],t.MainCityBtnGray='#e2e1ed',t.TipsGreen='#7fdd7f',t.PushGiftTypeItemUnSelect='#744d4a',t.BattleChibiGridItemName='#bab4d0',t.MainTimerGreen='#74ff74',t.BtnFont={ComBtnA:[t.BtnYellow,t.BtnBlue],ComBtnB:[t.BtnYellow2,t.BtnBlue2],ComBtnC:[t.BtnYellow,t.BtnBlue],ComBtnD:['#8b6c59','#66698d','#fffdfc'],ComBtnE:[t.BtnYellow2,t.BtnBlue2],ComBtnF:['#80484a','#58526f'],ComBtnG:[t.B.White,'#8f869a'],ComBtnI:['#843a20','#f9f5e1'],ComBtnJ:[t.BtnYellow,'#403f4e',t.BtnBlue],ComBtnL:[t.BtnYellow3,t.BtnBlue3],ComBtnBZ:[t.BtnYellow,t.BtnBlue]},t.GrayColor='#626262',t.ChatMenuBarTextColor=['#a34252','#ffffff'],t.BattleOfficeColorMe='#2d3352',t.BattleOfficeColorOther='#522d33',t;}();i.UtilColor=s,cc._RF.pop();},{}],UtilHtmlTextParser:[function(t,e,i){'use strict';cc._RF.push(e,'be00fQagr5Ktp5cMJmJx5ZN','UtilHtmlTextParser');var o=this&&this.__values||function(t){var e='function'==typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&'number'==typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t};}};throw new TypeError(e?'Object is not iterable.':'Symbol.iterator is not defined.');};Object.defineProperty(i,'__esModule',{value:!0}),i.HtmlTextParser=void 0;var n=t('UtilColor'),r=/^(click)(\s)*=|(param)(\s)*=/,s=/(\s)*src(\s)*=|(\s)*height(\s)*=|(\s)*width(\s)*=|(\s)*align(\s)*=|(\s)*offset(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/,a=function(){function t(){this._specialSymbolArray=[],this._stack=[],this._resultObjectArray=[],this._specialSymbolArray.push([/&lt;/g,'<']),this._specialSymbolArray.push([/&gt;/g,'>']),this._specialSymbolArray.push([/&amp;/g,'&']),this._specialSymbolArray.push([/&quot;/g,'"']),this._specialSymbolArray.push([/&apos;/g,'\'']);}return t.prototype.parse=function(t){this._resultObjectArray.length=0,this._stack.length=0;for(var e=0,i=t.length;e<i;){var o=t.indexOf('>',e),n=-1;if(o>=0&&(n=t.lastIndexOf('<',o))<e-1&&(n=t.indexOf('<',o+1),o=t.indexOf('>',n+1)),n<0)this._stack.pop(),this._processResult(t.substring(e)),e=i;else{var r=t.substring(e,n),s=t.substring(n+1,o);''===s&&(r=t.substring(e,o+1)),this._processResult(r),-1===o?o=n:'/'===t.charAt(n+1)?this._stack.pop():this._addToStack(s),e=o+1;}}return this._resultObjectArray;},t.prototype._attributeToObject=function(t){t=t.trim();var e={},i=/^(color|size)(\s)*=/.exec(t),o='',r=0,a='';if(i){if(o=i[0],''===(t=t.substring(o.length).trim()))return e;switch(r=t.indexOf(' '),o[0]){case'c':e.color=r>-1?t.substring(0,r).trim():t;break;case's':e.size=parseInt(t);}return r>-1&&(a=t.substring(r+1).trim(),e.event=this._processEventHandler(a)),e;}if((i=/^(br(\s)*\/)/.exec(t))&&i[0].length>0&&(o=i[0].trim()).startsWith('br')&&'/'===o[o.length-1])return e.isNewLine=!0,this._resultObjectArray.push({text:'',style:{isNewLine:!0}}),e;var c='';if((i=/^(img(\s)*src(\s)*=[^>]+\/)/.exec(t))&&i[0].length>0&&(o=i[0].trim()).startsWith('img')&&'/'===o[o.length-1]){i=s.exec(t);for(var l=void 0,p=!1;i;){if(o=(t=t.substring(t.indexOf(i[0]))).substr(0,i[0].length),l=(r=(c=t.substring(o.length).trim()).indexOf(' '))>-1?c.substr(0,r):c,o=(o=o.replace(/[^a-zA-Z]/g,'').trim()).toLowerCase(),t=c.substring(r).trim(),l.endsWith('/')&&(l=l.slice(0,-1)),'src'===o){switch(l.charCodeAt(0)){case 34:case 39:p=!0,l=l.slice(1,-1);}e.isImage=!0,e.src=l;}else if('height'===o)e.imageHeight=parseInt(l);else if('width'===o)e.imageWidth=parseInt(l);else if('align'===o){switch(l.charCodeAt(0)){case 34:case 39:l=l.slice(1,-1);}e.imageAlign=l.toLowerCase();}else'offset'===o?e.imageOffset=l:'click'===o&&(e.event=this._processEventHandler(o+'='+l));e.event&&'param'===o&&(e.event[o]=l.replace(/^"|"$/g,'')),i=s.exec(t);}return p&&e.isImage&&this._resultObjectArray.push({text:'',style:e}),{};}if(i=/^(outline(\s)*[^>]*)/.exec(t)){t=i[0].substring('outline'.length).trim();var u={color:n.UtilColor.B.White,width:1};if(t){var h=/(\s)*color(\s)*=|(\s)*width(\s)*=|(\s)*click(\s)*=|(\s)*param(\s)*=/;for(i=h.exec(t),l=void 0;i;)o=(t=t.substring(t.indexOf(i[0]))).substr(0,i[0].length),l=(r=(c=t.substring(o.length).trim()).indexOf(' '))>-1?c.substr(0,r):c,o=(o=o.replace(/[^a-zA-Z]/g,'').trim()).toLowerCase(),t=c.substring(r).trim(),'click'===o?e.event=this._processEventHandler(o+'='+l):'color'===o?u.color=l:'width'===o&&(u.width=parseInt(l)),e.event&&'param'===o&&(e.event[o]=l.replace(/^"|"$/g,'')),i=h.exec(t);}e.outline=u;}if((i=/^(on|u|b|i)(\s)*/.exec(t))&&i[0].length>0){switch(o=i[0],t=t.substring(o.length).trim(),o[0]){case'u':e.underline=!0;break;case'i':e.italic=!0;break;case'b':e.bold=!0;}if(''===t)return e;e.event=this._processEventHandler(t);}return e;},t.prototype._processEventHandler=function(t){for(var e={},i=0,o=!1,n=r.exec(t);n;){var s=n[0],a='';if(o=!1,'"'===(t=t.substring(s.length).trim()).charAt(0))(i=t.indexOf('"',1))>-1&&(a=t.substring(1,i).trim(),o=!0),i++;else if('\''===t.charAt(0))(i=t.indexOf('\'',1))>-1&&(a=t.substring(1,i).trim(),o=!0),i++;else{var c=/(\S)+/.exec(t);i=(a=c?c[0]:'').length;}o&&(e[s=s.substring(0,s.length-1).trim()]=a),t=t.substring(i).trim(),n=r.exec(t);}return e;},t.prototype._addToStack=function(t){var e=this._attributeToObject(t);if(0===this._stack.length)this._stack.push(e);else{if(e.isNewLine||e.isImage)return;var i=this._stack[this._stack.length-1];for(var o in i)e[o]||(e[o]=i[o]);this._stack.push(e);}},t.prototype._processResult=function(t){0!==t.length&&(t=this._escapeSpecialSymbol(t),this._stack.length>0?this._resultObjectArray.push({text:t,style:this._stack[this._stack.length-1]}):this._resultObjectArray.push({text:t}));},t.prototype._escapeSpecialSymbol=function(t){var e,i;try{for(var n=o(this._specialSymbolArray),r=n.next();!r.done;r=n.next()){var s=r.value,a=s[0],c=s[1];t=t.replace(a,c);}}catch(l){e={error:l};}finally{try{r&&!r.done&&(i=n.return)&&i.call(n);}finally{if(e)throw e.error;}}return t;},t;}();i.HtmlTextParser=a,cc._RF.pop();},{}],UtilListEff:[function(t,e,i){'use strict';cc._RF.push(e,'5e2a1e2MG1NA5erLpZ7xf3k','UtilListEff'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('UtilClk'),n=t('UtilsMain'),r=function(){function t(){}return t.fadeIn_Prev=function(t){var e=n.UtilsMainNode.GetAttr(t,'_fadeInData_');e||(n.UtilsMainNode.SetAttr(t,{_fadeInData_:{orgOpt:t.opacity,orgScaleX:t.scaleX,orgScaleY:t.scaleY}}),o.UtilClk.setRawScale(t));var i=e=n.UtilsMainNode.GetAttr(t,'_fadeInData_'),r=i.orgOpt,s=i.orgScaleX,a=i.orgScaleY;return t.opacity=1,t.scaleX=s-0.5,t.scaleY=a-0.5,{opacity:r,scaleX:s,scaleY:a};},t.stopNodeAction=function(t,e,i){void 0===i&&(i='');var o=n.UtilsMainNode.GetAttr(t,e);if(o){var r=o;t.stopAction(r);var s={};s[e]=null,n.UtilsMainNode.SetAttr(t,s);}if('_moveToData_'===i){if(c=n.UtilsMainNode.GetAttr(t,'_moveToData_')){var a=c;t.opacity=a.orgOpt,t.y=a.orgPosY,n.UtilsMainNode.SetAttr(t,{_moveToData_:null});}}else if('_fadeInData_'===i){var c;(c=n.UtilsMainNode.GetAttr(t,'_fadeInData_'))&&(a=c,t.opacity=a.orgOpt,t.scaleX=a.orgScaleX,t.scaleY=a.orgScaleY,n.UtilsMainNode.SetAttr(t,{_fadeInData_:null}));}},t.fadeIn=function(t,e,i,o,r,s){var a=this;void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=null),void 0===s&&(s=null),this.stopNodeAction(t,'_act_fadeIn_');var c=this.fadeIn_Prev(t),l=c.opacity,p=c.scaleX,u=c.scaleY,h=0.5/60/2;i&&(h=i),console.log('startDelay:',o,'delayTime:',h,t.scale,p,t.active);var d=cc.delayTime(o+h*e),f=cc.fadeIn(0.1),y=cc.scaleTo(0.1,p,u),_=cc.spawn(f,y),g=cc.callFunc(function(){(null==t?void 0:t.isValid)&&(t.opacity=l,t.scaleX=p,t.scaleY=u,a.stopNodeAction(t,'_act_fadeIn_','_fadeInData_')),r&&cc.isValid(s)&&r.call(s,e);}),m=cc.sequence(d,_,g);t.runAction(m),n.UtilsMainNode.SetAttr(t,{_act_fadeIn_:m});},t.moveToUp_Prev=function(t){var e=n.UtilsMainNode.GetAttr(t,'_moveToData_');e||(n.UtilsMainNode.SetAttr(t,{_moveToData_:{orgOpt:t.opacity,orgPosY:t.y,moveDiff:t.height/2}}),o.UtilClk.setRawScale(t));var i=e=n.UtilsMainNode.GetAttr(t,'_moveToData_'),r=i.orgOpt,s=i.orgPosY,a=i.moveDiff;return t.opacity=1,t.y=s-a,{opacity:r,posY:s,moveDiff:a};},t.moveToUp=function(t,e,i,o){var r=this;void 0===i&&(i=null),void 0===o&&(o=null),this.stopNodeAction(t,'_act_moveToUp_');var s=this.moveToUp_Prev(t),a=s.opacity,c=s.posY,l=s.moveDiff,p=1/cc.game.getFrameRate(),u=1*p,h=6*p,d=2*p,f=cc.delayTime(d+u*e),y=h/(l+20),_=y*(l+10),g=10*y,m=cc.fadeIn(_+g),v=cc.moveTo(_,t.x,c+10),b=cc.moveTo(3*g,t.x,c),C=cc.sequence(v,b),S=cc.spawn(m,C),w=cc.callFunc(function(){(null==t?void 0:t.isValid)&&(t.opacity=a,t.y=c,r.stopNodeAction(t,'_act_moveToUp_','_moveToData_'),i&&cc.isValid(o)&&i.call(o,e));}),R=cc.sequence(f,S,w);t.runAction(R),n.UtilsMainNode.SetAttr(t,{_act_moveToUp_:R});},t.resetMoveToUp=function(t,e){void 0===e&&(e=0),this.stopNodeAction(t,'_act_moveToUp_','_moveToData_');},t.resetFadeIn=function(t,e){void 0===e&&(e=0),this.stopNodeAction(t,'_act_fadeIn_','_fadeInData_');},t.isPlayAnimIng=function(t){return!!n.UtilsMainNode.GetAttr(t,'_act_moveToUp_')||!!n.UtilsMainNode.GetAttr(t,'_act_fadeIn_');},t;}();i.default=r,cc._RF.pop();},{}],UtilLog:[function(t,e,i){'use strict';cc._RF.push(e,'aa4f0gps0pCVLDMaV+G9WMf','UtilLog'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilLog=void 0;var o=t('DataReportConst'),n=t('AppEventConst'),r=t('EventClient'),s=t('UtilsMain'),a=function(){function t(){this.errMap=[],this.collectErrorState=0,this._window_onErr=null,this._console_onErr=null,this._canCollect=!1,this._lastErrMsg='';}return Object.defineProperty(t,'I',{get:function(){return null==this.Instance&&(this.Instance=new t(),this.Instance._window_onErr=window.onerror,window.console&&(this.Instance._console_onErr=window.console.error)),this.Instance;},enumerable:!1,configurable:!0}),t.prototype.Init=function(){t.IsInitEd||(t.IsInitEd=!0,window.onerror=t.I.collectErr,window.console&&(window.console.error=this.consoleError.bind(this)),t.I._canCollect=!0);},t.prototype.collectErr=function(e,i,a,c,l){var p=t.I;return this._window_onErr&&this._window_onErr(e,i,a,c,l),l.stack!==this._lastErrMsg&&(this._lastErrMsg=l.stack,r.EventClient.I.emit(n.AppEvent.DataReport,o.EDataReportId.ErrLogReport,l.stack),!!p._canCollect&&(1===p.collectErrorState&&p.errMap.push({time:s.UtilsMainTime.NowSec(),err:JSON.stringify(l.stack)}),!0));},t.prototype.consoleError=function(){for(var t='',e=0;e<arguments.length;e++)t+=arguments[e]&&(arguments[e].stack||JSON.stringify(arguments[e]))||'',t+='_|_';this._console_onErr&&this._console_onErr.apply(window,arguments),t===this._lastErrMsg||t.indexOf('github.com')>-1||t.indexOf('cocos-creator')>-1||t.indexOf('The frame-buffer already destroyed')>-1||t.indexOf('The texture already destroyed')>-1||(this._lastErrMsg=t,r.EventClient.I.emit(n.AppEvent.DataReport,o.EDataReportId.ErrLogReport,t));},t.prototype.uptCollectErr=function(e){if(t.I.collectErrorState=e,2===e){var i=t.I.errMap.concat();return t.I.errMap.length=0,t.I.collectErrorState=1,i;}return t.I.errMap.length=0,[];},t.Instance=null,t.IsInitEd=!1,t;}();i.UtilLog=a,cc._RF.pop();},{}],UtilMap:[function(t,e,i){'use strict';cc._RF.push(e,'ef21aIBGlVIMI0xa9q+2GTv','UtilMap'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('MapRoadUtils'),n=function(){function t(){}return t.initMapSize=function(t,e){this._tileSize=e,this._gridSize=t,this._mapSize.width=t.width*e.width,this._mapSize.height=t.height*e.height,this._gridSizeHalf.width=0.5*t.width,this._gridSizeHalf.height=0.5*t.height,this._mapSizeHalf.width=0.5*this._mapSize.width,this._mapSizeHalf.height=0.5*this._mapSize.height,this._tileSizeHalf.width=0.5*e.width,this._tileSizeHalf.height=0.5*e.height;},Object.defineProperty(t,'tileSize',{get:function(){return this._tileSize;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'tileSizeHalf',{get:function(){return this._tileSizeHalf;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'gridSize',{get:function(){return this._gridSize;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'gridSizeHalf',{get:function(){return this._gridSizeHalf;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'mapSize',{get:function(){return this._mapSize;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'mapSizeHalf',{get:function(){return this._mapSizeHalf;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'centerTl',{get:function(){return this._centerTl||(this._centerTl=cc.v2(0.5*(this.gridSize.width-1),0.5*(this.gridSize.height-1))),this._centerTl;},enumerable:!1,configurable:!0}),t.checkNodeInCamera=function(t){var e=this.mapCamra.getWorldToScreenPoint(t);return e.x>=-this.ViewVisibleDis&&e.x<=cc.winSize.width+this.ViewVisibleDis&&e.y>=-this.ViewVisibleDis&&e.y<=cc.winSize.height+this.ViewVisibleDis;},t.getTargetTlPos=function(e){var i=t.tileToOpengl(cc.v2(Math.ceil(t.centerTl.x),Math.ceil(t.centerTl.y)));return t.openglToTile(cc.v2(i.x-e.x,i.y-e.y));},t.setEntitySiblingIndex=function(t){var e=t.children;e.sort(function(t,e){return e.position.y-t.position.y;});for(var i=0;i<e.length;i++)e[i].setSiblingIndex(i);},t.tileToOpengl=function(t){var e=this.tileSizeHalf.width*(this.gridSize.height+t.x-t.y-1)+this.tileSizeHalf.width,i=this.tileSizeHalf.height*(this.gridSize.width-t.x+this.gridSize.height-t.y-1);return cc.v2(e,i);},t.openglToTile=function(t){var e=(this.gridSize.width+2*this.gridSize.height-2*t.x/this.tileSize.width-2*t.y/this.tileSize.height-1)/2,i=(2*t.x/this.tileSize.width-2*t.y/this.tileSize.height+this.gridSize.width-1)/2;return cc.v2(Math.round(i),Math.round(e));},t.tileToCell=function(t){var e=this.tileToOpengl(t);e.x-=this.mapSizeHalf.width,e.y-=this.mapSizeHalf.height;var i=o.default.I.getDerectByPixel(e.x,e.y);return cc.v2(i.x,i.y);},t._tileSize=cc.Size.ZERO,t._tileSizeHalf=cc.Size.ZERO,t._gridSize=cc.Size.ZERO,t._gridSizeHalf=cc.Size.ZERO,t._mapSize=cc.Size.ZERO,t._mapSizeHalf=cc.Size.ZERO,t.ViewVisibleDis=100,t;}();i.default=n,cc._RF.pop();},{}],UtilPaltform:[function(t,e,i){'use strict';cc._RF.push(e,'4bedczbvkVG/JR6x8TRfchm','UtilPaltform'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilPaltform=void 0;var o=t('GameApp'),n=function(){function t(){}return Object.defineProperty(t,'isWeChatGame',{get:function(){return cc.sys.platform===cc.sys.WECHAT_GAME;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'isWebMobile',{get:function(){return cc.sys.isBrowser;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'isAndroidWeChatGameTS',{get:function(){return cc.sys.platform===cc.sys.WECHAT_GAME&&cc.sys.os===cc.sys.OS_ANDROID&&!!o.default.I.WXTS;},enumerable:!1,configurable:!0}),Object.defineProperty(t,'isIOSWeChatGameTS',{get:function(){return t.iosWechat||cc.sys.platform===cc.sys.WECHAT_GAME&&cc.sys.os===cc.sys.OS_IOS&&!!o.default.I.WXTS&&!!o.default.I.WXTSHIDEPAY;},enumerable:!1,configurable:!0}),t.iosWechat=!1,t;}();i.UtilPaltform=n,cc._RF.pop();},{}],UtilUrl:[function(t,e,i){'use strict';cc._RF.push(e,'82986VA7BRKJbn/Wd4n1WxY','UtilUrl'),Object.defineProperty(i,'__esModule',{value:!0}),i.UtilUrl=void 0;var o=t('UtilPaltform'),n=function(){function t(){}return t.getQueryString=function(t){if(cc.sys.isBrowser){var e=new RegExp('(^|&)?'+t+'=([^&]*)(&|$)','i'),i=window.location.search.valueOf().match(e);return null!=i?decodeURI(i[2]):null;}},t.isSSL=function(){return o.UtilPaltform.isWeChatGame||'https:'===document.location.protocol;},t.replaceHttpHead=function(e){return t.isSSL()?e.replace('http:','https:'):e;},t.replaceWss=function(e){return t.isSSL()?e.replace('ws:','wss:'):e;},t.FindWebGameDiv=function(t){if(null==t?void 0:t.childNodes)for(var e=0,i=t.childNodes.length;e<i;e++)if(t.childNodes[e]){if('GameDiv'===t.childNodes[e].id||'GameCanvas'===t.childNodes[e].id)return'GameCanvas'===t.childNodes[e].id?t:t.childNodes[e];if(t.childNodes[e].childNodes.length>0){var o=this.FindWebGameDiv(t.childNodes[e]);if(o)return o;}}},t;}();i.UtilUrl=n,cc._RF.pop();},{}],UtilWinEff:[function(t,e,i){'use strict';cc._RF.push(e,'d5626eCaPJBEapWvxE5ot7/','UtilWinEff'),Object.defineProperty(i,'__esModule',{value:!0});var o=t('TimerMgr'),n=t('AppEventConst'),r=t('EventClient'),s=t('UtilClk'),a=function(){function t(){}return t.winOpenEff=function(e,i){if(cc.isValid(e)&&cc.isValid(i)&&!e.winOpenEff){var a=!1,c='winOpenEff_'+e.name+'_'+e.uuid;e.winOpenEff=!0,e.scale=0.1,i.width=9600,i.height=16800,t.stopAction(e);var l=e.runAction(cc.sequence(cc.scaleTo(0.1,1).easing(cc.easeOut(3)),cc.callFunc(function(){a||(a=!0,e.winOpenEff=!1,e.scale=1,cc.isValid(i)&&(i.width=960,i.height=1680,s.UtilClk.setRawScale(i)),s.UtilClk.setRawScale(e),r.EventClient.I.emit(n.AppEvent.OpenWinEffEnd));})));e.winOpenEff_action=l,o.default.I.clearScheduled(c),o.default.I.addScheduled(c,function(){cc.isValid(e)&&(a||(e.scale=1,cc.isValid(i)&&(i.width=960,i.height=1680,s.UtilClk.setRawScale(i)),e.winOpenEff=!1,s.UtilClk.setRawScale(e),r.EventClient.I.emit(n.AppEvent.OpenWinEffEnd),a=!0),t.stopAction(e)),o.default.I.clearScheduled(c);},200,this);}},t.stopAction=function(t){cc.isValid(t)&&t.winOpenEff_action&&(t.stopAction(t.winOpenEff_action),t.winOpenEff_action=null);},t.winCloseEff=function(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i=null),void 0===n&&(n=255),cc.isValid(t)&&!t.winCloseEff){var r=!1,s='winCloseEff_'+t.name+'_'+t.uuid;t.winCloseEff=!0,t.opacity=n,t.stopAllActions(),t.runAction(cc.sequence(cc.fadeOut(0.1),cc.callFunc(function(){r=!0,t.winCloseEff=!1,e&&e.call(i);}))),o.default.I.clearScheduled(s),o.default.I.addScheduled(s,function(){cc.isValid(t)&&(r||(t.winCloseEff=!1,e&&e.call(i))),o.default.I.clearScheduled(s);},200,this);}},t.toShowEff=function(t,e,i,n){if(void 0===e&&(e=0),void 0===i&&(i=null),void 0===n&&(n=null),cc.isValid(t)&&t.active&&!t.toShowEff){var r=!1,s=t.opacity,a='toShowEff_'+t.name+'_'+t.uuid;t.toShowEff=!0,t.opacity=e,t.stopAllActions(),t.runAction(cc.sequence(cc.fadeIn(0.3),cc.callFunc(function(){r=!0,t.toShowEff=!1,i&&i.call(n);}))),o.default.I.clearScheduled(a),o.default.I.addScheduled(a,function(){cc.isValid(t)&&(r||(t.toShowEff=!1,t.opacity=s,i&&i.call(n))),o.default.I.clearScheduled(a);},400,this);}},t.toMoveEff=function(t,e,i,s,a,c){if(void 0===s&&(s=null),void 0===a&&(a=null),void 0===c&&(c=0),cc.isValid(t)&&t.active&&!t.toMoveEff){var l=!1,p=cc.view.getVisibleSize().width/2,u=t.getComponent(cc.Widget),h=!1;u&&(h=u.enabled,u.enabled=!1);var d,f='toMoveEff_'+t.name+'_'+t.uuid;d=i?e-p:e+p,t.toMoveEff=!0,t.setPosition(cc.v2(d,t.position.y)),t.opacity=c,t.stopAllActions(),t.runAction(cc.sequence(cc.spawn(cc.fadeIn(0.2),cc.moveTo(0.2,e,t.y).easing(cc.easeOut(3))),cc.callFunc(function(){u&&(u.enabled=h),t.toMoveEff=!1,t.setPosition(cc.v2(e,t.position.y)),l=!0,r.EventClient.I.emit(n.AppEvent.toMoveEffEnd),s&&s.call(a);}))),o.default.I.clearScheduled(f),o.default.I.addScheduled(f,function(){cc.isValid(t)&&(l||(t.toMoveEff=!1,t.setPosition(cc.v2(e,t.position.y)),u&&(u.enabled=h))),o.default.I.clearScheduled(f);},300,this);}},t.toMoveEffs=function(e,i,o,n,r){if(void 0===o&&(o=null),void 0===n&&(n=null),void 0===r&&(r=0),e&&e.length)for(var s=0;s<e.length;s++)0===s?t.toMoveEff(e[s].parent,e[s].toX,i,o,n,r):t.toMoveEff(e[s].parent,e[s].toX,i,null,null,r);},t;}();i.default=a,cc._RF.pop();},{}],UtilsMain:[function(t,e,i){'use strict';cc._RF.push(e,'15bebEBPydKA7zumm0lQz6g','UtilsMain');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.UtilsMainObj=i.UtilsMainArr=i.UtilsMainStr=i.UtilsMainTime=i.UtilsMainNode=void 0;var r=t('CCMSprite'),s=t('Config'),a=t('ConfigConst'),c=t('i18n'),l=t('ResConst'),p=t('ResMgr'),u=t('UtilBinarySearcher'),h=function(){function t(){}return t.newNameParentNode=function(t,e){var i=new cc.Node();return i.name=t,i.parent=e,i;},t.SetString=function(t){for(var e,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=i.length,s=r>1&&!Array.isArray(i[1]),a=s?i[0]:void 0,c=this.GetComponent(cc.Label,t,a)||this.GetComponent(cc.RichText,t,a)||this.GetComponent(cc.EditBox,t,a);if(c&&c.isValid){var l=s?i[1]:i[0],p=s?2:1,u=i[p],h=u&&u.length>0;c.string=h?(e=cc.js).formatStr.apply(e,n([l],u)):l;}return c;},t.NewNode=function(t,e){var i=new cc.Node();return i.setParent(t),e&&e.length>0&&e.forEach(function(t){i.addComponent(t);}),i;},t.FindNode=function(t,e){return t&&'string'==typeof e?this.getChildByPath(t,e):t;},t.getChildByPath=function(t,e){for(var i=e.split('/'),o=t,n=function(t){var e=i[t];if(0===e.length)return'continue';var n=o.children.find(function(t){return t.name===e;});if(!n)return{value:null};o=n;},r=0;r<i.length;++r){var s=n(r);if('object'==typeof s)return s.value;}return o;},t.SetAttr=function(t,e){t.attr(e);},t.GetAttr=function(t,e){return t[e];},t.LoadSpriteFrame=function(){for(var t,e,i,o,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var a=n[5];if(n[0]instanceof cc.Sprite)t=n[0],e=n[1],i=n[2],o=n[3];else{var c=n[0],l='string'==typeof n[1]&&'string'==typeof n[2];t=l?this.GetComponent(cc.Sprite,c,n[1]):this.GetComponent(cc.Sprite,c),e=l?n[2]:n[1],i=l?n[3]:n[2],o=l?n[4]:n[3];}return t?(t.node&&(t.node._curLoadPath=e),t&&t.isValid&&p.ResMgr.I.loadLocal(e,cc.SpriteFrame,function(o,n){o||t&&t.isValid&&t.node&&t.node._curLoadPath===e&&(n.getTexture().setWrapMode(cc.Texture2D.WrapMode.CLAMP_TO_EDGE,cc.Texture2D.WrapMode.CLAMP_TO_EDGE),t.spriteFrame=n,t instanceof r.default&&t.node.emit('tzyx-spriteframe-changed'),a&&(t.spriteFrame.insetTop=a[0],t.spriteFrame.insetBottom=a[1],t.spriteFrame.insetLeft=a[2],t.spriteFrame.insetRight=a[3]),i&&i(t));},{bundle:o}),t):null;},t.GetComponent=function(t,e,i){if(!e||!e.isValid)return null;if('string'==typeof i){var o=this.getChildByPath(e,i);return o&&o.isValid?o.getComponent(t):null;}return e.getComponent(t);},t.LoadSpriteFrameRemote=function(){for(var t,e,i,o,n,s,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(a[0]instanceof cc.Sprite)t=a[0],e=a[1],i=a[2],n=a[3],o=a[4],s=a[5];else{var u=a[0],h='string'==typeof a[1]&&'string'==typeof a[2];t=h?this.GetComponent(cc.Sprite,u,a[1]):this.GetComponent(cc.Sprite,u),e=h?a[2]:a[1],i=h?a[3]:a[2],n=h?a[4]:a[3],o=h?a[5]:a[4],s=h?a[6]:a[5];}return t?(t.node&&(t.node._curLoadPath=e),i=i||l.AssetType.SpriteFrame,t.spriteFrame=null,p.ResMgr.I.loadRemote(e,i,function(i,a){i?s&&s():!i&&t&&t.isValid&&t.node&&t.node._curLoadPath===e&&(a.getTexture().setWrapMode(cc.Texture2D.WrapMode.CLAMP_TO_EDGE,cc.Texture2D.WrapMode.CLAMP_TO_EDGE),t.spriteFrame=a,t instanceof r.default&&t.node.emit('tzyx-spriteframe-changed'),o&&(t.spriteFrame.insetTop=o[0],t.spriteFrame.insetBottom=o[1],t.spriteFrame.insetLeft=o[2],t.spriteFrame.insetRight=o[3]),n&&n(t));}),t):null;},t.SetPosZ=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.FindNode(t,e[0]);if(o&&o.isValid){var n='string'==typeof e[0],r=n?e[1]:e[0];o.setPosition(o.position.x,o.position.y,r);}},t.SetPos=function(t,e){t.x=e.x,t.y=e.y;},t.GetPos=function(t,e){var i=this.FindNode(t,e);return i&&cc.isValid(i)?cc.v2(i.position.x,i.position.y):cc.Vec2.ZERO;},t.SetScaleX=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.FindNode(t,e[0]);if(o&&o.isValid){var n='string'==typeof e[0],r=n?e[1]:e[0];o.setScale(r,o.scaleY);}},t.GetScaleX=function(t,e){var i=this.FindNode(t,e);return i&&i.isValid?i.scaleX:0;},t.SetScale=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.FindNode(t,e[0]);if(o&&o.isValid){var n='string'==typeof e[0];if('number'==typeof e[0]||'number'==typeof e[1]){var r=n?e[1]:e[0],s=n?e[2]:e[1],a=n?e[3]:e[2];o.setScale(r,s,a);}else{var c=n?e[1]:e[0];o.setScale(c);}}},t.GetScale=function(t,e){var i=this.FindNode(t,e);return i&&i.isValid?cc.v2(i.scaleX,i.scaleY):cc.Vec2.ZERO;},t.SetActive=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.FindNode(t,e[0]);if(o&&o.isValid){var n='string'==typeof e[0],r=n?e[1]:e[0];o.active=r;}return o;},t;}();i.UtilsMainNode=h;var d=function(){function t(){}return t.NowMSec=function(){return new Date().getTime()+this.ServerTimeCompareLocalTime;},t.NowSec=function(){return Math.floor(new Date().getTime()/1000+this.ServerTimeCompareLocalTime/1000);},t.FormatMs=function(t,e,i,o){void 0===e&&(e=''),void 0===i&&(i=!1),void 0===o&&(o=!1),''===e&&(e=c.i18n.tt(c.Lang.com_format_time)),t=Math.abs(t);var n=Math.floor(t/1000),r=this.FormatTime(n,e,i,o);if(-1!==e.indexOf('%ms')){var s=Math.floor(t%1000);s=Math.floor(6*s/100);var a=e.split('%'),l=a[a.length-1];l&&(r+=l.replace(/ms/g,s<10&&i?'0'+s:''+s));}return r;},t.FormatTime=function(t,e,i,o,n){void 0===e&&(e=''),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===n&&(n=!1),''===e&&(e=c.i18n.tt(c.Lang.com_format_time)),t=Math.abs(t);var r=Math.floor(t/86400),s=Math.floor(t/60/60%24),a=Math.floor(t/60%60),l=Math.floor(t%60);e.indexOf('%dd')<0&&(-1!==e.indexOf('%HH')?s+=24*r:-1!==e.indexOf('%mm')?a+=1440*r+60*s:l+=86400*r+3600*s+60*a);for(var p='',u=e.split('%'),h=1;h<u.length;h++){var d=u[h];-1!==d.indexOf('dd')&&(r>0||o)?p+=d.replace(/dd/g,r<10&&i?'0'+r:''+r):-1!==d.indexOf('HH')&&(s>0||o||r>0&&(a>0||l>0))?p+=d.replace(/HH/g,s<10&&i?'0'+s:''+s):-1!==d.indexOf('mm')&&(a>0||o||(s>0||r>0)&&l>0)?p+=d.replace(/mm/g,a<10&&i?'0'+a:''+a):-1!==d.indexOf('ss')&&(l>0||o||!n&&0===l)&&(p+=d.replace(/ss/g,l<10&&i?'0'+l:''+l));}return p;},t.ServerTimeInit=0,t.ServerTimeCompareLocalTime=0,t;}();i.UtilsMainTime=d;var f=function(){function t(){}return t.charIsEmoji=function(t){if(t.length>6)return!1;var e=s.Config.Get(a.ConfigConst.Cfg_Emoji).getValueByCode(t);return!(!e||0!==e.Group);},t.FormatArgs=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return this.FormatArray(t,e);},t.GetFileName=function(t,e){return e?t.replace(/(.*\/)*([^.]+)/gi,'$2'):t.replace(/(.*\/)*([^.]+).*/gi,'$2');},t.ReplaceFileNameForAnim=function(t,e){var i=t.lastIndexOf('/'),o=t.substring(0,i+1),n=t.split('/'),r=n.length,s=n[r-2];return o+(n[r-3]+s.substring(7,s.length)+e);},t.GetFilePathNoSuffix=function(t){var e=t.lastIndexOf('.');return-1===e?t:t.substring(0,e);},t.replaceAll=function(t,e,i){if(e===i)return t;for(;t.indexOf(e)>=0;)t=t.replace(e,i);return t;},t.replaceColor=function(t){return t=t.replace(/<color=#([a-zA-Z0-9]+)>/gm,''),this.replaceAll(t,'</c>','');},t.FormatArray=function(t,e){return t&&(null==e?void 0:e.length)>0?t.replace(/\{(\d+)\}/gm,function(t,i){return String(void 0!==e[i]&&null!==e[i]?e[i]:t);}):t;},t.IsChinese=function(t){return/^.*[\u4E00-\u9FA5]+.*$/.test(t);},t.IsEnglish=function(t){return/[a-z]/i.test(t);},t.GetUUID=function(){var t=new Date().getTime();return'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(e){var i=Math.floor((t+16*Math.random())%16);return('x'===e?i:3&i|8).toString(16).toUpperCase();});},t;}();i.UtilsMainStr=f;var y=function(){function t(){}return t.LowerBound=function(t,e,i,o,n,r){if(!t||0===t.length)return 0;var s=u.UtilBinarySearcher;s.Convergence=s.ConvergenceLB,s.Getter=i,s.Comparator=r||null==r?i?s.AscFunctorComparator:'string'==typeof e?s.StringAscComparator:s.AscComparator:i?s.DescFunctorComparator:'string'==typeof e?s.StringDescComparator:s.DescComparator,s.Low=o,s.High=n;var a=s.BinarySearch(t,e);return delete s.Getter,a;},t;}();i.UtilsMainArr=y;var _=function(){function t(){}return t.equals=function(t,e){if(t===e)return!0;if(t instanceof Object&&e instanceof Object){if(t.constructor!==e.constructor)return!1;for(var i in t)if(t.hasOwnProperty(i)){if(!e.hasOwnProperty(i))return!1;if(t[i]!==e[i]){if('object'!=typeof t[i])return!1;if(!this.equals(t[i],e[i]))return!1;}}for(var i in e)if(e.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;return!0;}return!1;},t;}();i.UtilsMainObj=_,cc._RF.pop();},{}],Vector2:[function(t,e,i){'use strict';cc._RF.push(e,'b4f4bgvOdpGc6HCkt5KT9yy','Vector2'),Object.defineProperty(i,'__esModule',{value:!0}),i.Vector2=void 0;var o=function(){function t(t,e){this._x=0,this._y=0,this._x=t,this._y=e;}return Object.defineProperty(t.prototype,'x',{get:function(){return this._x;},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,'y',{get:function(){return this._y;},enumerable:!1,configurable:!0}),t.prototype.resetPos=function(t,e){this._x=t,this._y=e;},t.prototype.plus=function(e){return new t(this.x+e.x,this.y+e.y);},t.prototype.add=function(t){return this._x+=t.x,this._y+=t.y,this;},t.prototype.minus=function(e){return new t(this.x-e.x,this.y-e.y);},t.prototype.multiply=function(t){return this.x*t.x+this.y*t.y;},t.prototype.scale=function(e){return new t(this.x*e,this.y*e);},t.prototype.copy=function(t){return this._x=t.x,this._y=t.y,this;},t.prototype.clone=function(){return new t(this.x,this.y);},t.prototype.substract=function(t){return this._x-=t.x,this._y-=t.y,this;},t.prototype.lengthSqr=function(){return Math.pow(this.x,2)+Math.pow(this.y,2);},t;}();i.Vector2=o,cc._RF.pop();},{}],WinBase:[function(t,e,i){'use strict';cc._RF.push(e,'b1fd85xBG5OeYreNP3jngwb','WinBase');var ac=window.extend_func(this,'__extends__decorate');var n=ac.__extends;var r=ac.__decorate;Object.defineProperty(i,'__esModule',{value:!0});var s=t('BaseUiView'),a=cc._decorator,c=a.ccclass,l=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.NdContent=null,e._openEff=!0,e._closeEff=!0,e;}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);},Object.defineProperty(e.prototype,'openEff',{set:function(t){this._openEff=t,this.openEffect=t;},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,'closeEff',{set:function(t){this._closeEff=t,this.closeEffect=t;},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.openEffect=this._openEff,this.closeEffect=this._closeEff,t.prototype.start.call(this);},e.prototype.closeForce=function(){this.close();},r([l(cc.Node)],e.prototype,'NdContent',void 0),r([c],e);}(s.default);i.default=p,cc._RF.pop();},{}],WinConst:[function(t,e,i){'use strict';cc._RF.push(e,'7900f2TNehAMabgiageCKqm','WinConst'),Object.defineProperty(i,'__esModule',{value:!0}),i.EMarkType=i.WinTabData=i.GameLayerEnum=void 0,function(t){t[t.MAP_LAYER=1]='MAP_LAYER',t[t.MAIN_CITY_LAYER=2]='MAIN_CITY_LAYER',t[t.BATTLE_LAYER=3]='BATTLE_LAYER',t[t.MAIN_LAYER=4]='MAIN_LAYER',t[t.DEFAULT_LAYER=5]='DEFAULT_LAYER',t[t.TIPS_LAYER=6]='TIPS_LAYER',t[t.POP_LAYER=7]='POP_LAYER',t[t.GAME_MANAGER_LAYER=8]='GAME_MANAGER_LAYER',t[t.MINI_GAME_LAYER=9]='MINI_GAME_LAYER',t[t.WARN_LAYER=10]='WARN_LAYER';}(i.GameLayerEnum||(i.GameLayerEnum={}));i.WinTabData=function(){this.TabId=0,this.btnImg='',this.redId=0;},function(t){t[t.None=0]='None',t[t.Double=1]='Double',t[t.Ranking=2]='Ranking',t[t.Free=3]='Free',t[t.ChangWan=4]='ChangWan';}(i.EMarkType||(i.EMarkType={})),cc._RF.pop();},{}],WinMgr:[function(t,e,i){'use strict';cc._RF.push(e,'da63eXt239Bm6I9YsNIEpIJ','WinMgr');var o=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(n,r){function s(t){try{c(o.next(t));}catch(e){r(e);}}function a(t){try{c(o.throw(t));}catch(e){r(e);}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e);})).then(s,a);}c((o=o.apply(t,e||[])).next());});},n=this&&this.__generator||function(t,e){var i,o,n,r,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1];},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},'function'==typeof Symbol&&(r[Symbol.iterator]=function(){return this;}),r;function a(t){return function(e){return c([t,e]);};}function c(r){if(i)throw new TypeError('Generator is already executing.');for(;s;)try{if(i=1,o&&(n=2&r[0]?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch(o=0,n&&(r=[2&r[0],n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===r[0]||2===r[0])){s=0;continue;}if(3===r[0]&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break;}if(6===r[0]&&s.label<n[1]){s.label=n[1],n=r;break;}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break;}n[2]&&s.ops.pop(),s.trys.pop();continue;}r=e.call(t,s);}catch(a){r=[6,a],o=0;}finally{i=n=0;}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0};}},r=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0});var a=t('AppEventConst'),c=t('EventClient'),l=t('ResMgr'),p=t('BaseVo'),u=t('WinConst'),h=t('AppViewConst'),d=function(){function t(){this._viewList=[],this._stashVoList=[],this._loaddingIdList=[],this._openIndex=0,this.MaxIndex=10000,this._bigViewConut=0,this._showViewGroupMap={},this._winLimitsOpenList=null,this._limitViewCount=3,this._isShowPre=!1,this._viewObjs=cc.js.createMap(!0),this._voCfgs=cc.js.createMap(!0),this._popupViews=cc.js.createMap(!0);}return Object.defineProperty(t,'I',{get:function(){return this.Instance||(this.Instance=new t()),this.Instance;},enumerable:!1,configurable:!0}),t.prototype.addConfig=function(t){t.resClass&&(this._voCfgs[t.id]=t);},t.prototype.register=function(t){var e=this._voCfgs[t],i=new p.default();return i.init(e),i.resClass?i.view?null:(this._viewObjs[i.id]=i,i):null;},t.prototype.setWinLimitsOpen=function(t,e){void 0===e&&(e=!0),this._winLimitsOpenList=[],t&&t.length&&(this._winLimitsOpenList=t),e&&this._winLimitsOpenList.push(h.AppViewConst.ReqLoginWarnWin);},t.prototype.resetWinLimitsOpen=function(){this._winLimitsOpenList=null;},t.prototype.open=function(t){for(var e,i,o=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];null!==this._winLimitsOpenList&&this._winLimitsOpenList.indexOf(t)<0&&console.log('限制面板开启:',t,(null===(e=this.getVoCfgByWinId(t))||void 0===e?void 0:e.prefabPath)||''),console.log('开启面板:',t,(null===(i=this.getVoCfgByWinId(t))||void 0===i?void 0:i.prefabPath)||''),this._open(t,n).then(function(){o.__re_startCollect(t);},function(e){o.delLoaddingId(t),console.error(e),c.EventClient.I.emit(a.AppEvent.WinOpenFail,t);});},t.prototype.open2=function(t,e,i){var o,n,r=this;if(null!==this._winLimitsOpenList&&this._winLimitsOpenList.indexOf(t)<0)return console.log('限制面板开启:',t,(null===(o=this.getVoCfgByWinId(t))||void 0===o?void 0:o.prefabPath)||''),void(i&&i(2));console.log('开启面板:',t,(null===(n=this.getVoCfgByWinId(t))||void 0===n?void 0:n.prefabPath)||''),this._open(t,e).then(function(){r.__re_startCollect(t);},function(e){r.delLoaddingId(t),i&&i(1),console.error(e),c.EventClient.I.emit(a.AppEvent.WinOpenFail,t);});},t.prototype.getVoCfgByWinId=function(t){return this._voCfgs[t];},t.prototype.__re_startCollect=function(){},t.prototype.__re_isOpen=function(){return!0;},t.prototype.__re_checkViewTag=function(t,e,i){return void 0===i&&(i=!0),!0;},t.prototype.__re_setViewTag=function(){},t.prototype.__re_closeViewByTag=function(){},t.prototype._open=function(t,e){return o(this,void 0,Promise,function(){var i,o,r,a,c;return n(this,function(n){switch(n.label){case 0:return(i=this._voCfgs[t])?this.__re_checkViewTag(i,e)?((o=this._viewObjs[t])||(o=this.register(t)),this._openIndex++,r=o.isPopup,o.view?cc.isValid(o.view)?(a=o.view.node.parent)&&cc.isValid(a)?r?(this._popupViews[t]||(this._popupViews[t]=[]),(c=new p.default()).init(i),c.extraParam=e,c.zIndex=this._openIndex,c.view=o.view,r===p.PopupType.Last?this._popupViews[t].push(c):r===p.PopupType.Nwe&&(c.view.refreshView(e),this._popupViews[t].unshift(o)),[2]):(o.zIndex=this._openIndex,o.extraParam=e,o.view.refreshView(e),this.setTop(o.view,o.view.node.parent),console.log('UI_'+t+'已经在显示中'),[2]):(this._close(o),console.log('再次尝试打开该界面 UI_'+t),this.open.apply(this,s([t],e)),this._viewList.push(null),[2]):(this._clearVo(o),console.log('再次尝试打开该界面 UI_'+t),this.open.apply(this,s([t],e)),this._viewList.push(null),[2]):-1!==this._loaddingIdList.indexOf(o.id)?(console.log('UI_'+t+'加载中...'),r&&(this._popupViews[t]||(this._popupViews[t]=[]),(c=new p.default()).init(i),c.extraParam=e,c.zIndex=this._openIndex,c.view=o.view,this._popupViews[t].push(c)),[2]):(o.zIndex=this._openIndex,[4,this._openByVo(o,e)])):[2]:(console.log('UI_'+t+'不存在'),[2]);case 1:return n.sent(),[2];}});});},t.prototype._openByVo=function(t,e){return o(this,void 0,Promise,function(){var i,o,r,s,p=this;return n(this,function(n){switch(n.label){case 0:return t.extraParam=e,c.EventClient.I.emit(a.AppEvent.ControllerCheck,t.mid),t.view?[3,2]:(this._loaddingIdList.push(t.id),i=t.resClass,[4,l.ResMgr.I.loadAsync(t.prefabPath,cc.Prefab,t.bundleName)]);case 1:return(o=n.sent())?(r=cc.instantiate(o),(s=i(r))?(t.view=s,t.view.viewVo=t,t.view.uiId=t.id,this.onViewAdd(t),[3,3]):(this.delLoaddingId(t.id),r.destroy(),console.error('UI_'+t.id+' resClass: 加载失败'),[2])):(this.delLoaddingId(t.id),console.error('UI_'+t.id+' prefabPath: '+t.prefabPath+' 加载失败'),[2]);case 2:t.view.open.apply(t.view,t.extraParam),n.label=3;case 3:return t.view?(t.view.initEndHandler=function(){var e,i;try{(null===(i=null===(e=t.view)||void 0===e?void 0:e.node)||void 0===i?void 0:i.parent)&&p.refreshViewZOrder(t.view.node.parent),p.refreshShowTypeGroupState(),p.hideOldView(!0);}catch(o){console.error(o);}},t.view.initEndHandler2=function(){try{p.hideOldView();}catch(t){console.error(t);}},this.delLoaddingId(t.id),[2]):(this.delLoaddingId(t.id),[2]);}});});},t.prototype.delLoaddingId=function(t){var e=this._loaddingIdList.indexOf(t);this._loaddingIdList.splice(e,1);},t.prototype.onViewAdd=function(t){var e,i;t.view.open(t.extraParam),(null===(i=null===(e=t.view)||void 0===e?void 0:e.node)||void 0===i?void 0:i.parent)?(this._viewList.push(t.view),this.insertShowTypeGroup(t),!0===t.isShowAll&&this._bigViewConut++,this._bigViewConut>=3&&this.checkViewCount()):console.warn('WinMgr.onViewAdd: 父节点丢失 UI_'+t.id+' '+t.prefabPath);},t.prototype.checkViewCount=function(){for(var t=0,e=!1,i=this._viewList,o=i.length;o>0;o--){var n=i[o-1];n&&n.viewVo&&(!0===n.viewVo.isShowAll?++t>this._limitViewCount&&(e=!0):t===this._limitViewCount&&(e=!0),e&&!n.viewVo.unLimitViewCount&&this._close(n.viewVo));}},t.prototype.close=function(t){console.log('关闭面板',t);var e=this._viewObjs[t];return e?e.view?cc.isValid(e.view)?(this.__re_closeViewByTag(e),this.checkPopupView(t)?this.openPopupView(e):(this._close(e),c.EventClient.I.emit(a.AppEvent.WinClose,e)),!0):(console.warn('WinMgr close: view 节点被移除 UI_'+t+' '+e.prefabPath),!1):(console.warn('WinMgr.close: view UI_'+t+'视图为空 '+e.prefabPath),!1):(console.warn('WinMgr.close: UI_'+t+'不存在'),!1);},t.prototype._close=function(t){t.view._close.apply(t.view),this._clearVo(t);},t.prototype._clearVo=function(t){this.delViewObj(t),this.removeShowTypeGroup(t),t.view=null,t.extraParam=null,this.hideOldView(),!0===t.isShowAll&&this._bigViewConut--;},t.prototype.closeView=function(t){this.close(t.uiId);},t.prototype.closeViewAttr=function(t){for(var e=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];0!==t.length&&t.forEach(function(t){e.close(t);});},t.prototype.closeAll=function(t,e){var i,o;void 0===t&&(t=!1),void 0===e&&(e=[]);for(var n=this._viewList,r=[],s=[],a=0;a<n.length;a++)if(null==(l=n[a])?void 0:l.viewVo){var c=null===(i=l.viewVo)||void 0===i?void 0:i.id;c&&e.indexOf(c)>=0?s.push(l):r.push(l);}for(;r.length>0;){var l;if(null==(l=r[0])?void 0:l.viewVo){if(this.clearPopupView(l.viewVo.id),this.close(l.viewVo.id)){var p=l.viewVo;t&&this._stashVoList.push(p);}else console.warn('WinMgr closeAll: UI_'+l.viewVo.id+'不存在');r.shift();}else console.warn('WinMgr closeAll: view is null ID: '+((null===(o=null==l?void 0:l.viewVo)||void 0===o?void 0:o.id)||'null')),r.shift();}this._viewList=s,this._showViewGroupMap={},this._popupViews=cc.js.createMap(!0);},t.prototype.checkIsOpen=function(t){var e=this._viewObjs[t];return!!((null==e?void 0:e.view)&&cc.isValid(e.view));},t.prototype.checkIsSelect=function(t){if(!t)return null;var e=this._viewObjs[t];return e?e.view:null;},t.prototype.getBaseVo=function(t){return this._viewObjs[t];},t.prototype.getCurOpenView=function(t){for(var e,i=null,o=0;o<this._viewList.length;o++){var n=this._viewList[o];if((null===(e=null==n?void 0:n.viewVo)||void 0===e?void 0:e.id)===t){i=n;break;}}return i;},t.prototype.getCurOpenViews=function(){for(var t,e,i=[],o=0;o<this._viewList.length;o++){var n=this._viewList[o];(null===(t=null==n?void 0:n.viewVo)||void 0===t?void 0:t.id)>0&&i.push(null===(e=null==n?void 0:n.viewVo)||void 0===e?void 0:e.id);}return i;},t.prototype.getBigView=function(){for(var t,e=null,i=0;i<this._viewList.length;i++){var o=this._viewList[i];if((null===(t=null==o?void 0:o.viewVo)||void 0===t?void 0:t.isShowAll)&&cc.isValid(o,!0)){e=o;break;}}return e;},t.prototype.delViewObj=function(t){var e=t.id,i=this._viewList.indexOf(t.view);i>-1&&this._viewList.splice(i,1);for(var o=0;o<this._stashVoList.length;o++){var n=this._stashVoList[o];if((null==n?void 0:n.id)===e){this._stashVoList.splice(o,1);break;}}},t.prototype.hideOldView=function(t){void 0===t&&(t=!1);for(var e=!0,i=this._viewList,o=i.length-1;o>=0;o--){var n=i[o];if(n)if(n.viewVo){var r=!1;n.viewVo.layerType!==u.GameLayerEnum.DEFAULT_LAYER&&n.viewVo.layerType!==u.GameLayerEnum.TIPS_LAYER&&n.viewVo.layerType!==u.GameLayerEnum.MINI_GAME_LAYER||(r=!0),r&&(n.viewVo.layerType!==u.GameLayerEnum.TIPS_LAYER||n.viewVo.isTipsHide)&&(n.getHideState()!==e&&(t?n.viewVo.isTipsHide&&!e&&this.hideView(n,e):this.hideView(n,e)),n.viewVo.isShowAll&&(e=!1));}else console.warn('WimMgr.hideOldView viewVo is null ',n);else console.warn('WimMgr.hideOldView view is null');}this.refreshShowTypeGroupState(),this._isShowPre!==e&&(t||(c.EventClient.I.emit(a.AppEvent.WinBigAllClose,e),this._isShowPre=e)),this.showBlackBg();},t.prototype.isWinBigAllClose=function(){return this._isShowPre;},t.prototype.hideView=function(t,e){t.viewVo.isNotHide||t.setHide(e);},t.prototype.setTop=function(t,e){this.refreshViewZOrder(e);var i=this._viewList.indexOf(t);i>-1&&this._viewList.splice(i,1),this._viewList.push(t),this.hideOldView();},t.prototype.refreshViewZOrder=function(t){if(t){var e=this._viewList,i=e.length;if(this._openIndex>=this.MaxIndex){this._openIndex=i+1;for(var o=0;o<i;o++){var n=e[o];n&&n.viewVo&&((p=n.viewVo).zIndex=o);}}var r=[];t.children.forEach(function(t){r.push(t);});var s=r.length,a=0;for(o=0;o<s;o++){var c=r[o],l=(null==c?void 0:c.getComponent('BaseUiView'))||null;if(l&&l.viewVo){var p,u=(p=l.viewVo).zIndex;p.fixedZIndex>0&&(u=p.fixedZIndex),c.zIndex=u,a=p.zIndex;}else c&&(c.zIndex=a);}}},t.prototype.checkPopupView=function(t){var e=this._popupViews[t];return!!(null==e?void 0:e.length);},t.prototype.openPopupView=function(t){var e=this._popupViews[t.id];if(e&&e.length>0){var i=e.shift();this._viewObjs[t.id]=i,i.view||(i.view=t.view),i.view.node&&(console.log('openPopupView 打开缓存的堆叠窗口',i.view.node.name),i.openWinEff&&(i.view.node.scale=1),i.closeWinEff&&(i.view.node.opacity=255)),i.view.refreshView(i.extraParam);}},t.prototype.clearPopupView=function(t){this._popupViews[t]&&(this._popupViews[t].length=0);},t.prototype.openViewCollect=function(){},t.prototype.resetStashViews=function(){if(this._stashVoList&&!(this._stashVoList.length<=0)){for(var t=0;t<this._stashVoList.length;t++){var e=this._stashVoList[t];e.stashParam&&(this.__re_isOpen(e.id)?this.open.apply(this,s([e.id],e.stashParam)):console.log('缓存打开的界面\uFF0C再次打开的时候发现条件未达到',e),e.stashParam=null);}this.clearAllStashVo();}},t.prototype.clearAllStashVo=function(){this._stashVoList=[];},t.prototype.addStashVoList=function(t){for(var e=0;e<this._stashVoList.length;e++){var i=this._stashVoList[e];if(i.id===t.id&&i.stashParam===t.stashParam)return;}this._stashVoList.push(t);},t.prototype.setViewStashParam=function(t,e,i){void 0===i&&(i=!1);var o=this.getBaseVo(t);o||(o=this.register(t)),o&&(o.setStashParam(e),i&&this.addStashVoList(o));},t.prototype.insertShowTypeGroup=function(t){var e=this;t.vGroupType&&(this._showViewGroupMap[t.vGroupType]||(this._showViewGroupMap[t.vGroupType]=[]),this._showViewGroupMap[t.vGroupType].push(t.id),this._showViewGroupMap[t.vGroupType].sort(function(t,i){var o=e.getBaseVo(t),n=e.getBaseVo(i);return o.vGroupPriority-n.vGroupPriority;}));},t.prototype.removeShowTypeGroup=function(t){if(t.vGroupType){var e=this._showViewGroupMap[t.vGroupType];if(e){var i=e.indexOf(t.id);i>-1&&e.splice(i,1);}}},t.prototype.refreshShowTypeGroupState=function(){for(var t in this._showViewGroupMap)Object.prototype.hasOwnProperty.call(this._showViewGroupMap,t)&&this.doShowTypeGroupState(+t);},t.prototype.doShowTypeGroupState=function(t){for(var e=this._showViewGroupMap[t]||[],i=!1,o=0;o<e.length;o++){var n=e[o],r=this.getBaseVo(n);r&&cc.isValid(r.view)&&(!1===i?(this.hideView(r.view,!0),i=!0):this.hideView(r.view,!1));}},t.prototype.showBlackBg=function(){var t=this,e=[];this._viewList.forEach(function(t){t&&cc.isValid(t,!0)&&t.getHideState()&&t.viewVo.blackBg&&e.push(t.viewVo.id);});var i=e.length;if(i){e.sort(function(e,i){var o=t.getCurOpenView(e),n=t.getCurOpenView(i);return o.viewVo.layerType===n.viewVo.layerType?n.node.zIndex-o.node.zIndex:n.viewVo.layerType-o.viewVo.layerType;});for(var o=!1,n=0;n<i;n++){var r=e[n],s=this.getCurOpenView(r);s&&cc.isValid(s,!0)&&s.getHideState()&&(!o&&s&&cc.isValid(s,!0)&&s.viewVo.blackBg?(o=!0,s.showBlackBg()):s.hideBlackBg());}e.length=0;}},t.prototype.getOpenIndex=function(){return this._openIndex;},t;}();i.default=d,cc._RF.pop();},{}],commonDefine:[function(t,e,i){'use strict';cc._RF.push(e,'e8b890NcCZGzoDlcI06RtM+','commonDefine'),Object.defineProperty(i,'__esModule',{value:!0}),i.Line=i.Obstacle=i.KeyValuePair=i.ObserverObj=void 0;i.ObserverObj=function(t){t&&(this.value=t);};i.KeyValuePair=function(t,e){this.key=t,this.value=e;};i.Obstacle=function(){};i.Line=function(){},cc._RF.pop();},{}],i18n:[function(t,e,i){'use strict';cc._RF.push(e,'ca4d61ZEwZF94VCZHST/clf','i18n');var o=this&&this.__read||function(t,e){var i='function'==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-->0)&&!(o=r.next()).done;)s.push(o.value);}catch(a){n={error:a};}finally{try{o&&!o.done&&(i=r.return)&&i.call(r);}finally{if(n)throw n.error;}}return s;},n=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(o(arguments[e]));return t;};Object.defineProperty(i,'__esModule',{value:!0}),i.i18n=i.LoadLocalI18n=i.Lang=void 0;var r=t('ResConst'),s=t('ResMgr');i.Lang=null,i.Lang=null,i.LoadLocalI18n=function(t){console.log('运行模式\uFF0C开始加载i18n'),s.ResMgr.I.loadLocal('i18n/zh-CN',cc.JsonAsset,function(e,o){if(!e){cc.resources.release('i18n/zh-CN');var n=o.json;for(var r in(i.Lang=cc.js.createMap(!0),n))i.Lang[r]=n[r];t&&t(),console.log('i18n加载完成\uFF0C当前语言=',i.Lang.name);}},{bundle:r.EBundleType.resources});};var a=function(){function t(){}return Object.defineProperty(t,'lv',{get:function(){return t.tt(i.Lang.equip_lev);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'star',{get:function(){return t.tt(i.Lang.com_star);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'jie',{get:function(){return t.tt(i.Lang.com_reborn);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'ci',{get:function(){return t.tt(i.Lang.onhook_ci);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'jade',{get:function(){return t.tt(i.Lang.com_jade);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'ingot',{get:function(){return t.tt(i.Lang.com_ingot);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'coin',{get:function(){return t.tt(i.Lang.com_coin);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'exp',{get:function(){return t.tt(i.Lang.com_exp);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'skillCoin',{get:function(){return t.tt(i.Lang.com_skillCoin);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'arenacoin',{get:function(){return t.tt(i.Lang.com_arenacoin);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'skillExp',{get:function(){return t.tt(i.Lang.com_skillExp);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'generalScore',{get:function(){return t.tt(i.Lang.com_general_score);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'familyCoin',{get:function(){return t.tt(i.Lang.family_coin);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'day',{get:function(){return t.tt(i.Lang.com_day);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'di',{get:function(){return t.tt(i.Lang.arena_di);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'cen',{get:function(){return t.tt(i.Lang.com_cen);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'ming',{get:function(){return t.tt(i.Lang.com_ming);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'tips',{get:function(){return t.tt(i.Lang.null_key_tips);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Hour',{get:function(){return t.tt(i.Lang.com_shijian);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Minute',{get:function(){return t.tt(i.Lang.com_fen);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Second',{get:function(){return t.tt(i.Lang.com_second);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Year',{get:function(){return t.tt(i.Lang.com_year);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'SFM',{get:function(){return t.tt(i.Lang.com_time_fmt_hms);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Mouth',{get:function(){return t.tt(i.Lang.com_month);},enumerable:!1,configurable:!0}),Object.defineProperty(t,'Day1',{get:function(){return t.tt(i.Lang.com_ri);},enumerable:!1,configurable:!0}),t.dxc=function(e){return''+t.di+e+t.cen;},t.dxm=function(e){return''+t.di+e+t.ming;},t.tt=function(e){for(var i,o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];return(i=cc.js).formatStr.apply(i,n([e||t.tips],o));},t.curLang='',t.MS='%mm:%ss',t.HMS='%HH:%mm:%ss',t.HMSMS='%HH:%mm:%ss:%ms',t.MSMS='%mm:%ss:%ms',t.xin='*',t.lk='(',t.rk=')',t.zeroHMS='00:00:00',t.ddd='---',t.dot='\xB7',t;}();i.i18n=a,cc._RF.pop();},{}],polyglot:[function(t,e,i){'use strict';cc._RF.push(e,'5fbe92CqtFPGZ1olLNM6E4E','polyglot'),Object.defineProperty(i,'__esModule',{value:!0}),i.Polyglot=void 0;var o=window,n=String.prototype.replace;function r(t){o.console&&o.console.warn&&o.console.warn('WARNING:'+t);}function s(t){var e={};for(var i in t)e[i]=t[i];return e;}var a=/\$/g,c=/%\{(.*?)\}/g,l='$$$$';function p(t,e,i){for(var o in i)if('_'!==o&&i.hasOwnProperty(o)){var r=i[o];'string'==typeof r&&(r=r.replace(a,l));var s=e||c;t=n.call(t,s,function(t,e){return null==i[e]?t:i[e];});}return t;}var u=function(){function t(t){t=t||{},this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||'en',this.allowMissing=!!t.allowMissing,this.tokenRegex=this.constructTokenRegex(t.interpolation),this.warn=t.warn||r;}return t.prototype.extend=function(t,e){var i;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+'.'+o),'object'==typeof i?this.extend(i,o):this.phrases[o]=i);},t.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale;},t.prototype.unset=function(t,e){var i;if('string'==typeof t)delete this.phrases[t];else for(var o in t)t.hasOwnProperty(o)&&(i=t[o],e&&(o=e+'.'+o),'object'==typeof i?this.unset(i,o):delete this.phrases[o]);},t.prototype.clear=function(){this.phrases={};},t.prototype.replace=function(t){this.clear(),this.extend(t);},t.prototype.t=function(t,e){var i,o;return e=e||{},'string'==typeof this.phrases[t]?i=this.phrases[t]:'string'==typeof e._?i=e._:this.allowMissing?i=t:(this.warn('Missing translation for key: "'+t+'"'),o=t),'string'==typeof i&&(e=s(e),o=p(i,this.tokenRegex,e)),o;},t.prototype.constructTokenRegex=function(t){var e=t&&t.prefix||'%{',i=t&&t.suffix||'}';return new RegExp(decodeURI(e)+'(.*?)'+decodeURI(i),'g');},t.prototype.has=function(t){return t in this.phrases;},t.VERSION='1.0.0',t;}();i.Polyglot=u,cc._RF.pop();},{}],'proto.d':[function(t,e){'use strict';cc._RF.push(e,'40a4bYmPfVIvpfMhrofijeY','proto.d'),cc._RF.pop();},{}]},{},['AudioMgr','AudioModel','BaseEvent','EffectBase','EventClient','EventProto','Executor','ExecutorList','LogMgr','StorageMgr','UtilBinarySearcher','UtilBool','UtilChar','UtilClk','UtilColor','UtilColorFull','UtilHtmlTextParser','UtilListEff','UtilLog','UtilPaltform','UtilUrl','UtilWinEff','UtilsMain','AppEventConst','AppViewConst','BaseCmp','BaseController','BaseModel','BaseUiView','BaseVo','MaskClickEff','SpineCmp','SpineMain','WinConst','WinMgr','GameSocket','HttpReq','NetParse','BundleMgr','CreateAnimaForSheet','ResConst','ResLoadAudioClip','ResLoadBase','ResLoadInfo','ResLoadLocal','ResLoadPlist','ResLoadSpine','ResLoadSpriteAtlas','ResLoadSpriteFrame','ResLoadTiledMap','ResMgr','CCAstc','CCAtlas','CCBaseNode','CCBaseSprite','CCCExtend','CCDownloader','CCDynamicAtlasMgr','CCGIF','CCGIFCache','CCLzw','CCMask','CCNode','CCNodeActivator','CCObject','CCPackManager','CCProfiler','CCRenderFlow','CCResMD5','CCResMgr','CCSprite','CCTween','ColorFull','CompUtil','ES6Polyfill','FBUtil','FrameBlockConst','FrameBlockMgr','GradientColorIpad','HackEngine','LevelRender','MaxRects','MirroTiledAssemblers','RenderImg','StructFrame','TSMap','TextUtil','QuadtreeMgr','SATCircleCld','SATCollider','SATConst','SATMgr','SATPolygonCld','TZSAT','CCDAN','CCFRAMEBLOCK','CCMSprite','CCScrollView','CanvasAdapter','CfgBase','Config','ConfigConst','ConfigIndexer','ConfigMgr','DynamicImage','GameApp','GameConst','IdentitykBox','Joystick','LayerMgr','ListConst','ListItem','ListView','MsgToast','MsgToastMgr','NetMgr','NotchAdapter','ProtoManager','Root','ScrollInner','ScrollOutter','ScrollResumeTouch','StorageConst','TaskCollector','TickTimer','TimerMgr','WinBase','EventName','LocalizedLabel','i18n','polyglot','AccLoginBox','AccRegBox','BlurMask','CreateRoleView','GameWelcomeWin','LoginConst','LoginController','LoginModel','LoginView','LoginVoCfg','NetConfirmBox','NoticeItem','NoticeView','RealNameWin','ResLoading','SelServerView','StartGamePanel','UserProItem','UserProWin','GameMain','CenterPoint','Entity','EntityConst','EntityMgr','EntityRole','Monster','MonsterAI','MonsterAction','RVOObstacle','RoleAI','RoleMgr','RvoAgent','RvoConfig','TestMonst','DefMap','JoyStickArrow','AStarRoadSeeker','AstarHoneycombRoadSeeker','BinaryTreeNode','IRoadSeeker','MapMode','MapRoadUtils','PathFindingAgent','Point','RoadNode','RoadPointLayer','TaskQueue','UtilMap','EffectMgr','DataReportConst','DataReportMgr','SdkMgr','Agent','KdTree','RVOMath','Simulator','Vector2','commonDefine','CData.d','proto.d']);